document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247691-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247691-G', 'postcodes_impacted': ['BN11YE', 'UMS', 'BN11UA', 'BN11YA', 'BN14AB', 'BN14AD', 'BN14AE', 'BN14AF', 'BN14AG'], 'received_time': '2021-04-04T02:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.13702898035919064, 50.82597526373231]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-10T23:30:00', 'incident_id': 'INCD-230130-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230130-Z', 'postcodes_impacted': ['MK443PN'], 'received_time': '2021-04-10T21:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3227459273916847, 52.141596002427136]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247961-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247961-G', 'postcodes_impacted': ['TN74ET'], 'received_time': '2021-04-10T00:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.0891248562823091, 51.08024221963581]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-259721-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-259721-J', 'postcodes_impacted': ['NW52TJ', 'NW53AA', 'NW53AH', 'NW53BU', 'NW53BX'], 'received_time': '2021-04-10T22:52:01'}, 'geometry': {'type': 'Point', 'coordinates': [-0.14200153013895828, 51.54933752330665]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44085-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44085-C', 'postcodes_impacted': ['MK439DA', 'MK439DB', 'MK439JT'], 'received_time': '2021-04-10T14:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5293462319255141, 52.09712820834827]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T00:30:00', 'incident_id': 'INCD-259719-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-259719-J', 'postcodes_impacted': ['SW22AU', 'SW22AX', 'SW22EG', 'SW22LL', 'SW22TY', 'SW22TZ'], 'received_time': '2021-04-10T21:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.11768207659175937, 51.44911814141699]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-54055-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54055-V', 'postcodes_impacted': ['GU14SQ', 'GU14RY', 'GU14SG', 'GU14SJ', 'GU14SS', 'GU14YN'], 'received_time': '2021-04-08T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5775125586781588, 51.23726884118093]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-10T15:00:00', 'incident_id': 'INCD-227053-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227053-Z', 'postcodes_impacted': ['CB97UU'], 'received_time': '2021-04-10T09:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.4510056534939776, 52.07522768561655]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-10T11:00:00', 'incident_id': 'INCD-227450-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227450-Z', 'postcodes_impacted': ['SG120HQ', 'SG142PS', 'SG142QR', 'SG142RD'], 'received_time': '2021-04-10T09:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.10760382224029122, 51.82934968224709]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5123\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 00:30:00', 'incident_id': 'HB5123', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH1 4RR', 'BH1 4RT', 'BH1 4RU', 'BH1 4SB', 'BH1 4SD', 'BH1 4SE', 'BH8 8AY', 'BH8 8BE'], 'received_time': '2021-04-10 21:24:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8547937499999998, 50.729964124999995]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5118\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 00:00:00', 'incident_id': 'HB5118', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH1 2AL', 'RG12 2NY', 'RG42 2JP', 'RG42 2JR', 'RG42 3AT', 'RG42 3BT', 'RG42 3DH', 'RG42 3DJ', 'RG42 3DL', 'RG42 4SR', 'RG42 4ST', 'RG42 5RR', 'RG42 6AA', 'RG42 6AB', 'RG42 6AD', 'RG42 6AE', 'RG42 6AF', 'RG42 6AG', 'RG42 6AJ', 'RG42 6AL', 'RG42 6AN', 'RG42 6AP', 'RG42 6AQ', 'RG42 6AR', 'RG42 6AS', 'RG42 6AT', 'RG42 6AU', 'RG42 6AW', 'RG42 6AX', 'RG42 6AY', 'RG42 6AZ', 'RG42 6BA', 'RG42 6BB', 'RG42 6BD', 'RG42 6BE', 'RG42 6BF', 'RG42 6BG', 'RG42 6BH', 'RG42 6BJ', 'RG42 6BL', 'RG42 6BN', 'RG42 6BP', 'RG42 6BS', 'RG42 6DA', 'RG42 6DD', 'RG42 6DE', 'RG42 6DG', 'RG42 6DH', 'RG42 6DP', 'RG42 6DQ', 'RG42 6DY', 'RG42 6EA', 'RG42 6EB', 'RG42 6ED', 'RG42 6EE', 'RG42 6EG', 'RG42 6EY', 'RG42 6HJ', 'RG42 6HN', 'RG42 6HP', 'RG42 6HR', 'RG42 6HS', 'RG42 6HT', 'RG42 6HU', 'RG42 6HX', 'RG42 6HY', 'RG42 6JA', 'RG42 6JB', 'RG42 6JD', 'RG42 6JE', 'RG42 6JF', 'RG42 6JG', 'RG42 6JL', 'RG42 6JQ', 'RG42 6JS', 'RG42 6JT', 'RG42 6JU', 'RG42 6JX', 'RG42 6JY', 'RG42 6LA', 'RG42 6LB', 'RG42 6LD', 'RG42 6LE', 'RG42 6LH', 'RG42 6LJ', 'RG42 6LL', 'RG42 6LN', 'RG42 6LP', 'RG42 6LQ', 'RG42 6LR', 'RG42 6LS', 'RG42 6NA', 'SL4 2HA', 'SL4 4NT', 'SL4 4PX', 'SL4 4QJ', 'SL4 4QQ', 'SL4 4QR', 'SL4 4QS', 'SL4 4QT', 'SL4 4QU', 'SL4 4QW', 'SL4 4QX', 'SL4 4QY', 'SL4 4RL', 'SL4 4RP', 'SL4 4RU', 'SL4 4RW', 'SL4 4RX', 'SL4 4RZ', 'SL4 4SA', 'SL4 4SD', 'SL4 4SE', 'SL4 4SF', 'SL4 4SG', 'SL4 4SH', 'SL4 4SJ', 'SL4 4SL', 'SL4 4SN', 'SL4 4SP', 'SL4 4SQ', 'SL4 4SR', 'SL4 4SS', 'SL4 4ST', 'SL4 4SW', 'SL4 4SY', 'SL4 4TE', 'SL4 4TF', 'SL4 4TH', 'SL4 4TJ', 'SL4 4TL', 'SL4 4TN', 'SL4 4TW', 'SL5 8RR'], 'received_time': '2021-04-10 20:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7262080298507463, 51.43628079850746]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5099\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 00:00:00', 'incident_id': 'HB5099', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL4 2BH', 'SL4 2BL', 'SL4 2DA', 'SL4 2DB', 'SL4 2DD', 'SL4 2DE', 'SL4 2DG', 'SL4 2DH', 'SL4 2DJ', 'SL4 2DL', 'SL4 2DN', 'SL4 2DP', 'SL4 2DQ', 'SL4 2DR', 'SL4 2DS', 'SL4 2DT', 'SL4 2DU', 'SL4 2DW', 'SL4 2DY', 'SL4 2DZ', 'SL4 2ED', 'SL4 2EE', 'SL4 2EG', 'SL4 2EQ', 'SL4 2FA', 'SL4 2HB', 'SL4 4FG', 'SL4 4RH', 'SL4 4RJ', 'SL4 4RL', 'SL4 4SY', 'SL4 4SZ', 'SL4 4TA', 'SL4 4TB', 'SL4 4TE', 'SL4 4TF', 'SL4 4TG', 'SL4 4TH', 'SL4 4TP', 'SL4 4TR'], 'received_time': '2021-04-10 19:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.665611, 51.43912332499999]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5034\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 00:00:00', 'incident_id': 'HB5034', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH12 4DH', 'BH12 4DJ', 'BH12 4DN'], 'received_time': '2021-04-10 14:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9173193333333334, 50.74173]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5045\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 02:00:00', 'incident_id': 'HB5045', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX39 4SF', 'OX39 4SG', 'OX39 4SQ', 'OX49 5SD'], 'received_time': '2021-04-10 14:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9326035, 51.67603025]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB4987\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 01:30:00', 'incident_id': 'HB4987', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO9 6DD', 'PO9 6DP', 'PO9 6DR', 'PO9 6DS', 'PO9 6DT', 'PO9 6DU', 'PO9 6DX'], 'received_time': '2021-04-10 13:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.939098857142857, 50.88634428571429]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-11 03:00:00', 'incident_id': 'INCD-357575-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357575-G', 'postcodes_impacted': ['B64 6RQ', 'B64 6RE', 'B65 0BL', 'B64 6RW', 'B64 6RP', 'B65 0BJ'], 'received_time': '2021-04-10 19:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.051267333333333, 52.473884166666664]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-10 22:30', 'incident_id': 'INCD-562579-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-562579-s', 'postcodes_impacted': ['KY157TN', 'KY77TN'], 'received_time': '2021-04-10 22:25'}, 'geometry': {'type': 'Point', 'coordinates': [-3.100015605811672, 56.25866063387814]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G72 postcode area of Cambuslang. We had no advance warning of this and only became aware of it at 8:55pm. Our emergency response team have arrived at the Sommervell Street substation and the team will work to get your power back on as quickly and as safely as possible by midnight. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:32pm on Saturday, 10 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-10 23:03', 'incident_id': 'INCD-504057-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504057-f', 'postcodes_impacted': ['G721AA', 'G727EG', 'G727EL', 'G727EN', 'G728AA', 'G728AB', 'G728AS', 'G728AT', 'G728BP', 'G728BU', 'G781SR'], 'received_time': '2021-04-10 21:03'}, 'geometry': {'type': 'Point', 'coordinates': [-4.193129877488637, 55.81734783321683]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the CA6, DG11, DG14, DG16 postcode areas of Carlisle, Lockerbie, Canonbie and Gretna. We had no advance warning of this and only became aware of it at 6:55pm. Our team has managed to restore power to a number of properties in the area and are still working to repair damaged electrical equipment near to Gretna primary substation affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 1:00am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 8:50pm on Saturday, 10th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-11 00:00', 'incident_id': 'INCD-1807682-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1807682-i', 'postcodes_impacted': ['CA6', 'CA61AA', 'DG140TQ', 'DG164EH', 'DG165AA', 'DG165AJ', 'DG165AX', 'DG165BN', 'DG165DD', 'DG165DP', 'DG165DR', 'DG165DT', 'DG165DU', 'DG165DX', 'DG165DY', 'DG165DZ', 'DG165EA', 'DG165EB', 'DG165ED', 'DG165EE', 'DG165EF', 'DG165EG', 'DG165EH', 'DG165EJ', 'DG165EL', 'DG165EN', 'DG165EP', 'DG165EQ', 'DG165ER', 'DG165EW', 'DG165FA', 'DG165FD', 'DG165GG', 'DG165HH', 'DG165HS', 'DG165HY', 'DG165JD', 'DG165JN', 'DG165JU', 'DG165LF', 'DG165LQ', 'DG165ZZ', 'DG166EH'], 'received_time': '2021-04-10 18:55'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0594675120911234, 55.00229615335087]}}, {'type': 'Feature', 'properties': {'description': 'Damaged EHV U/G In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-168880-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-05 14:08'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170226-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF16 9EH': {'class': 'models.MapDataLocation', 'lat': 53.7116, 'lng': -1.67113}}, 'received_time': '2021-04-09 13:13'}, 'geometry': {'type': 'Point', 'coordinates': [-1.67109, 53.71158]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170469-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S74 9LD': {'class': 'models.MapDataLocation', 'lat': 53.4993, 'lng': -1.43539}}, 'received_time': '2021-04-10 12:52'}, 'geometry': {'type': 'Point', 'coordinates': [-1.43539, 53.49928]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-11 00:30', 'incident_id': 'INCD-170489-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 0NU': {'class': 'models.MapDataLocation', 'lat': 53.8385, 'lng': -0.418654}, 'HU17 0QT': {'class': 'models.MapDataLocation', 'lat': 53.8401, 'lng': -0.417484}, 'HU17 0NY': {'class': 'models.MapDataLocation', 'lat': 53.8387, 'lng': -0.416775}, 'HU17 0NZ': {'class': 'models.MapDataLocation', 'lat': 53.839, 'lng': -0.416737}, 'HU17 0QP': {'class': 'models.MapDataLocation', 'lat': 53.8407, 'lng': -0.414681}, 'HU17 0EG': {'class': 'models.MapDataLocation', 'lat': 53.841, 'lng': -0.41982}, 'HU17 0TU': {'class': 'models.MapDataLocation', 'lat': 53.8386, 'lng': -0.416962}, 'HU17 0SY': {'class': 'models.MapDataLocation', 'lat': 53.8337, 'lng': -0.416766}, 'HU17 0PA': {'class': 'models.MapDataLocation', 'lat': 53.8383, 'lng': -0.417432}, 'HU17 0NR': {'class': 'models.MapDataLocation', 'lat': 53.839, 'lng': -0.422694}, 'HU17 0QY': {'class': 'models.MapDataLocation', 'lat': 53.8402, 'lng': -0.41628}}, 'received_time': '2021-04-10 15:08'}, 'geometry': {'type': 'Point', 'coordinates': [-0.41798699999999994, 53.83892381818182]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-11 11:00', 'incident_id': 'INCD-170499-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR7 9BP': {'class': 'models.MapDataLocation', 'lat': 54.8153, 'lng': -1.38623}}, 'received_time': '2021-04-10 16:23'}, 'geometry': {'type': 'Point', 'coordinates': [-1.38623, 54.815295]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-10 22:15', 'incident_id': 'INCD-170515-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE24 4PZ': {'class': 'models.MapDataLocation', 'lat': 55.1163, 'lng': -1.53206}}, 'received_time': '2021-04-10 19:08'}, 'geometry': {'type': 'Point', 'coordinates': [-1.532039, 55.116285]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 15:00', 'incident_id': 'PPC039562', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9PA': {'class': 'models.MapDataLocation', 'lat': 53.7162, 'lng': -1.84158}, 'HX3 9NU': {'class': 'models.MapDataLocation', 'lat': 53.7178, 'lng': -1.84134}, 'HX3 9NT': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.84201}, 'HX3 8PL': {'class': 'models.MapDataLocation', 'lat': 53.7238, 'lng': -1.82165}, 'HX3 9NS': {'class': 'models.MapDataLocation', 'lat': 53.7172, 'lng': -1.84239}, 'HX3 9NR': {'class': 'models.MapDataLocation', 'lat': 53.7171, 'lng': -1.84163}, 'HX3 9NX': {'class': 'models.MapDataLocation', 'lat': 53.7183, 'lng': -1.84214}, 'HX3 9NW': {'class': 'models.MapDataLocation', 'lat': 53.718, 'lng': -1.84354}, 'HX3 9NJ': {'class': 'models.MapDataLocation', 'lat': 53.716, 'lng': -1.84235}, 'HX3 9UD': {'class': 'models.MapDataLocation', 'lat': 53.7225, 'lng': -1.84222}, 'HX3 6AQ': {'class': 'models.MapDataLocation', 'lat': 53.7264, 'lng': -1.84893}, 'HX3 9UF': {'class': 'models.MapDataLocation', 'lat': 53.7185, 'lng': -1.83487}, 'HX3 9UE': {'class': 'models.MapDataLocation', 'lat': 53.7199, 'lng': -1.83632}, 'HX3 9TW': {'class': 'models.MapDataLocation', 'lat': 53.7243, 'lng': -1.85738}}, 'received_time': '2021-04-10 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8414481428571428, 53.71955078571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-10 12:30', 'incident_id': 'PPC039563', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF1 4QY': {'class': 'models.MapDataLocation', 'lat': 53.6872, 'lng': -1.48102}}, 'received_time': '2021-04-10 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.480896, 53.687199]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 15:00', 'incident_id': 'PPC039565', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9SX': {'class': 'models.MapDataLocation', 'lat': 53.7066, 'lng': -1.80109}, 'HX3 9SZ': {'class': 'models.MapDataLocation', 'lat': 53.7072, 'lng': -1.80637}, 'HX3 9TQ': {'class': 'models.MapDataLocation', 'lat': 53.7108, 'lng': -1.81972}, 'HX3 9TA': {'class': 'models.MapDataLocation', 'lat': 53.7101, 'lng': -1.80913}, 'HX3 9TD': {'class': 'models.MapDataLocation', 'lat': 53.7087, 'lng': -1.81952}, 'HX3 9TE': {'class': 'models.MapDataLocation', 'lat': 53.7113, 'lng': -1.81743}, 'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}}, 'received_time': '2021-04-10 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.814280428571429, 53.71033528571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-10 12:00', 'incident_id': 'PPC039580', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 5JT': {'class': 'models.MapDataLocation', 'lat': 54.2348, 'lng': -2.27131}, 'BD23 5JR': {'class': 'models.MapDataLocation', 'lat': 54.2289, 'lng': -2.20105}, 'BD23 5JS': {'class': 'models.MapDataLocation', 'lat': 54.2379, 'lng': -2.23523}}, 'received_time': '2021-04-10 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2360156666666664, 54.23373466666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-10 15:00', 'incident_id': 'PPC039633', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S62 7RX': {'class': 'models.MapDataLocation', 'lat': 53.4751, 'lng': -1.36728}}, 'received_time': '2021-04-10 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.367279, 53.475065]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-11 03:01', 'incident_id': '10645131', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['M18 7DY', 'M18 7ED', 'M18 7NF', 'M18 7NH', 'M18 7NL', 'M18 7NN', 'M18 7NP', 'M18 7NS', 'M18 7NW', 'M18 7NX', 'M18 7PY', 'M18 7SD', 'M18 7WE', 'M18 7WN', 'M18 7WP', 'M18 7WR', 'M18 7WW', 'SK5 6PD'], 'received_time': '2021-04-10 17:57'}, 'geometry': {'type': 'Point', 'coordinates': [-2.170929722222222, 53.45457555555556]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-11 01:00', 'incident_id': '10644987', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK10 3JR', 'SK10 3JS', 'SK10 3JU', 'SK10 3JW', 'SK10 3JZ', 'SK10 3LQ', 'SK10 3NG', 'SK10 3NH', 'SK10 3NL', 'SK10 3NN', 'SK10 3NQ', 'SK10 3NY', 'SK10 3PT', 'SK10 3PW'], 'received_time': '2021-04-09 15:44'}, 'geometry': {'type': 'Point', 'coordinates': [-2.166383785714286, 53.262580642857145]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});