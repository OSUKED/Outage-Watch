document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260028-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260028-J', 'postcodes_impacted': ['SW59AA', 'SW59AD', 'SW59AB', 'SW59ST', 'SW59SU', 'SW59SX', 'SW59TU'], 'received_time': '2021-04-14T21:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.19360031478674464, 51.49123617442449]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T03:00:00', 'incident_id': 'INCD-54490-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54490-V', 'postcodes_impacted': ['CR83LB', 'CR83AH', 'CR83AQ', 'CR83EB', 'CR83ED', 'CR83EE', 'CR83EF', 'CR83EG', 'CR83EH', 'CR83EJ', 'CR83EP', 'CR83LA', 'CR83LQ', 'CR83QA', 'CR83QB'], 'received_time': '2021-04-14T17:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1240239783258391, 51.340109662229004]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230916-Z', 'postcodes_impacted': ['SG189RU', 'SG189RY', 'SG180LJ'], 'received_time': '2021-04-14T12:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2693072217999945, 52.06222567358287]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T03:00:00', 'incident_id': 'INCD-248161-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248161-G', 'postcodes_impacted': ['RH175AD', 'RH175AQ', 'RH175AT', 'RH175AX', 'RH175AY', 'RH175BA', 'RH175BB', 'RH175BD', 'RH175BE', 'RH175BG', 'RH175BJ', 'RH175BL', 'RH175BN', 'RH175BP', 'RH175BS', 'RH175DF', 'RH175DH', 'RH175DQ', 'RH175EH', 'RH175EJ', 'RH175EL', 'RH175EN', 'RH175EP', 'RH175EQ', 'RH175ER', 'RH175ES', 'RH175ET', 'RH175EU', 'RH175EW', 'RH175GG', 'RH175GP', 'RH175GT', 'RH175GU', 'RH175LW', 'TN57EX', 'RH175AZ', 'RH175BH', 'RH175BQ', 'RH175BT', 'RH175BU', 'RH175BX', 'RH175BY', 'RH175DA', 'RH175EX', 'RH175EY', 'RH175EZ', 'RH175HA', 'RH175HB', 'RH175HD', 'RH175HE', 'RH175HF', 'RH175HG', 'RH175HH', 'RH175HJ', 'RH175HL', 'RH175HS', 'RH175HT', 'RH175HU', 'RH175HW', 'RH175JQ', 'RH175JR'], 'received_time': '2021-04-14T23:24:39'}, 'geometry': {'type': 'Point', 'coordinates': [-0.13037547736599422, 51.01190203619407]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T04:30:00', 'incident_id': 'INCD-248163-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248163-G', 'postcodes_impacted': ['TN237UP', 'TN237UR', 'TN237UT', 'TN237UU', 'TN237XB', 'TN237XD', 'TN237XE'], 'received_time': '2021-04-15T00:52:25'}, 'geometry': {'type': 'Point', 'coordinates': [0.8676544190278535, 51.13984340932008]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248164-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248164-G', 'postcodes_impacted': ['KT174DX', 'KT174EA', 'KT174RA', 'KT174RG', 'KT174RQ'], 'received_time': '2021-04-15T00:53:45'}, 'geometry': {'type': 'Point', 'coordinates': [-0.25860285338358685, 51.33452974482968]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T02:30:00', 'incident_id': 'INCD-44183-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44183-C', 'postcodes_impacted': ['CM201BA', 'CM201BD', 'CM201BE', 'CM201ES'], 'received_time': '2021-04-15T01:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.09483230026468142, 51.77116219167307]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T02:00:00', 'incident_id': 'INCD-260007-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260007-J', 'postcodes_impacted': ['SW178SG', 'SW177TW', 'SW178DA', 'SW178DE', 'SW178DF', 'SW178ND', 'SW178NE', 'SW178SA', 'SW178SE'], 'received_time': '2021-04-14T16:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16068370498091308, 51.432453027313485]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230895-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230895-Z', 'postcodes_impacted': ['RM162PN', 'RM162PJ', 'RM162TH', 'RM175PR'], 'received_time': '2021-04-14T11:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.321170941228886, 51.49477387913218]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7049\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'HB7049', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB3 1AH', 'UB3 1AP', 'UB3 1AR', 'UB3 2AD'], 'received_time': '2021-04-14 23:37:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.42432725, 51.50952825]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7022\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'HB7022', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG14 2JD', 'RG14 2JE', 'RG14 2JG', 'RG14 2JP', 'RG14 2JQ', 'RG14 2JR', 'RG14 2JS', 'RG14 2JT', 'RG14 2JU', 'RG14 2JX', 'RG14 2JY', 'RG14 2JZ', 'RG14 2LB', 'RG14 2LD', 'RG14 2LQ'], 'received_time': '2021-04-14 20:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3326876666666665, 51.415514266666676]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198576\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 14:00:00', 'incident_id': '198576', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO24 0AA'], 'received_time': '2021-04-12 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.140793, 51.085486]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'INCD-125548-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125548-B', 'postcodes_impacted': ['BS34 7ES'], 'received_time': '2021-04-14 20:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.565692, 51.51108]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 01:00:00', 'incident_id': 'INCD-357773-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357773-G', 'postcodes_impacted': ['GL1 3QD'], 'received_time': '2021-04-13 17:55:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.227049, 51.863745]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 04:00:00', 'incident_id': 'INCD-416465-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416465-E', 'postcodes_impacted': ['OX16 0DH', 'OX16 0DN'], 'received_time': '2021-04-14 20:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3488455, 52.061735]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 03:30:00', 'incident_id': 'INCD-152584-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152584-H', 'postcodes_impacted': ['LE5 4AT', 'LE5 4AN', 'LE5 4BN', 'LE5 4BG'], 'received_time': '2021-04-15 00:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.09428975, 52.638811999999994]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 02:00:00', 'incident_id': 'INCD-152581-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152581-H', 'postcodes_impacted': ['CV32 6LY', 'CV32 6NA', 'CV32 6DW', 'CV32 6LZ'], 'received_time': '2021-04-14 22:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.54974375, 52.2934865]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the LL17 postcode area of St. Asaph. We had no advance warning of this and only became aware of it at 1:25am. Our next available engineer will attend site and the team will work to get your power back on as quickly and as safely as possible by 4:30am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information.  We apologise for the inconvenience and thank you for your patience. This message was updated at 1.44AM on 15th April', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 03:22', 'incident_id': 'INCD-372490-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-372490-r', 'postcodes_impacted': ['LL170EB', 'LL170ED', 'LL170EE', 'LL170EH', 'LL170NF', 'LL170NH', 'LL170NL'], 'received_time': '2021-04-15 01:25'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4396385038485815, 53.2539158824665]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the KA24 and KA13 postcode areas of Dalry and Kilwinning. We had no advance warning of this and only became aware of it at 12.06AM. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to site to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 2.15AM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was 12.33AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 01:06', 'incident_id': 'INCD-563617-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563617-s', 'postcodes_impacted': ['KA136PJ', 'KA136PL', 'KA136PN', 'KA137QF', 'KA137QH', 'KA137QL', 'KA137QN', 'KA137QP', 'KA137QR', 'KA137QW', 'KA137RG', 'KA137RH', 'KA137RU', 'KA137XX', 'KA244EL', 'KA244EN', 'KA244EP', 'KA244ER', 'KA244ES', 'KA244ET', 'KA244EW', 'KA244EX', 'KA244EY', 'KA244HA', 'KA244HB', 'KA244HD'], 'received_time': '2021-04-15 00:06'}, 'geometry': {'type': 'Point', 'coordinates': [-4.678058199748146, 55.68251849437807]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the DG4 postcode area of Sanquhar. We had no advance warning of this and only became aware of it at 11.33PM. Repairs are taking longer than expected because of onsite difficulties and our team are now working to get your power back on as quickly and as safely as possible by 4AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1.55AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 03:00', 'incident_id': 'INCD-563593-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563593-s', 'postcodes_impacted': ['DG46QA', 'DG46QH', 'DG46QQ'], 'received_time': '2021-04-14 22:33'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9939302678379476, 55.38356214246689]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland: 0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 01:00', 'incident_id': 'INCD-563551-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563551-s', 'postcodes_impacted': ['TD113HR', 'TD113HS', 'TD113HT', 'TD113HU', 'TD113HY', 'TD113HZ', 'TD113JA', 'TD113JN', 'TD113LE', 'TD113LS', 'TD113LT', 'TD113LU', 'TD113PP', 'TD113PR', 'TD113PS', 'TD113PT', 'TD3LU'], 'received_time': '2021-04-14 19:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2910079248296906, 55.760974940698844]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171451-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 2LS': {'class': 'models.MapDataLocation', 'lat': 53.8207, 'lng': -1.72978}}, 'received_time': '2021-04-14 11:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.729779, 53.820682]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171497-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 2LF': {'class': 'models.MapDataLocation', 'lat': 54.5733, 'lng': -1.23645}, 'TS1 2JH': {'class': 'models.MapDataLocation', 'lat': 54.5731, 'lng': -1.23645}, 'TS1 2LL': {'class': 'models.MapDataLocation', 'lat': 54.5737, 'lng': -1.2364}, 'TS1 2LH': {'class': 'models.MapDataLocation', 'lat': 54.5735, 'lng': -1.23649}, 'TS1 2JR': {'class': 'models.MapDataLocation', 'lat': 54.5736, 'lng': -1.23725}}, 'received_time': '2021-04-14 12:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2366354, 54.573456]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171542-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS24 8HH': {'class': 'models.MapDataLocation', 'lat': 54.6958, 'lng': -1.22321}}, 'received_time': '2021-04-14 14:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.222918, 54.695816]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 03:15', 'incident_id': 'INCD-171614-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO30 6HB': {'class': 'models.MapDataLocation', 'lat': 53.9744, 'lng': -1.08517}, 'YO30 6HL': {'class': 'models.MapDataLocation', 'lat': 53.9764, 'lng': -1.08467}}, 'received_time': '2021-04-15 00:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0849215, 53.9753745]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039185', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6RP': {'class': 'models.MapDataLocation', 'lat': 54.226, 'lng': -0.931904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.93177, 54.225837]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-15 09:00', 'incident_id': 'PPC039302', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO12 7RA': {'class': 'models.MapDataLocation', 'lat': 54.2863, 'lng': -0.408401}, 'YO12 7QZ': {'class': 'models.MapDataLocation', 'lat': 54.2883, 'lng': -0.408416}, 'YO12 7QU': {'class': 'models.MapDataLocation', 'lat': 54.2867, 'lng': -0.409063}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4086636666666667, 54.287082999999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:00', 'incident_id': 'PPC039392', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 1DY': {'class': 'models.MapDataLocation', 'lat': 53.9078, 'lng': -1.67444}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.674374, 53.907772]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039436', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8NG': {'class': 'models.MapDataLocation', 'lat': 54.1678, 'lng': -0.683294}, 'YO17 8HL': {'class': 'models.MapDataLocation', 'lat': 54.1595, 'lng': -0.67792}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6819154999999999, 54.1650665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:30', 'incident_id': 'PPC039464', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU19 2QF': {'class': 'models.MapDataLocation', 'lat': 53.7185, 'lng': 0.046434}, 'HU19 2QJ': {'class': 'models.MapDataLocation', 'lat': 53.7021, 'lng': 0.032745}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [0.0395975, 53.710342]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 15:30', 'incident_id': 'PPC039506', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF4 4QU': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60674}, 'WF4 4QZ': {'class': 'models.MapDataLocation', 'lat': 53.6463, 'lng': -1.60751}, 'WF4 4QX': {'class': 'models.MapDataLocation', 'lat': 53.6478, 'lng': -1.60475}, 'WF4 4QY': {'class': 'models.MapDataLocation', 'lat': 53.6475, 'lng': -1.60676}, 'WF4 4RF': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60871}, 'WF4 4RB': {'class': 'models.MapDataLocation', 'lat': 53.6468, 'lng': -1.60863}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6070548333333334, 53.647283166666675]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039538', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU11 5SX': {'class': 'models.MapDataLocation', 'lat': 53.9285, 'lng': -0.215499}, 'YO25 8ES': {'class': 'models.MapDataLocation', 'lat': 53.9218, 'lng': -0.27204}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2429035, 53.924642500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 16:00', 'incident_id': 'PPC039670', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 3RJ': {'class': 'models.MapDataLocation', 'lat': 53.5661, 'lng': -1.82766}, 'HD7 5JW': {'class': 'models.MapDataLocation', 'lat': 53.6093, 'lng': -1.84604}, 'HD9 2QY': {'class': 'models.MapDataLocation', 'lat': 53.5635, 'lng': -1.82739}, 'HD7 1QD': {'class': 'models.MapDataLocation', 'lat': 53.562, 'lng': -1.82879}, 'HD9 2RS': {'class': 'models.MapDataLocation', 'lat': 53.5634, 'lng': -1.83002}, 'HD9 3XG': {'class': 'models.MapDataLocation', 'lat': 53.5676, 'lng': -1.82742}, 'HD9 2RU': {'class': 'models.MapDataLocation', 'lat': 53.5616, 'lng': -1.82773}, 'HD9 3RG': {'class': 'models.MapDataLocation', 'lat': 53.5658, 'lng': -1.83255}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.83140825, 53.569869999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:00', 'incident_id': 'PPC039710', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 1BW': {'class': 'models.MapDataLocation', 'lat': 54.5686, 'lng': -1.41398}, 'TS21 1BL': {'class': 'models.MapDataLocation', 'lat': 54.5626, 'lng': -1.4179}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4159365, 54.565618]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039712', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9ED': {'class': 'models.MapDataLocation', 'lat': 54.5124, 'lng': -1.18827}, 'TS8 9EE': {'class': 'models.MapDataLocation', 'lat': 54.5163, 'lng': -1.18558}, 'TS8 9DZ': {'class': 'models.MapDataLocation', 'lat': 54.5091, 'lng': -1.20688}, 'TS8 9RZ': {'class': 'models.MapDataLocation', 'lat': 54.5098, 'lng': -1.19689}, 'TS8 9EA': {'class': 'models.MapDataLocation', 'lat': 54.5115, 'lng': -1.20293}, 'TS8 9EB': {'class': 'models.MapDataLocation', 'lat': 54.5059, 'lng': -1.19525}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1955728333333333, 54.51142783333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:30', 'incident_id': 'PPC039738', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9PW': {'class': 'models.MapDataLocation', 'lat': 54.5257, 'lng': -1.25075}, 'TS8 9ND': {'class': 'models.MapDataLocation', 'lat': 54.5265, 'lng': -1.25159}, 'TS8 9NA': {'class': 'models.MapDataLocation', 'lat': 54.5272, 'lng': -1.25179}, 'TS8 9SL': {'class': 'models.MapDataLocation', 'lat': 54.5233, 'lng': -1.24996}, 'TS8 9NB': {'class': 'models.MapDataLocation', 'lat': 54.5267, 'lng': -1.25064}, 'TS8 9PP': {'class': 'models.MapDataLocation', 'lat': 54.5263, 'lng': -1.2481}, 'TS8 9PR': {'class': 'models.MapDataLocation', 'lat': 54.5252, 'lng': -1.24904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2502771428571429, 54.52583528571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039756', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3AQ': {'class': 'models.MapDataLocation', 'lat': 54.9721, 'lng': -1.77168}, 'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3AA': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77236}, 'NE40 3AN': {'class': 'models.MapDataLocation', 'lat': 54.9736, 'lng': -1.7705}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AW': {'class': 'models.MapDataLocation', 'lat': 54.9729, 'lng': -1.77177}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.771655375, 54.972390250000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039770', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 0LU': {'class': 'models.MapDataLocation', 'lat': 53.7988, 'lng': -1.80109}, 'BD8 0LT': {'class': 'models.MapDataLocation', 'lat': 53.7994, 'lng': -1.80114}, 'BD8 0LL': {'class': 'models.MapDataLocation', 'lat': 53.7989, 'lng': -1.79977}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.800667, 53.79901]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:00', 'incident_id': 'PPC039841', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL7 0JP': {'class': 'models.MapDataLocation', 'lat': 54.4382, 'lng': -1.55098}, 'DL7 0JR': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55171}, 'DL2 2NZ': {'class': 'models.MapDataLocation', 'lat': 54.4426, 'lng': -1.54943}, 'DL2 2PT': {'class': 'models.MapDataLocation', 'lat': 54.442, 'lng': -1.55132}, 'DL7 0JS': {'class': 'models.MapDataLocation', 'lat': 54.4397, 'lng': -1.55139}, 'DL7 0JU': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55004}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5508033333333333, 54.44001349999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039912', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS29 0PR': {'class': 'models.MapDataLocation', 'lat': 53.9463, 'lng': -1.8972}, 'LS29 0PS': {'class': 'models.MapDataLocation', 'lat': 53.9459, 'lng': -1.89848}, 'LS29 0PX': {'class': 'models.MapDataLocation', 'lat': 53.9457, 'lng': -1.89815}, 'LS29 0LE': {'class': 'models.MapDataLocation', 'lat': 53.9458, 'lng': -1.90182}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8988005000000001, 53.94589875]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '10645719', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['M40 5GA', 'M40 5GD', 'M40 5GF', 'M40 5GG', 'M40 5QA', 'M40 5QB', 'M40 5QD', 'M40 5QE', 'M40 5QF', 'M40 5QJ', 'M40 9GE'], 'received_time': '2021-04-14 21:43'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1866554545454546, 53.51893845454545]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-15 03:00', 'incident_id': '40810060', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB4 8QH', 'BB4 8QL', 'BB4 8RG', 'BB4 8RY'], 'received_time': '2021-04-14 21:07'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2858090000000004, 53.73657375]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});