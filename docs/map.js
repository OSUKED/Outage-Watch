document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AH', 'NR129AF', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG', 'NR129EG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.77297144903066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T03:00:00', 'incident_id': 'INCD-232901-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232901-Z', 'postcodes_impacted': ['PE25DZ', 'PE25DY', 'PE25ER'], 'received_time': '2021-04-24T17:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2924116276852488, 52.552842413359066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T03:00:00', 'incident_id': 'INCD-252629-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-252629-J', 'postcodes_impacted': ['SW165AX', 'SW165TD', 'SW165EN', 'SW165SF', 'SW165UP', 'SW165UT'], 'received_time': '2020-12-30T06:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.13741717216371652, 51.416067744493596]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260704-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260704-J', 'postcodes_impacted': ['IG38FH', 'IG38LA', 'IG38LB', 'IG38LP', 'IG38LG', 'IG38LT', 'IG38LX', 'IG38LY', 'IG38LZ', 'IG38RA', 'IG38RG'], 'received_time': '2021-04-24T23:45:32'}, 'geometry': {'type': 'Point', 'coordinates': [0.0969433138029774, 51.56543264449877]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-230808-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230808-Z', 'postcodes_impacted': ['NR280RU'], 'received_time': '2021-04-24T09:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4151257416754273, 52.85681836681537]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-05-24T12:30:00', 'incident_id': 'INCD-55021-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55021-V', 'postcodes_impacted': ['CT45PY', 'CT45PZ', 'CT45QA', 'CT45QB', 'CT45QD', 'CT45QE', 'CT45QH', 'CT45SR', 'CT45SS', 'CT46BY', 'RH130TR', 'TN255JU', 'TN255JX', 'TW94FA'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8377406092783846, 51.1993607414425]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:00:00', 'incident_id': 'INCD-230387-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230387-Z', 'postcodes_impacted': ['CB97HX', 'CB97HY', 'CB97HZ', 'CB97JQ', 'CB97LA', 'CB97LB', 'CB97SG'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44368625849715565, 52.12786448175765]}}, {'type': 'Feature', 'properties': {'description': 'We have identified an item of electrical equipment called a Cut-Out, which is the link between our electricity network and a propertys internal wires, that needs replacing. This propertys Cut-Out needs replacing due to potential safety concerns. When we identify properties with this issue we often identify further properties requiring the same works to be completed. Therefore we would like to access your property during the power cut to inspect the equipment within your property and to replace if necessary. Once the inspections and replacements have been completed this will ensure that all properties are safely connected to our electricity network. This is why it is important to complete this work during the Coronavirus pandemic. This work is taking place on Buxton Crescent and Carlton Crescent. The government has given exemptions to certain industries and activities, this outage falls into this category', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T15:00:00', 'incident_id': 'INCD-53288-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53288-V', 'postcodes_impacted': ['SM39TP', 'SM39TR', 'SM39TS'], 'received_time': '2021-04-23T12:02:51'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21764189555768473, 51.36957062305451]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T16:30:00', 'incident_id': 'INCD-231343-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231343-Z', 'postcodes_impacted': ['SG175NQ'], 'received_time': '2021-04-24T09:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3251931680253517, 52.02016452902743]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-227457-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227457-Z', 'postcodes_impacted': ['CO160DU', 'CO160LA', 'CO160LB', 'CO160LD'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1548508334444136, 51.86309190703278]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1589\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 23:30:00', 'incident_id': 'HC1589', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO37 6ES', 'PO37 6ET', 'PO37 6EU', 'PO37 6EX', 'PO37 6EY', 'PO37 6HA', 'PO37 6HB', 'PO37 7BY', 'PO37 7HZ'], 'received_time': '2021-04-24 20:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.173961, 50.635735555555556]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1651\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 01:00:00', 'incident_id': 'HC1651', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['AB43 6LY', 'AB43 6QA', 'AB43 6QB', 'AB43 7LX'], 'received_time': '2021-04-24 18:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.20314625, 57.626634]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1610\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 01:00:00', 'incident_id': 'HC1610', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP15 7AA', 'HP15 7BB', 'HP15 7BW', 'HP15 7DB', 'HP15 7DD', 'HP15 7DE'], 'received_time': '2021-04-24 16:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7091035, 51.65757383333332]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 04:00:00', 'incident_id': 'INCD-358529-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358529-G', 'postcodes_impacted': ['ST1 6QN', 'ST1 6QL', 'ST1 6QW', 'ST1 6QB', 'ST6 6HG'], 'received_time': '2021-04-24 19:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1672307999999996, 53.0365726]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the  LL57 postcode area of Bangor, affecting properties in Treflan and surrounding streets. We had no advance warning of this and only became aware of it at  11:01PM. Our engineers are on their way to the local area to investigate the fault and our team will work to get your power back on as quickly and as safely as possible. We expect the power to be restored by 2:15AM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:12PM on 24th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 01:01', 'incident_id': 'INCD-375190-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-375190-r', 'postcodes_impacted': ['LL571LD', 'LL571LE', 'LL571LG', 'LL571LH', 'LL572RE'], 'received_time': '2021-04-24 23:01'}, 'geometry': {'type': 'Point', 'coordinates': [-4.129345367989847, 53.22608407099794]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KY1 postcode area of Coaltown of Wemyss. We had no advance warning of this and only became aware of it at 9:24pm. Our team has managed to restore power to a number of properties in the area and are still working to locate the cause of the fault affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 3am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:40pm on Saturday, 24 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 23:24', 'incident_id': 'INCD-567085-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567085-s', 'postcodes_impacted': ['KY14LP', 'KY14LS', 'KY14LT', 'KY14LW', 'KY14LY', 'KY14LZ', 'KY14NN', 'KY14NT'], 'received_time': '2021-04-24 21:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.086261476559906, 56.15152938082994]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the FK1 postcode area of Shieldhall. We had no advance warning of this and only became aware of it at 8:32pm. Repairs are taking longer than expected because of difficulties locating the cause of the fault and our team are now working to get your power back on as quickly and as safely as possible by 2:00am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:45pm on Saturday, 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 01:00', 'incident_id': 'INCD-506781-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506781-f', 'postcodes_impacted': ['FK12EF', 'FK12EG', 'FK12EH', 'FK12EQ', 'FK12FB'], 'received_time': '2021-04-24 20:32'}, 'geometry': {'type': 'Point', 'coordinates': [-3.770996796274974, 55.9722430887638]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-567073-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567073-s', 'postcodes_impacted': ['KA56BL'], 'received_time': '2021-04-24 20:27'}, 'geometry': {'type': 'Point', 'coordinates': [-4.369573062332717, 55.51430096278931]}}, {'type': 'Feature', 'properties': {'description': 'There is an unplanned power cut affecting the SY18 postcode area of Llanidloes, affecting properties in Gorn Road and surrounding streets. It will be necessary for our engineers to carry out an emergency shutdown at 11:00PM due to faulty equipment on the underground cable network. Our team will be carrying out repair work safely on the underground cable network and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 2:00AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:37PM on 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-1810454-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810454-i', 'postcodes_impacted': ['SY186DQ', 'SY186FA', 'SY186LB', 'SY186LD'], 'received_time': '2021-04-24 12:01'}, 'geometry': {'type': 'Point', 'coordinates': [-3.5333294559455184, 52.445667658322535]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27AA', 'FK27NS', 'FK27NT', 'FK27NU', 'FK27NX', 'FK27NZ', 'FK27PA', 'FK27RP', 'FK27RR', 'FK27RS', 'FK27RZ'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7871457775190596, 56.012777524454165]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:00', 'incident_id': 'INCD-174227-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 1LR': {'class': 'models.MapDataLocation', 'lat': 53.787, 'lng': -1.39779}, 'LS25 1DA': {'class': 'models.MapDataLocation', 'lat': 53.7879, 'lng': -1.40171}, 'LS25 1DB': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -1.40071}}, 'received_time': '2021-04-24 16:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4001233333333332, 53.787663333333334]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:00', 'incident_id': 'INCD-174230-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE33 2AL': {'class': 'models.MapDataLocation', 'lat': 55.0037, 'lng': -1.4279}}, 'received_time': '2021-04-24 16:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.427867, 55.003755]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174232-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S2 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.3713, 'lng': -1.46612}}, 'received_time': '2021-04-24 16:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.466121, 53.371315]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:30', 'incident_id': 'INCD-174242-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 2QT': {'class': 'models.MapDataLocation', 'lat': 53.7046, 'lng': -1.79158}}, 'received_time': '2021-04-24 18:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.791615, 53.704581]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 11:00', 'incident_id': 'INCD-174247-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 9AP': {'class': 'models.MapDataLocation', 'lat': 54.5402, 'lng': -1.9332}}, 'received_time': '2021-04-24 19:23'}, 'geometry': {'type': 'Point', 'coordinates': [-1.933182, 54.540173]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:15', 'incident_id': 'INCD-174254-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3EP': {'class': 'models.MapDataLocation', 'lat': 53.7131, 'lng': -1.8751}}, 'received_time': '2021-04-24 21:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.875117, 53.713128]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 01:30', 'incident_id': 'INCD-174256-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL17 9BW': {'class': 'models.MapDataLocation', 'lat': 54.6763, 'lng': -1.49422}}, 'received_time': '2021-04-24 22:24'}, 'geometry': {'type': 'Point', 'coordinates': [-1.494231, 54.676284]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:15', 'incident_id': 'INCD-174257-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 7HN': {'class': 'models.MapDataLocation', 'lat': 54.1064, 'lng': -0.847339}, 'YO60 7HL': {'class': 'models.MapDataLocation', 'lat': 54.1055, 'lng': -0.846186}, 'YO60 7HJ': {'class': 'models.MapDataLocation', 'lat': 54.103, 'lng': -0.835856}, 'YO60 7HH': {'class': 'models.MapDataLocation', 'lat': 54.1005, 'lng': -0.836353}, 'YO60 7HG': {'class': 'models.MapDataLocation', 'lat': 54.0994, 'lng': -0.835115}, 'YO60 7HF': {'class': 'models.MapDataLocation', 'lat': 54.0979, 'lng': -0.836899}, 'YO60 7HE': {'class': 'models.MapDataLocation', 'lat': 54.0968, 'lng': -0.836916}, 'YO60 7EL': {'class': 'models.MapDataLocation', 'lat': 54.0963, 'lng': -0.872789}, 'YO60 7HY': {'class': 'models.MapDataLocation', 'lat': 54.1176, 'lng': -0.847761}, 'YO60 7JB': {'class': 'models.MapDataLocation', 'lat': 54.1114, 'lng': -0.834242}, 'YO60 7HZ': {'class': 'models.MapDataLocation', 'lat': 54.1218, 'lng': -0.834013}, 'YO60 7HW': {'class': 'models.MapDataLocation', 'lat': 54.1065, 'lng': -0.849524}, 'YO60 7HU': {'class': 'models.MapDataLocation', 'lat': 54.1096, 'lng': -0.851593}, 'YO60 7HS': {'class': 'models.MapDataLocation', 'lat': 54.1203, 'lng': -0.860584}, 'YO60 7HT': {'class': 'models.MapDataLocation', 'lat': 54.1167, 'lng': -0.879409}, 'YO60 7EZ': {'class': 'models.MapDataLocation', 'lat': 54.0968, 'lng': -0.8751}, 'YO60 7HQ': {'class': 'models.MapDataLocation', 'lat': 54.1002, 'lng': -0.833257}, 'YO60 7HR': {'class': 'models.MapDataLocation', 'lat': 54.1038, 'lng': -0.87072}}, 'received_time': '2021-04-24 22:44'}, 'geometry': {'type': 'Point', 'coordinates': [-0.849105388888889, 54.10612672222222]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 04:01', 'incident_id': '40811401', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB2 3GE', 'BB2 3PZ', 'BB2 4AA', 'BB2 4AD', 'BB2 4AF', 'BB2 4AG', 'BB2 4AH'], 'received_time': '2021-04-24 19:57'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4892408571428573, 53.73847271428571]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 00:30', 'incident_id': '40811032', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY5 1DB', 'FY5 1DW', 'FY5 1EH', 'FY5 1FD', 'FY5 1FE', 'FY5 1FF', 'FY5 1HE', 'FY5 1LB', 'FY5 1LW'], 'received_time': '2021-04-24 16:58'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0455166666666664, 53.88171922222222]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});