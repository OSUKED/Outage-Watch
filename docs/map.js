document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T01:00:00', 'incident_id': 'INCD-232977-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232977-Z', 'postcodes_impacted': ['N209HG'], 'received_time': '2021-04-25T18:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1722435761378749, 51.630648507994]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T22:30:00', 'incident_id': 'INCD-232937-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232937-Z', 'postcodes_impacted': ['IP117AB', 'IP117AD', 'IP117EL', 'IP117EN', 'IP117HA', 'IP117YY', 'IP11', 'IP110QL'], 'received_time': '2021-04-25T07:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3469254028095938, 51.968900460420834]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260729-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260729-J', 'postcodes_impacted': ['E181AY', 'E182LS', 'E182LY'], 'received_time': '2021-04-25T15:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.02393650932679513, 51.59463135425755]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T04:00:00', 'incident_id': 'INCD-44491-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44491-C', 'postcodes_impacted': ['SS94EX', 'SS94DH', 'SS95PG', 'SS95PQ'], 'received_time': '2021-04-25T15:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6523532170660535, 51.56401655606389]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T12:00:00', 'incident_id': 'INCD-6582-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6582-O', 'postcodes_impacted': ['HP25RR', 'NR33ST', 'NR33SY', 'NR33TP'], 'received_time': '2021-04-25T10:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8451798267183119, 52.432168144452916]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T16:00:00', 'incident_id': 'INCD-229868-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229868-Z', 'postcodes_impacted': ['CO112JZ', 'CO112LP', 'CO76BJ'], 'received_time': '2021-04-25T09:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0190091446086122, 51.943073414848264]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1917\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-26 04:00:00', 'incident_id': 'HC1917', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO19 7NB', 'SO19 7PS', 'SO19 7PT', 'SO19 7PW', 'SO19 8NT', 'SO19 8NU', 'SO19 8NW', 'SO19 8NX'], 'received_time': '2021-04-25 18:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.35424275, 50.90977975]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 22:30:00', 'incident_id': 'INCD-452-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-452-q', 'postcodes_impacted': ['EX14 2XF', 'EX14 2UA', 'EX14 2XE', 'EX14 2XL', 'EX14 2UG', 'EX14 3TX'], 'received_time': '2021-04-25 19:25:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2047909999999997, 50.7902565]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 22:00:00', 'incident_id': 'INCD-453-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-453-q', 'postcodes_impacted': ['BS20 7NX', 'BS20 9CC', 'BS20 7NZ', 'BS20 7TT', 'BS20 7XL'], 'received_time': '2021-04-25 20:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.71704525, 51.48370875]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 22:30:00', 'incident_id': 'INCD-451-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-451-q', 'postcodes_impacted': ['BS39 4DA'], 'received_time': '2021-04-25 19:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.554598, 51.352122]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 21:30:00', 'incident_id': 'INCD-2426-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2426-g', 'postcodes_impacted': ['CF42 5PY', 'CF42 5PU', 'CF42 5RA', 'CF42 5RJ', 'CF42 5PP'], 'received_time': '2021-04-25 18:06:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.5335042000000003, 51.674685999999994]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-358554-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358554-G', 'postcodes_impacted': ['WS10 9EX', 'WS10 9DR', 'WS10 9EP', 'WS10 9EZ', 'WS10 9EY', 'WS10 9HA', 'WS10 9EW', 'WS10 9ES'], 'received_time': '2021-04-25 13:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.01461475, 52.555479375000004]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-26 01:00:00', 'incident_id': 'INCD-153296-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153296-H', 'postcodes_impacted': ['DE24 8RB', 'DE24 8UH', 'DE24 8RD', 'DE24 8QN'], 'received_time': '2021-04-25 12:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4293687499999999, 52.8986225]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-26 02:00:00', 'incident_id': 'INCD-153315-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153315-H', 'postcodes_impacted': ['NN3 7UZ', 'NN3 7TW'], 'received_time': '2021-04-25 17:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8388355000000001, 52.2885]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 23:30:00', 'incident_id': 'INCD-44811-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44811-D', 'postcodes_impacted': ['LE3 0AU', 'LE3 0BA', 'LE3 0BB', 'LE3 0GF', 'LE3 0AW', 'LE3 0GT', 'LE3 0DH', 'LE3 0GA', 'LE3 0AB'], 'received_time': '2021-04-25 20:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1479173333333332, 52.62705066666667]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 22:00:00', 'incident_id': 'INCD-153293-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153293-H', 'postcodes_impacted': ['LE9 8AF', 'LE9 8AB', 'LE9 8PE'], 'received_time': '2021-04-25 12:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.338493, 52.572947666666664]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:30:00', 'incident_id': 'INCD-153285-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153285-H', 'postcodes_impacted': ['CV31 3HG'], 'received_time': '2021-04-25 11:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.536055, 52.280035]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 23:30:00', 'incident_id': 'INCD-153309-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153309-H', 'postcodes_impacted': ['MK17 8SU', 'MK17 8SS', 'MK17 8XJ', 'MK17 8XH', 'MK17 8XG', 'MK17 8SR', 'MK17 8ST', 'MK17 8XQ'], 'received_time': '2021-04-25 15:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.64852575, 52.017952625]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the DG8 postcode area of Newton Stewart. We had no advance warning of this and only became aware of it at 8.49pm. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 11.00pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience This message was updated at 8:59pm on Sunday, 25 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 21:49', 'incident_id': 'INCD-499259-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-499259-k', 'postcodes_impacted': ['DG80BT', 'DG80BU', 'DG80BX', 'DG80BY', 'DG80BZ', 'DG80DA', 'DG80DB', 'DG80DD', 'DG86QJ'], 'received_time': '2021-04-25 20:49'}, 'geometry': {'type': 'Point', 'coordinates': [-4.556665885017403, 54.89328481706926]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the SY10 postcode area of Oswestry. We had no advance warning of this and only became aware of it at 8:41pm. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate the cause of the fault. Our team will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 11pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 8:57pm on 25th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 21:50', 'incident_id': 'INCD-1810664-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810664-i', 'postcodes_impacted': ['SY108AA', 'SY108AB', 'SY108AD', 'SY109EU'], 'received_time': '2021-04-25 20:41'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0559150467783187, 52.82738763871036]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the SY11 postcode area of Oswestry, affecting properties in Gatacre Avenue, Gittin Street and surrounding streets. We had no advance warning of this and only became aware at 7:28PM. Our engineers are on their way to the area to investigate this fault on our electrical network and our team will work to get your power back on as quickly and as safely as possible. We expect the power to be restored by 10:30PM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 8:02PM on Sunday 25th April 2021', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1810658-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810658-i', 'postcodes_impacted': ['SY111DP', 'SY111DR', 'SY111DS', 'SY111DU', 'SY111EE', 'SY111EF'], 'received_time': '2021-04-25 19:28'}, 'geometry': {'type': 'Point', 'coordinates': [-3.053032960402604, 52.86550981511356]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-567199-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567199-s', 'postcodes_impacted': ['EH526PG'], 'received_time': '2021-04-25 16:48'}, 'geometry': {'type': 'Point', 'coordinates': [-3.474905193656197, 55.93939941851783]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 21:30', 'incident_id': 'INCD-1810628-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810628-i', 'postcodes_impacted': ['L143NU', 'L162LY', 'L162LZ', 'L162NB', 'L162ND', 'L162NQ', 'L163GA', 'L163GB', 'L343NU'], 'received_time': '2021-04-25 15:34'}, 'geometry': {'type': 'Point', 'coordinates': [-2.875316585919489, 53.40624522781175]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the KY2 postcode area of Kirkcaldy. We did not know in advance there would be a power cut however our engineers have now arrived on site and in order to complete the repairs on an underground cable fault outside 70 Harris Drive and to allow for further safe digging, we now need to carry out an emergency shutdown at 8.30pm. This may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible by 11.00pm. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was recorded at 7.56PM on 25 April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 22:00', 'incident_id': 'INCD-506913-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506913-f', 'postcodes_impacted': ['KY26RS', 'KY26RY', 'KY26RZ', 'KY26SA'], 'received_time': '2021-04-25 14:22'}, 'geometry': {'type': 'Point', 'coordinates': [-3.182632799497433, 56.13229112463199]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 07:30', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27NT'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.788360899719553, 56.013266501493575]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 21:45', 'incident_id': 'INCD-174307-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO1 9XQ': {'class': 'models.MapDataLocation', 'lat': 53.956, 'lng': -1.07259}, 'YO1 9UD': {'class': 'models.MapDataLocation', 'lat': 53.9557, 'lng': -1.07149}, 'YO1 9XG': {'class': 'models.MapDataLocation', 'lat': 53.9561, 'lng': -1.07214}, 'YO1 9TL': {'class': 'models.MapDataLocation', 'lat': 53.9565, 'lng': -1.07366}}, 'received_time': '2021-04-25 09:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0724702499999998, 53.956076]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174319-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4QQ': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -0.329701}}, 'received_time': '2021-04-25 10:22'}, 'geometry': {'type': 'Point', 'coordinates': [-0.329701, 53.788001]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 22:30', 'incident_id': 'INCD-174341-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1JY': {'class': 'models.MapDataLocation', 'lat': 54.5201, 'lng': -1.4885}, 'DL2 1FE': {'class': 'models.MapDataLocation', 'lat': 54.5229, 'lng': -1.476}, 'DL2 1FD': {'class': 'models.MapDataLocation', 'lat': 54.5236, 'lng': -1.47616}}, 'received_time': '2021-04-25 13:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4802316666666666, 54.52218733333333]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 23:30', 'incident_id': 'INCD-174357-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD9 5QB': {'class': 'models.MapDataLocation', 'lat': 53.8131, 'lng': -1.78786}}, 'received_time': '2021-04-25 16:34'}, 'geometry': {'type': 'Point', 'coordinates': [-1.787858, 53.813141]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 23:00', 'incident_id': 'INCD-174376-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3LL': {'class': 'models.MapDataLocation', 'lat': 53.7163, 'lng': -1.8768}, 'HX1 3LJ': {'class': 'models.MapDataLocation', 'lat': 53.7165, 'lng': -1.87627}, 'HX1 3LH': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.87617}, 'HX1 3LG': {'class': 'models.MapDataLocation', 'lat': 53.7168, 'lng': -1.87536}, 'HX1 3LE': {'class': 'models.MapDataLocation', 'lat': 53.7159, 'lng': -1.87606}, 'HX1 3LB': {'class': 'models.MapDataLocation', 'lat': 53.717, 'lng': -1.87456}}, 'received_time': '2021-04-25 17:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8758316666666666, 53.71640616666667]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 22:30', 'incident_id': 'INCD-174382-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 4BE': {'class': 'models.MapDataLocation', 'lat': 54.674, 'lng': -1.41465}}, 'received_time': '2021-04-25 17:55'}, 'geometry': {'type': 'Point', 'coordinates': [-1.420841, 54.678779]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 00:00', 'incident_id': 'INCD-174385-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD1 4UG': {'class': 'models.MapDataLocation', 'lat': 53.6429, 'lng': -1.81179}}, 'received_time': '2021-04-25 18:21'}, 'geometry': {'type': 'Point', 'coordinates': [-1.811825, 53.642839]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 22:30', 'incident_id': 'INCD-174388-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU9 3ND': {'class': 'models.MapDataLocation', 'lat': 53.7627, 'lng': -0.273464}, 'HU9 5AA': {'class': 'models.MapDataLocation', 'lat': 53.7622, 'lng': -0.273758}, 'HU9 4SQ': {'class': 'models.MapDataLocation', 'lat': 53.7618, 'lng': -0.273288}, 'HU9 3NF': {'class': 'models.MapDataLocation', 'lat': 53.7633, 'lng': -0.275533}, 'HU9 3HR': {'class': 'models.MapDataLocation', 'lat': 53.7584, 'lng': -0.29447}, 'HU9 3NB': {'class': 'models.MapDataLocation', 'lat': 53.7638, 'lng': -0.273906}, 'HU9 3NA': {'class': 'models.MapDataLocation', 'lat': 53.7624, 'lng': -0.274053}, 'HU9 5RJ': {'class': 'models.MapDataLocation', 'lat': 53.7487, 'lng': -0.270401}}, 'received_time': '2021-04-25 19:15'}, 'geometry': {'type': 'Point', 'coordinates': [-0.27611450000000004, 53.760420749999994]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 23:15', 'incident_id': 'INCD-174390-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR1 2QY': {'class': 'models.MapDataLocation', 'lat': 54.9033, 'lng': -1.3766}}, 'received_time': '2021-04-25 20:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.376532, 54.903349]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-25 12:00', 'incident_id': 'PPC039332', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 1TJ': {'class': 'models.MapDataLocation', 'lat': 53.7232, 'lng': -1.85964}, 'HX1 1RL': {'class': 'models.MapDataLocation', 'lat': 53.723, 'lng': -1.85978}, 'HX1 1RN': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TN': {'class': 'models.MapDataLocation', 'lat': 53.7235, 'lng': -1.8599}, 'HX1 1UU': {'class': 'models.MapDataLocation', 'lat': 53.7246, 'lng': -1.8599}, 'HX1 1RW': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TH': {'class': 'models.MapDataLocation', 'lat': 53.7231, 'lng': -1.86042}}, 'received_time': '2021-04-25 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8597867142857143, 53.723433428571425]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-26 00:30', 'incident_id': '40811467', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB1 3HN', 'BB1 3JT', 'BB1 3JU', 'BB1 3JX', 'BB1 3JZ', 'BB1 3LB', 'BB1 3LD', 'BB1 3LE', 'BB1 3LF', 'BB1 3LG', 'BB1 3LH', 'BB1 3LN', 'BB1 3LQ'], 'received_time': '2021-04-25 20:16'}, 'geometry': {'type': 'Point', 'coordinates': [-2.449904076923077, 53.750625923076925]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-26 00:30', 'incident_id': '40811444', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB1 7ER', 'BB1 7EW', 'BB1 7EY', 'BB1 7EZ', 'BB1 7HN', 'BB1 7LH', 'BB1 7LJ', 'BB1 7LL', 'BB1 7LP', 'BB1 7LR', 'BB1 7LW', 'BB1 7NG'], 'received_time': '2021-04-25 19:02'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4833321666666666, 53.75380191666667]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});