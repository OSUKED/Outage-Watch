document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-55050-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55050-V', 'postcodes_impacted': ['GU67HL', 'GU67HN', 'GU67HP', 'GU67HR', 'GU67HW'], 'received_time': '2021-04-24T09:00:52'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4739564714328979, 51.140184647776856]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AH', 'NR129AF', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG', 'NR129EG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.77297144903066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:30:00', 'incident_id': 'INCD-260650-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260650-J', 'postcodes_impacted': ['SE58BP', 'SE58BS', 'SE58BX'], 'received_time': '2021-04-24T06:32:36'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08566859827503863, 51.46479847701243]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T12:00:00', 'incident_id': 'INCD-248720-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248720-G', 'postcodes_impacted': ['RH124ET', 'RH124EU'], 'received_time': '2021-04-24T07:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2990538535519716, 51.07401286324058]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44423-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44423-C', 'postcodes_impacted': ['LU20RL', 'LU20RY'], 'received_time': '2021-04-23T09:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3910652737533416, 51.883227620433296]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:30:00', 'incident_id': 'INCD-232859-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232859-Z', 'postcodes_impacted': ['IP238BF', 'IP238JR', 'IP238JS', 'IP238JT'], 'received_time': '2021-04-24T07:50:25'}, 'geometry': {'type': 'Point', 'coordinates': [1.0322469694391323, 52.30671435806862]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232840-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232840-Z', 'postcodes_impacted': ['PE297SD', 'PE297YR'], 'received_time': '2021-04-23T20:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18937116795607184, 52.33592941080159]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232861-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232861-Z', 'postcodes_impacted': ['IP139AF', 'IP139AD'], 'received_time': '2021-04-24T09:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3990519823429173, 52.19604122440478]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T12:00:00', 'incident_id': 'INCD-248722-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248722-G', 'postcodes_impacted': ['RH105AR', 'RH105AS', 'RH105AT', 'RH105AU', 'RH105AX', 'RH105AY', 'RH105AZ', 'RH105BA', 'RH105BE'], 'received_time': '2021-04-24T08:17:05'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18633192643111235, 51.102309478498135]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:30:00', 'incident_id': 'INCD-232831-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232831-Z', 'postcodes_impacted': ['WD48ER', 'WD48HB', 'WD48HN', 'WD48HP', 'WD48HR', 'WD48RU', 'UK', 'WD48HX'], 'received_time': '2021-04-23T18:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.44218785230741625, 51.71348979766792]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:30:00', 'incident_id': 'INCD-260653-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260653-J', 'postcodes_impacted': ['CR41AB', 'SW165HN', 'SW165SY', 'SW165TJ'], 'received_time': '2021-04-24T07:51:41'}, 'geometry': {'type': 'Point', 'coordinates': [-0.14401691222699345, 51.41234233231888]}}, {'type': 'Feature', 'properties': {'description': '', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-29876-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-29876-V', 'postcodes_impacted': ['RH55BX'], 'received_time': '2020-05-21T08:40:57'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2832665717435757, 51.14455183584568]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-230808-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230808-Z', 'postcodes_impacted': ['NR280RU'], 'received_time': '2021-04-24T09:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4151257416754273, 52.85681836681537]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-05-24T12:30:00', 'incident_id': 'INCD-55021-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55021-V', 'postcodes_impacted': ['CT45PY', 'CT45PZ', 'CT45QA', 'CT45QB', 'CT45QD', 'CT45QE', 'CT45QH', 'CT45SR', 'CT45SS', 'CT46BY', 'RH130TR', 'TN255JU', 'TN255JX', 'TW94FA'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8377406092783846, 51.1993607414425]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-227457-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227457-Z', 'postcodes_impacted': ['CO160DU', 'CO160LA', 'CO160LB', 'CO160LD'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1548508334444136, 51.86309190703278]}}, {'type': 'Feature', 'properties': {'description': 'We have identified an item of electrical equipment called a Cut-Out, which is the link between our electricity network and a propertys internal wires, that needs replacing. This propertys Cut-Out needs replacing due to potential safety concerns. When we identify properties with this issue we often identify further properties requiring the same works to be completed. Therefore we would like to access your property during the power cut to inspect the equipment within your property and to replace if necessary. Once the inspections and replacements have been completed this will ensure that all properties are safely connected to our electricity network. This is why it is important to complete this work during the Coronavirus pandemic. This work is taking place on Buxton Crescent and Carlton Crescent. The government has given exemptions to certain industries and activities, this outage falls into this category', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T15:00:00', 'incident_id': 'INCD-53288-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53288-V', 'postcodes_impacted': ['SM39TP', 'SM39TR', 'SM39TS'], 'received_time': '2021-04-23T12:02:51'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21764189555768473, 51.36957062305451]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:00:00', 'incident_id': 'INCD-230387-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230387-Z', 'postcodes_impacted': ['CB97HX', 'CB97HY', 'CB97HZ', 'CB97JQ', 'CB97LA', 'CB97LB', 'CB97SG'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44368625849715565, 52.12786448175765]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T16:30:00', 'incident_id': 'INCD-231343-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231343-Z', 'postcodes_impacted': ['SG175NQ'], 'received_time': '2021-04-24T09:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3251931680253517, 52.02016452902743]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199173\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 15:00:00', 'incident_id': '199173', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG21 4DZ'], 'received_time': '2021-04-24 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.081705, 51.267269]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198971\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 12:00:00', 'incident_id': '198971', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU32 1AD', 'GU32 2DJ'], 'received_time': '2021-04-24 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9447855000000001, 51.0284115]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198950\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 11:00:00', 'incident_id': '198950', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU7', 'GU7 1NL', 'GU7 1UT', 'GU7 1UU', 'GU8 4AR'], 'received_time': '2021-04-24 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.59270025, 51.18416875]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199027\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 14:30:00', 'incident_id': '199027', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PA38 4BJ', 'PA38 4BQ'], 'received_time': '2021-04-24 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.246724, 56.566846999999996]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199138\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 12:00:00', 'incident_id': '199138', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX11 0DN', 'OX11 0DP', 'OX11 0DW', 'OX11 6DN', 'OX11 6DW'], 'received_time': '2021-04-24 07:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2768416, 51.602057]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1488\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 14:00:00', 'incident_id': 'HC1488', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU9 7AS', 'GU9 7AW'], 'received_time': '2021-04-24 05:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8140575, 51.208913499999994]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 14:00:00', 'incident_id': 'INCD-350-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-350-q', 'postcodes_impacted': ['PL2 1JX'], 'received_time': '2021-04-24 06:53:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.170706, 50.385529]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 11:00:00', 'incident_id': 'INCD-354-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-354-q', 'postcodes_impacted': ['EX20 1PB', 'EX20 1UZ', 'EX20 1PJ', 'EX20 1PD', 'EX20 1PH', 'EX20 1PQ'], 'received_time': '2021-04-24 07:55:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.992828833333333, 50.744423833333336]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 13:30:00', 'incident_id': 'INCD-416857-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416857-E', 'postcodes_impacted': ['B23 5QR', 'B23 5QJ', 'B23 5QZ', 'B23 5QN', 'B23 5QP', 'B23 5QW', 'B23 5QH'], 'received_time': '2021-04-24 04:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8447352857142858, 52.539068285714286]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 12:00:00', 'incident_id': 'INCD-416862-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416862-E', 'postcodes_impacted': ['GL6 7AG', 'GL6 7AE', 'GL6 7AD', 'GL6 7BA', 'GL6 7AN', 'GL6 7AF', 'GL6 7AA', 'GL6 7BE', 'GL6 7BG', 'GL5 4LG', 'GL6 7BS'], 'received_time': '2021-04-24 07:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.148370909090909, 51.75111054545455]}}, {'type': 'Feature', 'properties': {'description': 'Monitoring systems on our network have alerted us to an unexpected fault affecting a number of customers over a wide area. We apologise for the inconvenience caused, our emergency response teams have been notified and we expect your supply to be restored by 22:00', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 21:00', 'incident_id': 'INCD-506715-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506715-f', 'postcodes_impacted': ['KA197JJ', 'KA198EF'], 'received_time': '2021-04-24 09:42'}, 'geometry': {'type': 'Point', 'coordinates': [-4.654436363124507, 55.37689273462228]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland: 0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-566953-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566953-s', 'postcodes_impacted': ['TD145QE', 'TD145QF'], 'received_time': '2021-04-24 09:09'}, 'geometry': {'type': 'Point', 'coordinates': [-2.154213936141531, 55.904560080709516]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-566941-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566941-s', 'postcodes_impacted': ['KY14LP', 'KY14LS', 'KY14LT', 'KY14LW', 'KY14LY', 'KY14LZ', 'KY14NN', 'KY14NT'], 'received_time': '2021-04-24 08:37'}, 'geometry': {'type': 'Point', 'coordinates': [-3.086261476559906, 56.15152938082994]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the L34 postcode area of Prescot, affecting properties in Highfields and surrounding streets. We had no advance warning of this and only became aware of it at 8.32am. Our engineers are on their way to the local substation to investigate a possible fuse failure and our team will work to get your power back on as quickly and as safely as possible by 11.45am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 9am on April 24, 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 10:33', 'incident_id': 'INCD-375052-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-375052-r', 'postcodes_impacted': ['*******', 'L279YG', 'L341LQ', 'L341NY', 'L341YN', 'L343LD', 'L343LE', 'L343LF', 'L343LG', 'L343LJ', 'L343LN', 'L343LP', 'L343LR', 'L345QA', 'L345RH', 'L346HA', 'L346HB', 'L346HD', 'L346HE', 'L346HF', 'L346HH', 'L346HJ', 'L346HU', 'L346JJ', 'L346ND', 'L346NE', 'L346NL', 'L356HF'], 'received_time': '2021-04-24 08:32'}, 'geometry': {'type': 'Point', 'coordinates': [-2.807240333346659, 53.42869780471434]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 08:59', 'incident_id': 'INCD-566899-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566899-s', 'postcodes_impacted': ['FK78HE', 'FK78HH'], 'received_time': '2021-04-24 07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.93676216482545, 56.07035814158444]}}, {'type': 'Feature', 'properties': {'description': 'There is an unplanned power cut affecting the LL20 postcode area of Llangollen, affecting properties in Fron Bache and surrounding streets. It will be necessary for our engineers to carry out an emergency shutdown at 10am due to repairs required on a grounded overhead cable and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 12noon. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 8.22am on April 24, 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 11:00', 'incident_id': 'INCD-1810442-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810442-i', 'postcodes_impacted': ['LL114YF'], 'received_time': '2021-04-24 00:09'}, 'geometry': {'type': 'Point', 'coordinates': [-3.013567308633523, 53.06083337123116]}}, {'type': 'Feature', 'properties': {'description': 'The electricity supply to your premises may currently be affected by planned work.  You should have received a letter explaining this.  We hope to be able to restore your supplies by 24-APR-2021 16:00.  Please accept our sincere apologies for any inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 15:00', 'incident_id': 'INCD-495695-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-495695-k', 'postcodes_impacted': ['G659', 'G659BL', 'G659BS', 'G659EA', 'G659EB', 'G659ED', 'G659EE', 'G659EF', 'G659LP', 'G659LQ', 'G661QQ'], 'received_time': '2021-04-08 11:13'}, 'geometry': {'type': 'Point', 'coordinates': [-4.095354047709346, 55.96765444002957]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174056-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN15 7LG': {'class': 'models.MapDataLocation', 'lat': 53.5929, 'lng': -0.65595}}, 'received_time': '2021-04-23 15:14'}, 'geometry': {'type': 'Point', 'coordinates': [-0.65589, 53.592845]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174059-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL14 7JN': {'class': 'models.MapDataLocation', 'lat': 54.6628, 'lng': -1.67414}}, 'received_time': '2021-04-23 15:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.673419, 54.662575]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174099-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 4SN': {'class': 'models.MapDataLocation', 'lat': 53.6453, 'lng': -1.84334}}, 'received_time': '2021-04-23 21:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.843353, 53.645311]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174100-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 4XB': {'class': 'models.MapDataLocation', 'lat': 53.6494, 'lng': -1.84193}}, 'received_time': '2021-04-23 21:38'}, 'geometry': {'type': 'Point', 'coordinates': [-1.841946, 53.649444]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174121-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD17 7BP': {'class': 'models.MapDataLocation', 'lat': 53.8347, 'lng': -1.77451}}, 'received_time': '2021-04-24 04:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.774517, 53.834729]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 08:30', 'incident_id': 'INCD-174123-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 8BQ': {'class': 'models.MapDataLocation', 'lat': 53.8437, 'lng': -0.431575}, 'HU17 8BB': {'class': 'models.MapDataLocation', 'lat': 53.8432, 'lng': -0.432431}, 'HU17 8BD': {'class': 'models.MapDataLocation', 'lat': 53.8433, 'lng': -0.432564}, 'HU17 8AP': {'class': 'models.MapDataLocation', 'lat': 53.8434, 'lng': -0.433714}, 'HU17 8DZ': {'class': 'models.MapDataLocation', 'lat': 53.8439, 'lng': -0.432266}, 'HU17 8DJ': {'class': 'models.MapDataLocation', 'lat': 53.8441, 'lng': -0.432457}, 'HU17 8BG': {'class': 'models.MapDataLocation', 'lat': 53.8439, 'lng': -0.432328}, 'HU17 8QH': {'class': 'models.MapDataLocation', 'lat': 53.844, 'lng': -0.499295}, 'HU17 8BH': {'class': 'models.MapDataLocation', 'lat': 53.8436, 'lng': -0.432293}, 'HU17 8AX': {'class': 'models.MapDataLocation', 'lat': 53.8437, 'lng': -0.433446}, 'HU17 8BL': {'class': 'models.MapDataLocation', 'lat': 53.8445, 'lng': -0.432412}}, 'received_time': '2021-04-24 04:21'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4386668181818182, 53.84375536363636]}}, {'type': 'Feature', 'properties': {'description': 'U/G HV Mains Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 08:15', 'incident_id': 'INCD-174132-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 8HT': {'class': 'models.MapDataLocation', 'lat': 54.8655, 'lng': -1.74794}, 'DH9 8LB': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74444}, 'DH9 8LE': {'class': 'models.MapDataLocation', 'lat': 54.8633, 'lng': -1.74572}, 'DH9 8LD': {'class': 'models.MapDataLocation', 'lat': 54.8636, 'lng': -1.74571}, 'DH9 8PF': {'class': 'models.MapDataLocation', 'lat': 54.8552, 'lng': -1.75128}, 'DH9 8SH': {'class': 'models.MapDataLocation', 'lat': 54.8654, 'lng': -1.74139}, 'DH9 8SF': {'class': 'models.MapDataLocation', 'lat': 54.8643, 'lng': -1.74429}, 'DH9 8LP': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74564}, 'DH9 8SG': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74421}, 'DH9 8SL': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74225}, 'DH9 8SJ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74181}, 'DH9 8LT': {'class': 'models.MapDataLocation', 'lat': 54.8626, 'lng': -1.74524}, 'DH9 8LS': {'class': 'models.MapDataLocation', 'lat': 54.8627, 'lng': -1.74485}, 'DH9 8SQ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74282}, 'DH9 6DJ': {'class': 'models.MapDataLocation', 'lat': 54.8563, 'lng': -1.67565}, 'DH9 8SN': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74275}, 'DH9 8JZ': {'class': 'models.MapDataLocation', 'lat': 54.862, 'lng': -1.74312}, 'DH9 8PS': {'class': 'models.MapDataLocation', 'lat': 54.8604, 'lng': -1.74774}, 'DH9 8LW': {'class': 'models.MapDataLocation', 'lat': 54.8625, 'lng': -1.74594}, 'DH9 8EY': {'class': 'models.MapDataLocation', 'lat': 54.863, 'lng': -1.74392}, 'DH9 8EX': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74659}, 'DH9 8RW': {'class': 'models.MapDataLocation', 'lat': 54.865, 'lng': -1.74661}, 'DH9 8TX': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74037}, 'DH9 8EQ': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74706}, 'DH9 8EU': {'class': 'models.MapDataLocation', 'lat': 54.8637, 'lng': -1.74503}, 'DH9 8EB': {'class': 'models.MapDataLocation', 'lat': 54.8652, 'lng': -1.7483}, 'DH9 8RP': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74643}, 'DH9 8EF': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74585}, 'DH9 8EG': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74655}, 'DH9 8RR': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74642}, 'DH9 8ED': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74728}, 'DH9 8EE': {'class': 'models.MapDataLocation', 'lat': 54.8642, 'lng': -1.74485}}, 'received_time': '2021-04-24 05:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7430718437500001, 54.86355999999999]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 13:00', 'incident_id': 'INCD-174138-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF11 8QL': {'class': 'models.MapDataLocation', 'lat': 53.7087, 'lng': -1.27573}}, 'received_time': '2021-04-24 05:21'}, 'geometry': {'type': 'Point', 'coordinates': [-1.275745, 53.708677]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 11:00', 'incident_id': 'INCD-174141-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 5LU': {'class': 'models.MapDataLocation', 'lat': 54.072, 'lng': -1.99963}, 'BD23 5NP': {'class': 'models.MapDataLocation', 'lat': 54.0688, 'lng': -2.00484}, 'BD23 5NA': {'class': 'models.MapDataLocation', 'lat': 54.0722, 'lng': -2.00038}, 'BD23 5NQ': {'class': 'models.MapDataLocation', 'lat': 54.0714, 'lng': -2.00001}, 'BD23 5LS': {'class': 'models.MapDataLocation', 'lat': 54.071, 'lng': -1.9998}, 'BD23 5LB': {'class': 'models.MapDataLocation', 'lat': 54.0706, 'lng': -1.99778}, 'BD23 5AD': {'class': 'models.MapDataLocation', 'lat': 54.0722, 'lng': -1.99781}}, 'received_time': '2021-04-24 06:09'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0000492857142853, 54.071175428571436]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 11:00', 'incident_id': 'INCD-174150-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH8 0PG': {'class': 'models.MapDataLocation', 'lat': 54.8918, 'lng': -1.84117}}, 'received_time': '2021-04-24 07:48'}, 'geometry': {'type': 'Point', 'coordinates': [-1.841166, 54.891769]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 11:30', 'incident_id': 'INCD-174155-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 7PG': {'class': 'models.MapDataLocation', 'lat': 53.7738, 'lng': -1.37284}}, 'received_time': '2021-04-24 08:24'}, 'geometry': {'type': 'Point', 'coordinates': [-1.372887, 53.773805]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 11:30', 'incident_id': 'INCD-174156-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S35 2XS': {'class': 'models.MapDataLocation', 'lat': 53.4647, 'lng': -1.48571}}, 'received_time': '2021-04-24 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.485706, 53.46473]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174157-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS12 2NH': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.58614}}, 'received_time': '2021-04-24 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.586135, 53.799735]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 12:00', 'incident_id': 'INCD-174158-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD1 6LF': {'class': 'models.MapDataLocation', 'lat': 53.6602, 'lng': -1.77991}, 'HD1 6LG': {'class': 'models.MapDataLocation', 'lat': 53.6602, 'lng': -1.77991}, 'HD1 6LQ': {'class': 'models.MapDataLocation', 'lat': 53.6614, 'lng': -1.7804}, 'HD1 6LD': {'class': 'models.MapDataLocation', 'lat': 53.6593, 'lng': -1.77895}, 'HD1 6LJ': {'class': 'models.MapDataLocation', 'lat': 53.6593, 'lng': -1.7809}}, 'received_time': '2021-04-24 07:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.780048, 53.659847]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 14:59', 'incident_id': '10646671', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK11 7TA', 'SK11 7TP', 'SK11 7TR', 'SK11 7TS', 'SK11 7TT', 'SK11 7TX', 'SK11 7XH', 'SK11 7XJ'], 'received_time': '2021-04-24 08:58'}, 'geometry': {'type': 'Point', 'coordinates': [-2.130231125, 53.242416750000004]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 10:30', 'incident_id': '60508776', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA23 3DN', 'LA23 3BT', 'LA23 3BX', 'LA23 3BY', 'LA23 3BZ', 'LA23 3DH', 'LA23 3EA', 'LA23 3DJ', 'LA23 1DX', 'LA23 3DQ', 'LA23 3DX'], 'received_time': '2021-04-24 04:15'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9190389090909092, 54.36639236363636]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 15:30', 'incident_id': '40811205', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR6 8RD', 'PR6 8RJ', 'PR6 8RL', 'PR6 8RQ', 'PR6 8RR', 'PR6 8UA', 'PR6 9RD'], 'received_time': '2021-04-23 22:07'}, 'geometry': {'type': 'Point', 'coordinates': [-2.565773142857143, 53.68013571428572]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 10:00', 'incident_id': '60507013', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA14 5XH', 'CA14 5UH', 'CA14 5UJ', 'CA14 5UN', 'CA14 5XD', 'CA14 5XJ', 'CA14 5XW', 'CA14 5XN', 'CA14 5XP'], 'received_time': '2021-04-02 06:52'}, 'geometry': {'type': 'Point', 'coordinates': [-3.539952333333334, 54.59405622222222]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});