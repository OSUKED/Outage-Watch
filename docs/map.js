document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T01:00:00', 'incident_id': 'INCD-231679-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231679-Z', 'postcodes_impacted': ['EN26BN', 'EN26LE', 'EN13ED', 'EN13EF', 'EN13EG'], 'received_time': '2021-04-18T22:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08101181882386922, 51.65239850641598]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:00:00', 'incident_id': 'INCD-248321-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248321-G', 'postcodes_impacted': ['RH15BZ', 'RH15EA', 'RH15EB', 'RH15ED', 'RH15EE', 'RH15EG', 'RH15EJ'], 'received_time': '2021-04-18T22:30:53'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16683998702178623, 51.19836638895191]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T04:00:00', 'incident_id': 'INCD-231628-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231628-Z', 'postcodes_impacted': ['IP112AA', 'IP117PJ', 'IP117PL', 'IP117PQ', 'IP117PT', 'IP117PW', 'IP118AF', 'IP118AH', 'IP118AQ'], 'received_time': '2021-04-18T09:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3467314811647677, 51.959905548147724]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T06:00:00', 'incident_id': 'INCD-260266-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260266-J', 'postcodes_impacted': ['E163DX', 'NW102PN', 'NW102PP', 'NW102PR', 'NW102PX', 'NW25BU', 'NW25BY', 'NW25DJ', 'NW25DL', 'NW25EA'], 'received_time': '2021-04-18T20:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.20403668522784618, 51.544038362808394]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable on the high voltage network affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T01:00:00', 'incident_id': 'INCD-231686-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231686-Z', 'postcodes_impacted': ['HP42ST', 'HP42SU', 'HP42SZ', 'HP53PW'], 'received_time': '2021-04-18T18:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5748712147661965, 51.74557702187205]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:00:00', 'incident_id': 'INCD-248312-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248312-G', 'postcodes_impacted': ['TN354SN', 'TN354SD'], 'received_time': '2021-04-18T18:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5714416376972302, 50.90862633958788]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:30:00', 'incident_id': 'INCD-248320-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248320-G', 'postcodes_impacted': ['TN393UD', 'TN393UE', 'TN394LA', 'TN394LB', 'TN394LE', 'TN394LF', 'TN394QS', 'TN394SA'], 'received_time': '2021-04-18T21:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44218924952961663, 50.84552000300527]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8565\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 00:30:00', 'incident_id': 'HB8565', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO8 9UF', 'PO8 9UN', 'PO8 9UP', 'PO8 9UR'], 'received_time': '2021-04-18 22:43:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0269902499999999, 50.90039175]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8454\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'HB8454', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO33', 'PO36 8DA', 'PO36 8DW', 'PO36 8JP', 'PO36 8JR', 'PO36 8JT', 'PO36 8JU', 'PO36 8JX', 'PO36 8LB'], 'received_time': '2021-04-18 15:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.155699, 50.653097625]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-103-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-103-q', 'postcodes_impacted': ['BS39 7RY', 'BS39 7RF', 'BS39 7SY'], 'received_time': '2021-04-18 15:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4981076666666664, 51.30156933333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 04:30:00', 'incident_id': 'INCD-120-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-120-q', 'postcodes_impacted': ['BA6 8NJ'], 'received_time': '2021-04-18 13:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.656035, 51.146764]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:00:00', 'incident_id': 'INCD-106-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-106-q', 'postcodes_impacted': ['TR11 4AU', 'TR11 4ET', 'TR11 4AT', 'TR11 3HH', 'TR11 3LG', 'TR11 3HL', 'TR11 3XP'], 'received_time': '2021-04-18 15:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.064948857142857, 50.15164814285714]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-358059-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358059-G', 'postcodes_impacted': ['LD7 1HE', 'LD7 1HB', 'LD7 1RT', 'LD7 1HF', 'LD7 1II'], 'received_time': '2021-04-18 17:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0551735, 52.3426405]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:00:00', 'incident_id': 'INCD-12191-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12191-A', 'postcodes_impacted': ['B19 3LN', 'B19 3PY', 'B19 3QL', 'B19 3QG', 'B19 3PU', 'B19 3PL', 'B19 3QD', 'B19 3SD', 'B19 3QA', 'B19 3AB', 'B23 6GA', 'B19 3QE', 'B19 3RZ', 'B4 6HW', 'B4 6EP', 'B19 3QH'], 'received_time': '2021-04-18 22:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8974743125, 52.489596500000005]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:00:00', 'incident_id': 'INCD-12190-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12190-A', 'postcodes_impacted': ['B19 3PS', 'B19 3HD', 'B19 3PY', 'B19 3NP', 'B19 3LS', 'B19 3LB'], 'received_time': '2021-04-18 21:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9012628333333332, 52.48847933333334]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:30:00', 'incident_id': 'INCD-152839-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152839-H', 'postcodes_impacted': ['LE10 1PJ'], 'received_time': '2021-04-18 16:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.374489, 52.556775]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:30:00', 'incident_id': 'INCD-44343-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44343-D', 'postcodes_impacted': ['LE3 3ET', 'LE3 3NU'], 'received_time': '2021-04-18 22:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2200315, 52.617993]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-44337-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44337-D', 'postcodes_impacted': ['DE21 4LY', 'DE21 4LZ'], 'received_time': '2021-04-18 17:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4321655, 52.9355535]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the EH48 Postcode area of Bathgate, affecting a large number of customers in a wide spread area. We had no advance warning of the power cut and only became aware of it at 12.05AM. Our control centre will attempt to reset the network remotely to restore power in stages, and we will also send our next available engineer to attend site. Our team will work to get your power back on as quickly and as safely as possible by 2.15AM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 12.07AM on 19th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 01:06', 'incident_id': 'INCD-564967-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564967-s', 'postcodes_impacted': ['EH421QG', 'EH470EU', 'EH471AA', 'EH479NO', 'EH48', 'EH481AA', 'EH481AZ', 'EH481HE', 'EH481HH', 'EH481NN', 'EH481NU', 'EH481NX', 'EH481PG', 'EH481PH', 'EH481PP', 'EH481PW', 'EH481TJ', 'EH481TL', 'EH481TP', 'EH481TQ', 'EH481TR', 'EH481TT', 'EH481TU', 'EH481TW', 'EH481XX', 'EH482AA', 'EH482AB', 'EH482AD', 'EH482AG', 'EH482AH', 'EH482AJ', 'EH482AL', 'EH482AN', 'EH482AP', 'EH482AQ', 'EH482AR', 'EH482AS', 'EH482AT', 'EH482AU', 'EH482AW', 'EH482AY', 'EH482AZ', 'EH482BA', 'EH482BB', 'EH482BD', 'EH482BE', 'EH482BF', 'EH482BG', 'EH482BH', 'EH482BL', 'EH482BN', 'EH482BP', 'EH482BQ', 'EH482BS', 'EH482BT', 'EH482BU', 'EH482BW', 'EH482BX', 'EH482BY', 'EH482BZ', 'EH482DA', 'EH482DB', 'EH482DD', 'EH482DE', 'EH482DF', 'EH482DG', 'EH482DT', 'EH482DU', 'EH482DX', 'EH482DY', 'EH482EX', 'EH482FF', 'EH482HH', 'EH482HR', 'EH482QG', 'EH482QH', 'EH482QL', 'EH482QN', 'EH482QP', 'EH482QQ', 'EH482QR', 'EH482QS', 'EH482QT', 'EH482QU', 'EH482QW', 'EH482QX', 'EH482QY', 'EH482RA', 'EH482RD', 'EH482TA', 'EH482TB', 'EH482TD', 'EH482TE', 'EH482TF', 'EH483JQ', 'EH484EU', 'EH484HU', 'EH484JJ', 'EH484JS', 'EH484PA', 'EH484PH', 'EH484PJ', 'EH484PL', 'EH484PN', 'EH484PP', 'EH484PR', 'EH484PS', 'EH484XX', 'EH521AA'], 'received_time': '2021-04-19 00:06'}, 'geometry': {'type': 'Point', 'coordinates': [-3.643903696117041, 55.90103733207939]}}, {'type': 'Feature', 'properties': {'description': 'There is power cut in the ML6 postcode area of Airdrie. We had no advance warning of this and only became aware of it at 8.55pm. Repairs are taking longer than expected because of further fault finding investigations being required and our team are now working to get your power back on as quickly and as safely as possible by 2.00am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated 10.59pm on Sunday 18th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 01:00', 'incident_id': 'INCD-564931-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564931-s', 'postcodes_impacted': ['ML60LA', 'ML60LB', 'ML60LD', 'ML60LF', 'ML60LG', 'ML60LH', 'ML60LJ', 'ML60LL', 'ML60LN', 'ML60LP', 'ML60LQ', 'ML60LR', 'ML60LS', 'ML60LU', 'ML60LW', 'ML60LX', 'ML60NG', 'ML60NQ', 'ML60PN', 'ML60PP', 'ML60PQ', 'ML66SE', 'ML66SF', 'ML66SH', 'ML66SQ', 'ML67FP', 'ML67JA', 'ML67SP', 'ML67SS', 'ML67ST'], 'received_time': '2021-04-18 20:55'}, 'geometry': {'type': 'Point', 'coordinates': [-3.990188774111173, 55.881142102705645]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 00:00', 'incident_id': 'INCD-1809476-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809476-i', 'postcodes_impacted': ['L320RE', 'L320RG', 'L320RH', 'L320RJ', 'L320RL', 'L320RP', 'L320UZ', 'L324RY', 'L324RZ', 'L324SF', 'L324SG', 'L324SH', 'L324SJ', 'L324SL', 'L324SN', 'L324SP', 'L324SQ', 'L324SR', 'L324SS', 'L324SU', 'L324SW', 'L324SX', 'L324TA', 'L324TB', 'L324TE', 'L324TG', 'L324TH', 'L324TQ', 'L324XD'], 'received_time': '2021-04-18 18:47'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9061342835164226, 53.47918628023177]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'INCD-172541-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG4 1LE': {'class': 'models.MapDataLocation', 'lat': 54.1383, 'lng': -1.52171}}, 'received_time': '2021-04-18 18:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.521745, 54.138165]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': 'INCD-172548-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 8PE': {'class': 'models.MapDataLocation', 'lat': 54.5206, 'lng': -1.57082}}, 'received_time': '2021-04-18 18:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.570859, 54.520624]}}, {'type': 'Feature', 'properties': {'description': 'LV O/H Plant In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 01:00', 'incident_id': 'INCD-172568-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8LL': {'class': 'models.MapDataLocation', 'lat': 53.4223, 'lng': -1.21048}, 'S66 8NX': {'class': 'models.MapDataLocation', 'lat': 53.3999, 'lng': -1.15368}, 'S66 8FE': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21198}, 'S66 8ES': {'class': 'models.MapDataLocation', 'lat': 53.4227, 'lng': -1.2296}, 'S66 8NW': {'class': 'models.MapDataLocation', 'lat': 53.4044, 'lng': -1.185}, 'S66 8NE': {'class': 'models.MapDataLocation', 'lat': 53.4212, 'lng': -1.21133}, 'S66 8LN': {'class': 'models.MapDataLocation', 'lat': 53.4222, 'lng': -1.21439}, 'S66 8ND': {'class': 'models.MapDataLocation', 'lat': 53.4219, 'lng': -1.20995}, 'S66 8NA': {'class': 'models.MapDataLocation', 'lat': 53.4214, 'lng': -1.21957}, 'S66 8LW': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21445}}, 'received_time': '2021-04-18 19:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2061004, 53.4179516]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:15', 'incident_id': 'INCD-172578-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3SH': {'class': 'models.MapDataLocation', 'lat': 53.7353, 'lng': -0.369786}, 'HU13 0RR': {'class': 'models.MapDataLocation', 'lat': 53.7217, 'lng': -0.43777}, 'HU3 3SF': {'class': 'models.MapDataLocation', 'lat': 53.7348, 'lng': -0.370563}, 'HU3 3LD': {'class': 'models.MapDataLocation', 'lat': 53.7342, 'lng': -0.373089}, 'HU3 3SG': {'class': 'models.MapDataLocation', 'lat': 53.7352, 'lng': -0.370774}, 'HU3 3SD': {'class': 'models.MapDataLocation', 'lat': 53.7345, 'lng': -0.369649}, 'HU3 3SE': {'class': 'models.MapDataLocation', 'lat': 53.7344, 'lng': -0.370882}, 'HU13 0JU': {'class': 'models.MapDataLocation', 'lat': 53.7298, 'lng': -0.459253}, 'HU3 3SQ': {'class': 'models.MapDataLocation', 'lat': 53.7349, 'lng': -0.369088}, 'HU3 3SN': {'class': 'models.MapDataLocation', 'lat': 53.7352, 'lng': -0.36768}, 'HU3 3LB': {'class': 'models.MapDataLocation', 'lat': 53.7342, 'lng': -0.373616}, 'HU3 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.7353, 'lng': -0.369361}, 'HU3 3SW': {'class': 'models.MapDataLocation', 'lat': 53.7355, 'lng': -0.371459}, 'HU3 3TP': {'class': 'models.MapDataLocation', 'lat': 53.7362, 'lng': -0.372708}, 'HU3 3ST': {'class': 'models.MapDataLocation', 'lat': 53.7345, 'lng': -0.37265}}, 'received_time': '2021-04-18 21:01'}, 'geometry': {'type': 'Point', 'coordinates': [-0.38119359999999997, 53.73370146666666]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:15', 'incident_id': 'INCD-172579-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S81 9AY': {'class': 'models.MapDataLocation', 'lat': 53.3586, 'lng': -1.12259}}, 'received_time': '2021-04-18 21:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.122527, 53.358561]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:30', 'incident_id': 'INCD-172580-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S9 1QD': {'class': 'models.MapDataLocation', 'lat': 53.423, 'lng': -1.42357}}, 'received_time': '2021-04-18 21:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.423595, 53.423009]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:30', 'incident_id': 'INCD-172582-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL17 8NX': {'class': 'models.MapDataLocation', 'lat': 54.6875, 'lng': -1.56653}}, 'received_time': '2021-04-18 21:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.566548, 54.687528]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 01:45', 'incident_id': 'INCD-172583-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S62 7UF': {'class': 'models.MapDataLocation', 'lat': 53.4804, 'lng': -1.4456}, 'S62 7UP': {'class': 'models.MapDataLocation', 'lat': 53.4777, 'lng': -1.44799}, 'S62 7UQ': {'class': 'models.MapDataLocation', 'lat': 53.4785, 'lng': -1.447}, 'S62 7UR': {'class': 'models.MapDataLocation', 'lat': 53.4783, 'lng': -1.44914}, 'S62 7US': {'class': 'models.MapDataLocation', 'lat': 53.4775, 'lng': -1.44662}, 'S62 7UB': {'class': 'models.MapDataLocation', 'lat': 53.4777, 'lng': -1.45023}, 'S62 7UA': {'class': 'models.MapDataLocation', 'lat': 53.477, 'lng': -1.44691}, 'S62 7UU': {'class': 'models.MapDataLocation', 'lat': 53.4786, 'lng': -1.4457}, 'S62 7TN': {'class': 'models.MapDataLocation', 'lat': 53.4797, 'lng': -1.42102}, 'S62 7UW': {'class': 'models.MapDataLocation', 'lat': 53.4783, 'lng': -1.45021}, 'S62 7UN': {'class': 'models.MapDataLocation', 'lat': 53.4682, 'lng': -1.38733}}, 'received_time': '2021-04-18 22:35'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4398110909090907, 53.47741754545455]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:30', 'incident_id': 'PPC038703', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S61 2SQ': {'class': 'models.MapDataLocation', 'lat': 53.4465, 'lng': -1.42867}, 'S61 2SG': {'class': 'models.MapDataLocation', 'lat': 53.4489, 'lng': -1.4279}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4282745000000001, 53.447692]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'PPC039414', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1PN': {'class': 'models.MapDataLocation', 'lat': 54.4933, 'lng': -1.46696}, 'DL2 1PW': {'class': 'models.MapDataLocation', 'lat': 54.4952, 'lng': -1.45798}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.462247, 54.493803]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:00', 'incident_id': 'PPC039462', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN14 0DF': {'class': 'models.MapDataLocation', 'lat': 53.6731, 'lng': -1.05649}}, 'received_time': '2021-04-19 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.056237, 53.67338]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:30', 'incident_id': 'PPC039487', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0QY': {'class': 'models.MapDataLocation', 'lat': 54.6372, 'lng': -2.09221}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.092211, 54.637169]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 14:30', 'incident_id': 'PPC039607', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}, 'HX3 9UG': {'class': 'models.MapDataLocation', 'lat': 53.714, 'lng': -1.83573}}, 'received_time': '2021-04-19 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.831235, 53.715874]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 14:00', 'incident_id': 'PPC039750', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 9UA': {'class': 'models.MapDataLocation', 'lat': 54.8358, 'lng': -2.23509}, 'NE47 9UG': {'class': 'models.MapDataLocation', 'lat': 54.8313, 'lng': -2.23528}, 'NE47 9UH': {'class': 'models.MapDataLocation', 'lat': 54.8274, 'lng': -2.23202}, 'NE47 9UB': {'class': 'models.MapDataLocation', 'lat': 54.8351, 'lng': -2.2339}, 'NE47 9UD': {'class': 'models.MapDataLocation', 'lat': 54.8324, 'lng': -2.23122}, 'NE47 9UE': {'class': 'models.MapDataLocation', 'lat': 54.8271, 'lng': -2.25026}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2323276666666665, 54.8323885]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-23 15:30', 'incident_id': 'PPC039781', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE48 3EF': {'class': 'models.MapDataLocation', 'lat': 55.0729, 'lng': -2.31716}, 'NE48 3EE': {'class': 'models.MapDataLocation', 'lat': 55.0692, 'lng': -2.31243}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3148795, 55.071038]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:30', 'incident_id': 'PPC039786', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 5PS': {'class': 'models.MapDataLocation', 'lat': 54.1058, 'lng': -2.04057}, 'BD23 5PW': {'class': 'models.MapDataLocation', 'lat': 54.106, 'lng': -2.04106}, 'BD23 5HS': {'class': 'models.MapDataLocation', 'lat': 54.103, 'lng': -2.03}, 'BD23 5RB': {'class': 'models.MapDataLocation', 'lat': 54.1463, 'lng': -2.04859}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.04014775, 54.11531875]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:00', 'incident_id': 'PPC039787', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN10 6QU': {'class': 'models.MapDataLocation', 'lat': 53.4437, 'lng': -1.00626}, 'DN10 6QS': {'class': 'models.MapDataLocation', 'lat': 53.4412, 'lng': -1.00566}, 'DN10 6QY': {'class': 'models.MapDataLocation', 'lat': 53.4445, 'lng': -1.00538}, 'DN10 6RG': {'class': 'models.MapDataLocation', 'lat': 53.4469, 'lng': -1.00584}, 'DN10 6RH': {'class': 'models.MapDataLocation', 'lat': 53.4423, 'lng': -1.00497}, 'DN10 6DH': {'class': 'models.MapDataLocation', 'lat': 53.4379, 'lng': -1.00323}, 'DN10 6QJ': {'class': 'models.MapDataLocation', 'lat': 53.4373, 'lng': -1.01371}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0064837142857141, 53.44211814285715]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039789', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S8 8BG': {'class': 'models.MapDataLocation', 'lat': 53.3332, 'lng': -1.43553}, 'S18 4BA': {'class': 'models.MapDataLocation', 'lat': 53.3051, 'lng': -1.43744}, 'S18 3BE': {'class': 'models.MapDataLocation', 'lat': 53.3136, 'lng': -1.43517}, 'S18 3BF': {'class': 'models.MapDataLocation', 'lat': 53.3113, 'lng': -1.44239}, 'S18 3BG': {'class': 'models.MapDataLocation', 'lat': 53.3134, 'lng': -1.44494}, 'S18 3AW': {'class': 'models.MapDataLocation', 'lat': 53.3114, 'lng': -1.45627}, 'S18 3BH': {'class': 'models.MapDataLocation', 'lat': 53.3125, 'lng': -1.44156}, 'S18 8UE': {'class': 'models.MapDataLocation', 'lat': 53.2999, 'lng': -1.49495}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.448412125, 53.31253975]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'PPC039791', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 9SA': {'class': 'models.MapDataLocation', 'lat': 54.0349, 'lng': -0.69591}, 'YO17 9TF': {'class': 'models.MapDataLocation', 'lat': 54.0437, 'lng': -0.696457}, 'YO17 9TE': {'class': 'models.MapDataLocation', 'lat': 54.0495, 'lng': -0.666675}, 'YO17 9TD': {'class': 'models.MapDataLocation', 'lat': 54.0723, 'lng': -0.662154}}, 'received_time': '2021-04-19 10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6844914999999999, 54.04981674999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:45', 'incident_id': 'PPC039795', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TP': {'class': 'models.MapDataLocation', 'lat': 54.0603, 'lng': -0.706953}}, 'received_time': '2021-04-19 11:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.706978, 54.060366]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 13:00', 'incident_id': 'PPC039806', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU15 1JX': {'class': 'models.MapDataLocation', 'lat': 53.7374, 'lng': -0.566683}, 'HU15 1JL': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.572335}, 'HU15 1JN': {'class': 'models.MapDataLocation', 'lat': 53.7373, 'lng': -0.570127}, 'HU15 1JS': {'class': 'models.MapDataLocation', 'lat': 53.7366, 'lng': -0.567196}, 'HU15 1JR': {'class': 'models.MapDataLocation', 'lat': 53.7382, 'lng': -0.569051}, 'HU15 1JU': {'class': 'models.MapDataLocation', 'lat': 53.7368, 'lng': -0.567869}}, 'received_time': '2021-04-19 10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5688315, 53.73737]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to move equipment in order to allow another organisation to work close to our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:00', 'incident_id': 'PPC039815', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR4 9DX': {'class': 'models.MapDataLocation', 'lat': 54.892, 'lng': -1.45067}, 'SR4 9DY': {'class': 'models.MapDataLocation', 'lat': 54.8924, 'lng': -1.44978}, 'SR4 9HE': {'class': 'models.MapDataLocation', 'lat': 54.8917, 'lng': -1.44965}, 'SR4 9DU': {'class': 'models.MapDataLocation', 'lat': 54.8931, 'lng': -1.44906}, 'SR4 9DS': {'class': 'models.MapDataLocation', 'lat': 54.8935, 'lng': -1.44928}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4497214, 54.8925578]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-24 13:00', 'incident_id': 'PPC039817', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0SL': {'class': 'models.MapDataLocation', 'lat': 54.6232, 'lng': -2.08176}, 'DL12 0TN': {'class': 'models.MapDataLocation', 'lat': 54.6215, 'lng': -2.07872}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0796565, 54.622524999999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-24 13:00', 'incident_id': 'PPC039819', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0ST': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.0797}, 'DL12 0TH': {'class': 'models.MapDataLocation', 'lat': 54.6213, 'lng': -2.07999}, 'DL12 0TJ': {'class': 'models.MapDataLocation', 'lat': 54.6206, 'lng': -2.08013}, 'DL12 0NG': {'class': 'models.MapDataLocation', 'lat': 54.6172, 'lng': -2.08134}, 'DL12 0TQ': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.07866}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0798144, 54.6208522]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 14:00', 'incident_id': 'PPC039824', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 7SD': {'class': 'models.MapDataLocation', 'lat': 54.2412, 'lng': -0.990266}, 'YO62 5HZ': {'class': 'models.MapDataLocation', 'lat': 54.2427, 'lng': -1.0121}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9971615, 54.240981500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 16:00', 'incident_id': 'PPC039859', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 0JN': {'class': 'models.MapDataLocation', 'lat': 53.845, 'lng': -0.403878}, 'HU17 0JJ': {'class': 'models.MapDataLocation', 'lat': 53.8428, 'lng': -0.403095}}, 'received_time': '2021-04-19 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.403291, 53.8440485]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 11:30', 'incident_id': 'PPC039891', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS12 1PW': {'class': 'models.MapDataLocation', 'lat': 54.5824, 'lng': -0.998236}, 'TS12 1PP': {'class': 'models.MapDataLocation', 'lat': 54.5847, 'lng': -1.00253}}, 'received_time': '2021-04-19 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0004195, 54.5835505]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-22 15:30', 'incident_id': 'PPC039892', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS11 8AA': {'class': 'models.MapDataLocation', 'lat': 54.5851, 'lng': -1.01831}}, 'received_time': '2021-04-19 09:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.02017, 54.587138]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:00', 'incident_id': 'PPC039987', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8TE': {'class': 'models.MapDataLocation', 'lat': 53.7534, 'lng': -1.9149}, 'HX2 8SW': {'class': 'models.MapDataLocation', 'lat': 53.7511, 'lng': -1.91364}, 'HX2 8SN': {'class': 'models.MapDataLocation', 'lat': 53.752, 'lng': -1.91182}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.91345, 53.75218166666667]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 01:30', 'incident_id': '40810481', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BL1 2BQ', 'BL1 2EF', 'BL1 2EG', 'BL1 2EJ', 'BL1 2EN', 'BL1 2EQ', 'BL1 2HA'], 'received_time': '2021-04-18 18:13'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4282311428571433, 53.581980571428566]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': '10646175', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK23 7EW'], 'received_time': '2021-04-18 16:26'}, 'geometry': {'type': 'Point', 'coordinates': [-1.96471, 53.323568]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 01:00', 'incident_id': '10646019', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK7 1JG'], 'received_time': '2021-04-17 12:55'}, 'geometry': {'type': 'Point', 'coordinates': [-2.171467, 53.353418]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});