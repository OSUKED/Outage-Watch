document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248504-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248504-G', 'postcodes_impacted': ['TN376EH', 'TN341EU', 'TN341LD', 'TN376EG', 'TN376EN', 'TN376EW'], 'received_time': '2021-04-20T14:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5674834049991152, 50.85404936575778]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T06:30:00', 'incident_id': 'INCD-248519-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248519-G', 'postcodes_impacted': ['CR27AF', 'CR27AH', 'CR27AQ'], 'received_time': '2021-04-21T02:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08976283565085126, 51.35668000343582]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:00:00', 'incident_id': 'INCD-6430-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6430-O', 'postcodes_impacted': ['IP68PS', 'IP68PT'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0627704830022258, 52.16178226094412]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:30:00', 'incident_id': 'INCD-228178-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228178-Z', 'postcodes_impacted': ['RM13AB', 'RM13AD', 'RM141RS', 'RM41HP', 'RM41RS', 'RM41RT', 'RM41RX'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.19684907537984106, 51.6180112210162]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T16:00:00', 'incident_id': 'INCD-229681-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229681-Z', 'postcodes_impacted': ['CM234AU', 'CM234BA', 'CM234RB'], 'received_time': '2021-04-21T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.15773368198621004, 51.836753587815316]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T16:00:00', 'incident_id': 'INCD-229877-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229877-Z', 'postcodes_impacted': ['CO78RX', 'CO78RY', 'CO78RZ'], 'received_time': '2021-04-21T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0746576405971673, 51.869021198396275]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:30:00', 'incident_id': 'INCD-53691-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53691-V', 'postcodes_impacted': ['ME172AH', 'ME172AL'], 'received_time': '2021-04-21T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6804629610118482, 51.21494397951072]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T16:15:00', 'incident_id': 'INCD-229474-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229474-Z', 'postcodes_impacted': ['RM41JH', 'RM41JP'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.18826665363088504, 51.627229140678324]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:00:00', 'incident_id': 'INCD-5667-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-5667-O', 'postcodes_impacted': ['SS30LZ', 'SS30NH'], 'received_time': '2021-02-10T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.766584639754749, 51.56662546317699]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T11:00:00', 'incident_id': 'INCD-230283-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230283-Z', 'postcodes_impacted': ['SG111HG', 'SG111HH', 'SG111HL', 'SG111HP', 'SG111HQ', 'SG111HW', 'SG99BS', 'SG99LZ', 'SG99NA', 'SG99NB', 'SG99NE'], 'received_time': '2021-04-21T08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.015896499529591074, 51.90613949898614]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T13:00:00', 'incident_id': 'INCD-226986-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-226986-Z', 'postcodes_impacted': ['NR203FH', 'NR203FJ', 'NR203FL', 'NR203HX', 'NR203LF', 'NR203LG', 'NR203LH', 'NR203LJ', 'NR203LQ', 'NR203SL'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.050409250938144, 52.65019462103506]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T13:00:00', 'incident_id': 'INCD-229465-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229465-Z', 'postcodes_impacted': ['MK454SJ', 'MK454SL'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.46749474626876075, 51.970229751072395]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T14:00:00', 'incident_id': 'INCD-227229-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227229-Z', 'postcodes_impacted': ['CO112QB', 'CO77XA'], 'received_time': '2021-04-21T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0242107818442494, 51.912411489097714]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:00:00', 'incident_id': 'INCD-228595-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228595-Z', 'postcodes_impacted': ['HP226PN'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.734064428368209, 51.74434922759432]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T12:00:00', 'incident_id': 'INCD-229224-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229224-Z', 'postcodes_impacted': ['IP279BW'], 'received_time': '2021-04-21T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5871453609711553, 52.38153727242924]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-21T15:30:00', 'incident_id': 'INCD-53685-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53685-V', 'postcodes_impacted': ['BN274EB'], 'received_time': '2021-04-21T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.251260556432821, 50.90681009604829]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9795\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-21 07:00:00', 'incident_id': 'HB9795', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH6 5AR', 'BH6 5AX', 'BH6 5HJ', 'BH6 5JG', 'BH6 5JH', 'BH6 5JQ', 'BH6 5JT', 'BH6 5LA', 'BH6 5LB'], 'received_time': '2021-04-21 03:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8078662222222224, 50.733924555555554]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9785\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-21 13:30:00', 'incident_id': 'HB9785', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL1 5NH', 'SL1 5NT', 'SL1 5NU', 'SL1 5NX', 'SL1 5PA', 'SL1 6AA', 'SL1 6AB', 'SL1 6BB'], 'received_time': '2021-04-21 02:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.65026225, 51.519450250000006]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9767\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-21 12:00:00', 'incident_id': 'HB9767', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL4 3AQ', 'SL4 3EG', 'SL4 3EL', 'SL4 3EN', 'SL4 3EP', 'SL4 3EQ', 'SL4 3ER', 'SL4 3JA', 'SL4 3JB', 'SL4 3JD', 'SL4 3SJ', 'SL4 3SS'], 'received_time': '2021-04-21 00:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6113810000000002, 51.474563249999996]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-21 05:15:00', 'incident_id': 'INCD-358275-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358275-G', 'postcodes_impacted': ['B14 5UE', 'B14 4TA'], 'received_time': '2021-04-20 17:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8811689999999999, 52.4035055]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-21 08:00:00', 'incident_id': 'INCD-152996-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152996-H', 'postcodes_impacted': ['DN10 5AF'], 'received_time': '2021-04-20 21:39:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.928483, 53.398185]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-21 07:30:00', 'incident_id': 'INCD-44424-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44424-D', 'postcodes_impacted': ['DE56 1UU'], 'received_time': '2021-04-20 06:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.483692, 53.017048]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-21 06:36', 'incident_id': 'INCD-1809824-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809824-i', 'postcodes_impacted': ['CH444DA', 'CH444DL', 'CH444DN', 'CH444DQ', 'CH444DR', 'CH444DT', 'CH444DW'], 'received_time': '2021-04-21 04:31'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0397373870833917, 53.41320463721271]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-21 06:21', 'incident_id': 'INCD-565879-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-565879-s', 'postcodes_impacted': ['KY40AA', 'KY40BU', 'KY40BX', 'KY40DB', 'KY40DD', 'KY40DE', 'KY40DF', 'KY40DQ', 'KY40DS', 'KY40EU', 'KY40EY', 'KY40GA', 'KY41AA'], 'received_time': '2021-04-21 03:12'}, 'geometry': {'type': 'Point', 'coordinates': [-3.3801340305885987, 56.13194422082711]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-21 10:30', 'incident_id': 'INCD-17218-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 9AE': {'class': 'models.MapDataLocation', 'lat': 54.5324, 'lng': -1.57884}}, 'received_time': '2021-04-20 23:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.578849, 54.53238]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172978-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD13 3BX': {'class': 'models.MapDataLocation', 'lat': 53.7924, 'lng': -1.84059}}, 'received_time': '2021-04-20 08:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.840591, 53.792361]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172998-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS26 8JB': {'class': 'models.MapDataLocation', 'lat': 54.6858, 'lng': -1.22187}}, 'received_time': '2021-04-20 09:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.221868, 54.685842]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173030-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 1UA': {'class': 'models.MapDataLocation', 'lat': 53.5645, 'lng': -1.76242}}, 'received_time': '2021-04-20 10:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762424, 53.564454]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173101-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX6 3BJ': {'class': 'models.MapDataLocation', 'lat': 53.7046, 'lng': -1.91983}}, 'received_time': '2021-04-20 12:51'}, 'geometry': {'type': 'Point', 'coordinates': [-1.919829, 53.704564]}}, {'type': 'Feature', 'properties': {'description': 'LV O/H Plant Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173174-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 2QJ': {'class': 'models.MapDataLocation', 'lat': 53.5509, 'lng': -1.83717}}, 'received_time': '2021-04-20 16:21'}, 'geometry': {'type': 'Point', 'coordinates': [-1.837242, 53.550797]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-21 10:00', 'incident_id': 'INCD-173261-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD1 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.6456, 'lng': -1.79188}}, 'received_time': '2021-04-20 22:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.791846, 53.64558]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-21 10:30', 'incident_id': 'INCD-173266-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS29 0PB': {'class': 'models.MapDataLocation', 'lat': 53.9443, 'lng': -1.88439}, 'LS29 0PD': {'class': 'models.MapDataLocation', 'lat': 53.9444, 'lng': -1.88847}}, 'received_time': '2021-04-20 22:38'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8864105, 53.9443575]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-21 07:15', 'incident_id': 'INCD-173276-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS11 8DH': {'class': 'models.MapDataLocation', 'lat': 53.7713, 'lng': -1.57029}}, 'received_time': '2021-04-21 04:08'}, 'geometry': {'type': 'Point', 'coordinates': [-1.570302, 53.771304]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 13:30', 'incident_id': 'PPC039342', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'OL14 7RJ': {'class': 'models.MapDataLocation', 'lat': 53.6907, 'lng': -2.12983}, 'OL14 7RH': {'class': 'models.MapDataLocation', 'lat': 53.6928, 'lng': -2.12251}, 'OL14 7RS': {'class': 'models.MapDataLocation', 'lat': 53.6885, 'lng': -2.11757}}, 'received_time': '2021-04-21 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1231773333333335, 53.69071566666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 10:30', 'incident_id': 'PPC039468', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 1NB': {'class': 'models.MapDataLocation', 'lat': 54.5923, 'lng': -1.47758}, 'TS21 1NA': {'class': 'models.MapDataLocation', 'lat': 54.592, 'lng': -1.47892}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.478286, 54.5922]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 13:00', 'incident_id': 'PPC039510', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 3AX': {'class': 'models.MapDataLocation', 'lat': 55.2275, 'lng': -1.61008}, 'NE61 3AU': {'class': 'models.MapDataLocation', 'lat': 55.228, 'lng': -1.62255}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6163210000000001, 55.227712999999994]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 15:00', 'incident_id': 'PPC039554', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'OL14 6HT': {'class': 'models.MapDataLocation', 'lat': 53.7028, 'lng': -2.07207}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.07205, 53.702852]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 14:30', 'incident_id': 'PPC039579', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN11 8PJ': {'class': 'models.MapDataLocation', 'lat': 53.3162, 'lng': 0.095758}, 'LN11 8PH': {'class': 'models.MapDataLocation', 'lat': 53.3141, 'lng': 0.103025}, 'LN11 8PG': {'class': 'models.MapDataLocation', 'lat': 53.3089, 'lng': 0.10094}, 'LN11 8PQ': {'class': 'models.MapDataLocation', 'lat': 53.3114, 'lng': 0.102923}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.10007424999999999, 53.31284425]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 10:00', 'incident_id': 'PPC039620', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 5DA': {'class': 'models.MapDataLocation', 'lat': 55.238, 'lng': -1.60687}, 'NE61 5RE': {'class': 'models.MapDataLocation', 'lat': 55.2391, 'lng': -1.61009}, 'NE61 5RF': {'class': 'models.MapDataLocation', 'lat': 55.2389, 'lng': -1.60994}, 'NE61 5RG': {'class': 'models.MapDataLocation', 'lat': 55.2392, 'lng': -1.60915}, 'NE61 5QW': {'class': 'models.MapDataLocation', 'lat': 55.2385, 'lng': -1.60548}, 'NE61 5RH': {'class': 'models.MapDataLocation', 'lat': 55.2385, 'lng': -1.61029}, 'NE61 5RJ': {'class': 'models.MapDataLocation', 'lat': 55.2383, 'lng': -1.61013}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6088541428571428, 55.23862757142857]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-23 13:30', 'incident_id': 'PPC039652', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE15 9RB': {'class': 'models.MapDataLocation', 'lat': 55.0237, 'lng': -1.76829}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.767834, 55.023875]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 13:30', 'incident_id': 'PPC039714', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE65 8EA': {'class': 'models.MapDataLocation', 'lat': 55.3113, 'lng': -1.79564}, 'NE65 8EB': {'class': 'models.MapDataLocation', 'lat': 55.3108, 'lng': -1.79246}, 'NE65 8EF': {'class': 'models.MapDataLocation', 'lat': 55.3124, 'lng': -1.79521}, 'NE65 8DX': {'class': 'models.MapDataLocation', 'lat': 55.3081, 'lng': -1.79934}, 'NE65 8DZ': {'class': 'models.MapDataLocation', 'lat': 55.3091, 'lng': -1.79818}}, 'received_time': '2021-04-21 11:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.79617, 55.31032739999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 11:00', 'incident_id': 'PPC039724', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS27 4SL': {'class': 'models.MapDataLocation', 'lat': 54.7379, 'lng': -1.33599}}, 'received_time': '2021-04-21 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.335955, 54.739085]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 15:00', 'incident_id': 'PPC039751', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX6 1NS': {'class': 'models.MapDataLocation', 'lat': 53.7029, 'lng': -1.94528}, 'HX6 1PA': {'class': 'models.MapDataLocation', 'lat': 53.7024, 'lng': -1.9582}, 'HX6 1NT': {'class': 'models.MapDataLocation', 'lat': 53.7016, 'lng': -1.94324}, 'HX6 1NR': {'class': 'models.MapDataLocation', 'lat': 53.7021, 'lng': -1.95036}, 'HX6 1NP': {'class': 'models.MapDataLocation', 'lat': 53.7026, 'lng': -1.9501}, 'HX6 1NX': {'class': 'models.MapDataLocation', 'lat': 53.6997, 'lng': -1.95107}, 'HX6 1NW': {'class': 'models.MapDataLocation', 'lat': 53.7035, 'lng': -1.9512}, 'HX6 1NN': {'class': 'models.MapDataLocation', 'lat': 53.7049, 'lng': -1.94576}}, 'received_time': '2021-04-21 07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.94940425, 53.702475]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 15:30', 'incident_id': 'PPC039790', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO42 4RW': {'class': 'models.MapDataLocation', 'lat': 53.9163, 'lng': -0.807741}, 'YO42 2NT': {'class': 'models.MapDataLocation', 'lat': 53.9276, 'lng': -0.779914}, 'YO42 1NT': {'class': 'models.MapDataLocation', 'lat': 53.9095, 'lng': -0.775051}, 'YO42 4RS': {'class': 'models.MapDataLocation', 'lat': 53.911, 'lng': -0.819217}, 'YO42 4RR': {'class': 'models.MapDataLocation', 'lat': 53.9128, 'lng': -0.812119}, 'YO42 4RN': {'class': 'models.MapDataLocation', 'lat': 53.9147, 'lng': -0.809034}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8000245, 53.91546866666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 13:00', 'incident_id': 'PPC039797', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO8 9RL': {'class': 'models.MapDataLocation', 'lat': 53.7668, 'lng': -1.0809}, 'YO8 9AX': {'class': 'models.MapDataLocation', 'lat': 53.7714, 'lng': -1.08137}, 'YO8 9DT': {'class': 'models.MapDataLocation', 'lat': 53.7679, 'lng': -1.0807}, 'YO8 9RG': {'class': 'models.MapDataLocation', 'lat': 53.7593, 'lng': -1.15878}, 'YO8 9DU': {'class': 'models.MapDataLocation', 'lat': 53.7659, 'lng': -1.07768}, 'YO8 9DX': {'class': 'models.MapDataLocation', 'lat': 53.7631, 'lng': -1.07275}, 'YO8 8FN': {'class': 'models.MapDataLocation', 'lat': 53.7662, 'lng': -1.06983}, 'YO8 9EJ': {'class': 'models.MapDataLocation', 'lat': 53.7693, 'lng': -1.08555}, 'YO8 8NB': {'class': 'models.MapDataLocation', 'lat': 53.7699, 'lng': -1.0655}, 'YO8 9RP': {'class': 'models.MapDataLocation', 'lat': 53.768, 'lng': -1.08117}, 'YO8 9RR': {'class': 'models.MapDataLocation', 'lat': 53.7676, 'lng': -1.08122}, 'YO8 8LZ': {'class': 'models.MapDataLocation', 'lat': 53.7667, 'lng': -1.06665}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0833172500000001, 53.76680558333334]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 14:00', 'incident_id': 'PPC039798', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD20 8JA': {'class': 'models.MapDataLocation', 'lat': 53.915, 'lng': -2.05731}, 'BD20 8HY': {'class': 'models.MapDataLocation', 'lat': 53.9184, 'lng': -2.05085}, 'BD20 8PD': {'class': 'models.MapDataLocation', 'lat': 53.9236, 'lng': -2.03287}, 'BD20 8HX': {'class': 'models.MapDataLocation', 'lat': 53.9156, 'lng': -2.06991}, 'BD20 8ED': {'class': 'models.MapDataLocation', 'lat': 53.9134, 'lng': -2.03776}, 'BD20 8EA': {'class': 'models.MapDataLocation', 'lat': 53.9108, 'lng': -2.04248}, 'BD20 8EF': {'class': 'models.MapDataLocation', 'lat': 53.911, 'lng': -2.0437}, 'BD20 8EE': {'class': 'models.MapDataLocation', 'lat': 53.9091, 'lng': -2.04761}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.04679125, 53.914803250000006]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 15:30', 'incident_id': 'PPC039807', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN11 9SA': {'class': 'models.MapDataLocation', 'lat': 53.3275, 'lng': -0.045447}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.048754, 53.326172]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:00', 'incident_id': 'PPC039847', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 5HZ': {'class': 'models.MapDataLocation', 'lat': 54.2427, 'lng': -1.0121}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.004043, 54.240702]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 14:00', 'incident_id': 'PPC039853', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN13 0BB': {'class': 'models.MapDataLocation', 'lat': 53.2758, 'lng': 0.077627}, 'LN13 0BH': {'class': 'models.MapDataLocation', 'lat': 53.2771, 'lng': 0.08201}}, 'received_time': '2021-04-21 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.07978199999999999, 53.276469]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-21 13:00', 'incident_id': 'PPC039854', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'OL14 6JD': {'class': 'models.MapDataLocation', 'lat': 53.7079, 'lng': -2.06786}, 'OL14 6JE': {'class': 'models.MapDataLocation', 'lat': 53.7074, 'lng': -2.06895}, 'OL14 6JA': {'class': 'models.MapDataLocation', 'lat': 53.7073, 'lng': -2.06566}, 'OL14 6JB': {'class': 'models.MapDataLocation', 'lat': 53.7085, 'lng': -2.0677}}, 'received_time': '2021-04-21 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.06751325, 53.707755250000005]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:00', 'incident_id': 'PPC039873', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD5 9ER': {'class': 'models.MapDataLocation', 'lat': 53.7751, 'lng': -1.77366}, 'BD5 9ES': {'class': 'models.MapDataLocation', 'lat': 53.7753, 'lng': -1.77312}, 'BD5 9ED': {'class': 'models.MapDataLocation', 'lat': 53.7753, 'lng': -1.77122}, 'BD5 9AW': {'class': 'models.MapDataLocation', 'lat': 53.7743, 'lng': -1.77353}, 'BD5 9EP': {'class': 'models.MapDataLocation', 'lat': 53.7749, 'lng': -1.77286}}, 'received_time': '2021-04-21 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7729196000000003, 53.775007800000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-21 12:30', 'incident_id': 'PPC039887', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AE': {'class': 'models.MapDataLocation', 'lat': 54.9734, 'lng': -1.76939}, 'NE40 3AD': {'class': 'models.MapDataLocation', 'lat': 54.9741, 'lng': -1.76892}}, 'received_time': '2021-04-21 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7690285, 54.973197250000005]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});