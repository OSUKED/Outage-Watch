document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T11:00:00', 'incident_id': 'INCD-317064-U', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-317064-U', 'postcodes_impacted': ['TN24QZ', 'TN24QX', 'TN24QY', 'TN24RB'], 'received_time': '2021-04-15T16:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.29471554969636093, 51.13641384051603]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231184-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231184-Z', 'postcodes_impacted': ['CB13LP', 'CB12AS', 'CB13AA', 'CB13AB', 'CB13AD', 'CB13LR', 'CB13ND', 'CB13NE'], 'received_time': '2021-04-15T13:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.14168191860975382, 52.19852649570228]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T13:30:00', 'incident_id': 'INCD-223734-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-223734-Z', 'postcodes_impacted': ['CO91SG', 'CO91SQ'], 'received_time': '2021-04-16T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5534996377061236, 51.936022219079405]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T14:00:00', 'incident_id': 'INCD-6427-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6427-O', 'postcodes_impacted': ['IP60PP', 'IP60PR', 'IP60SU'], 'received_time': '2021-04-16T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0965314254825929, 52.13154767318725]}}, {'type': 'Feature', 'properties': {'description': 'We are carrying out these works to connect a new property to the overhead electricity network. This work is following on from a customers request and due to the type of overhead electricity cables we need to make the connection to, engineers will need to temporarily switch off your power to ensure they can carry out this work safely. This work will ensure that our electricity network can uphold the electricity usage in your area whilst also reducing the risk of you having an unplanned power cut which is why it is important to complete this work during the Coronavirus pandemic. This work is taking place in Ashford Road, Chilham. The government has given exemptions to certain industries and activities, this outage falls into this category. We are adhering to government guidelines to keep our customers and colleagues safe. We would like to apologise for any inconvenience this may cause you.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T13:00:00', 'incident_id': 'INCD-52638-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-52638-V', 'postcodes_impacted': ['CT48DG', 'CT48DQ', 'CT48DR', 'CT48EE'], 'received_time': '2021-04-16T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9669106738286837, 51.240992361851454]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T12:30:00', 'incident_id': 'INCD-222455-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-222455-Z', 'postcodes_impacted': ['NR93AL', 'NR93BB', 'NR93BD'], 'received_time': '2021-04-16T11:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1887171732042456, 52.60143356196664]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T15:00:00', 'incident_id': 'INCD-6550-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6550-O', 'postcodes_impacted': ['CO107BT', 'CO107DP'], 'received_time': '2021-04-16T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.610896361243984, 52.04956685776261]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T15:00:00', 'incident_id': 'INCD-226490-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-226490-Z', 'postcodes_impacted': ['PE172SG', 'PE173AJ', 'PE282RJ', 'PE282SG', 'PE282SS', 'PE283AH', 'PE283AJ'], 'received_time': '2021-04-16T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08863958525499187, 52.3915822598752]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T14:00:00', 'incident_id': 'INCD-228339-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228339-Z', 'postcodes_impacted': ['CM31BY', 'CM31BZ', 'CM33LB', 'CM33LD'], 'received_time': '2021-04-16T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.48195432775923674, 51.80409395526383]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T14:30:00', 'incident_id': 'INCD-227445-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227445-Z', 'postcodes_impacted': ['CO76EQ'], 'received_time': '2021-04-16T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9772082457068606, 51.94217511357614]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T14:30:00', 'incident_id': 'INCD-227448-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227448-Z', 'postcodes_impacted': ['CO77AU', 'CO77AX'], 'received_time': '2021-04-16T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9771212017244024, 51.88087157646441]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7572\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 08:30:00', 'incident_id': 'HB7572', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU26 6AA', 'GU26 6AB', 'GU26 6AE', 'GU26 6AF', 'GU26 6AG', 'GU26 6AN', 'GU26 6AP', 'GU26 6AQ', 'GU26 6AR', 'GU26 6AS', 'GU26 6AT', 'GU26 6AW', 'GU26 6AY', 'GU26 6DH', 'GU26 6DJ', 'GU26 6DL', 'GU26 6DN', 'GU26 6DP', 'GU26 6DR', 'GU26 6DT', 'GU26 6DW', 'GU26 6EB', 'GU26 6ED', 'GU26 6EE', 'GU26 6EF', 'GU26 6EH', 'GU26 6EP', 'GU26 6EQ', 'GU26 6FE', 'GU26 6FG', 'GU26 6FH', 'GU26 6FL', 'GU26 6FR', 'GU26 6FS', 'GU26 6FT', 'GU26 6GA', 'GU26 6HD', 'GU26 6HE', 'GU26 6HF', 'GU26 6HG', 'GU26 6HJ', 'GU26 6HL', 'GU26 6HN', 'GU26 6HQ', 'GU26 6HR', 'GU26 6HS', 'GU26 6HW', 'GU26 6JG', 'GU26 6JR', 'GU26 6JS', 'GU26 6JT', 'GU26 6JW', 'GU26 6LA', 'GU26 6LB', 'GU26 6LD', 'GU26 6LE', 'GU26 6LF', 'GU26 6LG', 'GU26 6LL', 'GU26 6LN', 'GU26 6LP', 'GU26 6LQ', 'GU26 6LR', 'GU26 6LS', 'GU26 6LT', 'GU26 6LU', 'GU26 6LW', 'GU26 6LX', 'GU26 6LY', 'GU26 6LZ', 'GU26 6NA', 'GU26 6NB', 'GU26 6ND', 'GU26 6NE', 'GU26 6NF', 'GU26 6NG', 'GU26 6NH', 'GU26 6QW', 'GU26 6SD', 'GU26 6SE', 'GU26 6SF', 'GU26 6SG', 'GU26 6SH', 'GU26 6SL', 'GU26 6SN', 'GU26 6SP', 'GU26 6SQ', 'GU26 6SR', 'GU26 6SS', 'GU26 6ST', 'GU26 6SW', 'GU26 6TA', 'GU26 6TB', 'GU26 6TD', 'GU26 6TF', 'GU26 6TG', 'GU26 6TH', 'GU26 6TL', 'GU26 6TN', 'GU26 6TP', 'GU26 6TQ', 'GU26 6TR', 'GU26 6TS', 'GU26 6TT', 'GU26 6TU', 'GU26 6TX', 'GU26 6TY', 'GU26 6TZ', 'GU26 6UA', 'GU26 6UB', 'GU26 6UJ', 'GU26 6UY', 'GU27 2JE'], 'received_time': '2021-04-16 01:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7474943839285714, 51.11178979464285]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 05:30:00', 'incident_id': 'INCD-357933-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357933-G', 'postcodes_impacted': ['B76 9EE'], 'received_time': '2021-04-15 21:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7362, 52.536006]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 07:00:00', 'incident_id': 'INCD-357936-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357936-G', 'postcodes_impacted': ['TF1 5RG', 'TF1 5RA', 'TF1 5AP', 'TF1 6RB', 'TF1 5SJ', 'TF1 5RE', 'TF1 5RF', 'TF1 5QX', 'TF1 5RS', 'TF1 5LP'], 'received_time': '2021-04-16 03:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4767316999999998, 52.705721399999995]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 08:00:00', 'incident_id': 'INCD-152670-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152670-H', 'postcodes_impacted': ['NN2 6BY', 'NN2 6DU', 'NN2 6BL', 'NN2 6BS', 'NN2 6DE', 'NN2 6BZ', 'NN2 6BP', 'NN2 6DD', 'NN2 6BE', 'NN2 6BJ', 'NN2 6DS', 'NN2 6BG', 'NN2 6BB', 'NN2 6DT', 'NN2 6BT', 'NN2 6AP', 'NN2 6AW', 'NN2 6AQ', 'NN2 6LQ', 'NN2 6DA', 'NN2 6BH', 'NN2 6BQ', 'NN2 6BX', 'NN2 6BU', 'NN2 6AH', 'NN2 6LF', 'NN2 6BD', 'NN2 6LG', 'NN2 6BN', 'NN2 6EU', 'NN2 6BW', 'NN2 6AL', 'NN2 6AX', 'NN2 6AF'], 'received_time': '2021-04-15 20:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9010533529411764, 52.2467780882353]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171542-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS24 8HH': {'class': 'models.MapDataLocation', 'lat': 54.6958, 'lng': -1.22321}}, 'received_time': '2021-04-14 14:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.222918, 54.695816]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171792-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8AL': {'class': 'models.MapDataLocation', 'lat': 53.427, 'lng': -1.20937}, 'S66 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.4294, 'lng': -1.20865}, 'S66 8JT': {'class': 'models.MapDataLocation', 'lat': 53.4298, 'lng': -1.20703}, 'S66 8AD': {'class': 'models.MapDataLocation', 'lat': 53.4257, 'lng': -1.20882}}, 'received_time': '2021-04-15 12:59'}, 'geometry': {'type': 'Point', 'coordinates': [-1.20852825, 53.427761000000004]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'INCD-171831-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 3RH': {'class': 'models.MapDataLocation', 'lat': 53.9847, 'lng': -2.10833}}, 'received_time': '2021-04-15 14:20'}, 'geometry': {'type': 'Point', 'coordinates': [-2.108328, 53.984667]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171864-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S61 2PD': {'class': 'models.MapDataLocation', 'lat': 53.4295, 'lng': -1.38748}}, 'received_time': '2021-04-15 17:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.387477, 53.429481]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 10:00', 'incident_id': 'INCD-171865-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO15 3DT': {'class': 'models.MapDataLocation', 'lat': 54.0804, 'lng': -0.19833}}, 'received_time': '2021-04-15 17:14'}, 'geometry': {'type': 'Point', 'coordinates': [-0.198407, 54.080413]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'INCD-171884-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S65 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.4513, 'lng': -1.29961}}, 'received_time': '2021-04-15 20:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.299615, 53.451345]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:30', 'incident_id': 'PPC039345', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX6 3SB': {'class': 'models.MapDataLocation', 'lat': 53.6885, 'lng': -1.92136}, 'HX4 0DA': {'class': 'models.MapDataLocation', 'lat': 53.68, 'lng': -1.91801}, 'HX6 4JJ': {'class': 'models.MapDataLocation', 'lat': 53.6809, 'lng': -1.93052}, 'HX6 3SD': {'class': 'models.MapDataLocation', 'lat': 53.6891, 'lng': -1.92342}, 'HX4 0DE': {'class': 'models.MapDataLocation', 'lat': 53.6833, 'lng': -1.92094}, 'HX4 0AG': {'class': 'models.MapDataLocation', 'lat': 53.6759, 'lng': -1.9095}, 'HX4 0BZ': {'class': 'models.MapDataLocation', 'lat': 53.6813, 'lng': -1.91545}}, 'received_time': '2021-04-16 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9195268571428572, 53.68257142857143]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 09:00', 'incident_id': 'PPC039431', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8XA': {'class': 'models.MapDataLocation', 'lat': 54.5308, 'lng': -1.83809}, 'DL12 8UY': {'class': 'models.MapDataLocation', 'lat': 54.5303, 'lng': -1.83809}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.838142, 54.530589500000005]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:30', 'incident_id': 'PPC039435', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8XL': {'class': 'models.MapDataLocation', 'lat': 54.5301, 'lng': -1.83943}, 'DL12 8XG': {'class': 'models.MapDataLocation', 'lat': 54.5278, 'lng': -1.83731}, 'DL12 8XD': {'class': 'models.MapDataLocation', 'lat': 54.5289, 'lng': -1.83862}, 'DL12 8XE': {'class': 'models.MapDataLocation', 'lat': 54.5285, 'lng': -1.83865}, 'DL12 8XF': {'class': 'models.MapDataLocation', 'lat': 54.5278, 'lng': -1.83798}, 'DL12 8UZ': {'class': 'models.MapDataLocation', 'lat': 54.531, 'lng': -1.83807}, 'DL12 8XQ': {'class': 'models.MapDataLocation', 'lat': 54.5289, 'lng': -1.83698}}, 'received_time': '2021-04-16 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8381859999999999, 54.529038]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'PPC039501', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6RQ': {'class': 'models.MapDataLocation', 'lat': 54.2365, 'lng': -0.877763}, 'YO62 6RG': {'class': 'models.MapDataLocation', 'lat': 54.2388, 'lng': -0.881167}, 'YO62 6RH': {'class': 'models.MapDataLocation', 'lat': 54.2263, 'lng': -0.874879}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8801113333333332, 54.234772666666665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-16 14:00', 'incident_id': 'PPC039532', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN9 2BL': {'class': 'models.MapDataLocation', 'lat': 53.5156, 'lng': -0.923471}, 'DN9 2BN': {'class': 'models.MapDataLocation', 'lat': 53.518, 'lng': -0.922144}, 'DN3 3UA': {'class': 'models.MapDataLocation', 'lat': 53.5061, 'lng': -1.0456}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9637206666666668, 53.513202666666665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039604', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 8PR': {'class': 'models.MapDataLocation', 'lat': 53.7216, 'lng': -1.81875}, 'HX3 9XQ': {'class': 'models.MapDataLocation', 'lat': 53.725, 'lng': -1.85098}, 'HX3 8PS': {'class': 'models.MapDataLocation', 'lat': 53.7188, 'lng': -1.81481}, 'HX3 8PN': {'class': 'models.MapDataLocation', 'lat': 53.7229, 'lng': -1.81948}, 'HX3 8PP': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.81849}, 'HX3 8PJ': {'class': 'models.MapDataLocation', 'lat': 53.7264, 'lng': -1.82624}, 'HX3 8PL': {'class': 'models.MapDataLocation', 'lat': 53.7238, 'lng': -1.82165}, 'HX3 8HR': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.82074}, 'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}, 'HX3 9XB': {'class': 'models.MapDataLocation', 'lat': 53.7237, 'lng': -1.82421}, 'HX3 9XA': {'class': 'models.MapDataLocation', 'lat': 53.726, 'lng': -1.83025}, 'HX3 9SL': {'class': 'models.MapDataLocation', 'lat': 53.7113, 'lng': -1.82691}, 'HX3 8PW': {'class': 'models.MapDataLocation', 'lat': 53.7239, 'lng': -1.81919}, 'HX3 8PU': {'class': 'models.MapDataLocation', 'lat': 53.7354, 'lng': -1.78728}, 'HX3 9XF': {'class': 'models.MapDataLocation', 'lat': 53.7262, 'lng': -1.83399}, 'HX3 9XE': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.82881}, 'HX3 9UG': {'class': 'models.MapDataLocation', 'lat': 53.714, 'lng': -1.83573}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8237496470588237, 53.72298452941176]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 10:00', 'incident_id': 'PPC039621', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD13 5HW': {'class': 'models.MapDataLocation', 'lat': 53.8273, 'lng': -1.90161}, 'BD13 5DA': {'class': 'models.MapDataLocation', 'lat': 53.8248, 'lng': -1.90084}, 'BD13 5DE': {'class': 'models.MapDataLocation', 'lat': 53.8258, 'lng': -1.89926}, 'BD13 5DF': {'class': 'models.MapDataLocation', 'lat': 53.8249, 'lng': -1.89844}, 'BD13 2DL': {'class': 'models.MapDataLocation', 'lat': 53.7608, 'lng': -1.8595}, 'BD13 5DD': {'class': 'models.MapDataLocation', 'lat': 53.8253, 'lng': -1.89886}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8929485000000001, 53.81478283333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 12:00', 'incident_id': 'PPC039667', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 3AT': {'class': 'models.MapDataLocation', 'lat': 55.2246, 'lng': -1.63339}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.633298, 55.224571]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 16:00', 'incident_id': 'PPC039730', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD8 8XU': {'class': 'models.MapDataLocation', 'lat': 53.5617, 'lng': -1.68335}, 'HD9 2TA': {'class': 'models.MapDataLocation', 'lat': 53.5432, 'lng': -1.76592}, 'HD8 8XY': {'class': 'models.MapDataLocation', 'lat': 53.5577, 'lng': -1.67494}, 'HD8 8XP': {'class': 'models.MapDataLocation', 'lat': 53.5662, 'lng': -1.69347}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.70439425, 53.55720025]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:30', 'incident_id': 'PPC039757', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3AQ': {'class': 'models.MapDataLocation', 'lat': 54.9721, 'lng': -1.77168}, 'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3AA': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77236}, 'NE40 3AN': {'class': 'models.MapDataLocation', 'lat': 54.9736, 'lng': -1.7705}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AW': {'class': 'models.MapDataLocation', 'lat': 54.9729, 'lng': -1.77177}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-16 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.771655375, 54.972390250000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:00', 'incident_id': 'PPC039796', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8DF': {'class': 'models.MapDataLocation', 'lat': 54.106, 'lng': -0.59455}, 'YO17 8DE': {'class': 'models.MapDataLocation', 'lat': 54.0955, 'lng': -0.617705}, 'YO17 8DB': {'class': 'models.MapDataLocation', 'lat': 54.0951, 'lng': -0.619567}, 'YO17 8DL': {'class': 'models.MapDataLocation', 'lat': 54.0964, 'lng': -0.617722}, 'YO17 8DJ': {'class': 'models.MapDataLocation', 'lat': 54.0963, 'lng': -0.617233}, 'YO17 8DH': {'class': 'models.MapDataLocation', 'lat': 54.0965, 'lng': -0.617455}}, 'received_time': '2021-04-16 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.61344, 54.09772016666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 12:00', 'incident_id': 'PPC039820', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR7 7SJ': {'class': 'models.MapDataLocation', 'lat': 54.837, 'lng': -1.33848}, 'SR7 7JN': {'class': 'models.MapDataLocation', 'lat': 54.8358, 'lng': -1.3365}, 'SR7 7SH': {'class': 'models.MapDataLocation', 'lat': 54.8367, 'lng': -1.33812}, 'SR7 7RZ': {'class': 'models.MapDataLocation', 'lat': 54.8378, 'lng': -1.33979}, 'SR7 7SG': {'class': 'models.MapDataLocation', 'lat': 54.8366, 'lng': -1.33881}, 'SR7 7SF': {'class': 'models.MapDataLocation', 'lat': 54.8359, 'lng': -1.33709}, 'SR7 7SE': {'class': 'models.MapDataLocation', 'lat': 54.8356, 'lng': -1.33716}, 'SR7 7SA': {'class': 'models.MapDataLocation', 'lat': 54.8377, 'lng': -1.338}, 'SR7 7JE': {'class': 'models.MapDataLocation', 'lat': 54.836, 'lng': -1.33448}, 'SR7 7SQ': {'class': 'models.MapDataLocation', 'lat': 54.8362, 'lng': -1.3381}, 'SR7 7SB': {'class': 'models.MapDataLocation', 'lat': 54.8372, 'lng': -1.33953}, 'SR7 7SL': {'class': 'models.MapDataLocation', 'lat': 54.8363, 'lng': -1.34014}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.33811925, 54.83654408333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-16 08:00', 'incident_id': 'PPC039827', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8TE': {'class': 'models.MapDataLocation', 'lat': 53.7534, 'lng': -1.9149}, 'HX2 8SW': {'class': 'models.MapDataLocation', 'lat': 53.7511, 'lng': -1.91364}, 'HX2 8SN': {'class': 'models.MapDataLocation', 'lat': 53.752, 'lng': -1.91182}}, 'received_time': '2021-04-16 07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.91345, 53.75218166666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:00', 'incident_id': 'PPC039907', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 0NG': {'class': 'models.MapDataLocation', 'lat': 53.664, 'lng': -1.72604}, 'HD5 0PB': {'class': 'models.MapDataLocation', 'lat': 53.6477, 'lng': -1.70131}, 'HD5 0PA': {'class': 'models.MapDataLocation', 'lat': 53.6489, 'lng': -1.70345}, 'HD5 0RF': {'class': 'models.MapDataLocation', 'lat': 53.6779, 'lng': -1.73078}}, 'received_time': '2021-04-16 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7153485, 53.65948074999999]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-16 10:23', 'incident_id': '10645849', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['OL12 9RF', 'OL12 9RW', 'OL16 2LZ', 'OL16 2NG', 'OL16 2NH', 'OL16 2NQ', 'OL16 2NT', 'OL16 2SU', 'OL16 2SX', 'OL16 2TA', 'OL16 2TB', 'OL16 2TD', 'OL16 2TE', 'OL16 2TF', 'OL16 2TG', 'OL16 2UG'], 'received_time': '2021-04-16 04:23'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1401776875, 53.62729575]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});