document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55321-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55321-V', 'postcodes_impacted': ['GU14RY', 'GU14SQ', 'GU14SG', 'GU14YN'], 'received_time': '2021-04-28T13:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5773767622562184, 51.237104577054666]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-29T04:00:00', 'incident_id': 'INCD-44627-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44627-C', 'postcodes_impacted': ['HP224BD', 'HP224BE', 'HP224BG', 'HP224BQ', 'HP224BB'], 'received_time': '2021-04-28T17:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9232967960292363, 51.876999697680525]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44635-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44635-C', 'postcodes_impacted': ['NW119HE', 'NW119EY', 'NW119HG', 'NW119HH', 'NW119HJ', 'NW119HU', 'NW119HX', 'NW119HY', 'NW119JG', 'NW119JH'], 'received_time': '2021-04-28T20:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21269887972421603, 51.578229370512744]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-29T03:00:00', 'incident_id': 'INCD-261037-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-261037-J', 'postcodes_impacted': ['NW108NJ', 'NW108UN', 'NW108UP', 'NW108UW'], 'received_time': '2021-04-28T19:25:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.25739005304014945, 51.53751075003327]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-29T02:00:00', 'incident_id': 'INCD-55330-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55330-V', 'postcodes_impacted': ['RH27JE', 'RH27JP', 'RH27JR', 'RH27JS', 'RH27JX', 'RH27LB'], 'received_time': '2021-04-28T14:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2001652252669707, 51.2336195513887]}}, {'type': 'Feature', 'properties': {'description': 'We are carrying out these works to connect a new property to the underground electricity network. This work is following on from a customers request and due to the type of underground electricity cables we need to make the connection to, engineers will need to temporarily switch off your power to ensure they can carry out this work safely. Due to 138 properties being affected our engineers have worked to reduce the time to complete the works as much as possible. If they can restore your power sooner, they will certainly do so. This work will ensure that our electricity network can uphold the electricity usage in your area whilst also reducing the risk of you having an unplanned power cut. This work is taking place at our substation on Lowell Street. The government has given exemptions to certain industries and activities, this outage falls into this category.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-29T12:00:00', 'incident_id': 'INCD-260493-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260493-J', 'postcodes_impacted': ['E147LG', 'E147LH'], 'received_time': '2021-04-29T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.035703871634737955, 51.513343195190515]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3561\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 03:00:00', 'incident_id': 'HC3561', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SN5 7BW', 'SN5 7DY', 'SN5 7DZ'], 'received_time': '2021-04-29 00:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8260930000000002, 51.56070333333333]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3554\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 03:00:00', 'incident_id': 'HC3554', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO33 2JJ', 'PO33 2JY', 'PO33 2LD', 'PO33 2NE', 'PO33 2NF', 'PO33 2NG', 'PO33 2NQ', 'PO33 2NT', 'PO33 2NY', 'PO33 2PJ', 'PO33 2PL', 'PO33 2PN', 'PO33 2PT'], 'received_time': '2021-04-28 23:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.164011076923077, 50.72974623076924]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3540\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 02:15:00', 'incident_id': 'HC3540', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP15 6DN', 'HP15 6EB', 'HP15 6EF', 'HP15 6EG', 'HP15 6EH', 'HP15 6EN', 'HP15 6EQ', 'HP15 6ET', 'HP15 6EZ'], 'received_time': '2021-04-28 22:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7327394444444444, 51.675128333333326]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3469\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 05:00:00', 'incident_id': 'HC3469', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BA20 2AQ'], 'received_time': '2021-04-28 18:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.64159, 50.93773]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3452\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 02:00:00', 'incident_id': 'HC3452', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG30 3RS', 'RG7 1LS', 'RG7 1LT', 'RG7 1LU', 'RG7 1LX', 'RG7 1LY', 'RG7 1NA', 'RG7 1NB', 'RG7 1ND', 'RG7 1NF', 'RG7 1NH', 'RG7 3AH', 'RG7 3AP', 'RG7 3AR', 'RG7 3AU', 'RG7 3AY', 'RG7 3AZ', 'RG7 3BA', 'RG7 3BB', 'U'], 'received_time': '2021-04-28 17:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.031740263157895, 51.39708152631579]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC3384\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 03:45:00', 'incident_id': 'HC3384', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH2 5AA', 'BH5 1BL', 'BH5 1BN', 'BH5 1BS', 'BH5 1BT', 'BH5 1DH'], 'received_time': '2021-04-28 15:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8478498333333333, 50.72071816666667]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-29 03:00:00', 'incident_id': 'INCD-576-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-576-q', 'postcodes_impacted': ['PL12 4EJ', 'PL12 6BN', 'PL12 4EH'], 'received_time': '2021-04-28 06:43:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.208622, 50.40929966666667]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-29 04:00:00', 'incident_id': 'INCD-616-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-616-q', 'postcodes_impacted': ['PL1 5BT', 'PL1 5BP', 'PL1 5BS', 'PL1 5BN', 'PL1 5BB', 'PL1 5BD'], 'received_time': '2021-04-28 21:22:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.148491333333333, 50.373352000000004]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-29 03:00:00', 'incident_id': 'INCD-153566-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153566-H', 'postcodes_impacted': ['S21 2DT'], 'received_time': '2021-04-28 15:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.305809, 53.328048]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-29 03:00:00', 'incident_id': 'INCD-45023-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-45023-D', 'postcodes_impacted': ['DE7 6HD', 'DE7 4PS', 'DE7 4NH'], 'received_time': '2021-04-28 17:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3423906666666667, 52.956468]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-28 16:00', 'incident_id': 'INCD-568861-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-568861-s', 'postcodes_impacted': ['KA74UE', 'KA74UF'], 'received_time': '2021-04-28 11:57'}, 'geometry': {'type': 'Point', 'coordinates': [-4.614711540260917, 55.43072104475482]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-29 07:00', 'incident_id': 'INCD-1811198-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1811198-i', 'postcodes_impacted': ['WA91PX', 'WA91PY', 'WA93BN', 'WA93DJ', 'WA93DL', 'WA93DN', 'WA93DP', 'WA93DQ', 'WA93DR', 'WA93DU', 'WA93DY', 'WA93ZP', 'WA93ZQ', 'WA93ZR', 'WA95AB'], 'received_time': '2021-04-28 11:39'}, 'geometry': {'type': 'Point', 'coordinates': [-2.7150545057979962, 53.4440607275482]}}, {'type': 'Feature', 'properties': {'description': 'There is an unplanned power cut in the FK2 postcode area of Laurieston affecting properties in Old Redding Road and surrounding areas. We did not know in advance there would be a power cut however our engineers have been working on site and, we now need to carry out an emergency shutdown at 10.15pm this is to safely complete the final repair on an underground cable fault. This may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible by 5.00am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9.47pm on Wednesday 28th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-29 04:00', 'incident_id': 'INCD-507261-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-507261-f', 'postcodes_impacted': ['FK29', 'FK29JD', 'FK29JE', 'FK29JU', 'FK29QQ'], 'received_time': '2021-04-28 10:41'}, 'geometry': {'type': 'Point', 'coordinates': [-3.748272352834946, 55.99391443094256]}}, {'type': 'Feature', 'properties': {'description': 'The electricity supply to your premises may currently be affected by planned work.  You should have received a letter explaining this.  We hope to be able to restore your supplies by 29-APR-2021 16:00.  Please accept our sincere apologies for any inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-29 15:00', 'incident_id': 'INCD-498803-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-498803-k', 'postcodes_impacted': ['CH54BH', 'CH76DQ'], 'received_time': '2021-04-22 10:34'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0815446105247046, 53.21852444253568]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 15:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175275-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS19 6BQ': {'class': 'models.MapDataLocation', 'lat': 53.8524, 'lng': -1.69016}}, 'received_time': '2021-04-28 10:27'}, 'geometry': {'type': 'Point', 'coordinates': [-1.690172, 53.852395]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175294-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 3AS': {'class': 'models.MapDataLocation', 'lat': 53.5721, 'lng': -1.78588}}, 'received_time': '2021-04-28 11:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.785909, 53.572031]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175331-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS26 0EA': {'class': 'models.MapDataLocation', 'lat': 53.7488, 'lng': -1.47319}}, 'received_time': '2021-04-28 12:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.473511, 53.748763]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-29 11:00', 'incident_id': 'INCD-175370-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR6 0NT': {'class': 'models.MapDataLocation', 'lat': 54.9215, 'lng': -1.3709}}, 'received_time': '2021-04-28 14:32'}, 'geometry': {'type': 'Point', 'coordinates': [-1.370885, 54.921554]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 01:00', 'incident_id': 'INCD-175419-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS17 7JG': {'class': 'models.MapDataLocation', 'lat': 53.8534, 'lng': -1.53728}, 'LS17 7JF': {'class': 'models.MapDataLocation', 'lat': 53.854, 'lng': -1.53746}, 'LS17 7JA': {'class': 'models.MapDataLocation', 'lat': 53.8531, 'lng': -1.53499}, 'LS17 7HY': {'class': 'models.MapDataLocation', 'lat': 53.852, 'lng': -1.53707}, 'LS17 7HX': {'class': 'models.MapDataLocation', 'lat': 53.8528, 'lng': -1.53691}, 'LS17 7HU': {'class': 'models.MapDataLocation', 'lat': 53.8533, 'lng': -1.53869}}, 'received_time': '2021-04-28 17:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5370544999999998, 53.853088333333325]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175435-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD21 1AS': {'class': 'models.MapDataLocation', 'lat': 53.8568, 'lng': -1.91648}}, 'received_time': '2021-04-28 19:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.916483, 53.856783]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 02:00', 'incident_id': 'INCD-175438-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S11 9HS': {'class': 'models.MapDataLocation', 'lat': 53.3533, 'lng': -1.51062}, 'S11 9HT': {'class': 'models.MapDataLocation', 'lat': 53.3536, 'lng': -1.51038}, 'S11 9HU': {'class': 'models.MapDataLocation', 'lat': 53.3526, 'lng': -1.5107}, 'S11 9HH': {'class': 'models.MapDataLocation', 'lat': 53.3543, 'lng': -1.50733}, 'S11 9HJ': {'class': 'models.MapDataLocation', 'lat': 53.3509, 'lng': -1.50769}}, 'received_time': '2021-04-28 19:16'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5093923999999999, 53.3528724]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 05:00', 'incident_id': 'INCD-175453-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 0PD': {'class': 'models.MapDataLocation', 'lat': 54.8739, 'lng': -1.6929}}, 'received_time': '2021-04-29 00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.692898, 54.873917]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 03:15', 'incident_id': 'INCD-175454-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD9 6EP': {'class': 'models.MapDataLocation', 'lat': 53.8123, 'lng': -1.81259}, 'BD9 6NN': {'class': 'models.MapDataLocation', 'lat': 53.8127, 'lng': -1.81561}, 'BD9 6EJ': {'class': 'models.MapDataLocation', 'lat': 53.8123, 'lng': -1.81017}, 'BD9 6EN': {'class': 'models.MapDataLocation', 'lat': 53.8117, 'lng': -1.81133}, 'BD9 6BX': {'class': 'models.MapDataLocation', 'lat': 53.8075, 'lng': -1.80255}, 'BD9 6EL': {'class': 'models.MapDataLocation', 'lat': 53.8124, 'lng': -1.81126}}, 'received_time': '2021-04-28 23:27'}, 'geometry': {'type': 'Point', 'coordinates': [-1.812054, 53.812156833333326]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-29 04:00', 'incident_id': 'INCD-175457-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S71 3RX': {'class': 'models.MapDataLocation', 'lat': 53.5734, 'lng': -1.46465}}, 'received_time': '2021-04-29 00:57'}, 'geometry': {'type': 'Point', 'coordinates': [-1.464652, 53.573389]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-29 11:30', 'incident_id': 'PPC039617', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO61 1RT': {'class': 'models.MapDataLocation', 'lat': 54.0827, 'lng': -1.24521}, 'YO61 1SA': {'class': 'models.MapDataLocation', 'lat': 54.0802, 'lng': -1.24158}, 'YO61 1RR': {'class': 'models.MapDataLocation', 'lat': 54.0825, 'lng': -1.24295}, 'YO61 1RN': {'class': 'models.MapDataLocation', 'lat': 54.0809, 'lng': -1.24174}, 'YO61 1RY': {'class': 'models.MapDataLocation', 'lat': 54.082, 'lng': -1.24192}, 'YO61 1RX': {'class': 'models.MapDataLocation', 'lat': 54.082, 'lng': -1.24368}, 'YO61 1RZ': {'class': 'models.MapDataLocation', 'lat': 54.081, 'lng': -1.2429}}, 'received_time': '2021-04-29 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2429011428571428, 54.081611571428574]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:30', 'incident_id': 'PPC039642', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN40 1RQ': {'class': 'models.MapDataLocation', 'lat': 53.6073, 'lng': -0.210461}, 'DN40 1RW': {'class': 'models.MapDataLocation', 'lat': 53.6078, 'lng': -0.209867}, 'DN40 1RH': {'class': 'models.MapDataLocation', 'lat': 53.6073, 'lng': -0.209222}, 'DN40 1AU': {'class': 'models.MapDataLocation', 'lat': 53.618, 'lng': -0.205398}}, 'received_time': '2021-04-29 10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.208774, 53.6101035]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:00', 'incident_id': 'PPC039729', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF11 0AA': {'class': 'models.MapDataLocation', 'lat': 53.6958, 'lng': -1.26147}}, 'received_time': '2021-04-29 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.261487, 53.695818]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 12:00', 'incident_id': 'PPC039768', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TD': {'class': 'models.MapDataLocation', 'lat': 54.0723, 'lng': -0.662154}}, 'received_time': '2021-04-29 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.67733, 54.069868]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:00', 'incident_id': 'PPC039810', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BB18 6LH': {'class': 'models.MapDataLocation', 'lat': 53.9016, 'lng': -2.14214}}, 'received_time': '2021-04-29 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.142161, 53.901635]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:30', 'incident_id': 'PPC039868', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH6 4JN': {'class': 'models.MapDataLocation', 'lat': 54.7267, 'lng': -1.51776}, 'DH6 4JL': {'class': 'models.MapDataLocation', 'lat': 54.7263, 'lng': -1.519}, 'DH6 4JJ': {'class': 'models.MapDataLocation', 'lat': 54.7257, 'lng': -1.51629}, 'DH6 4JH': {'class': 'models.MapDataLocation', 'lat': 54.725, 'lng': -1.51504}, 'DH6 4LJ': {'class': 'models.MapDataLocation', 'lat': 54.7245, 'lng': -1.51646}}, 'received_time': '2021-04-29 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5169685999999998, 54.725681400000006]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:00', 'incident_id': 'PPC039899', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 7AF': {'class': 'models.MapDataLocation', 'lat': 54.1442, 'lng': -0.787641}, 'YO17 7DD': {'class': 'models.MapDataLocation', 'lat': 54.1429, 'lng': -0.787646}, 'YO17 7FG': {'class': 'models.MapDataLocation', 'lat': 54.1434, 'lng': -0.793434}, 'YO17 7DB': {'class': 'models.MapDataLocation', 'lat': 54.142, 'lng': -0.787475}, 'YO17 7FE': {'class': 'models.MapDataLocation', 'lat': 54.1447, 'lng': -0.79453}, 'YO17 7DG': {'class': 'models.MapDataLocation', 'lat': 54.1441, 'lng': -0.790475}, 'YO17 7HB': {'class': 'models.MapDataLocation', 'lat': 54.1426, 'lng': -0.781165}, 'YO17 7FF': {'class': 'models.MapDataLocation', 'lat': 54.145, 'lng': -0.794002}, 'YO17 7DH': {'class': 'models.MapDataLocation', 'lat': 54.1423, 'lng': -0.790573}, 'YO17 7DE': {'class': 'models.MapDataLocation', 'lat': 54.1431, 'lng': -0.790106}, 'YO17 7FD': {'class': 'models.MapDataLocation', 'lat': 54.1443, 'lng': -0.794953}, 'YO17 7DF': {'class': 'models.MapDataLocation', 'lat': 54.1439, 'lng': -0.788704}, 'YO17 7LB': {'class': 'models.MapDataLocation', 'lat': 54.1407, 'lng': -0.790498}, 'YO17 7DL': {'class': 'models.MapDataLocation', 'lat': 54.1438, 'lng': -0.792275}, 'YO17 7DJ': {'class': 'models.MapDataLocation', 'lat': 54.1424, 'lng': -0.789146}, 'YO17 7NE': {'class': 'models.MapDataLocation', 'lat': 54.1381, 'lng': -0.804197}, 'YO17 7DN': {'class': 'models.MapDataLocation', 'lat': 54.1443, 'lng': -0.792289}, 'YO17 7DQ': {'class': 'models.MapDataLocation', 'lat': 54.1441, 'lng': -0.791698}, 'YO17 7BX': {'class': 'models.MapDataLocation', 'lat': 54.1416, 'lng': -0.79119}, 'YO17 7BY': {'class': 'models.MapDataLocation', 'lat': 54.1423, 'lng': -0.791997}, 'YO17 7BZ': {'class': 'models.MapDataLocation', 'lat': 54.1423, 'lng': -0.789653}, 'YO17 7FB': {'class': 'models.MapDataLocation', 'lat': 54.1434, 'lng': -0.794613}, 'YO17 7BU': {'class': 'models.MapDataLocation', 'lat': 54.1419, 'lng': -0.792606}}, 'received_time': '2021-04-29 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7913591739130436, 54.142926739130445]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:30', 'incident_id': 'PPC039952', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 4EY': {'class': 'models.MapDataLocation', 'lat': 54.6833, 'lng': -1.44634}, 'TS21 4AG': {'class': 'models.MapDataLocation', 'lat': 54.6843, 'lng': -1.4451}, 'TS21 4AH': {'class': 'models.MapDataLocation', 'lat': 54.6831, 'lng': -1.4449}, 'TS21 4AQ': {'class': 'models.MapDataLocation', 'lat': 54.6835, 'lng': -1.44533}, 'TS21 4AE': {'class': 'models.MapDataLocation', 'lat': 54.6837, 'lng': -1.44326}, 'TS21 4AF': {'class': 'models.MapDataLocation', 'lat': 54.6841, 'lng': -1.4452}}, 'received_time': '2021-04-29 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4450173333333334, 54.683652]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 13:30', 'incident_id': 'PPC039959', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS17 6SP': {'class': 'models.MapDataLocation', 'lat': 53.8452, 'lng': -1.52731}, 'LS17 6HQ': {'class': 'models.MapDataLocation', 'lat': 53.8432, 'lng': -1.52935}, 'LS17 6RB': {'class': 'models.MapDataLocation', 'lat': 53.8433, 'lng': -1.53186}, 'LS17 6RL': {'class': 'models.MapDataLocation', 'lat': 53.844, 'lng': -1.52863}, 'LS17 6RH': {'class': 'models.MapDataLocation', 'lat': 53.8437, 'lng': -1.52968}, 'LS17 6TQ': {'class': 'models.MapDataLocation', 'lat': 53.8442, 'lng': -1.52773}, 'LS17 6SL': {'class': 'models.MapDataLocation', 'lat': 53.8443, 'lng': -1.52888}, 'LS17 6RJ': {'class': 'models.MapDataLocation', 'lat': 53.8439, 'lng': -1.52975}}, 'received_time': '2021-04-29 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5291205, 53.843988624999994]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 14:30', 'incident_id': 'PPC039966', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG4 3PU': {'class': 'models.MapDataLocation', 'lat': 54.1395, 'lng': -1.69443}}, 'received_time': '2021-04-29 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.694449, 54.139446]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-30 09:00', 'incident_id': 'PPC039996', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR4 0RG': {'class': 'models.MapDataLocation', 'lat': 54.9079, 'lng': -1.44641}}, 'received_time': '2021-04-29 06:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.446415, 54.907858]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 18:30', 'incident_id': 'PPC040005', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 5AJ': {'class': 'models.MapDataLocation', 'lat': 54.248, 'lng': -1.06268}, 'YO62 5AL': {'class': 'models.MapDataLocation', 'lat': 54.2491, 'lng': -1.06129}, 'YO62 5BL': {'class': 'models.MapDataLocation', 'lat': 54.2459, 'lng': -1.06162}, 'YO62 5BR': {'class': 'models.MapDataLocation', 'lat': 54.2468, 'lng': -1.05974}, 'YO62 5AQ': {'class': 'models.MapDataLocation', 'lat': 54.2479, 'lng': -1.0617}, 'YO62 5BS': {'class': 'models.MapDataLocation', 'lat': 54.2465, 'lng': -1.06064}, 'YO62 5EU': {'class': 'models.MapDataLocation', 'lat': 54.2481, 'lng': -1.05697}, 'YO62 5BH': {'class': 'models.MapDataLocation', 'lat': 54.2464, 'lng': -1.06067}}, 'received_time': '2021-04-29 18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0607431250000001, 54.2472935]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 13:00', 'incident_id': 'PPC040011', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD21 3BH': {'class': 'models.MapDataLocation', 'lat': 53.8744, 'lng': -1.90828}, 'BD21 3BJ': {'class': 'models.MapDataLocation', 'lat': 53.8735, 'lng': -1.90749}, 'BD21 2SY': {'class': 'models.MapDataLocation', 'lat': 53.8728, 'lng': -1.90915}, 'BD21 3BT': {'class': 'models.MapDataLocation', 'lat': 53.8727, 'lng': -1.90833}, 'BD21 2TA': {'class': 'models.MapDataLocation', 'lat': 53.874, 'lng': -1.90901}, 'BD21 3BD': {'class': 'models.MapDataLocation', 'lat': 53.8719, 'lng': -1.90877}}, 'received_time': '2021-04-29 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9085115000000001, 53.873206833333334]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 12:30', 'incident_id': 'PPC040054', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 9UJ': {'class': 'models.MapDataLocation', 'lat': 54.8243, 'lng': -2.23189}, 'NE47 9UL': {'class': 'models.MapDataLocation', 'lat': 54.8247, 'lng': -2.23605}}, 'received_time': '2021-04-29 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.233987, 54.824518499999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-29 11:00', 'incident_id': 'PPC040105', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE15 8HX': {'class': 'models.MapDataLocation', 'lat': 54.988, 'lng': -1.73672}, 'NE15 8HY': {'class': 'models.MapDataLocation', 'lat': 54.9893, 'lng': -1.73646}, 'NE15 8JE': {'class': 'models.MapDataLocation', 'lat': 54.9913, 'lng': -1.73656}}, 'received_time': '2021-04-29 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7366183333333334, 54.98957633333333]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-29 02:30', 'incident_id': '10647118', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['M40 2NQ', 'M40 2QU', 'M40 2QW'], 'received_time': '2021-04-28 17:49'}, 'geometry': {'type': 'Point', 'coordinates': [-2.183231, 53.493337]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});