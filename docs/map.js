document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260729-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260729-J', 'postcodes_impacted': ['E181AY', 'E182LS', 'E182LY'], 'received_time': '2021-04-25T15:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.02393650932679513, 51.59463135425755]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable on the high voltage network affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T04:00:00', 'incident_id': 'INCD-232993-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232993-Z', 'postcodes_impacted': ['RM14AG', 'RM14AN', 'RM14AQ', 'RM14DE', 'RM14DN', 'RM14DW', 'RM14LR', 'RM14LS', 'RM14RS', 'RM14RT', 'RM14SA'], 'received_time': '2021-04-26T01:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.182552279543029, 51.601736770025006]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T05:00:00', 'incident_id': 'INCD-232990-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232990-Z', 'postcodes_impacted': ['N80PR', 'N80DY', 'N80PH', 'N80PJ', 'N80PP'], 'received_time': '2021-04-25T22:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.10830402396327236, 51.5897633086199]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T04:00:00', 'incident_id': 'INCD-232992-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232992-Z', 'postcodes_impacted': ['NW41QW', 'NW44DP', 'NW44DU', 'NW44EA', 'NW44EB', 'NW44LA', 'NW44LE', 'NW44QL', 'NW44QZ', 'NW44RP', 'NW44RR'], 'received_time': '2021-04-26T00:43:18'}, 'geometry': {'type': 'Point', 'coordinates': [-0.22467762585244094, 51.59024311160959]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T03:00:00', 'incident_id': 'INCD-260747-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260747-J', 'postcodes_impacted': ['E28BD', 'E28FR', 'E84HT'], 'received_time': '2021-04-25T23:50:35'}, 'geometry': {'type': 'Point', 'coordinates': [-0.07163459808583807, 51.536521306471286]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-26T04:00:00', 'incident_id': 'INCD-260750-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260750-J', 'postcodes_impacted': ['IG27SA', 'IG27SE', 'IG27SF', 'IG27SG', 'IG27TR'], 'received_time': '2021-04-26T00:54:48'}, 'geometry': {'type': 'Point', 'coordinates': [0.10272126903094522, 51.57971514038493]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1961\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-26 02:30:00', 'incident_id': 'HC1961', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BN17 5DE', 'BN17 5DG', 'BN17 5DH', 'BN17 5DL', 'BN17 5DS', 'BN17 5DW', 'BN17 5GW', 'BN17 5LP', 'BN17 5QT', 'BN17 5QU', 'BN17 5RB', 'BN17 5RG', 'BN17 5RN', 'BN17 5SN'], 'received_time': '2021-04-25 21:46:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5628331428571428, 50.80763050000001]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1917\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-26 04:00:00', 'incident_id': 'HC1917', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO19 7NB', 'SO19 7PS', 'SO19 7PT', 'SO19 7PW', 'SO19 8NT', 'SO19 8NU', 'SO19 8NW', 'SO19 8NX'], 'received_time': '2021-04-25 18:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.35424275, 50.90977975]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1906\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-26 05:00:00', 'incident_id': 'HC1906', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SP5 3PX', 'SP5 3PY', 'SP5 3PZ'], 'received_time': '2021-04-25 17:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7420350000000002, 50.995776]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-26 05:00:00', 'incident_id': 'INCD-416903-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416903-E', 'postcodes_impacted': ['WV4 6BY', 'WV4 6DA'], 'received_time': '2021-04-25 22:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1052085, 52.55864]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-26 02:30:00', 'incident_id': 'INCD-416904-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416904-E', 'postcodes_impacted': ['BS36 2NF', 'BS36 2HL', 'BS36 2NG', 'BS36 2EJ', 'BS36 2JX', 'BS36 2NQ', 'BS36 2JZ', 'BS36 2NH', 'BS36 2EF', 'BS36 2LE', 'BS36 2EH', 'BS36 2BJ', 'BS36 2EE', 'BS36 2LG', 'BS36 2EG', 'BS36 2JY', 'BS36 2ED', 'BS36 2NE', 'BS36 2BH', 'BS36 2ND', 'BS36 2NJ', 'BS36 2EQ', 'BS36 2EA', 'BS36 2HH', 'BS36 2LB', 'BS36 2EB', 'BS9 1BQ', 'BS36 2BB', 'BS36 2HS', 'BS36 2HJ', 'BS36 2HW', 'BS36 2DU', 'BS36 2HN', 'BS36 2HT', 'BS36 2HU', 'BS36 2PD', 'BS36 2LD', 'BS36 2LA'], 'received_time': '2021-04-26 00:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4782848421052637, 51.5310155]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-26 02:00:00', 'incident_id': 'INCD-153296-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153296-H', 'postcodes_impacted': ['DE24 8UH', 'DE24 8RB', 'DE24 8RD'], 'received_time': '2021-04-25 12:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4292003333333332, 52.89896866666667]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 03:17', 'incident_id': 'INCD-567277-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567277-s', 'postcodes_impacted': ['KA55BE', 'KA55BJ', 'KA55BP', 'KA55BQ', 'KA55BT'], 'received_time': '2021-04-26 01:21'}, 'geometry': {'type': 'Point', 'coordinates': [-4.383326000881877, 55.51462180336614]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-567199-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567199-s', 'postcodes_impacted': ['EH526PG'], 'received_time': '2021-04-25 16:48'}, 'geometry': {'type': 'Point', 'coordinates': [-3.474905193656197, 55.93939941851783]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KY2 postcode area of Kirkcaldy. We did not know in advance there would be a power cut, however our team has managed to restore power to a number of properties in the area and are still working on the underground fault outside Harris Drive affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 2.00am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 12:47am on Monday, 26 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 01:00', 'incident_id': 'INCD-506913-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506913-f', 'postcodes_impacted': ['KY26RS', 'KY26RY', 'KY26RZ', 'KY26SA'], 'received_time': '2021-04-25 14:22'}, 'geometry': {'type': 'Point', 'coordinates': [-3.182632799497433, 56.13229112463199]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 07:30', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27NT'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.788360899719553, 56.013266501493575]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 03:00', 'incident_id': 'INCD-174303-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4NS': {'class': 'models.MapDataLocation', 'lat': 53.7899, 'lng': -0.311395}}, 'received_time': '2021-04-25 09:13'}, 'geometry': {'type': 'Point', 'coordinates': [-0.31166, 53.790076]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV CONSAC Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 02:00', 'incident_id': 'INCD-174328-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE9 5RW': {'class': 'models.MapDataLocation', 'lat': 54.9386, 'lng': -1.59011}}, 'received_time': '2021-04-25 11:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.590091, 54.938648]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 01:30', 'incident_id': 'INCD-174376-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3LL': {'class': 'models.MapDataLocation', 'lat': 53.7163, 'lng': -1.8768}, 'HX1 3LJ': {'class': 'models.MapDataLocation', 'lat': 53.7165, 'lng': -1.87627}, 'HX1 3LH': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.87617}, 'HX1 3LG': {'class': 'models.MapDataLocation', 'lat': 53.7168, 'lng': -1.87536}, 'HX1 3LE': {'class': 'models.MapDataLocation', 'lat': 53.7159, 'lng': -1.87606}, 'HX1 3LB': {'class': 'models.MapDataLocation', 'lat': 53.717, 'lng': -1.87456}}, 'received_time': '2021-04-25 17:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8758316666666666, 53.71640616666667]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 01:30', 'incident_id': 'INCD-174382-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 4BE': {'class': 'models.MapDataLocation', 'lat': 54.674, 'lng': -1.41465}}, 'received_time': '2021-04-25 17:55'}, 'geometry': {'type': 'Point', 'coordinates': [-1.420841, 54.678779]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174388-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU9 3ND': {'class': 'models.MapDataLocation', 'lat': 53.7627, 'lng': -0.273464}, 'HU9 5AA': {'class': 'models.MapDataLocation', 'lat': 53.7622, 'lng': -0.273758}, 'HU9 4SQ': {'class': 'models.MapDataLocation', 'lat': 53.7618, 'lng': -0.273288}, 'HU9 3NF': {'class': 'models.MapDataLocation', 'lat': 53.7633, 'lng': -0.275533}, 'HU9 3HR': {'class': 'models.MapDataLocation', 'lat': 53.7584, 'lng': -0.29447}, 'HU9 3NB': {'class': 'models.MapDataLocation', 'lat': 53.7638, 'lng': -0.273906}, 'HU9 3NA': {'class': 'models.MapDataLocation', 'lat': 53.7624, 'lng': -0.274053}, 'HU9 5RJ': {'class': 'models.MapDataLocation', 'lat': 53.7487, 'lng': -0.270401}}, 'received_time': '2021-04-25 19:15'}, 'geometry': {'type': 'Point', 'coordinates': [-0.27611450000000004, 53.760420749999994]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 03:00', 'incident_id': 'INCD-174397-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL14 6XH': {'class': 'models.MapDataLocation', 'lat': 54.6445, 'lng': -1.67848}}, 'received_time': '2021-04-25 23:58'}, 'geometry': {'type': 'Point', 'coordinates': [-1.678482, 54.644462]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 03:15', 'incident_id': 'INCD-174398-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS11 5SS': {'class': 'models.MapDataLocation', 'lat': 53.7647, 'lng': -1.54896}}, 'received_time': '2021-04-26 00:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.548742, 53.764608]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 12:00', 'incident_id': 'PPC038962', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO22 5DP': {'class': 'models.MapDataLocation', 'lat': 54.452, 'lng': -0.659645}, 'YO22 5DX': {'class': 'models.MapDataLocation', 'lat': 54.4519, 'lng': -0.65573}, 'YO22 5DU': {'class': 'models.MapDataLocation', 'lat': 54.4516, 'lng': -0.655325}, 'YO22 5DS': {'class': 'models.MapDataLocation', 'lat': 54.4524, 'lng': -0.654725}, 'YO22 5DT': {'class': 'models.MapDataLocation', 'lat': 54.4519, 'lng': -0.655313}, 'YO22 5DR': {'class': 'models.MapDataLocation', 'lat': 54.4532, 'lng': -0.657878}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6564411666666667, 54.452173166666675]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 10:00', 'incident_id': 'PPC039158', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO30 7BB': {'class': 'models.MapDataLocation', 'lat': 53.9709, 'lng': -1.08718}, 'YO30 7EH': {'class': 'models.MapDataLocation', 'lat': 53.9709, 'lng': -1.08793}, 'YO30 7BA': {'class': 'models.MapDataLocation', 'lat': 53.9712, 'lng': -1.08764}, 'YO30 6BZ': {'class': 'models.MapDataLocation', 'lat': 53.9701, 'lng': -1.09046}, 'YO30 7BE': {'class': 'models.MapDataLocation', 'lat': 53.9704, 'lng': -1.08864}, 'YO30 7AY': {'class': 'models.MapDataLocation', 'lat': 53.9712, 'lng': -1.08664}, 'YO30 7AU': {'class': 'models.MapDataLocation', 'lat': 53.9705, 'lng': -1.08777}, 'YO30 7AX': {'class': 'models.MapDataLocation', 'lat': 53.9711, 'lng': -1.08628}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0877892499999997, 53.970775375]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to replace damaged equipment in a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:30', 'incident_id': 'PPC039550', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1LW': {'class': 'models.MapDataLocation', 'lat': 54.5195, 'lng': -1.46949}, 'DL2 1JL': {'class': 'models.MapDataLocation', 'lat': 54.5203, 'lng': -1.47259}, 'DL2 1JJ': {'class': 'models.MapDataLocation', 'lat': 54.5196, 'lng': -1.47176}, 'DL2 1LN': {'class': 'models.MapDataLocation', 'lat': 54.5203, 'lng': -1.4713}, 'DL2 1JH': {'class': 'models.MapDataLocation', 'lat': 54.5199, 'lng': -1.47279}, 'DL2 1JG': {'class': 'models.MapDataLocation', 'lat': 54.5183, 'lng': -1.47083}, 'DL2 1JQ': {'class': 'models.MapDataLocation', 'lat': 54.519, 'lng': -1.47066}, 'DL2 1JR': {'class': 'models.MapDataLocation', 'lat': 54.5212, 'lng': -1.47287}, 'DL2 1JS': {'class': 'models.MapDataLocation', 'lat': 54.5215, 'lng': -1.47231}, 'DL2 1JT': {'class': 'models.MapDataLocation', 'lat': 54.5217, 'lng': -1.47326}, 'DL2 1RJ': {'class': 'models.MapDataLocation', 'lat': 54.5259, 'lng': -1.47509}, 'DL2 1JU': {'class': 'models.MapDataLocation', 'lat': 54.522, 'lng': -1.47428}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4722625, 54.52077241666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'PPC039572', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN14 7HT': {'class': 'models.MapDataLocation', 'lat': 53.7497, 'lng': -0.957958}, 'DN14 7HU': {'class': 'models.MapDataLocation', 'lat': 53.7506, 'lng': -0.960665}, 'DN14 7HW': {'class': 'models.MapDataLocation', 'lat': 53.748, 'lng': -0.954525}, 'DN14 7HX': {'class': 'models.MapDataLocation', 'lat': 53.749, 'lng': -0.965739}, 'DN14 7HJ': {'class': 'models.MapDataLocation', 'lat': 53.7487, 'lng': -0.953811}, 'DN14 7HL': {'class': 'models.MapDataLocation', 'lat': 53.7499, 'lng': -0.956102}, 'DN14 7HN': {'class': 'models.MapDataLocation', 'lat': 53.7516, 'lng': -0.958911}, 'DN14 7HQ': {'class': 'models.MapDataLocation', 'lat': 53.7477, 'lng': -0.946709}, 'DN14 7HS': {'class': 'models.MapDataLocation', 'lat': 53.7492, 'lng': -0.956333}, 'DN14 7HR': {'class': 'models.MapDataLocation', 'lat': 53.7486, 'lng': -0.956392}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9566764000000001, 53.7493037]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to move equipment in order to allow another organisation to work close to our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039678', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN11 9HA': {'class': 'models.MapDataLocation', 'lat': 53.4274, 'lng': -1.07111}, 'DN11 8EN': {'class': 'models.MapDataLocation', 'lat': 53.4258, 'lng': -1.05143}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0616135, 53.426921500000006]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:30', 'incident_id': 'PPC039681', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL8 4LF': {'class': 'models.MapDataLocation', 'lat': 54.2229, 'lng': -2.0196}}, 'received_time': '2021-04-26 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.019674, 54.222928]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-27 15:00', 'incident_id': 'PPC039697', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO8 8LF': {'class': 'models.MapDataLocation', 'lat': 53.7351, 'lng': -1.08758}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.093908, 53.737364]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to move equipment in order to allow another organisation to work close to our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:30', 'incident_id': 'PPC039800', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL8 4JZ': {'class': 'models.MapDataLocation', 'lat': 54.2737, 'lng': -1.97822}, 'DL8 4JX': {'class': 'models.MapDataLocation', 'lat': 54.275, 'lng': -1.97504}, 'DL8 4JY': {'class': 'models.MapDataLocation', 'lat': 54.2745, 'lng': -1.97721}, 'DL8 4LG': {'class': 'models.MapDataLocation', 'lat': 54.2477, 'lng': -1.9777}, 'DL8 4LD': {'class': 'models.MapDataLocation', 'lat': 54.2663, 'lng': -1.98842}, 'DL8 4LE': {'class': 'models.MapDataLocation', 'lat': 54.2394, 'lng': -1.99516}, 'DL8 4LB': {'class': 'models.MapDataLocation', 'lat': 54.2727, 'lng': -1.9763}, 'DL8 4JN': {'class': 'models.MapDataLocation', 'lat': 54.2768, 'lng': -1.974}}, 'received_time': '2021-04-26 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.980205375, 54.265784624999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:00', 'incident_id': 'PPC039828', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH8 9AD': {'class': 'models.MapDataLocation', 'lat': 54.8294, 'lng': -1.86803}, 'DH8 9AE': {'class': 'models.MapDataLocation', 'lat': 54.8288, 'lng': -1.86816}, 'DH8 9AQ': {'class': 'models.MapDataLocation', 'lat': 54.8263, 'lng': -1.86647}, 'DH8 9AB': {'class': 'models.MapDataLocation', 'lat': 54.8277, 'lng': -1.86553}}, 'received_time': '2021-04-26 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.86701425, 54.82804425]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 10:30', 'incident_id': 'PPC039864', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL7 0PY': {'class': 'models.MapDataLocation', 'lat': 54.3529, 'lng': -1.53518}, 'DL7 0PX': {'class': 'models.MapDataLocation', 'lat': 54.3529, 'lng': -1.53023}, 'DL7 0PU': {'class': 'models.MapDataLocation', 'lat': 54.3517, 'lng': -1.52358}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.531008, 54.352348000000006]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:30', 'incident_id': 'PPC039866', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 9DB': {'class': 'models.MapDataLocation', 'lat': 53.9436, 'lng': -0.622242}, 'YO25 9BT': {'class': 'models.MapDataLocation', 'lat': 53.944, 'lng': -0.606721}, 'YO25 9DA': {'class': 'models.MapDataLocation', 'lat': 53.934, 'lng': -0.591484}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.606773, 53.940554]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 15:00', 'incident_id': 'PPC039867', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF7 6HF': {'class': 'models.MapDataLocation', 'lat': 53.6847, 'lng': -1.37642}, 'WF7 6HE': {'class': 'models.MapDataLocation', 'lat': 53.6839, 'lng': -1.38273}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3795985000000002, 53.6845105]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 12:00', 'incident_id': 'PPC039934', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO10 4DZ': {'class': 'models.MapDataLocation', 'lat': 53.9458, 'lng': -1.07838}}, 'received_time': '2021-04-26 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.078383, 53.945529]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 09:15', 'incident_id': 'PPC039969', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TP': {'class': 'models.MapDataLocation', 'lat': 54.0603, 'lng': -0.706953}}, 'received_time': '2021-04-26 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.706978, 54.060366]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 10:15', 'incident_id': 'PPC039970', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TD': {'class': 'models.MapDataLocation', 'lat': 54.0723, 'lng': -0.662154}}, 'received_time': '2021-04-26 09:45'}, 'geometry': {'type': 'Point', 'coordinates': [-0.67733, 54.069868]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-26 13:00', 'incident_id': 'PPC040015', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG3 1QU': {'class': 'models.MapDataLocation', 'lat': 53.9623, 'lng': -1.60567}}, 'received_time': '2021-04-26 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.605714, 53.962257]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});