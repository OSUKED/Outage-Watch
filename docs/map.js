document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231423-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231423-Z', 'postcodes_impacted': ['CM73SE', 'IP121PW', 'IP137', 'IP137AA', 'IP137AB', 'IP137AD', 'IP137AE', 'IP137AF', 'IP137AG', 'IP137AH', 'IP137AJ', 'IP137AL', 'IP137AN', 'IP137AP', 'IP137AQ', 'IP137AR', 'IP137AS', 'IP137AT', 'IP137AU', 'IP137AW', 'IP137AX', 'IP137AZ', 'IP137BS', 'IP137BT', 'IP137BU', 'IP137BY', 'IP137BZ', 'IP137DU', 'IP137JU', 'IP137LH', 'IP139RP', 'IP139RR', 'IP139RS', 'IP139RT', 'IP139RU', 'IP139RX'], 'received_time': '2021-04-16T13:53:51'}, 'geometry': {'type': 'Point', 'coordinates': [1.270533656555274, 52.18864628363777]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T06:30:00', 'incident_id': 'INCD-248264-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248264-G', 'postcodes_impacted': ['TN210RU', 'TN210RX', 'TN210RY', 'TN210SA', 'TN210LD', 'TN210PH', 'TN210PJ', 'TN210PL', 'TN210PN'], 'received_time': '2021-04-16T22:51:43'}, 'geometry': {'type': 'Point', 'coordinates': [0.21396097348332024, 50.93704544770537]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an overhead electricity equipment fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248088-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248088-G', 'postcodes_impacted': ['BN207YA', 'CR04FE', 'TN288PL', 'TN299JH', 'TN299JJ', 'TN299LR', 'TN299LS', 'TN299NA', 'TN299NB', 'TN299ND', 'TN299NE', 'TN299NF', 'TN299NG', 'TN299NH', 'TN299NJ', 'TN299NL', 'TN299PN', 'TN299PS', 'TN299QL', 'UK'], 'received_time': '2021-04-13T14:08:01'}, 'geometry': {'type': 'Point', 'coordinates': [0.8575519213561089, 50.949847264326976]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T04:00:00', 'incident_id': 'INCD-260192-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260192-J', 'postcodes_impacted': ['SW21HF', 'SW21HJ', 'SW21HP', 'SW21HS'], 'received_time': '2021-04-16T16:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.12482983079948941, 51.447308278791056]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T06:00:00', 'incident_id': 'INCD-231513-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231513-Z', 'postcodes_impacted': ['CO12EZ', 'CO12HA', 'CO12EX', 'CO12EY', 'CO28AA', 'CO28AB', 'CO28YY'], 'received_time': '2021-04-16T23:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9199961409006951, 51.877201447574016]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-317078-U', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-317078-U', 'postcodes_impacted': ['ME160JJ', 'ME160JA', 'ME160JG'], 'received_time': '2021-04-16T20:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5021719507762511, 51.27564864963486]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T05:00:00', 'incident_id': 'INCD-231496-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231496-Z', 'postcodes_impacted': ['SS91AA', 'SS91BW', 'SS91PG', 'SS91PJ', 'SS91PR', 'SS91AY', 'SS91BS', 'SS91BX', 'SS91DE', 'SS91DG', 'SS91DH', 'SS91DJ', 'SS91DQ', 'SS91DY', 'SS91FR', 'SS91PE', 'SS91PH', 'SS91PN', 'SS91PS', 'SS91QB', 'SS91QD', 'SS91QE', 'SS91RJ', 'SS91RL', 'SS91RN', 'SS91RP'], 'received_time': '2021-04-16T19:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6609456177714684, 51.54237948961002]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T05:30:00', 'incident_id': 'INCD-248267-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248267-G', 'postcodes_impacted': ['BN59AA', 'BN59AB', 'BN59AD', 'BN59AE', 'BN59AH', 'BN59AJ', 'BN59AL', 'BN59AP', 'BN59BA', 'BN59DA', 'BN59DB', 'BN59DD', 'BN59DE', 'BN59DG', 'BN59DJ', 'BN59DL', 'BN59DN', 'BN59DP', 'BN59DQ', 'BN59DR', 'BN59DS', 'BN59DT', 'BN59DU', 'BN59DW', 'BN59DX', 'BN59DY', 'BN59DZ', 'BN59EA', 'BN59EB', 'BN59EE', 'BN59EG', 'BN59EH', 'BN59EJ', 'BN59EL', 'BN59EP', 'BN59EQ', 'BN59ER', 'BN59ES', 'BN59ET', 'BN59EX', 'BN59FE', 'BN59HA', 'BN59HB', 'BN59HD', 'BN59HL', 'BN59HN', 'BN59HP', 'BN59HR', 'BN59HS', 'BN59HT', 'BN59HU', 'BN59HX', 'BN59HY', 'BN59HZ', 'BN59JA', 'BN59JB', 'BN59JD', 'BN59JE', 'BN59JF', 'BN59JG', 'BN59JH', 'BN59JJ', 'BN59JL', 'BN59JP', 'BN59JR', 'BN59JZ', 'BN59LA', 'BN59LB', 'BN59LD', 'BN59LH', 'BN59NP', 'BN59NR', 'BN59NS', 'BN59NT', 'BN59NU', 'BN59NX', 'BN59NY', 'BN59NZ', 'BN59PA', 'BN59PB', 'BN59PD', 'BN59PE', 'BN59PF', 'BN59PG', 'BN59PH', 'BN59PJ', 'BN59PL', 'BN59PN', 'BN59PP', 'BN59PR', 'BN59PS', 'BN59PT', 'BN59PU', 'BN59PW', 'BN59PX', 'BN59PY', 'BN59QA', 'BN59QB', 'BN59QD', 'BN59QE', 'BN59QH', 'BN59QJ', 'BN59QL', 'BN59QR', 'BN59QT', 'BN59QY', 'BN59RL', 'BN59RN', 'BN59RQ', 'BN59RR', 'BN59RS', 'BN59RT', 'BN59RU', 'BN59RW', 'BN59RY', 'BN59RZ', 'BN59SE', 'BN59SF', 'BN59SG', 'BN59SH', 'BN59SJ', 'BN59SQ', 'BN59SR', 'BN59SU', 'BN59TA', 'BN59TB', 'BN59TD', 'BN59TE', 'BN59TS', 'BN59TT', 'BN59TU', 'BN59TW', 'BN59TX', 'BN59TY', 'BN59TZ', 'BN59UA', 'BN59UB', 'BN59UD', 'BN59UE', 'BN59UF', 'BN59UG', 'BN59UH', 'BN59UJ', 'BN59UL', 'BN59UN', 'BN59UP', 'BN59UQ', 'BN59UR', 'BN59US', 'BN59UT', 'BN59UU', 'BN59UW', 'BN59UX', 'BN59UY', 'BN59UZ', 'BN59XA', 'BN59XB', 'BN59YU', 'BN69BJ', 'BN69BN', 'BN69BW', 'BN69BX', 'BN69BY', 'BN69DA', 'BN69DJ', 'BN69EF', 'BN69EG', 'BN69NT', 'BN69PU', 'BN69PW', 'BN69PX', 'BN69PY', 'BN69PZ', 'BN69QA', 'BN69RE', 'BN69RG', 'BN69RH', 'BN69RQ', 'BN69SJ', 'BN69TR', 'BN69TS', 'DA26PD', 'KT139NT', 'KT25DF', 'KT25EJ', 'RH136PF', 'RH138AU', 'RH138EL', 'RH138EP', 'RH138EQ', 'RH138EX', 'RH138EY', 'RH138HE', 'RH138HF', 'RH138RA', 'RH138RY', 'RH176JX'], 'received_time': '2021-04-17T02:34:46'}, 'geometry': {'type': 'Point', 'coordinates': [-0.26258382827891463, 50.943799502146284]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T05:30:00', 'incident_id': 'INCD-248266-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248266-G', 'postcodes_impacted': ['CT118PS', 'CT118JT', 'CT118LA', 'CT118PT', 'CT118PU'], 'received_time': '2021-04-16T23:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4239827142795316, 51.33622029223913]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T05:30:00', 'incident_id': 'INCD-231518-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231518-Z', 'postcodes_impacted': ['EN13ED', 'EN13EG', 'EN26BN', 'EN13EF', 'EN26LE'], 'received_time': '2021-04-17T02:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08101181882386922, 51.65239850641598]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8042\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 05:00:00', 'incident_id': 'HB8042', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['IV2 4BL', 'IV2 4ES'], 'received_time': '2021-04-17 01:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.225487, 57.454218]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8040\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 04:30:00', 'incident_id': 'HB8040', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['IV2 4RY', 'IV2 4RZ'], 'received_time': '2021-04-17 01:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.226349, 57.452078]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8019\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 07:00:00', 'incident_id': 'HB8019', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SN3 4DS', 'SN3 4DT', 'SN3 4DU'], 'received_time': '2021-04-16 21:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7477883333333333, 51.572645666666666]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7965\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 03:00:00', 'incident_id': 'HB7965', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH21 1AG', 'BH21 1AN', 'BH21 1AS', 'BH21 1AU', 'BH21 1AW', 'BH21 1HZ', 'BH21 1UR', 'BH21 1UW', 'BH21 3PZ'], 'received_time': '2021-04-16 19:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9874111111111112, 50.79760511111111]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7953\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 04:00:00', 'incident_id': 'HB7953', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['IV36 1AW', 'IV36 1BA', 'IV36 1BB', 'IV36 1BD', 'IV36 1BU', 'IV36 1PB'], 'received_time': '2021-04-16 18:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.610547, 57.612120999999995]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 04:00:00', 'incident_id': 'INCD-18-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-18-q', 'postcodes_impacted': ['TA21 0PY', 'TA21 0PX'], 'received_time': '2021-04-17 00:43:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.346837, 50.9554765]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 03:00:00', 'incident_id': 'INCD-17-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-17-q', 'postcodes_impacted': ['BS34 5TA', 'BS34 5TB'], 'received_time': '2021-04-17 00:01:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.5915965, 51.5291065]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the LL11, LL13 and LL14 postcode area of Wrexham. We had no advance warning of this and only became aware of it at 2:09am. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 4:30am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 2:40am on 17th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 03:08', 'incident_id': 'INCD-564493-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564493-s', 'postcodes_impacted': ['*******', 'L115NP', 'LL111AA', 'LL113SB', 'LL114LA', 'LL115DQ', 'LL115DR', 'LL115DT', 'LL115LF', 'LL115NF', 'LL115NG', 'LL115NH', 'LL115NP', 'LL115NR', 'LL115NW', 'LL116AA', 'LL116AB', 'LL116AD', 'LL116AE', 'LL116AF', 'LL116AG', 'LL116AH', 'LL116AJ', 'LL116AL', 'LL116AN', 'LL116AP', 'LL116AQ', 'LL116AR', 'LL116AT', 'LL116AU', 'LL116AW', 'LL116AX', 'LL116AY', 'LL116AZ', 'LL116BA', 'LL116BD', 'LL116BE', 'LL116BG', 'LL116BL', 'LL116BP', 'LL116BQ', 'LL116BT', 'LL116BU', 'LL116BX', 'LL116BY', 'LL116DA', 'LL116DB', 'LL116DD', 'LL116DE', 'LL116DG', 'LL116DH', 'LL116DJ', 'LL116DL', 'LL116DQ', 'LL116EJ', 'LL116EL', 'LL116EP', 'LL116EZ', 'LL116HD', 'LL116HF', 'LL116HG', 'LL116HH', 'LL116HL', 'LL116HN', 'LL116HP', 'LL116HW', 'LL116LS', 'LL116LT', 'LL116LU', 'LL116NA', 'LL116NB', 'LL116PB', 'LL116PD', 'LL116PE', 'LL116PF', 'LL11XX', 'LL131AA', 'LL142NP', 'LL142RD', 'LL143BL', 'LL143RN', 'LL146DL'], 'received_time': '2021-04-17 02:08'}, 'geometry': {'type': 'Point', 'coordinates': [-3.040446290625334, 53.06500482679549]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G44 postcode area of Glasgow, affecting properties in Clarkston Road and surrounding streets. We did not know in advance there would be a power cut, and are working to get supplies restored. So far we have started excavation work on the underground cable fault in the area but due to difficult digging condition and we now expect your supply to be restored by 6:15am. We understand that being without power is frustrating and please be assured we will restore your supply as soon as we possibly can. If for any reason this information changes then we will update this message. We apologise for the inconvenience and thank you for your patience. This message was updated at 1:50am on 17th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 05:15', 'incident_id': 'INCD-564379-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564379-s', 'postcodes_impacted': ['G443AT', 'G443AU', 'G443AX', 'G443BL', 'G443BQ', 'G443BW', 'G443DA', 'G443YS'], 'received_time': '2021-04-16 18:22'}, 'geometry': {'type': 'Point', 'coordinates': [-4.264698263736534, 55.81362220512008]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 07:00', 'incident_id': 'INCD-564259-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564259-s', 'postcodes_impacted': ['PA75PB'], 'received_time': '2021-04-16 14:11'}, 'geometry': {'type': 'Point', 'coordinates': [-4.542923291440464, 55.91900063681292]}}, {'type': 'Feature', 'properties': {'description': 'This is a message for customers in the ML6 postcode area of Airdrie. It is necessary for our engineers to carry out an emergency shutdown at 1:30am to carry safe repair work to overhead line equipment and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible by 4:30am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1:15am on 17th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 03:30', 'incident_id': 'INCD-497459-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-497459-k', 'postcodes_impacted': ['ML67SP'], 'received_time': '2021-04-16 10:47'}, 'geometry': {'type': 'Point', 'coordinates': [-3.975431550328577, 55.88660968897796]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 11:00', 'incident_id': 'INCD-172159-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 4BT': {'class': 'models.MapDataLocation', 'lat': 54.5696, 'lng': -1.24351}}, 'received_time': '2021-04-16 17:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.24351, 54.569624]}}, {'type': 'Feature', 'properties': {'description': 'S/L Knockdown In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 03:30', 'incident_id': 'INCD-172183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF8 2PQ': {'class': 'models.MapDataLocation', 'lat': 53.7051, 'lng': -1.29156}, 'WF8 2LY': {'class': 'models.MapDataLocation', 'lat': 53.7045, 'lng': -1.29402}, 'WF8 2PG': {'class': 'models.MapDataLocation', 'lat': 53.7031, 'lng': -1.29452}, 'WF8 2PZ': {'class': 'models.MapDataLocation', 'lat': 53.7037, 'lng': -1.29198}}, 'received_time': '2021-04-16 19:59'}, 'geometry': {'type': 'Point', 'coordinates': [-1.29303175, 53.70410675]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 02:00', 'incident_id': 'INCD-172206-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S60 2JA': {'class': 'models.MapDataLocation', 'lat': 53.4247, 'lng': -1.35751}, 'S60 2JF': {'class': 'models.MapDataLocation', 'lat': 53.4235, 'lng': -1.35889}, 'S60 2UW': {'class': 'models.MapDataLocation', 'lat': 53.4232, 'lng': -1.35759}}, 'received_time': '2021-04-16 21:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3580969999999999, 53.423292333333336]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 02:30', 'incident_id': 'INCD-172213-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 3JU': {'class': 'models.MapDataLocation', 'lat': 53.8094, 'lng': -1.72499}, 'BD2 3EE': {'class': 'models.MapDataLocation', 'lat': 53.81, 'lng': -1.72702}, 'BD2 3EG': {'class': 'models.MapDataLocation', 'lat': 53.8097, 'lng': -1.72835}, 'BD2 3EF': {'class': 'models.MapDataLocation', 'lat': 53.8087, 'lng': -1.72762}, 'BD2 3EH': {'class': 'models.MapDataLocation', 'lat': 53.8092, 'lng': -1.72641}}, 'received_time': '2021-04-16 23:22'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7268718, 53.8093722]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172215-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF9 2AW': {'class': 'models.MapDataLocation', 'lat': 53.5946, 'lng': -1.29936}}, 'received_time': '2021-04-16 23:32'}, 'geometry': {'type': 'Point', 'coordinates': [-1.299044, 53.594699]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 05:00', 'incident_id': 'INCD-172216-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO10 5BN': {'class': 'models.MapDataLocation', 'lat': 53.9508, 'lng': -1.06314}}, 'received_time': '2021-04-16 23:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.063136, 53.950822]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 03:15', 'incident_id': 'INCD-172217-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD3 0JZ': {'class': 'models.MapDataLocation', 'lat': 53.8069, 'lng': -1.74073}}, 'received_time': '2021-04-17 00:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.740633, 53.8069]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 04:45', 'incident_id': 'INCD-172220-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S35 1AB': {'class': 'models.MapDataLocation', 'lat': 53.4599, 'lng': -1.46837}}, 'received_time': '2021-04-17 01:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.468368, 53.459971]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:00', 'incident_id': 'PPC039627', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD19 3JU': {'class': 'models.MapDataLocation', 'lat': 53.7253, 'lng': -1.71067}, 'BD19 3EG': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.7262}, 'BD19 3EA': {'class': 'models.MapDataLocation', 'lat': 53.7265, 'lng': -1.72435}, 'BD19 3AG': {'class': 'models.MapDataLocation', 'lat': 53.7264, 'lng': -1.72608}, 'BD19 3AF': {'class': 'models.MapDataLocation', 'lat': 53.7254, 'lng': -1.72498}, 'BD19 3EP': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.72464}, 'BD19 3AD': {'class': 'models.MapDataLocation', 'lat': 53.7255, 'lng': -1.72549}}, 'received_time': '2021-04-17 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.723217857142857, 53.72584328571429]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 11:00', 'incident_id': 'PPC039683', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL13 1PF': {'class': 'models.MapDataLocation', 'lat': 54.7443, 'lng': -2.11611}}, 'received_time': '2021-04-17 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.116174, 54.74408]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 12:00', 'incident_id': 'PPC039884', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO30 4RB': {'class': 'models.MapDataLocation', 'lat': 53.9912, 'lng': -1.09658}, 'YO30 4RA': {'class': 'models.MapDataLocation', 'lat': 53.9904, 'lng': -1.09681}, 'YO30 4US': {'class': 'models.MapDataLocation', 'lat': 53.9912, 'lng': -1.0954}}, 'received_time': '2021-04-17 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0965173333333333, 53.99096966666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-17 14:30', 'incident_id': 'PPC039900', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD7 3DU': {'class': 'models.MapDataLocation', 'lat': 53.5927, 'lng': -1.81854}, 'HD9 4DU': {'class': 'models.MapDataLocation', 'lat': 53.5939, 'lng': -1.81948}}, 'received_time': '2021-04-17 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.81901, 53.5932605]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-17 04:00', 'incident_id': '60508589', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA23 1BG', 'LA23 3AB', 'LA23 3AD', 'LA23 3AE', 'LA23 3AF', 'LA23 3AG', 'LA23 3AJ', 'LA23 3AL', 'LA23 3AQ', 'LA23 3AT', 'LA23 3EN', 'LA9 3AR'], 'received_time': '2021-04-16 20:21'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9184104545454543, 54.36275554545455]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '60508415', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA12 4PH', 'CA12 4PS', 'CA12 4PT', 'CA12 4PL', 'CA12 4PN', 'CA12 4PP', 'CA12 4PW', 'CA12 4PQ', 'CA12 4PY', 'CA12 4PZ', 'CA12 4QA', 'CA12 4RT', 'CA12 5UG'], 'received_time': '2021-04-16 19:40'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1419163846153846, 54.61730107692308]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});