document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231184-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231184-Z', 'postcodes_impacted': ['CB13LP', 'CB12AS', 'CB13AA', 'CB13AB', 'CB13AD', 'CB13LR', 'CB13ND', 'CB13NE'], 'received_time': '2021-04-15T13:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.14168191860975382, 52.19852649570228]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T11:00:00', 'incident_id': 'INCD-317064-U', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-317064-U', 'postcodes_impacted': ['TN24QZ', 'TN24QX', 'TN24QY', 'TN24RB'], 'received_time': '2021-04-15T16:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.29471554969636093, 51.13641384051603]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T03:30:00', 'incident_id': 'INCD-260106-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260106-J', 'postcodes_impacted': ['N165JE', 'N165JF', 'N165JH', 'N165JR'], 'received_time': '2021-04-15T17:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08046487863249735, 51.57365086312414]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-16T04:00:00', 'incident_id': 'INCD-260119-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260119-J', 'postcodes_impacted': ['SE129RX', 'SE129QT', 'SE129QU', 'SE129QZ', 'SE129RA', 'SE129RY', 'SE129RZ'], 'received_time': '2021-04-15T22:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.032159060216096956, 51.428159124911254]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7572\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 04:30:00', 'incident_id': 'HB7572', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU26 6AA', 'GU26 6AB', 'GU26 6AE', 'GU26 6AF', 'GU26 6AG', 'GU26 6AN', 'GU26 6AP', 'GU26 6AQ', 'GU26 6AR', 'GU26 6AS', 'GU26 6AT', 'GU26 6AW', 'GU26 6AY', 'GU26 6DH', 'GU26 6DJ', 'GU26 6DL', 'GU26 6DN', 'GU26 6DP', 'GU26 6DR', 'GU26 6DT', 'GU26 6DW', 'GU26 6EB', 'GU26 6ED', 'GU26 6EE', 'GU26 6EF', 'GU26 6EH', 'GU26 6EP', 'GU26 6EQ', 'GU26 6FE', 'GU26 6FG', 'GU26 6FH', 'GU26 6FL', 'GU26 6FR', 'GU26 6FS', 'GU26 6FT', 'GU26 6GA', 'GU26 6HD', 'GU26 6HE', 'GU26 6HF', 'GU26 6HG', 'GU26 6HJ', 'GU26 6HL', 'GU26 6HN', 'GU26 6HQ', 'GU26 6HR', 'GU26 6HS', 'GU26 6HW', 'GU26 6JG', 'GU26 6JR', 'GU26 6JS', 'GU26 6JT', 'GU26 6JW', 'GU26 6LA', 'GU26 6LB', 'GU26 6LD', 'GU26 6LE', 'GU26 6LF', 'GU26 6LG', 'GU26 6LL', 'GU26 6LN', 'GU26 6LP', 'GU26 6LQ', 'GU26 6LR', 'GU26 6LS', 'GU26 6LT', 'GU26 6LU', 'GU26 6LW', 'GU26 6LX', 'GU26 6LY', 'GU26 6LZ', 'GU26 6NA', 'GU26 6NB', 'GU26 6ND', 'GU26 6NE', 'GU26 6NF', 'GU26 6NG', 'GU26 6NH', 'GU26 6QW', 'GU26 6SD', 'GU26 6SE', 'GU26 6SF', 'GU26 6SG', 'GU26 6SH', 'GU26 6SL', 'GU26 6SN', 'GU26 6SP', 'GU26 6SQ', 'GU26 6SR', 'GU26 6SS', 'GU26 6ST', 'GU26 6SW', 'GU26 6TA', 'GU26 6TB', 'GU26 6TD', 'GU26 6TF', 'GU26 6TG', 'GU26 6TH', 'GU26 6TL', 'GU26 6TN', 'GU26 6TP', 'GU26 6TQ', 'GU26 6TR', 'GU26 6TS', 'GU26 6TT', 'GU26 6TU', 'GU26 6TX', 'GU26 6TY', 'GU26 6TZ', 'GU26 6UA', 'GU26 6UB', 'GU26 6UJ', 'GU26 6UY', 'GU27 2JE'], 'received_time': '2021-04-16 01:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7474943839285714, 51.11178979464285]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7378\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 04:00:00', 'incident_id': 'HB7378', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH8 8LL', 'BH8 8LP', 'BH8 8NP', 'BH8 8NR', 'BH8 8NS', 'BH8 8NW', 'BH8 8NY'], 'received_time': '2021-04-15 20:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8654604285714285, 50.73268157142858]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7562\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 05:00:00', 'incident_id': 'HB7562', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GL7 7ED', 'GL7 7EL', 'GL7 7EW'], 'received_time': '2021-04-15 17:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0061686666666665, 51.789441333333336]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 02:30:00', 'incident_id': 'INCD-125578-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125578-B', 'postcodes_impacted': ['EX2 6NH', 'EX2 6NJ', 'EX2 6NN', 'EX2 6NW'], 'received_time': '2021-04-15 16:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.49972625, 50.7053305]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 05:30:00', 'incident_id': 'INCD-357933-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357933-G', 'postcodes_impacted': ['B76 9EE'], 'received_time': '2021-04-15 21:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7362, 52.536006]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 08:00:00', 'incident_id': 'INCD-152670-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152670-H', 'postcodes_impacted': ['NN2 6BY', 'NN2 6DU', 'NN2 6BL', 'NN2 6BS', 'NN2 6DE', 'NN2 6BZ', 'NN2 6BP', 'NN2 6DD', 'NN2 6BE', 'NN2 6BJ', 'NN2 6DS', 'NN2 6BG', 'NN2 6BB', 'NN2 6DT', 'NN2 6BT', 'NN2 6AP', 'NN2 6AW', 'NN2 6AQ', 'NN2 6LQ', 'NN2 6DA', 'NN2 6BH', 'NN2 6BQ', 'NN2 6BX', 'NN2 6BU', 'NN2 6AH', 'NN2 6LF', 'NN2 6BD', 'NN2 6LG', 'NN2 6BN', 'NN2 6EU', 'NN2 6BW', 'NN2 6AL', 'NN2 6AX', 'NN2 6AF'], 'received_time': '2021-04-15 20:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9010533529411764, 52.2467780882353]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-16 03:25:00', 'incident_id': 'INCD-152667-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152667-H', 'postcodes_impacted': ['LE7 9DB'], 'received_time': '2021-04-15 18:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.907192, 52.643458]}}, {'type': 'Feature', 'properties': {'description': 'There is a power fault in the CH2 postcode area of Chester, affecting properties in Dickson Drive and surrounding streets. We had no advance warning of this and only became aware of it at 6:03PM. Repairs are taking longer than expected because of ongoing fault investigations and repairs and our team are now working to get your power back on as quickly and as safely as possible by 5am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 12:25am on 16th April', 'dno': 'sp', 'estimated_restored_time': '2021-04-16 04:00', 'incident_id': 'INCD-1809086-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809086-i', 'postcodes_impacted': ['CH22BT', 'CH22BY'], 'received_time': '2021-04-15 18:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.8894318706092825, 53.206634386640474]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171542-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS24 8HH': {'class': 'models.MapDataLocation', 'lat': 54.6958, 'lng': -1.22321}}, 'received_time': '2021-04-14 14:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.222918, 54.695816]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171792-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8AL': {'class': 'models.MapDataLocation', 'lat': 53.427, 'lng': -1.20937}, 'S66 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.4294, 'lng': -1.20865}, 'S66 8JT': {'class': 'models.MapDataLocation', 'lat': 53.4298, 'lng': -1.20703}, 'S66 8AD': {'class': 'models.MapDataLocation', 'lat': 53.4257, 'lng': -1.20882}}, 'received_time': '2021-04-15 12:59'}, 'geometry': {'type': 'Point', 'coordinates': [-1.20852825, 53.427761000000004]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'INCD-171831-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 3RH': {'class': 'models.MapDataLocation', 'lat': 53.9847, 'lng': -2.10833}}, 'received_time': '2021-04-15 14:20'}, 'geometry': {'type': 'Point', 'coordinates': [-2.108328, 53.984667]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171864-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S61 2PD': {'class': 'models.MapDataLocation', 'lat': 53.4295, 'lng': -1.38748}}, 'received_time': '2021-04-15 17:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.387477, 53.429481]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 10:00', 'incident_id': 'INCD-171865-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO15 3DT': {'class': 'models.MapDataLocation', 'lat': 54.0804, 'lng': -0.19833}}, 'received_time': '2021-04-15 17:14'}, 'geometry': {'type': 'Point', 'coordinates': [-0.198407, 54.080413]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 03:00', 'incident_id': 'INCD-171883-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF14 9PZ': {'class': 'models.MapDataLocation', 'lat': 53.6794, 'lng': -1.70837}, 'WF14 9DL': {'class': 'models.MapDataLocation', 'lat': 53.6795, 'lng': -1.71197}, 'WF14 9QB': {'class': 'models.MapDataLocation', 'lat': 53.6804, 'lng': -1.71057}, 'WF14 9DA': {'class': 'models.MapDataLocation', 'lat': 53.6759, 'lng': -1.70063}, 'WF14 9DQ': {'class': 'models.MapDataLocation', 'lat': 53.6785, 'lng': -1.70798}, 'WF14 9AZ': {'class': 'models.MapDataLocation', 'lat': 53.6792, 'lng': -1.70598}, 'WF14 9QD': {'class': 'models.MapDataLocation', 'lat': 53.6814, 'lng': -1.71166}, 'WF14 9QA': {'class': 'models.MapDataLocation', 'lat': 53.6794, 'lng': -1.70985}, 'WF14 9DH': {'class': 'models.MapDataLocation', 'lat': 53.6784, 'lng': -1.71081}}, 'received_time': '2021-04-15 20:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7089197777777778, 53.67923622222222]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'INCD-171884-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S65 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.4513, 'lng': -1.29961}}, 'received_time': '2021-04-15 20:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.299615, 53.451345]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-16 02:00', 'incident_id': 'INCD-171896-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL6 2HW': {'class': 'models.MapDataLocation', 'lat': 54.4339, 'lng': -1.46164}}, 'received_time': '2021-04-15 22:50'}, 'geometry': {'type': 'Point', 'coordinates': [-1.461623, 54.433936]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:30', 'incident_id': 'PPC039345', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX6 3SB': {'class': 'models.MapDataLocation', 'lat': 53.6885, 'lng': -1.92136}, 'HX4 0DA': {'class': 'models.MapDataLocation', 'lat': 53.68, 'lng': -1.91801}, 'HX6 4JJ': {'class': 'models.MapDataLocation', 'lat': 53.6809, 'lng': -1.93052}, 'HX6 3SD': {'class': 'models.MapDataLocation', 'lat': 53.6891, 'lng': -1.92342}, 'HX4 0DE': {'class': 'models.MapDataLocation', 'lat': 53.6833, 'lng': -1.92094}, 'HX4 0AG': {'class': 'models.MapDataLocation', 'lat': 53.6759, 'lng': -1.9095}, 'HX4 0BZ': {'class': 'models.MapDataLocation', 'lat': 53.6813, 'lng': -1.91545}}, 'received_time': '2021-04-16 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9195268571428572, 53.68257142857143]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 09:00', 'incident_id': 'PPC039431', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8XA': {'class': 'models.MapDataLocation', 'lat': 54.5308, 'lng': -1.83809}, 'DL12 8UY': {'class': 'models.MapDataLocation', 'lat': 54.5303, 'lng': -1.83809}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.838142, 54.530589500000005]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:30', 'incident_id': 'PPC039435', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8XL': {'class': 'models.MapDataLocation', 'lat': 54.5301, 'lng': -1.83943}, 'DL12 8XG': {'class': 'models.MapDataLocation', 'lat': 54.5278, 'lng': -1.83731}, 'DL12 8XD': {'class': 'models.MapDataLocation', 'lat': 54.5289, 'lng': -1.83862}, 'DL12 8XE': {'class': 'models.MapDataLocation', 'lat': 54.5285, 'lng': -1.83865}, 'DL12 8XF': {'class': 'models.MapDataLocation', 'lat': 54.5278, 'lng': -1.83798}, 'DL12 8UZ': {'class': 'models.MapDataLocation', 'lat': 54.531, 'lng': -1.83807}, 'DL12 8XQ': {'class': 'models.MapDataLocation', 'lat': 54.5289, 'lng': -1.83698}}, 'received_time': '2021-04-16 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8381859999999999, 54.529038]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'PPC039501', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6RQ': {'class': 'models.MapDataLocation', 'lat': 54.2365, 'lng': -0.877763}, 'YO62 6RG': {'class': 'models.MapDataLocation', 'lat': 54.2388, 'lng': -0.881167}, 'YO62 6RH': {'class': 'models.MapDataLocation', 'lat': 54.2263, 'lng': -0.874879}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8801113333333332, 54.234772666666665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-16 14:00', 'incident_id': 'PPC039532', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN9 2BL': {'class': 'models.MapDataLocation', 'lat': 53.5156, 'lng': -0.923471}, 'DN9 2BN': {'class': 'models.MapDataLocation', 'lat': 53.518, 'lng': -0.922144}, 'DN3 3UA': {'class': 'models.MapDataLocation', 'lat': 53.5061, 'lng': -1.0456}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9637206666666668, 53.513202666666665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039604', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 8PR': {'class': 'models.MapDataLocation', 'lat': 53.7216, 'lng': -1.81875}, 'HX3 9XQ': {'class': 'models.MapDataLocation', 'lat': 53.725, 'lng': -1.85098}, 'HX3 8PS': {'class': 'models.MapDataLocation', 'lat': 53.7188, 'lng': -1.81481}, 'HX3 8PN': {'class': 'models.MapDataLocation', 'lat': 53.7229, 'lng': -1.81948}, 'HX3 8PP': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.81849}, 'HX3 8PJ': {'class': 'models.MapDataLocation', 'lat': 53.7264, 'lng': -1.82624}, 'HX3 8PL': {'class': 'models.MapDataLocation', 'lat': 53.7238, 'lng': -1.82165}, 'HX3 8HR': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.82074}, 'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}, 'HX3 9XB': {'class': 'models.MapDataLocation', 'lat': 53.7237, 'lng': -1.82421}, 'HX3 9XA': {'class': 'models.MapDataLocation', 'lat': 53.726, 'lng': -1.83025}, 'HX3 9SL': {'class': 'models.MapDataLocation', 'lat': 53.7113, 'lng': -1.82691}, 'HX3 8PW': {'class': 'models.MapDataLocation', 'lat': 53.7239, 'lng': -1.81919}, 'HX3 8PU': {'class': 'models.MapDataLocation', 'lat': 53.7354, 'lng': -1.78728}, 'HX3 9XF': {'class': 'models.MapDataLocation', 'lat': 53.7262, 'lng': -1.83399}, 'HX3 9XE': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.82881}, 'HX3 9UG': {'class': 'models.MapDataLocation', 'lat': 53.714, 'lng': -1.83573}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8237496470588237, 53.72298452941176]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 10:00', 'incident_id': 'PPC039621', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD13 5HW': {'class': 'models.MapDataLocation', 'lat': 53.8273, 'lng': -1.90161}, 'BD13 5DA': {'class': 'models.MapDataLocation', 'lat': 53.8248, 'lng': -1.90084}, 'BD13 5DE': {'class': 'models.MapDataLocation', 'lat': 53.8258, 'lng': -1.89926}, 'BD13 5DF': {'class': 'models.MapDataLocation', 'lat': 53.8249, 'lng': -1.89844}, 'BD13 2DL': {'class': 'models.MapDataLocation', 'lat': 53.7608, 'lng': -1.8595}, 'BD13 5DD': {'class': 'models.MapDataLocation', 'lat': 53.8253, 'lng': -1.89886}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8929485000000001, 53.81478283333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 12:00', 'incident_id': 'PPC039667', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 3AT': {'class': 'models.MapDataLocation', 'lat': 55.2246, 'lng': -1.63339}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.633298, 55.224571]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 16:00', 'incident_id': 'PPC039730', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD8 8XU': {'class': 'models.MapDataLocation', 'lat': 53.5617, 'lng': -1.68335}, 'HD9 2TA': {'class': 'models.MapDataLocation', 'lat': 53.5432, 'lng': -1.76592}, 'HD8 8XY': {'class': 'models.MapDataLocation', 'lat': 53.5577, 'lng': -1.67494}, 'HD8 8XP': {'class': 'models.MapDataLocation', 'lat': 53.5662, 'lng': -1.69347}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.70439425, 53.55720025]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:30', 'incident_id': 'PPC039757', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3AQ': {'class': 'models.MapDataLocation', 'lat': 54.9721, 'lng': -1.77168}, 'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3AA': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77236}, 'NE40 3AN': {'class': 'models.MapDataLocation', 'lat': 54.9736, 'lng': -1.7705}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AW': {'class': 'models.MapDataLocation', 'lat': 54.9729, 'lng': -1.77177}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-16 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.771655375, 54.972390250000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:00', 'incident_id': 'PPC039796', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8DF': {'class': 'models.MapDataLocation', 'lat': 54.106, 'lng': -0.59455}, 'YO17 8DE': {'class': 'models.MapDataLocation', 'lat': 54.0955, 'lng': -0.617705}, 'YO17 8DB': {'class': 'models.MapDataLocation', 'lat': 54.0951, 'lng': -0.619567}, 'YO17 8DL': {'class': 'models.MapDataLocation', 'lat': 54.0964, 'lng': -0.617722}, 'YO17 8DJ': {'class': 'models.MapDataLocation', 'lat': 54.0963, 'lng': -0.617233}, 'YO17 8DH': {'class': 'models.MapDataLocation', 'lat': 54.0965, 'lng': -0.617455}}, 'received_time': '2021-04-16 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.61344, 54.09772016666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 12:00', 'incident_id': 'PPC039820', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR7 7SJ': {'class': 'models.MapDataLocation', 'lat': 54.837, 'lng': -1.33848}, 'SR7 7JN': {'class': 'models.MapDataLocation', 'lat': 54.8358, 'lng': -1.3365}, 'SR7 7SH': {'class': 'models.MapDataLocation', 'lat': 54.8367, 'lng': -1.33812}, 'SR7 7RZ': {'class': 'models.MapDataLocation', 'lat': 54.8378, 'lng': -1.33979}, 'SR7 7SG': {'class': 'models.MapDataLocation', 'lat': 54.8366, 'lng': -1.33881}, 'SR7 7SF': {'class': 'models.MapDataLocation', 'lat': 54.8359, 'lng': -1.33709}, 'SR7 7SE': {'class': 'models.MapDataLocation', 'lat': 54.8356, 'lng': -1.33716}, 'SR7 7SA': {'class': 'models.MapDataLocation', 'lat': 54.8377, 'lng': -1.338}, 'SR7 7JE': {'class': 'models.MapDataLocation', 'lat': 54.836, 'lng': -1.33448}, 'SR7 7SQ': {'class': 'models.MapDataLocation', 'lat': 54.8362, 'lng': -1.3381}, 'SR7 7SB': {'class': 'models.MapDataLocation', 'lat': 54.8372, 'lng': -1.33953}, 'SR7 7SL': {'class': 'models.MapDataLocation', 'lat': 54.8363, 'lng': -1.34014}}, 'received_time': '2021-04-16 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.33811925, 54.83654408333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-16 08:00', 'incident_id': 'PPC039827', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8TE': {'class': 'models.MapDataLocation', 'lat': 53.7534, 'lng': -1.9149}, 'HX2 8SW': {'class': 'models.MapDataLocation', 'lat': 53.7511, 'lng': -1.91364}, 'HX2 8SN': {'class': 'models.MapDataLocation', 'lat': 53.752, 'lng': -1.91182}}, 'received_time': '2021-04-16 07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.91345, 53.75218166666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 13:00', 'incident_id': 'PPC039907', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 0NG': {'class': 'models.MapDataLocation', 'lat': 53.664, 'lng': -1.72604}, 'HD5 0PB': {'class': 'models.MapDataLocation', 'lat': 53.6477, 'lng': -1.70131}, 'HD5 0PA': {'class': 'models.MapDataLocation', 'lat': 53.6489, 'lng': -1.70345}, 'HD5 0RF': {'class': 'models.MapDataLocation', 'lat': 53.6779, 'lng': -1.73078}}, 'received_time': '2021-04-16 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7153485, 53.65948074999999]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-16 05:00', 'incident_id': '40810241', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB10 1BN', 'BB10 1DL', 'BB10 1DR', 'BB10 1QD', 'BB10 1QU', 'BB10 1QX'], 'received_time': '2021-04-15 22:55'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2397673333333334, 53.80157583333334]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});