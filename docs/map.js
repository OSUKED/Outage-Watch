document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which has caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248753-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248753-G', 'postcodes_impacted': ['RH103NS', 'RH123AW', 'RH123QA', 'RH123QD', 'RH4', 'RH41SF', 'RH43YT', 'RH55NA', 'RH55NB', 'RH55ND', 'RH55NE', 'RH55NG', 'RH55NH', 'RH55NL', 'RH55PH', 'RH55PS', 'RH55PT', 'RH55PU', 'RH55PY', 'RH55PZ', 'RH55QA', 'RH55QB', 'RH55QD', 'RH55QE', 'RH55QG', 'RH55QH', 'RH55QJ', 'RH55RG', 'RH55RH', 'RH55RJ', 'RH55RL', 'RH55RQ', 'TN127DN', 'TN218FH'], 'received_time': '2021-04-25T06:47:31'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3374951381679733, 51.126909673591335]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T10:30:00', 'incident_id': 'INCD-260710-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260710-J', 'postcodes_impacted': ['IG11EJ', 'IG12EH', 'IG12EJ', 'IG12EL', 'IG12JZ', 'IG12LA', 'IG12LD', 'IG12LE'], 'received_time': '2021-04-25T05:04:30'}, 'geometry': {'type': 'Point', 'coordinates': [0.0718008177494092, 51.55456516981595]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T08:30:00', 'incident_id': 'INCD-232924-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232924-Z', 'postcodes_impacted': ['CM232LY', 'CM232XG', 'CM233AB', 'CM233AG', 'CM233AT', 'CM233AY', 'CM233AZ', 'CM233DG', 'CM233FL', 'CM233GQ', 'CM233GX', 'CM233JB', 'CM233RU', 'CM233RX', 'CM233SJ', 'CM233SL', 'CM233SN', 'CM233SP', 'CM233UH', 'CM233UL', 'CM233XH'], 'received_time': '2021-04-25T03:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.15816582095204434, 51.869127707955805]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T10:30:00', 'incident_id': 'INCD-232937-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232937-Z', 'postcodes_impacted': ['IP11', 'IP110QL', 'IP117AB', 'IP117AD', 'IP117EL', 'IP117EN', 'IP117HA', 'IP117YY'], 'received_time': '2021-04-25T07:27:53'}, 'geometry': {'type': 'Point', 'coordinates': [1.3469254028095938, 51.968900460420834]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55074-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55074-V', 'postcodes_impacted': ['ME172AN', 'ME172AP', 'ME172AZ', 'ME172BA'], 'received_time': '2021-04-25T07:24:28'}, 'geometry': {'type': 'Point', 'coordinates': [0.679819253928182, 51.208545989906916]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232922-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232922-Z', 'postcodes_impacted': ['RM188RW', 'RM188SJ', 'RM188SP'], 'received_time': '2021-04-25T02:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.41913805908977936, 51.4836884138798]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T12:00:00', 'incident_id': 'INCD-6582-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6582-O', 'postcodes_impacted': ['HP25RR', 'NR33ST', 'NR33SY', 'NR33TP'], 'received_time': '2021-04-26T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8451798267183119, 52.432168144452916]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T16:00:00', 'incident_id': 'INCD-229868-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229868-Z', 'postcodes_impacted': ['CO112JZ', 'CO112LP', 'CO76BJ'], 'received_time': '2021-04-25T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0190091446086122, 51.943073414848264]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1717\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 09:00:00', 'incident_id': 'HC1717', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG2 0GF', 'RG31 7DG', 'RG31 7DN', 'RG31 7DQ', 'RG31 7DR', 'RG31 7DW'], 'received_time': '2021-04-25 06:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0283175, 51.43945733333334]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1721\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 08:00:00', 'incident_id': 'HC1721', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['AB51 3JD', 'AB51 3RN', 'AB51 3UE', 'AB51 3UF', 'AB51 3UR', 'AB51 3US', 'AB51 3UX', 'AB51 3UZ', 'AB51 5XJ'], 'received_time': '2021-04-25 04:39:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3707512222222222, 57.271689]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 08:00:00', 'incident_id': 'INCD-414-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-414-q', 'postcodes_impacted': ['PL13 1PQ'], 'received_time': '2021-04-25 06:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.43292, 50.391887]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 08:30:00', 'incident_id': 'INCD-413-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-413-q', 'postcodes_impacted': ['DT6 6LR', 'DT6 6QT', 'DT6 6QS', 'DT6 6QX', 'DT6 6QR', 'DT6 6RA', 'DT6 6RD', 'DT6 6NS', 'DT6 6LW', 'DT6 6AB', 'DT6 6PU', 'DT6 6SE', 'DT6 6PZ', 'DT6 6QP', 'DT6 6PS', 'DT6 6QE', 'DT6 6QA', 'DT6 6EW', 'DT6 6RU', 'DT6 6LL', 'DT6 6ED', 'DT6 6QZ', 'DT6 6FF', 'DT6 6QH', 'DT6 6QQ', 'DT6 6LH', 'DT6 6LS', 'DT6 6LP', 'DT6 6QJ', 'DT6 6LX', 'DT6 6LJ', 'DT6 6EE', 'DT6 6RS', 'DT6 6LN', 'DT6 6QD', 'DT6 6LT', 'DT6 6QW', 'DT6 6QL', 'DT6 6PN', 'DT6 6DY', 'DT6 6BD', 'DT6 6PX', 'DT6 6QG', 'DT6 6EB', 'DT6 6QF', 'DT6 6SD', 'DT6 6RR', 'DT6 6RE', 'DT6 6RB'], 'received_time': '2021-04-25 06:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.8931496530612244, 50.73894173469388]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 09:00:00', 'incident_id': 'INCD-408-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-408-q', 'postcodes_impacted': ['TR14 0QJ', 'TR14 0QE'], 'received_time': '2021-04-25 03:01:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.31995, 50.2042505]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 12:00:00', 'incident_id': 'INCD-358536-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358536-G', 'postcodes_impacted': ['ST18 0TP'], 'received_time': '2021-04-25 00:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.999543, 52.795852]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 09:00:00', 'incident_id': 'INCD-416884-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416884-E', 'postcodes_impacted': ['CW12 1JZ', 'CW12 4DG', 'CW12 1JY', 'CW12 1JR', 'CW12 4DJ', 'CW12 4ES', 'CW12 4DH', 'CW12 1JX', 'CW12 1JN', 'CW12 4EY'], 'received_time': '2021-04-25 05:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2191704999999997, 53.1641743]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 08:30', 'incident_id': 'INCD-506805-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506805-f', 'postcodes_impacted': ['KY112LB', 'KY112LD', 'KY112SE'], 'received_time': '2021-04-25 01:13'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4171253057430655, 56.040927430018655]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the TD5 postcode area of Kelso. We had no advance warning of this and only became aware of it at 12:03am. Our engineers have arrived onsite and are investigating the cause of the fault.  Our team will work to get your power back on as quickly and as safely as possible by 8:30am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 6:35am on 25th April', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:30', 'incident_id': 'INCD-506835-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506835-f', 'postcodes_impacted': ['TD57LP', 'TD57SN'], 'received_time': '2021-04-25 00:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4302977708232056, 55.60674466548582]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 09:00', 'incident_id': 'INCD-567085-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567085-s', 'postcodes_impacted': ['KY14LP', 'KY14LS', 'KY14LT', 'KY14LW', 'KY14LY', 'KY14LZ', 'KY14NN', 'KY14NT'], 'received_time': '2021-04-24 21:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.086261476559906, 56.15152938082994]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 07:30', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27AA', 'FK27NS', 'FK27NT', 'FK27NU', 'FK27NX', 'FK27NZ', 'FK27PA', 'FK27RP', 'FK27RR', 'FK27RS', 'FK27RZ'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7871457775190596, 56.012777524454165]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174232-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S2 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.3713, 'lng': -1.46612}}, 'received_time': '2021-04-24 16:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.466121, 53.371315]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174240-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD10 9BB': {'class': 'models.MapDataLocation', 'lat': 53.8313, 'lng': -1.7147}}, 'received_time': '2021-04-24 17:40'}, 'geometry': {'type': 'Point', 'coordinates': [-1.714699, 53.831298]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 11:00', 'incident_id': 'INCD-174247-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 9AP': {'class': 'models.MapDataLocation', 'lat': 54.5402, 'lng': -1.9332}}, 'received_time': '2021-04-24 19:23'}, 'geometry': {'type': 'Point', 'coordinates': [-1.933182, 54.540173]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 11:00', 'incident_id': 'INCD-174273-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS27 3HF': {'class': 'models.MapDataLocation', 'lat': 54.6777, 'lng': -1.30344}}, 'received_time': '2021-04-25 02:43'}, 'geometry': {'type': 'Point', 'coordinates': [-1.303458, 54.677739]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174276-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 5SZ': {'class': 'models.MapDataLocation', 'lat': 55.2136, 'lng': -1.54044}, 'NE61 5TE': {'class': 'models.MapDataLocation', 'lat': 55.2139, 'lng': -1.54086}, 'NE61 5TA': {'class': 'models.MapDataLocation', 'lat': 55.2142, 'lng': -1.54326}, 'NE61 5TD': {'class': 'models.MapDataLocation', 'lat': 55.2143, 'lng': -1.5428}}, 'received_time': '2021-04-25 04:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.54189875, 55.214017]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 08:15', 'incident_id': 'INCD-174279-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S13 9ZE': {'class': 'models.MapDataLocation', 'lat': 53.3683, 'lng': -1.3428}, 'S13 9ZD': {'class': 'models.MapDataLocation', 'lat': 53.3661, 'lng': -1.33797}, 'S13 9ZH': {'class': 'models.MapDataLocation', 'lat': 53.371, 'lng': -1.33784}, 'S13 9ZL': {'class': 'models.MapDataLocation', 'lat': 53.3692, 'lng': -1.34312}}, 'received_time': '2021-04-25 04:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.34030425, 53.368722749999996]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 09:00', 'incident_id': 'INCD-174281-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR7 7QE': {'class': 'models.MapDataLocation', 'lat': 54.8301, 'lng': -1.34611}, 'SR7 7QD': {'class': 'models.MapDataLocation', 'lat': 54.827, 'lng': -1.34395}, 'SR7 7RS': {'class': 'models.MapDataLocation', 'lat': 54.8301, 'lng': -1.34552}, 'SR7 7QF': {'class': 'models.MapDataLocation', 'lat': 54.8309, 'lng': -1.34592}, 'SR7 7RN': {'class': 'models.MapDataLocation', 'lat': 54.8309, 'lng': -1.34452}}, 'received_time': '2021-04-25 05:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3452532, 54.829807800000005]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 09:15', 'incident_id': 'INCD-174286-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE8 3SQ': {'class': 'models.MapDataLocation', 'lat': 54.9518, 'lng': -1.58635}}, 'received_time': '2021-04-25 06:13'}, 'geometry': {'type': 'Point', 'coordinates': [-1.58632, 54.951755]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 09:15', 'incident_id': 'INCD-174287-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF2 0UR': {'class': 'models.MapDataLocation', 'lat': 53.696, 'lng': -1.53051}, 'WF2 0NX': {'class': 'models.MapDataLocation', 'lat': 53.6968, 'lng': -1.52853}}, 'received_time': '2021-04-25 06:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5294984999999999, 53.696355999999994]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 09:30', 'incident_id': 'INCD-174288-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO42 4TL': {'class': 'models.MapDataLocation', 'lat': 53.8741, 'lng': -0.931946}, 'YO42 4TN': {'class': 'models.MapDataLocation', 'lat': 53.8728, 'lng': -0.930717}, 'YO42 4TJ': {'class': 'models.MapDataLocation', 'lat': 53.8748, 'lng': -0.929845}, 'YO42 4TZ': {'class': 'models.MapDataLocation', 'lat': 53.8738, 'lng': -0.93276}, 'YO42 4TH': {'class': 'models.MapDataLocation', 'lat': 53.8738, 'lng': -0.929839}}, 'received_time': '2021-04-25 05:58'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9310214, 53.873835199999995]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 09:30', 'incident_id': 'INCD-174289-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS13 2EF': {'class': 'models.MapDataLocation', 'lat': 53.8127, 'lng': -1.62543}, 'LS13 2JA': {'class': 'models.MapDataLocation', 'lat': 53.8152, 'lng': -1.625}, 'LS13 2JB': {'class': 'models.MapDataLocation', 'lat': 53.8131, 'lng': -1.62695}, 'LS13 2ET': {'class': 'models.MapDataLocation', 'lat': 53.8118, 'lng': -1.6264}, 'LS13 2TL': {'class': 'models.MapDataLocation', 'lat': 53.8106, 'lng': -1.62211}, 'LS13 2JE': {'class': 'models.MapDataLocation', 'lat': 53.8145, 'lng': -1.62467}, 'LS13 3JF': {'class': 'models.MapDataLocation', 'lat': 53.8115, 'lng': -1.62784}, 'LS13 2EP': {'class': 'models.MapDataLocation', 'lat': 53.8125, 'lng': -1.62835}}, 'received_time': '2021-04-25 06:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6258495, 53.81270325]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174291-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN12 1NX': {'class': 'models.MapDataLocation', 'lat': 53.3551, 'lng': 0.21321}}, 'received_time': '2021-04-25 06:39'}, 'geometry': {'type': 'Point', 'coordinates': [0.213239, 53.355153]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-25 12:00', 'incident_id': 'PPC039332', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 1TJ': {'class': 'models.MapDataLocation', 'lat': 53.7232, 'lng': -1.85964}, 'HX1 1RL': {'class': 'models.MapDataLocation', 'lat': 53.723, 'lng': -1.85978}, 'HX1 1RN': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TN': {'class': 'models.MapDataLocation', 'lat': 53.7235, 'lng': -1.8599}, 'HX1 1UU': {'class': 'models.MapDataLocation', 'lat': 53.7246, 'lng': -1.8599}, 'HX1 1RW': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TH': {'class': 'models.MapDataLocation', 'lat': 53.7231, 'lng': -1.86042}}, 'received_time': '2021-04-25 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8597867142857143, 53.723433428571425]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 13:26', 'incident_id': '10646736', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['OL7 9SN', 'OL7 9SP', 'OL7 9SR', 'OL7 9SS', 'OL7 9SW', 'OL7 9SY', 'OL7 9TJ'], 'received_time': '2021-04-25 07:22'}, 'geometry': {'type': 'Point', 'coordinates': [-2.102856, 53.50552628571428]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 13:10', 'incident_id': '40811428', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY7 7AW', 'FY7 7AZ', 'FY7 7BL'], 'received_time': '2021-04-25 07:03'}, 'geometry': {'type': 'Point', 'coordinates': [-3.024608, 53.92119233333333]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '10646700', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK1 3EZ', 'SK1 3LP', 'SK1 3EY', 'SK1 4AP', 'SK14 5PR', 'SK1 3LF', 'SK1 3AU', 'SK1 4LW', 'SK1 3BX', 'SK1 3DB', 'SK1 3BD', 'SK1 3BZ', 'SK1 3DD', 'SK1 3DU', 'SK1 1YS', 'SK1 3BL', 'SK1 3NE', 'SK1 3NH', 'SK1 1FE', 'SK1 3AS', 'SK1 3AW', 'SK1 3AX', 'SK1 3AY', 'SK1 3AZ', 'SK1 3BB', 'SK1 3BQ', 'SK1 3DE', 'SK1 3DF', 'SK1 3DG', 'SK1 3DL', 'SK1 3DR', 'SK1 3DX', 'SK1 3EB', 'SK1 3ED', 'SK1 3EG', 'SK1 3EH', 'SK1 3EJ', 'SK1 3EN', 'SK1 3EQ', 'SK1 3ER', 'SK1 3EU', 'SK1 3EW', 'SK1 3QN', 'SK1 4LH', 'SK1 1JE', 'SK1 1YJ', 'SK1 3AL', 'SK1 3AR', 'SK1 3DT', 'SK1 3HW', 'SK1 3HZ', 'SK1 3JA', 'SK1 3JB', 'SK1 3JD', 'SK1 3JZ', 'SK1 4LG', 'SK1 4LJ', 'SK1 4LP', 'SK1 1YG', 'SK1 1YH', 'SK1 1YR', 'SK1 1YW', 'SK1 4AL', 'SK1 4BS', 'SK1 4BU', 'SK1 4BX', 'SK1 4AA', 'SK1 3BJ', 'SK1 3BP', 'SK1 3BU', 'SK1 3BW', 'SK1 4BT', 'SK14 4RY', 'SK1 1JP', 'SK1 1JQ', 'SK1 1JY', 'SK1 1LA', 'SK1 1LL', 'SK1 1LN', 'SK1 1LT', 'SK1 1LW', 'SK1 1LX', 'SK1 1LY', 'SK1 1PJ', 'SK1 1PN', 'SK1 1XR', 'SK1 1YD', 'SK1 1EW', 'SK1 4LS', 'SK1 4LR', 'SK1 4LZ', 'SK1 4NA', 'SK1 4ND', 'SK1 4NE', 'SK1 4NF', 'SK1 4NG', 'SK1 3JN', 'SK1 3JR', 'SK1 3JS', 'SK1 3JT', 'SK1 3JU', 'SK1 3JX', 'SK1 3JY', 'SK1 3LH'], 'received_time': '2021-04-25 06:12'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1511237403846155, 53.406927125]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the overhead cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 10:32', 'incident_id': '60509212', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA23 3AB', 'CA23 3DJ', 'CA23 3DL', 'CA23 3DS', 'CA23 3DT', 'CA23 3DU', 'CA23 3EP'], 'received_time': '2021-04-25 05:44'}, 'geometry': {'type': 'Point', 'coordinates': [-3.515979714285714, 54.511347857142866]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});