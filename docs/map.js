document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232632-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232632-Z', 'postcodes_impacted': ['CM170AT', 'CM170AP', 'CM170AX', 'CM170DB', 'CM170DT', 'CM170EX'], 'received_time': '2021-04-22T23:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.13408236811348603, 51.78413573984928]}}, {'type': 'Feature', 'properties': {'description': 'Our engineers had to redirect power due to a fault on the electricity network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232802-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232802-Z', 'postcodes_impacted': ['IP256QG', 'CM778FS', 'IP241', 'IP241FJ', 'IP241NH', 'IP241NJ', 'IP241NL', 'IP241NN', 'IP241NP', 'IP241NR', 'IP241NS', 'IP241NT', 'IP241NU', 'IP241NW', 'IP241NY', 'IP241NZ', 'IP241PA', 'IP241PB', 'IP241PD', 'IP241PE', 'IP241PF', 'IP241PH', 'IP241PJ', 'IP241PL', 'IP241PN', 'IP241PP', 'IP241PR', 'IP241PS', 'IP241PT', 'IP241PU', 'IP241PW', 'IP241PX', 'IP241PY', 'IP241PZ', 'IP241QA', 'IP241QB', 'IP241QD', 'IP241QE', 'IP241QF', 'IP241QG', 'IP241QH', 'IP241QQ', 'IP241RT', 'IP241SE', 'IP256', 'IP256AS', 'IP256AT', 'IP256AU', 'IP256AX', 'IP256AY', 'IP256AZ', 'IP256BF', 'IP256BG', 'IP256BJ', 'IP256BL', 'IP256BP', 'IP256BS', 'IP256HD', 'IP256HN', 'IP256JZ', 'IP256LB', 'IP256PS', 'IP256QH', 'IP256QJ', 'IP256QL', 'IP256QN', 'IP256QQ', 'IP256QY', 'IP256RJ', 'IP256SR', 'IP256TN', 'IP256TQ', 'IP256TS', 'IP256TT', 'IP256TW', 'IP256UW', 'IP256XB', 'IP256XD', 'IP256XH', 'IP256XJ', 'IP256XL', 'IP256XN', 'IP256XP', 'IP256XQ', 'IP256XT', 'IP256XW', 'N167HH', 'NR171BF', 'NR171DP', 'NR171DR', 'NR171DS', 'NR171DU', 'NR171DX', 'NR171DY', 'NR171DZ', 'NR171EA', 'NR171EB', 'NR171ED', 'NR171EJ', 'NR171EL', 'NR171EN', 'NR171EP', 'NR171ER', 'NR171ES', 'NR171ET', 'NR171EU', 'NR171EW', 'NR171EX', 'NR171FE', 'NR171HD', 'NR171XG', 'NR171XQ', 'NR172LP'], 'received_time': '2021-04-23T15:54:35'}, 'geometry': {'type': 'Point', 'coordinates': [0.843315450566849, 52.51856875801602]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-23T06:00:00', 'incident_id': 'INCD-232840-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232840-Z', 'postcodes_impacted': ['PE297SD', 'PE297YR'], 'received_time': '2021-04-23T20:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18937116795607184, 52.33592941080159]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T03:00:00', 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AF', 'NR129AH', 'NR129EG', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.772971449030656]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1458\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 02:00:00', 'incident_id': 'HC1458', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO21 5GA', 'PO21 5LH', 'PO21 5NU', 'PO21 5PB', 'PO21 5PH', 'PO21 5XA'], 'received_time': '2021-04-23 22:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6958628333333333, 50.79128616666666]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1455\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 02:00:00', 'incident_id': 'HC1455', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB8 2LF', 'UB8 2LN', 'UB8 2LW'], 'received_time': '2021-04-23 22:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.48357266666666665, 51.52388033333333]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1367\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 01:00:00', 'incident_id': 'HC1367', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB1 1SU', 'UB1 1SW'], 'received_time': '2021-04-22 23:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.37583900000000003, 51.510153]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 01:30:00', 'incident_id': 'INCD-2360-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2360-g', 'postcodes_impacted': ['SA4 3PX', 'SA4 3PU', 'SA4 3NU', 'SA4 3PY', 'SA4 3NY', 'SA4 3QY', 'SA4 3PW', 'SA4 3HN', 'SA4 3HW', 'SA4 3QH', 'SA4 3QZ', 'SA4 3HR', 'SA4 3HT', 'SA4 3QX', 'SA4 3QS', 'SA4 3HU', 'SA4 3QA', 'SA4 3QU', 'SA4 3RA', 'SA4 3QJ', 'SA4 3HS', 'SA4 3PZ', 'SA4 3HH', 'SA4 3NX'], 'received_time': '2021-04-23 23:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.062027208333333, 51.635539916666666]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 01:30:00', 'incident_id': 'INCD-358500-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358500-G', 'postcodes_impacted': ['WV4 6BU', 'WV4 6BX'], 'received_time': '2021-04-23 15:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1076335, 52.558251]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 02:00:00', 'incident_id': 'INCD-416854-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416854-E', 'postcodes_impacted': ['BS37 5XR', 'BS37 5XW', 'BS37 5XT', 'BS37 5XS', 'BS37 5XX'], 'received_time': '2021-04-23 22:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4287567999999995, 51.545654400000004]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 00:00:00', 'incident_id': 'INCD-153213-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153213-H', 'postcodes_impacted': ['MK18 4BX', 'MK18 4DB', 'MK18 4LX', 'MK18 4LR', 'MK18 4DE', 'MK18 4LY', 'MK18 4LN', 'MK18 4LP', 'MK18 4DA', 'MK18 4DP', 'MK18 4LS', 'MK18 4BZ', 'MK18 4BA', 'MK18 4DR', 'MK18 4LT', 'MK18 4BB', 'MK18 4LJ', 'MK18 4LL', 'MK18 4DD', 'MK18 4LG', 'MK18 4ND', 'MK18 4LF', 'MK18 4LD', 'MK18 4NA', 'MK18 4DU', 'MK18 4LB', 'MK18 4BY', 'MK18 4LU', 'MK18 4LE', 'MK18 4JR', 'MK18 4DT', 'MK18 2LJ', 'MK18 4LH', 'MK18 4AG', 'MK18 4JS', 'MK18 4LZ', 'MK18 4HB', 'MK18 4DS', 'MK18 4BT', 'MK18 2HA'], 'received_time': '2021-04-23 22:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.03591865, 51.9601731]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 00:30:00', 'incident_id': 'INCD-153212-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153212-H', 'postcodes_impacted': ['NG19 9HL', 'NG19 9EY', 'NG19 9HJ', 'NG19 9EZ', 'NG19 9HB', 'NG19 9HH', 'NG19 9HA', 'NG19 9HQ', 'NG19 9HD', 'NG19 9HN'], 'received_time': '2021-04-23 21:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1738396999999998, 53.17210709999999]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 00:00:00', 'incident_id': 'INCD-153194-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153194-H', 'postcodes_impacted': ['CV5 7AQ', 'CV5 7AT', 'CV5 7DS', 'CV4 9FF'], 'received_time': '2021-04-23 14:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5676860000000001, 52.407707]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-153158-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153158-H', 'postcodes_impacted': ['DE7 5TG'], 'received_time': '2021-04-23 09:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.295771, 52.976316]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 01:00:00', 'incident_id': 'INCD-153214-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153214-H', 'postcodes_impacted': ['NG1 6LF', 'NG1 6LD', 'NG1 6JP', 'NG1 6JD', 'NG1 6JZ', 'NG1 6LG', 'NG1 5FW', 'NG1 6JE', 'NG1 6AZ', 'NG1 6HX', 'NG1 6GD', 'NG1 5JN', 'NG1 1FS', 'NG1 5FX'], 'received_time': '2021-04-23 23:06:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1526657142857142, 52.9544745]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 01:00', 'incident_id': 'INCD-1810430-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810430-i', 'postcodes_impacted': ['CH53NA'], 'received_time': '2021-04-23 21:54'}, 'geometry': {'type': 'Point', 'coordinates': [-3.040862046311986, 53.16545009381851]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 01:30', 'incident_id': 'INCD-506661-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506661-f', 'postcodes_impacted': ['EH481AA', 'EH482NX', 'EH482PR', 'EH483EP'], 'received_time': '2021-04-23 20:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.6822610847882133, 55.899486738089095]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the EH16 postcode area of Edinburgh. Engineers have managed to restore power to a number of properties and are continuing to work on the underground cable fault near Wauchope Avenue substation and we still expect all power to be restored by 2am. We understand that to be without power is frustrating and we apologise for this. We will update this message if this information changes. Thank you for your patience. This message was updated at 11:35PM on Friday, 23 April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 01:00', 'incident_id': 'INCD-566743-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566743-s', 'postcodes_impacted': ['EH164AQ', 'EH164JZ', 'EH164LA', 'EH164LB', 'EH164LD', 'EH164LE', 'EH164LF', 'EH164LG', 'EH164LL', 'EH164LN', 'EH164LX', 'EH164NB', 'EH164PX', 'EH164RY'], 'received_time': '2021-04-23 16:41'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1219185499809994, 55.93312381881349]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the CW6 postcode area of Kelsall, affecting customers on Waste Lane, Castle Hill and Tirley Lane. We had no advance warning of this and only became aware of it at  4:18PM. Our engineers have established that there is an underground cable fault and that repairs will be complex so we are arranging for generators to restore power, and this should happen by 01:00AM. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:58PM on 23rd April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 00:00', 'incident_id': 'INCD-566707-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566707-s', 'postcodes_impacted': ['CH38AB', 'CH38AE', 'CH38AG', 'CH38AH', 'CH38NL', 'CH650AB', 'CW60GD', 'CW60GQ', 'CW60LF', 'CW60NB', 'CW60ND', 'CW60NE', 'CW60NF', 'CW60NG', 'CW60NH', 'CW60NJ', 'CW60NL', 'CW60NN', 'CW60NP', 'CW60NQ', 'CW60NR', 'CW60NS', 'CW60NT', 'CW60NU', 'CW60NX', 'CW60NY', 'CW60PA', 'CW60PB', 'CW60PD', 'CW60PE', 'CW60PF', 'CW60PG', 'CW60PH', 'CW60PJ', 'CW60PL', 'CW60PN', 'CW60PP', 'CW60PQ', 'CW60PR', 'CW60PS', 'CW60PT', 'CW60PU', 'CW60PX', 'CW60PY', 'CW60PZ', 'CW60QA', 'CW60QB', 'CW60QD', 'CW60QE', 'CW60QF', 'CW60QG', 'CW60QH', 'CW60QJ', 'CW60QL', 'CW60QN', 'CW60QP', 'CW60QQ', 'CW60QR', 'CW60QS', 'CW60QT', 'CW60QU', 'CW60QW', 'CW60QX', 'CW60QY', 'CW60QZ', 'CW60RA', 'CW60RB', 'CW60RD', 'CW60RE', 'CW60RF', 'CW60RH', 'CW60RJ', 'CW60RN', 'CW60RP', 'CW60RR', 'CW60RS', 'CW60RT', 'CW60RY', 'CW60RZ', 'CW60SA', 'CW60SB', 'CW60SD', 'CW60SE', 'CW60SG', 'CW60SH', 'CW60SJ', 'CW60SL', 'CW60SP', 'CW60SQ', 'CW60SW', 'CW60SY', 'CW60SZ', 'CW60TA', 'CW60TB', 'CW60TD', 'CW60TE', 'CW60TG', 'CW60TJ', 'CW60TL', 'CW60UQ', 'CW60XP', 'CW61AA', 'CW61XX', 'CW69JJ', 'CW69NJ', 'CW6ONJ', 'CW81NW', 'CW82JD', 'WA66PA'], 'received_time': '2021-04-23 16:18'}, 'geometry': {'type': 'Point', 'coordinates': [-2.708179071310908, 53.20823781305982]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-566533-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566533-s', 'postcodes_impacted': ['FK14', 'FK14EG', 'FK14EW', 'FK14HJ', 'FK14PP', 'FK14PX', 'FK14PZ', 'FK14QF', 'FK14QJ', 'FK14QL'], 'received_time': '2021-04-23 10:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.8168204994033994, 56.00353753562862]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 00:00', 'incident_id': 'INCD-17260-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF9 2TA': {'class': 'models.MapDataLocation', 'lat': 53.5972, 'lng': -1.28475}, 'WF9 2UE': {'class': 'models.MapDataLocation', 'lat': 53.6022, 'lng': -1.2863}, 'WF9 2TF': {'class': 'models.MapDataLocation', 'lat': 53.5993, 'lng': -1.28679}, 'WF9 2TX': {'class': 'models.MapDataLocation', 'lat': 53.6001, 'lng': -1.28652}, 'WF9 2UP': {'class': 'models.MapDataLocation', 'lat': 53.6, 'lng': -1.28741}}, 'received_time': '2021-04-23 10:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2863973999999998, 53.5997788]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174056-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN15 7LG': {'class': 'models.MapDataLocation', 'lat': 53.5929, 'lng': -0.65595}}, 'received_time': '2021-04-23 15:14'}, 'geometry': {'type': 'Point', 'coordinates': [-0.65589, 53.592845]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174059-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL14 7JN': {'class': 'models.MapDataLocation', 'lat': 54.6628, 'lng': -1.67414}}, 'received_time': '2021-04-23 15:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.673419, 54.662575]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV CONSAC Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 02:30', 'incident_id': 'INCD-174076-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 1RJ': {'class': 'models.MapDataLocation', 'lat': 55.1697, 'lng': -1.70005}, 'NE61 1BX': {'class': 'models.MapDataLocation', 'lat': 55.1704, 'lng': -1.69351}, 'NE61 2YU': {'class': 'models.MapDataLocation', 'lat': 55.1637, 'lng': -1.71072}, 'NE61 1DB': {'class': 'models.MapDataLocation', 'lat': 55.1709, 'lng': -1.69486}, 'NE61 1BZ': {'class': 'models.MapDataLocation', 'lat': 55.171, 'lng': -1.69453}, 'NE61 1RG': {'class': 'models.MapDataLocation', 'lat': 55.1702, 'lng': -1.69775}, 'NE61 1RL': {'class': 'models.MapDataLocation', 'lat': 55.1709, 'lng': -1.69703}, 'NE61 1DF': {'class': 'models.MapDataLocation', 'lat': 55.172, 'lng': -1.69513}, 'NE61 1RF': {'class': 'models.MapDataLocation', 'lat': 55.171, 'lng': -1.6967}, 'NE61 1RE': {'class': 'models.MapDataLocation', 'lat': 55.1712, 'lng': -1.69632}, 'NE61 1RD': {'class': 'models.MapDataLocation', 'lat': 55.1706, 'lng': -1.69643}}, 'received_time': '2021-04-23 17:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6975853636363638, 55.170150909090914]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 04:00', 'incident_id': 'INCD-174088-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD3 9HB': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.73974}, 'BD3 9HR': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.74119}, 'BD3 9HP': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.74176}, 'BD1 5JA': {'class': 'models.MapDataLocation', 'lat': 53.7958, 'lng': -1.74055}}, 'received_time': '2021-04-23 19:34'}, 'geometry': {'type': 'Point', 'coordinates': [-1.74091325, 53.79426975]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 02:30', 'incident_id': 'INCD-174095-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 8AY': {'class': 'models.MapDataLocation', 'lat': 53.6434, 'lng': -1.76059}}, 'received_time': '2021-04-23 20:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.760605, 53.643413]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 00:45', 'incident_id': 'INCD-174098-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE4 5AE': {'class': 'models.MapDataLocation', 'lat': 54.9775, 'lng': -1.639}, 'NE4 5LQ': {'class': 'models.MapDataLocation', 'lat': 54.9784, 'lng': -1.63882}, 'NE4 5LP': {'class': 'models.MapDataLocation', 'lat': 54.9766, 'lng': -1.63912}}, 'received_time': '2021-04-23 21:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6390133333333334, 54.977518333333336]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 04:00', 'incident_id': 'INCD-174099-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 4SN': {'class': 'models.MapDataLocation', 'lat': 53.6453, 'lng': -1.84334}}, 'received_time': '2021-04-23 21:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.843353, 53.645311]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 02:15', 'incident_id': 'INCD-174105-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE4 5PB': {'class': 'models.MapDataLocation', 'lat': 54.9778, 'lng': -1.64161}, 'NE4 5NY': {'class': 'models.MapDataLocation', 'lat': 54.9755, 'lng': -1.64216}, 'NE4 5AB': {'class': 'models.MapDataLocation', 'lat': 54.9766, 'lng': -1.6404}, 'NE4 5NS': {'class': 'models.MapDataLocation', 'lat': 54.9765, 'lng': -1.64084}, 'NE4 5JU': {'class': 'models.MapDataLocation', 'lat': 54.9756, 'lng': -1.63971}}, 'received_time': '2021-04-23 23:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6409478, 54.9763964]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 02:45', 'incident_id': 'INCD-174107-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE4 5NT': {'class': 'models.MapDataLocation', 'lat': 54.9787, 'lng': -1.64048}}, 'received_time': '2021-04-23 23:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.64104, 54.978645]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 01:00', 'incident_id': '40811224', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY8 1AZ', 'FY8 1AU', 'FY8 1AX', 'FY8 1BT', 'FY8 1AY', 'FY8 1QL', 'FY8 5RN', 'FY8 1BB', 'FY8 1BS', 'FY8 1DY', 'FY8 1EA', 'FY8 1EQ', 'FY8 1ED', 'FY8 1BA', 'FY8 1BD', 'FY8 1BH', 'FY8 1BQ', 'FY8 1EB', 'FY8 1DT'], 'received_time': '2021-04-23 23:51'}, 'geometry': {'type': 'Point', 'coordinates': [-2.999599578947369, 53.739703947368426]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 05:17', 'incident_id': '60509108', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA6 1AU', 'LA6 1AX', 'LA6 1AY', 'LA6 1BA', 'LA6 2QZ'], 'received_time': '2021-04-23 23:04'}, 'geometry': {'type': 'Point', 'coordinates': [-2.6317454000000002, 54.1407684]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 04:46', 'incident_id': '40811210', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR1 8BJ', 'PR1 8JB', 'PR1 8NA', 'PR1 8NB', 'PR1 8QF', 'PR1 8QT', 'PR1 8QU', 'PR1 8UL'], 'received_time': '2021-04-23 22:42'}, 'geometry': {'type': 'Point', 'coordinates': [-2.709695, 53.75627075]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 06:40', 'incident_id': '40811205', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR6 8RD', 'PR6 8RJ', 'PR6 8RL', 'PR6 8RQ', 'PR6 8RR', 'PR6 8UA', 'PR6 9RD'], 'received_time': '2021-04-23 22:07'}, 'geometry': {'type': 'Point', 'coordinates': [-2.565773142857143, 53.68013571428572]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 01:30', 'incident_id': '40811187', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['WA3 6EL', 'WA3 6LE', 'WA3 6LH', 'WA3 6EN', 'WA3 6HJ', 'WA3 6LG', 'WA3 6LQ', 'WA3 6DZ', 'WA3 6EG', 'WA3 6EH', 'WA3 6EF', 'WA3 6EJ', 'WA3 6'], 'received_time': '2021-04-23 20:41'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4821199999999997, 53.418934]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});