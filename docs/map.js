document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231513-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231513-Z', 'postcodes_impacted': ['CO12HA', 'CO12EX', 'CO12EY', 'CO12EZ', 'CO28AA', 'CO28AB', 'CO28YY'], 'received_time': '2021-04-16T23:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9199961409006951, 51.877201447574016]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231536-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231536-Z', 'postcodes_impacted': ['CB16NX', 'CM159PX', 'IP279AF', 'IP279BG', 'IP279BH', 'IP288AA', 'IP288AB', 'IP288AD', 'IP288AE', 'IP288AF', 'IP288AL', 'IP288AN', 'IP288AP', 'IP288AR', 'IP288AS', 'IP288AT', 'IP288AU', 'IP288AW', 'IP288AY', 'IP288AZ', 'IP288BA', 'IP288BB', 'IP288BD', 'IP288BE', 'IP288BG', 'IP288BH', 'IP288BJ', 'IP288BL', 'IP288BN', 'IP288BP', 'IP288BQ', 'IP288BT', 'IP288BW', 'IP288DB', 'IP288DD', 'IP288DE', 'IP288DF', 'IP288ED', 'IP288EH', 'IP288EJ', 'IP288EN', 'IP288FA', 'IP288FD', 'IP288FE', 'IP288FF', 'IP288FG', 'IP288FP', 'IP288FX', 'IP288FZ', 'IP288HH', 'IP288LS', 'IP288LT', 'IP288LU', 'IP288LX', 'IP288LY', 'IP288LZ', 'IP288NA', 'IP288NB', 'IP288NH', 'IP288NL', 'IP288PU', 'IP288QF', 'IP288RP', 'IP288RS', 'IP288SS', 'IP288UA', 'IP288UB', 'IP288UD', 'IP288UE', 'IP288UF', 'IP288UG', 'IP288UH', 'IP288UP', 'IP288UU', 'IP288UW', 'IP288WB', 'IP288WD', 'IP288WH', 'IP288ZH', 'IP288ZJ', 'NR129QT', 'PE26FS', 'UK'], 'received_time': '2021-04-17T07:55:25'}, 'geometry': {'type': 'Point', 'coordinates': [0.49547533463796106, 52.36417054023059]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an overhead electricity equipment fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248088-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248088-G', 'postcodes_impacted': ['BN207YA', 'CR04FE', 'TN288PL', 'TN299JH', 'TN299JJ', 'TN299LR', 'TN299LS', 'TN299NA', 'TN299NB', 'TN299ND', 'TN299NE', 'TN299NF', 'TN299NG', 'TN299NH', 'TN299NJ', 'TN299NL', 'TN299PN', 'TN299PS', 'TN299QL', 'UK'], 'received_time': '2021-04-13T14:08:01'}, 'geometry': {'type': 'Point', 'coordinates': [0.8575519213561089, 50.949847264326976]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T11:00:00', 'incident_id': 'INCD-231533-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231533-Z', 'postcodes_impacted': ['IP83LL', 'IP83LZ', 'IP83NG', 'IP83NQ', 'IP83PH', 'IP83PJ', 'IP83QX', 'IP83QY', 'IP83TA', 'IP83TE', 'IP83TF', 'IP83TG', 'IP83TH', 'IP83TJ', 'IP83TL', 'IP83TN'], 'received_time': '2021-04-17T07:35:06'}, 'geometry': {'type': 'Point', 'coordinates': [1.1175904751354935, 52.03349519481665]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T10:00:00', 'incident_id': 'INCD-248276-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248276-G', 'postcodes_impacted': ['BN69PU', 'BN69PW', 'BN69PX', 'BN69PY', 'BN69PZ', 'BN69QA', 'BN69RE', 'BN69RG', 'BN69RH', 'BN69RQ'], 'received_time': '2021-04-17T07:06:18'}, 'geometry': {'type': 'Point', 'coordinates': [-0.17644968129437721, 50.93282322774582]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T11:00:00', 'incident_id': 'INCD-248275-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248275-G', 'postcodes_impacted': ['RH104PZ'], 'received_time': '2021-04-17T06:44:46'}, 'geometry': {'type': 'Point', 'coordinates': [-0.0787043565539071, 51.11090134605362]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-317078-U', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-317078-U', 'postcodes_impacted': ['ME160JJ', 'ME160JA', 'ME160JG'], 'received_time': '2021-04-16T20:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5021719507762511, 51.27564864963486]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T10:00:00', 'incident_id': 'INCD-59904-N', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-59904-N', 'postcodes_impacted': ['KT33BF', 'KT33PB', 'KT33QP', 'KT33QW'], 'received_time': '2021-04-17T06:54:45'}, 'geometry': {'type': 'Point', 'coordinates': [-0.26143738458824944, 51.40041820694422]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T10:00:00', 'incident_id': 'INCD-248273-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248273-G', 'postcodes_impacted': ['TN126BT', 'TN126BU', 'TN126DD', 'TN126DE', 'TN126DF', 'TN126DG', 'TN126PY'], 'received_time': '2021-04-17T06:02:03'}, 'geometry': {'type': 'Point', 'coordinates': [0.3887045549296438, 51.187785918720046]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231423-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231423-Z', 'postcodes_impacted': ['CM73SE', 'IP121PW', 'IP137', 'IP137AA', 'IP137AB', 'IP137AD', 'IP137AE', 'IP137AF', 'IP137AG', 'IP137AH', 'IP137AJ', 'IP137AL', 'IP137AN', 'IP137AP', 'IP137AQ', 'IP137AR', 'IP137AS', 'IP137AT', 'IP137AU', 'IP137AW', 'IP137AX', 'IP137AZ', 'IP137BS', 'IP137BT', 'IP137BU', 'IP137BY', 'IP137BZ', 'IP137DU', 'IP137JU', 'IP137LH', 'IP139RP', 'IP139RR', 'IP139RS', 'IP139RT', 'IP139RU', 'IP139RX'], 'received_time': '2021-04-16T13:53:51'}, 'geometry': {'type': 'Point', 'coordinates': [1.270533656555274, 52.18864628363777]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of underground network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260208-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260208-J', 'postcodes_impacted': ['SE153SL', 'SE154BH', 'SE154BJ', 'SE154RZ', 'SE154ST', 'SE154TL', 'SE154UN'], 'received_time': '2021-04-17T03:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.0673184641395791, 51.46915389117748]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T10:00:00', 'incident_id': 'INCD-231496-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231496-Z', 'postcodes_impacted': ['SS91AA', 'SS91BW', 'SS91PG', 'SS91PJ', 'SS91PR', 'SS91AY', 'SS91BS', 'SS91BX', 'SS91DE', 'SS91DG', 'SS91DH', 'SS91DJ', 'SS91DQ', 'SS91DY', 'SS91FR', 'SS91PE', 'SS91PH', 'SS91PN', 'SS91PS', 'SS91QB', 'SS91QD', 'SS91QE', 'SS91RJ', 'SS91RL', 'SS91RN', 'SS91RP'], 'received_time': '2021-04-16T19:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6609456177714684, 51.54237948961002]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T11:30:00', 'incident_id': 'INCD-231537-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231537-Z', 'postcodes_impacted': ['WD258DD', 'WD28DD'], 'received_time': '2021-04-17T07:52:34'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3389818449597362, 51.655466757745444]}}, {'type': 'Feature', 'properties': {'description': 'Our engineers are currently working to find out what caused this power cut.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-54663-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54663-V', 'postcodes_impacted': ['BR26AA', 'BR26AB', 'BR26AD'], 'received_time': '2021-04-17T08:08:32'}, 'geometry': {'type': 'Point', 'coordinates': [0.04282734646447143, 51.347215298346946]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T16:30:00', 'incident_id': 'INCD-227941-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227941-Z', 'postcodes_impacted': ['AL71JD'], 'received_time': '2021-04-17T07:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1891168918543099, 51.80033146503926]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T15:00:00', 'incident_id': 'INCD-229277-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229277-Z', 'postcodes_impacted': ['IP123RE'], 'received_time': '2021-04-17T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4321802590784931, 52.0473383091724]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199264\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 13:00:00', 'incident_id': '199264', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX29 0YL'], 'received_time': '2021-04-17 07:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.518507, 51.7884]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8075\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 10:00:00', 'incident_id': 'HB8075', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['DT2 7JG', 'DT2 7JH', 'DT2 7JJ'], 'received_time': '2021-04-17 06:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4741413333333333, 50.809426333333334]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8074\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 09:50:00', 'incident_id': 'HB8074', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GL54 2AP', 'GL54 2AX', 'GL54 2AZ', 'GL54 2EN', 'GL54 2FA'], 'received_time': '2021-04-17 06:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7572766000000002, 51.8860518]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8069\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 09:30:00', 'incident_id': 'HB8069', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH20 7NZ'], 'received_time': '2021-04-17 05:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.151994, 50.71753]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8019\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-17 09:00:00', 'incident_id': 'HB8019', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SN3 4DS', 'SN3 4DT', 'SN3 4DU'], 'received_time': '2021-04-16 21:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7477883333333333, 51.572645666666666]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 09:00:00', 'incident_id': 'INCD-17-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-17-q', 'postcodes_impacted': ['BS34 5TA', 'BS34 5TB'], 'received_time': '2021-04-17 00:01:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.5915965, 51.5291065]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 08:00:00', 'incident_id': 'INCD-2095-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2095-g', 'postcodes_impacted': ['CF44 6HX', 'CF44 6RZ'], 'received_time': '2021-04-17 04:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4369135, 51.70788]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 09:00:00', 'incident_id': 'INCD-416571-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416571-E', 'postcodes_impacted': ['WS14 9JE', 'WS14 9JB', 'WS14 9JD', 'WS14 9PS'], 'received_time': '2021-04-17 06:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.79699825, 52.669775]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 09:30:00', 'incident_id': 'INCD-357994-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357994-G', 'postcodes_impacted': ['HR9 7EF', 'HR9 7EB', 'HR9 7SP'], 'received_time': '2021-04-17 06:24:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4641059999999997, 51.93496966666667]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 10:00:00', 'incident_id': 'INCD-416556-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416556-E', 'postcodes_impacted': ['WS13 7AT'], 'received_time': '2021-04-16 16:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.835415, 52.688852]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 08:00:00', 'incident_id': 'INCD-152736-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152736-H', 'postcodes_impacted': ['NG34 0DG', 'NG34 0DL', 'NG34 0DR', 'NG34 0DJ', 'NG34 0DD', 'NG34 0DH', 'NG34 0DN', 'NG34 0DS', 'NG34 0DP', 'NG34 0EW', 'NG34 0BF', 'NG34 0DE', 'NG34 0DW', 'NG34 8SA', 'NG34 0DQ', 'NG34 9SE'], 'received_time': '2021-04-17 06:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.40452462499999997, 52.9341715625]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-17 12:00:00', 'incident_id': 'INCD-152734-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152734-H', 'postcodes_impacted': ['DE13 8JW'], 'received_time': '2021-04-17 05:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.728004, 52.763511]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 08:04', 'incident_id': 'INCD-497699-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-497699-k', 'postcodes_impacted': ['KA152DA', 'KA152DD'], 'received_time': '2021-04-17 06:23'}, 'geometry': {'type': 'Point', 'coordinates': [-4.632422734979897, 55.75637025385893]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the EH12 postcode area of Edinburgh. We had no advance warning of this and only became aware of it at 4:53am. We are aware of the previous power cuts affecting your area and we apologise for this. Our engineers are on their way to the local area to investigate the fault and the team will work to get your power back on as quickly and as safely as possible by 10:30am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information.  We apologise for the inconvenience and thank you for your patience. This message was updated at 07:52am on Saturday, 17 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 09:30', 'incident_id': 'INCD-564499-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564499-s', 'postcodes_impacted': ['EH127NW', 'EH127NY'], 'received_time': '2021-04-17 04:53'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2830958074643606, 55.93382808748372]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the EH47 postcode area of Bathgate. We had no advance warning of this and only became aware of it at 6:16am. We are aware of the previous power cuts affecting your area and we apologise for this. Our next available engineer will attend site and the team will work to get your power back on as quickly and as safely as possible by 9:30am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information.  We apologise for the inconvenience and thank you for your patience. This message was updated at 6:55am on 17th April.', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 08:16', 'incident_id': 'INCD-564487-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564487-s', 'postcodes_impacted': ['EH470NS'], 'received_time': '2021-04-17 01:41'}, 'geometry': {'type': 'Point', 'coordinates': [-3.702978527341112, 55.86241909329728]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G44 postcode area of Glasgow, affecting properties in Clarkston Road and surrounding streets. We did not know in advance there would be a power cut, and are working to get supplies restored. So far we have brought a generator to site but our teams are still ongoing issues and we now expect your supply to be restored by 8:30am. We understand that being without power is frustrating and please be assured we will restore your supply as soon as we possibly can. If for any reason this information changes then we will update this message. We apologise for the inconvenience and thank you for your patience. This message was updated at 6:20am on 17th April.', 'dno': 'sp', 'estimated_restored_time': '2021-04-17 07:30', 'incident_id': 'INCD-564379-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564379-s', 'postcodes_impacted': ['G443AT', 'G443AU', 'G443AX', 'G443BL', 'G443BQ', 'G443BW', 'G443DA', 'G443YS'], 'received_time': '2021-04-16 18:22'}, 'geometry': {'type': 'Point', 'coordinates': [-4.264698263736534, 55.81362220512008]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 11:00', 'incident_id': 'INCD-172159-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 4BT': {'class': 'models.MapDataLocation', 'lat': 54.5696, 'lng': -1.24351}}, 'received_time': '2021-04-16 17:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.24351, 54.569624]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172187-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 2PW': {'class': 'models.MapDataLocation', 'lat': 53.743, 'lng': -0.36007}}, 'received_time': '2021-04-16 20:25'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36007, 53.742998]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 11:00', 'incident_id': 'INCD-172215-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF9 2AW': {'class': 'models.MapDataLocation', 'lat': 53.5946, 'lng': -1.29936}}, 'received_time': '2021-04-16 23:32'}, 'geometry': {'type': 'Point', 'coordinates': [-1.299044, 53.594699]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172220-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S35 1AB': {'class': 'models.MapDataLocation', 'lat': 53.4599, 'lng': -1.46837}}, 'received_time': '2021-04-17 01:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.468368, 53.459971]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:45', 'incident_id': 'INCD-172221-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS26 9DR': {'class': 'models.MapDataLocation', 'lat': 54.6832, 'lng': -1.21702}, 'TS26 9DP': {'class': 'models.MapDataLocation', 'lat': 54.6835, 'lng': -1.21707}, 'TS26 9EP': {'class': 'models.MapDataLocation', 'lat': 54.6832, 'lng': -1.21868}, 'TS26 9HL': {'class': 'models.MapDataLocation', 'lat': 54.6827, 'lng': -1.21696}, 'TS26 9ES': {'class': 'models.MapDataLocation', 'lat': 54.6834, 'lng': -1.21873}, 'TS26 9HU': {'class': 'models.MapDataLocation', 'lat': 54.6827, 'lng': -1.21799}}, 'received_time': '2021-04-17 02:29'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2178205, 54.68312100000001]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 07:30', 'incident_id': 'INCD-172225-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 1JP': {'class': 'models.MapDataLocation', 'lat': 53.7503, 'lng': -0.358346}, 'HU9 5NX': {'class': 'models.MapDataLocation', 'lat': 53.7472, 'lng': -0.247986}, 'HU5 3LZ': {'class': 'models.MapDataLocation', 'lat': 53.7525, 'lng': -0.371849}, 'HU3 1NJ': {'class': 'models.MapDataLocation', 'lat': 53.7539, 'lng': -0.358509}, 'HU3 1LY': {'class': 'models.MapDataLocation', 'lat': 53.7529, 'lng': -0.359092}, 'HU3 1EN': {'class': 'models.MapDataLocation', 'lat': 53.7491, 'lng': -0.359209}, 'HU3 1LZ': {'class': 'models.MapDataLocation', 'lat': 53.7529, 'lng': -0.358623}, 'HU3 1LR': {'class': 'models.MapDataLocation', 'lat': 53.7513, 'lng': -0.359852}, 'HU3 1EJ': {'class': 'models.MapDataLocation', 'lat': 53.7496, 'lng': -0.359054}, 'HU3 1LS': {'class': 'models.MapDataLocation', 'lat': 53.7541, 'lng': -0.357683}}, 'received_time': '2021-04-17 03:29'}, 'geometry': {'type': 'Point', 'coordinates': [-0.34905929999999996, 53.751289199999995]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 08:15', 'incident_id': 'INCD-172231-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 5JH': {'class': 'models.MapDataLocation', 'lat': 54.2194, 'lng': -1.00394}}, 'received_time': '2021-04-17 05:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.003941, 54.219418]}}, {'type': 'Feature', 'properties': {'description': 'S/L Knockdown In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 08:45', 'incident_id': 'INCD-172238-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU8 0JU': {'class': 'models.MapDataLocation', 'lat': 53.7732, 'lng': -0.303626}}, 'received_time': '2021-04-17 05:31'}, 'geometry': {'type': 'Point', 'coordinates': [-0.303626, 53.773207]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 08:45', 'incident_id': 'INCD-172239-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO10 5BN': {'class': 'models.MapDataLocation', 'lat': 53.9508, 'lng': -1.06314}}, 'received_time': '2021-04-17 05:37'}, 'geometry': {'type': 'Point', 'coordinates': [-1.063136, 53.950822]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:00', 'incident_id': 'INCD-172240-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S71 1QG': {'class': 'models.MapDataLocation', 'lat': 53.5627, 'lng': -1.47981}, 'S71 1QH': {'class': 'models.MapDataLocation', 'lat': 53.5633, 'lng': -1.47947}, 'S71 1QE': {'class': 'models.MapDataLocation', 'lat': 53.5622, 'lng': -1.47959}, 'S71 1QF': {'class': 'models.MapDataLocation', 'lat': 53.5622, 'lng': -1.47773}, 'S71 1QQ': {'class': 'models.MapDataLocation', 'lat': 53.5628, 'lng': -1.47806}, 'S71 1QB': {'class': 'models.MapDataLocation', 'lat': 53.5616, 'lng': -1.4776}}, 'received_time': '2021-04-17 05:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.478702, 53.5624675]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:15', 'incident_id': 'INCD-172242-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 2AE': {'class': 'models.MapDataLocation', 'lat': 54.487, 'lng': -1.52602}, 'DL2 2AH': {'class': 'models.MapDataLocation', 'lat': 54.4866, 'lng': -1.52218}, 'DL2 2JA': {'class': 'models.MapDataLocation', 'lat': 54.4856, 'lng': -1.53129}, 'DL2 2AQ': {'class': 'models.MapDataLocation', 'lat': 54.4858, 'lng': -1.52337}, 'DL2 2AA': {'class': 'models.MapDataLocation', 'lat': 54.4861, 'lng': -1.52869}, 'DL2 2BE': {'class': 'models.MapDataLocation', 'lat': 54.4863, 'lng': -1.52441}}, 'received_time': '2021-04-17 05:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5260003333333334, 54.486225]}}, {'type': 'Feature', 'properties': {'description': 'S/L Knockdown Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:15', 'incident_id': 'INCD-172245-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD10 0RT': {'class': 'models.MapDataLocation', 'lat': 53.8446, 'lng': -1.73564}}, 'received_time': '2021-04-17 06:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.735659, 53.844594]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:30', 'incident_id': 'INCD-172246-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 3EH': {'class': 'models.MapDataLocation', 'lat': 53.6582, 'lng': -1.82159}}, 'received_time': '2021-04-17 06:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.821607, 53.658215]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 09:45', 'incident_id': 'INCD-172247-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE9 6TU': {'class': 'models.MapDataLocation', 'lat': 54.9325, 'lng': -1.59329}}, 'received_time': '2021-04-17 06:37'}, 'geometry': {'type': 'Point', 'coordinates': [-1.59326, 54.932476]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:00', 'incident_id': 'INCD-172248-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL16 6LL': {'class': 'models.MapDataLocation', 'lat': 54.7127, 'lng': -1.59054}, 'DL16 6LN': {'class': 'models.MapDataLocation', 'lat': 54.7117, 'lng': -1.58939}, 'DL16 6UX': {'class': 'models.MapDataLocation', 'lat': 54.7125, 'lng': -1.59217}, 'DL16 6TD': {'class': 'models.MapDataLocation', 'lat': 54.7139, 'lng': -1.5887}}, 'received_time': '2021-04-17 06:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5901752500000002, 54.7126245]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:00', 'incident_id': 'INCD-172249-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX6 1BZ': {'class': 'models.MapDataLocation', 'lat': 53.7056, 'lng': -1.92686}}, 'received_time': '2021-04-17 06:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.926856, 53.705567]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:00', 'incident_id': 'INCD-172250-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 0AS': {'class': 'models.MapDataLocation', 'lat': 53.7085, 'lng': -1.85801}}, 'received_time': '2021-04-17 06:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.858011, 53.708507]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:15', 'incident_id': 'INCD-172251-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS11 5QX': {'class': 'models.MapDataLocation', 'lat': 53.7632, 'lng': -1.56212}}, 'received_time': '2021-04-17 07:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.562072, 53.763176]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:15', 'incident_id': 'INCD-172252-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS26 8HB': {'class': 'models.MapDataLocation', 'lat': 53.735, 'lng': -1.46351}}, 'received_time': '2021-04-17 07:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.463514, 53.734742]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 10:00', 'incident_id': 'PPC039627', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD19 3JU': {'class': 'models.MapDataLocation', 'lat': 53.7253, 'lng': -1.71067}, 'BD19 3EG': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.7262}, 'BD19 3EA': {'class': 'models.MapDataLocation', 'lat': 53.7265, 'lng': -1.72435}, 'BD19 3AG': {'class': 'models.MapDataLocation', 'lat': 53.7264, 'lng': -1.72608}, 'BD19 3AF': {'class': 'models.MapDataLocation', 'lat': 53.7254, 'lng': -1.72498}, 'BD19 3EP': {'class': 'models.MapDataLocation', 'lat': 53.7259, 'lng': -1.72464}, 'BD19 3AD': {'class': 'models.MapDataLocation', 'lat': 53.7255, 'lng': -1.72549}}, 'received_time': '2021-04-17 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.723217857142857, 53.72584328571429]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 11:00', 'incident_id': 'PPC039683', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL13 1PF': {'class': 'models.MapDataLocation', 'lat': 54.7443, 'lng': -2.11611}}, 'received_time': '2021-04-17 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.116174, 54.74408]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-17 12:00', 'incident_id': 'PPC039884', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO30 4RB': {'class': 'models.MapDataLocation', 'lat': 53.9912, 'lng': -1.09658}, 'YO30 4RA': {'class': 'models.MapDataLocation', 'lat': 53.9904, 'lng': -1.09681}, 'YO30 4US': {'class': 'models.MapDataLocation', 'lat': 53.9912, 'lng': -1.0954}}, 'received_time': '2021-04-17 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0965173333333333, 53.99096966666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-17 14:30', 'incident_id': 'PPC039900', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD7 3DU': {'class': 'models.MapDataLocation', 'lat': 53.5927, 'lng': -1.81854}, 'HD9 4DU': {'class': 'models.MapDataLocation', 'lat': 53.5939, 'lng': -1.81948}}, 'received_time': '2021-04-17 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.81901, 53.5932605]}}, {'type': 'Feature', 'properties': {'description': '', 'dno': 'enw', 'estimated_restored_time': '2021-04-17 09:27', 'incident_id': '10645983', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK23 7PN', 'SK23 7PP', 'SK23 7PS', 'SK23 7QP'], 'received_time': '2021-04-17 07:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.99105325, 53.346793000000005]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the overhead cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-17 10:45', 'incident_id': '60508623', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR3 0PD'], 'received_time': '2021-04-17 07:09'}, 'geometry': {'type': 'Point', 'coordinates': [-2.702988, 53.876885]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-17 09:30', 'incident_id': '60508415', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA12 4PH', 'CA12 4PS', 'CA12 4PT', 'CA12 4PL', 'CA12 4PN', 'CA12 4PP', 'CA12 4PW', 'CA12 4PQ', 'CA12 4PY', 'CA12 4PZ', 'CA12 4QA', 'CA12 4RT', 'CA12 5UG'], 'received_time': '2021-04-16 19:40'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1419163846153846, 54.61730107692308]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});