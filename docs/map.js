document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233924-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233924-Z', 'postcodes_impacted': ['EN28HJ', 'EN28JB', 'EN28NB', 'EN28ND', 'EN28NG', 'EN28NH'], 'received_time': '2021-04-30T04:12:25'}, 'geometry': {'type': 'Point', 'coordinates': [-0.10248960620176362, 51.66182043828106]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248931-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248931-G', 'postcodes_impacted': ['RH135RU', 'RH135QR', 'RH135RS', 'RH135RT'], 'received_time': '2021-04-29T09:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3083772359831535, 51.067695720885965]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55321-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55321-V', 'postcodes_impacted': ['GU14RY', 'GU14SG', 'GU14SQ', 'GU14YN'], 'received_time': '2021-04-28T13:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5773767622562184, 51.237104577054666]}}, {'type': 'Feature', 'properties': {'description': '', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-249025-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249025-G', 'postcodes_impacted': ['BN85TD', 'BN85TF', 'RH193NE'], 'received_time': '2021-04-29T23:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.005894858945088367, 50.97735262026482]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233718-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233718-Z', 'postcodes_impacted': ['HA87AA'], 'received_time': '2021-04-29T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2770011502119603, 51.612296885941575]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233407-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233407-Z', 'postcodes_impacted': ['N20NL', 'N20NT', 'N20NU', 'N20NX', 'N64LT', 'N64LU'], 'received_time': '2021-04-27T15:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16106207400978767, 51.58407335576303]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T07:30:00', 'incident_id': 'INCD-233921-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233921-Z', 'postcodes_impacted': ['NR46LR', 'NR46LT', 'NR46LU', 'NR46LZ', 'NR46NA', 'NR46NY'], 'received_time': '2021-04-30T04:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.2609893814328705, 52.604788245075135]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T06:30:00', 'incident_id': 'INCD-233916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233916-Z', 'postcodes_impacted': ['SG48TB', 'SG48TG', 'SG48TH', 'SG48TJ', 'SG48TL', 'SG48TP', 'SG48TQ', 'SG48TR', 'SG48TS', 'SG48WT', 'AL60BN', 'AL60TP', 'AL69GQ', 'AL69GR', 'AL69ST', 'AL69SU', 'AL69SX', 'AL69SY', 'AL69SZ', 'AL69TA', 'AL69TB', 'AL69TD', 'AL69TE', 'AL69TF', 'AL69TG', 'AL69TQ', 'AL69UA', 'AL69UB', 'AL69UD', 'AL69UE', 'AL69UF', 'AL69UG', 'AL69UQ', 'SG36QD', 'SG36QG', 'SG36QH', 'SG36QJ', 'SG36QL', 'UK'], 'received_time': '2021-04-30T00:17:10'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21370411903874226, 51.859007445726405]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T06:00:00', 'incident_id': 'INCD-249023-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249023-G', 'postcodes_impacted': ['GU11LY', 'GU11JN', 'GU11LU', 'GU11LX', 'GU11NA', 'GU11NG'], 'received_time': '2021-04-29T21:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5762472840203218, 51.25598173556514]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T09:00:00', 'incident_id': 'INCD-249028-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249028-G', 'postcodes_impacted': ['DA26QB', 'DA26PD', 'DA26QL', 'DA99AX', 'DA99BB', 'DA99BF', 'DA99EF', 'TN342FT'], 'received_time': '2021-04-30T04:42:19'}, 'geometry': {'type': 'Point', 'coordinates': [0.2968715885700042, 51.38008835013722]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-260168-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260168-J', 'postcodes_impacted': ['NW19UG'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1299092170910277, 51.543420791707845]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:30:00', 'incident_id': 'INCD-6336-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6336-O', 'postcodes_impacted': ['CO160AA', 'CO160AJ', 'CO160AL', 'CO160DU', 'CO160LD', 'CO160LE', 'CO169AP', 'CO169AR', 'UK'], 'received_time': '2021-04-30T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1458946357433668, 51.86861204662398]}}, {'type': 'Feature', 'properties': {'description': 'Our contractors Avidety Ltd are replacing and upgrading electricity poles due to them decaying. Along with replacing and upgrading some overhead electricity cables with improved insulated cables. This will improve the reliability of the electricity network and will reduce the risk of you having an unplanned power cut which is why it is important to complete this work during the Coronavirus pandemic. You may see our contractors completing preparation works prior to the outage to allow for a shorter interruption on the day of the planned power cut. This work is taking place in and around Little Mongeham. The government has given exemptions to certain industries and activities, this outage falls into this category.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-54265-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54265-V', 'postcodes_impacted': ['CT140HS'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3271199798594924, 51.208914603570896]}}, {'type': 'Feature', 'properties': {'description': 'A third party has requested that UK Power Networks switch off the power to allow them to carry out tree trimming safely around our overhead electricity cables. This work will ensure that the trees are trimmed to their satisfaction and are not close to our overhead electricity cables. When the third party has completed their works our engineers will be able to restore power. This will also reduce the possibility of you having an unplanned power cut by stopping these trees from potentially causing damage to our overhead electricity network. This is why it is important to complete this during the Coronavirus pandemic. This work is taking place on Mill Lane. The government has given exemptions to certain industries and activities, this outage falls into this category.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T14:30:00', 'incident_id': 'INCD-54445-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54445-V', 'postcodes_impacted': ['RH89DD', 'RH89DE'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.0052402740516797, 51.235795836777044]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T13:00:00', 'incident_id': 'INCD-232336-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232336-Z', 'postcodes_impacted': ['CB61LT', 'CB61NT', 'CB74TA'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.3174341840956895, 52.45427800245276]}}, {'type': 'Feature', 'properties': {'description': 'A third party has requested that UK Power Networks switch off the power to allow them to carry out tree trimming safely around our overhead electricity cables. This work will ensure that the trees are trimmed to their satisfaction and are not close to our overhead electricity cables. When the third party has completed their works our engineers will be able to restore power. This will also reduce the possibility of you having an unplanned power cut by stopping these trees from potentially causing damage to our overhead electricity network. This is why it is important to complete this during the Coronavirus pandemic. This work is taking place on Coldrum Lane. The government has given exemptions to certain industries and activities, this outage falls into this category.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T14:30:00', 'incident_id': 'INCD-54001-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54001-V', 'postcodes_impacted': ['ME195EG'], 'received_time': '2021-04-30T09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.3699720602610282, 51.320444799469065]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T13:00:00', 'incident_id': 'INCD-6400-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6400-O', 'postcodes_impacted': ['NR94AE', 'NR94AJ', 'NR94BZ', 'NR94EE', 'NR94EJ', 'NR94EP', 'NR94ES', 'NR94EW', 'NR94GA'], 'received_time': '2021-03-26T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0317455498122579, 52.60248445767888]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-229907-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229907-Z', 'postcodes_impacted': ['IP60AB', 'IP60AD', 'IP60AE', 'IP60AF', 'IP60AJ', 'IP60AL', 'IP60AW', 'IP60BZ'], 'received_time': '2021-04-30T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1114199482207923, 52.10186989102081]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T14:00:00', 'incident_id': 'INCD-229646-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229646-Z', 'postcodes_impacted': ['SG193BP', 'SG193EA'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.14229714866790383, 52.165537957172276]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-229719-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229719-Z', 'postcodes_impacted': ['IP214BU', 'IP214BX'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1013706814018183, 52.34505629074823]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-230847-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230847-Z', 'postcodes_impacted': ['NR161DS'], 'received_time': '2021-04-30T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1537298805703058, 52.52125082838749]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T12:00:00', 'incident_id': 'INCD-230599-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230599-Z', 'postcodes_impacted': ['PE45DE', 'PE45DF', 'PE45DG', 'PE45DJ', 'PE45DL', 'PE45DP', 'PE45DR'], 'received_time': '2021-04-30T11:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2816647171545194, 52.626995811129476]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-230821-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230821-Z', 'postcodes_impacted': ['PE285LL'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3836585453195241, 52.38532538917492]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T14:30:00', 'incident_id': 'INCD-230652-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230652-Z', 'postcodes_impacted': ['LU62PN', 'LU62PP', 'LU62PW', 'LU63RA', 'UK'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5146824748090643, 51.856893302373976]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-231300-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231300-Z', 'postcodes_impacted': ['IP265DE', 'IP265ES', 'IP265ET', 'IP270RB', 'IP270SE'], 'received_time': '2021-04-30T12:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6532272823252849, 52.475769917950075]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T13:30:00', 'incident_id': 'INCD-231427-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231427-Z', 'postcodes_impacted': ['NR189PP'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.074692159724125, 52.57042973878773]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T12:30:00', 'incident_id': 'INCD-231429-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231429-Z', 'postcodes_impacted': ['NR189ED'], 'received_time': '2021-04-30T09:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.9994715725480152, 52.55566047586093]}}, {'type': 'Feature', 'properties': {'description': 'Weâre sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4518\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 07:30:00', 'incident_id': 'HC4518', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG8 7HH', 'RG8 7HJ', 'RG8 7HL', 'RG8 7HP', 'RG8 7HW'], 'received_time': '2021-04-30 04:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0848102, 51.4926064]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 07:00:00', 'incident_id': 'INCD-659-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-659-q', 'postcodes_impacted': ['BA1 7EN', 'BA1 7HB', 'BA1 7DR', 'BA1 7EP', 'BA1 7NA', 'BA1 7EF', 'BA1 7NG', 'BA1 7EE', 'BA1 7ED', 'BA1 7ER', 'BA1 7NQ', 'BA1 7ES'], 'received_time': '2021-04-30 03:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.320314833333333, 51.40799341666667]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 07:30:00', 'incident_id': 'INCD-2547-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2547-g', 'postcodes_impacted': ['CF14 4AA', 'CF14 1HU', 'CF14 1DL', 'CF14 1EG', 'CF14 1HW', 'CF14 1SD', 'CF14 1DF', 'CF14 1TS', 'CF14 1DX', 'CF14 4AD', 'CF14 1RA'], 'received_time': '2021-04-30 04:16:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.203112909090909, 51.508966909090915]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-30 03:13', 'incident_id': 'INCD-569695-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-569695-s', 'postcodes_impacted': ['KY11', 'KY112BD', 'KY112DQ', 'KY112DT', 'KY112GA', 'KY112GB'], 'received_time': '2021-04-30 03:13'}, 'geometry': {'type': 'Point', 'coordinates': [-3.431522023626358, 56.03286516219748]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-30 03:00', 'incident_id': 'INCD-569671-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-569671-s', 'postcodes_impacted': ['KA143BJ', 'KA143BL', 'KA143BP', 'KA143BX'], 'received_time': '2021-04-29 22:29'}, 'geometry': {'type': 'Point', 'coordinates': [-4.665099174330077, 55.738328699150934]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-376510-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-376510-r', 'postcodes_impacted': ['L318BX'], 'received_time': '2021-04-29 09:35'}, 'geometry': {'type': 'Point', 'coordinates': [-2.959052625892637, 53.50664093329559]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 14:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175615-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL5 6ZE': {'class': 'models.MapDataLocation', 'lat': 54.6005, 'lng': -1.56874}}, 'received_time': '2021-04-29 12:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.568773, 54.600499]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175671-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD7 1RG': {'class': 'models.MapDataLocation', 'lat': 53.7883, 'lng': -1.76799}}, 'received_time': '2021-04-29 16:06'}, 'geometry': {'type': 'Point', 'coordinates': [-1.767993, 53.788306]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175677-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 7EZ': {'class': 'models.MapDataLocation', 'lat': 54.0968, 'lng': -0.8751}}, 'received_time': '2021-04-29 16:37'}, 'geometry': {'type': 'Point', 'coordinates': [-0.875115, 54.096758]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'INCD-175736-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF13 1LY': {'class': 'models.MapDataLocation', 'lat': 53.691, 'lng': -1.63225}, 'WF13 1HF': {'class': 'models.MapDataLocation', 'lat': 53.6925, 'lng': -1.63113}, 'WF13 1HD': {'class': 'models.MapDataLocation', 'lat': 53.6905, 'lng': -1.63504}, 'WF13 1HX': {'class': 'models.MapDataLocation', 'lat': 53.6899, 'lng': -1.63585}, 'WF13 1NF': {'class': 'models.MapDataLocation', 'lat': 53.6906, 'lng': -1.63256}, 'WF13 1HL': {'class': 'models.MapDataLocation', 'lat': 53.691, 'lng': -1.6326}, 'WF13 1HN': {'class': 'models.MapDataLocation', 'lat': 53.6903, 'lng': -1.63365}, 'WF13 1NA': {'class': 'models.MapDataLocation', 'lat': 53.6908, 'lng': -1.63238}, 'WF13 1NB': {'class': 'models.MapDataLocation', 'lat': 53.6907, 'lng': -1.63282}, 'WF13 1NL': {'class': 'models.MapDataLocation', 'lat': 53.691, 'lng': -1.62885}, 'WF13 1HQ': {'class': 'models.MapDataLocation', 'lat': 53.6913, 'lng': -1.63225}}, 'received_time': '2021-04-30 00:47'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6327480909090908, 53.69076936363637]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 06:45', 'incident_id': 'INCD-175748-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7QH': {'class': 'models.MapDataLocation', 'lat': 53.8079, 'lng': -1.77041}}, 'received_time': '2021-04-30 03:40'}, 'geometry': {'type': 'Point', 'coordinates': [-1.770406, 53.80786]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 07:00', 'incident_id': 'INCD-175749-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS7 8DY': {'class': 'models.MapDataLocation', 'lat': 54.529, 'lng': -1.19784}, 'TS7 8EJ': {'class': 'models.MapDataLocation', 'lat': 54.529, 'lng': -1.19947}, 'TS7 8EH': {'class': 'models.MapDataLocation', 'lat': 54.5286, 'lng': -1.19967}, 'TS7 8DU': {'class': 'models.MapDataLocation', 'lat': 54.5311, 'lng': -1.19904}, 'TS7 8DT': {'class': 'models.MapDataLocation', 'lat': 54.5312, 'lng': -1.20038}}, 'received_time': '2021-04-30 03:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1992432, 54.5297638]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 07:30', 'incident_id': 'INCD-175752-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN14 5TR': {'class': 'models.MapDataLocation', 'lat': 53.6929, 'lng': -0.869946}}, 'received_time': '2021-04-30 04:21'}, 'geometry': {'type': 'Point', 'coordinates': [-0.869946, 53.692873]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 07:45', 'incident_id': 'INCD-175754-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS27 0PD': {'class': 'models.MapDataLocation', 'lat': 53.7432, 'lng': -1.60108}, 'LS27 9ES': {'class': 'models.MapDataLocation', 'lat': 53.742, 'lng': -1.60032}, 'LS27 9EB': {'class': 'models.MapDataLocation', 'lat': 53.7438, 'lng': -1.60044}, 'LS27 9EW': {'class': 'models.MapDataLocation', 'lat': 53.7421, 'lng': -1.59909}, 'LS27 9EU': {'class': 'models.MapDataLocation', 'lat': 53.7415, 'lng': -1.59959}}, 'received_time': '2021-04-30 04:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5999979999999998, 53.7425314]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 08:00', 'incident_id': 'INCD-175755-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN36 5DY': {'class': 'models.MapDataLocation', 'lat': 53.5028, 'lng': -0.059857}}, 'received_time': '2021-04-30 04:54'}, 'geometry': {'type': 'Point', 'coordinates': [-0.060045, 53.502822]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:00', 'incident_id': 'PPC039688', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8PF': {'class': 'models.MapDataLocation', 'lat': 53.7457, 'lng': -1.90206}, 'HX2 8PE': {'class': 'models.MapDataLocation', 'lat': 53.7472, 'lng': -1.90284}, 'HX2 8PD': {'class': 'models.MapDataLocation', 'lat': 53.7464, 'lng': -1.90227}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9023926666666666, 53.746439]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039811', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD21 5QF': {'class': 'models.MapDataLocation', 'lat': 53.8399, 'lng': -1.91623}, 'BD21 5QE': {'class': 'models.MapDataLocation', 'lat': 53.8365, 'lng': -1.92174}, 'BD21 5HL': {'class': 'models.MapDataLocation', 'lat': 53.846, 'lng': -1.92119}, 'BD22 9AQ': {'class': 'models.MapDataLocation', 'lat': 53.8398, 'lng': -1.92899}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92180875, 53.840582]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 11:00', 'incident_id': 'PPC039865', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8BQ': {'class': 'models.MapDataLocation', 'lat': 54.122, 'lng': -0.667363}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.667363, 54.121988]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039881', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 5UP': {'class': 'models.MapDataLocation', 'lat': 54.0168, 'lng': -0.457062}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.45578, 54.015166]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:00', 'incident_id': 'PPC039882', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 3DG': {'class': 'models.MapDataLocation', 'lat': 53.8922, 'lng': -1.6973}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.697289, 53.892184]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039895', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN3 3JF': {'class': 'models.MapDataLocation', 'lat': 53.5339, 'lng': -1.04885}, 'DN3 3JG': {'class': 'models.MapDataLocation', 'lat': 53.5355, 'lng': -1.04939}, 'DN3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.5348, 'lng': -1.05274}, 'DN3 3DH': {'class': 'models.MapDataLocation', 'lat': 53.536, 'lng': -1.05166}, 'DN3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.5354, 'lng': -1.057}, 'DN3 3DL': {'class': 'models.MapDataLocation', 'lat': 53.5359, 'lng': -1.0503}, 'DN3 3BW': {'class': 'models.MapDataLocation', 'lat': 53.5337, 'lng': -1.05271}, 'DN3 3TN': {'class': 'models.MapDataLocation', 'lat': 53.5343, 'lng': -1.05136}, 'DN3 3JE': {'class': 'models.MapDataLocation', 'lat': 53.5349, 'lng': -1.0507}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0516522222222224, 53.53493266666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039924', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:30', 'incident_id': 'PPC039939', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS2 1DD': {'class': 'models.MapDataLocation', 'lat': 54.5799, 'lng': -1.24364}, 'TS2 1DT': {'class': 'models.MapDataLocation', 'lat': 54.5803, 'lng': -1.24351}, 'TS9 5DZ': {'class': 'models.MapDataLocation', 'lat': 54.4703, 'lng': -1.19654}, 'TS1 5LB': {'class': 'models.MapDataLocation', 'lat': 54.579, 'lng': -1.24266}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2312254999999999, 54.55231225]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-05-01 03:00', 'incident_id': 'PPC039978', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3AN': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.360375}, 'HU3 3AQ': {'class': 'models.MapDataLocation', 'lat': 53.7383, 'lng': -0.361286}, 'HU3 3AR': {'class': 'models.MapDataLocation', 'lat': 53.7388, 'lng': -0.361493}, 'HU3 3AS': {'class': 'models.MapDataLocation', 'lat': 53.7374, 'lng': -0.36006}, 'HU3 3EQ': {'class': 'models.MapDataLocation', 'lat': 53.7362, 'lng': -0.363457}, 'HU3 3AT': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362596}, 'HU3 3AU': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362155}, 'HU3 3AW': {'class': 'models.MapDataLocation', 'lat': 53.7384, 'lng': -0.360993}, 'HU3 3DF': {'class': 'models.MapDataLocation', 'lat': 53.7375, 'lng': -0.363468}, 'HU3 3BB': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360794}, 'HU3 3BA': {'class': 'models.MapDataLocation', 'lat': 53.7371, 'lng': -0.361026}, 'HU3 3BD': {'class': 'models.MapDataLocation', 'lat': 53.7364, 'lng': -0.360462}, 'HU3 3DA': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.362726}, 'HU3 3DB': {'class': 'models.MapDataLocation', 'lat': 53.7359, 'lng': -0.362348}, 'HU3 3BE': {'class': 'models.MapDataLocation', 'lat': 53.7363, 'lng': -0.360423}, 'HU3 2UF': {'class': 'models.MapDataLocation', 'lat': 53.7396, 'lng': -0.366328}, 'HU3 3BH': {'class': 'models.MapDataLocation', 'lat': 53.7368, 'lng': -0.36116}, 'HU3 2UE': {'class': 'models.MapDataLocation', 'lat': 53.7397, 'lng': -0.36643}, 'HU3 3BG': {'class': 'models.MapDataLocation', 'lat': 53.7361, 'lng': -0.360929}, 'HU3 3BL': {'class': 'models.MapDataLocation', 'lat': 53.737, 'lng': -0.362577}, 'HU3 3BJ': {'class': 'models.MapDataLocation', 'lat': 53.7372, 'lng': -0.362314}, 'HU3 2QY': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.354933}, 'HU3 3BZ': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.363689}, 'HU3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.7367, 'lng': -0.359813}, 'HU3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360459}, 'HU3 3AD': {'class': 'models.MapDataLocation', 'lat': 53.7366, 'lng': -0.358832}}, 'received_time': '2021-04-30 21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3615553076923076, 53.737405461538465]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039992', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 6BX': {'class': 'models.MapDataLocation', 'lat': 53.7175, 'lng': -1.93822}, 'HX2 6BY': {'class': 'models.MapDataLocation', 'lat': 53.7217, 'lng': -1.93575}, 'HX2 6DD': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.9371}, 'HX2 8TX': {'class': 'models.MapDataLocation', 'lat': 53.7412, 'lng': -1.89635}, 'HX2 6DA': {'class': 'models.MapDataLocation', 'lat': 53.7188, 'lng': -1.92903}, 'HX2 6SJ': {'class': 'models.MapDataLocation', 'lat': 53.7286, 'lng': -1.93291}, 'HX2 6BZ': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -1.93369}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92958, 53.724328571428565]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC040043', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS13 4AJ': {'class': 'models.MapDataLocation', 'lat': 54.5624, 'lng': -0.901202}, 'TS13 4AN': {'class': 'models.MapDataLocation', 'lat': 54.5601, 'lng': -0.901651}, 'TS13 4AQ': {'class': 'models.MapDataLocation', 'lat': 54.5627, 'lng': -0.904039}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9023179999999998, 54.561727999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:30', 'incident_id': 'PPC040111', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF7 6HG': {'class': 'models.MapDataLocation', 'lat': 53.6896, 'lng': -1.37771}, 'WF7 6HQ': {'class': 'models.MapDataLocation', 'lat': 53.6899, 'lng': -1.37621}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3769825, 53.6897915]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});