document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260729-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260729-J', 'postcodes_impacted': ['E181AY', 'E182LS', 'E182LY'], 'received_time': '2021-04-25T15:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.02393650932679513, 51.59463135425755]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232779-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232779-Z', 'postcodes_impacted': ['NR128PZ', 'NR12', 'NR128PF', 'NR128PG', 'NR128PP', 'NR128PU', 'NR128PX'], 'received_time': '2021-04-23T14:25:39'}, 'geometry': {'type': 'Point', 'coordinates': [1.4721890206665824, 52.69797761243683]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T22:30:00', 'incident_id': 'INCD-44491-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44491-C', 'postcodes_impacted': ['SS94EX', 'SS94DH', 'SS95PG', 'SS95PQ'], 'received_time': '2021-04-25T15:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6523532170660535, 51.56401655606389]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T20:00:00', 'incident_id': 'INCD-232937-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232937-Z', 'postcodes_impacted': ['IP11', 'IP110QL', 'IP117AB', 'IP117AD', 'IP117EL', 'IP117EN', 'IP117HA', 'IP117YY'], 'received_time': '2021-04-25T07:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3469254028095938, 51.968900460420834]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T18:30:00', 'incident_id': 'INCD-232922-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232922-Z', 'postcodes_impacted': ['RM188SJ', 'RM188RW', 'RM188SP'], 'received_time': '2021-04-25T02:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.41913805908977936, 51.4836884138798]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T12:00:00', 'incident_id': 'INCD-6582-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6582-O', 'postcodes_impacted': ['HP25RR', 'NR33ST', 'NR33SY', 'NR33TP'], 'received_time': '2021-04-25T10:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8451798267183119, 52.432168144452916]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T16:00:00', 'incident_id': 'INCD-229868-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229868-Z', 'postcodes_impacted': ['CO112JZ', 'CO112LP', 'CO76BJ'], 'received_time': '2021-04-25T09:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0190091446086122, 51.943073414848264]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1869\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 20:00:00', 'incident_id': 'HC1869', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG2 0GF', 'RG31 7DG', 'RG31 7DN', 'RG31 7DQ', 'RG31 7DR', 'RG31 7DW'], 'received_time': '2021-04-25 17:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0283175, 51.43945733333334]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1879\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 18:30:00', 'incident_id': 'HC1879', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU51 4DH', 'GU51 4DJ', 'GU51 4DN', 'GU51 4DW', 'GU51 4LE', 'GU51 4LJ', 'GU51 4LL', 'GU51 4LN', 'GU51 4LT', 'GU51 4YY'], 'received_time': '2021-04-25 15:22:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.847626, 51.2836007]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 23:30:00', 'incident_id': 'INCD-358554-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358554-G', 'postcodes_impacted': ['WS10 9EX', 'WS10 9DR', 'WS10 9EP', 'WS10 9EZ', 'WS10 9EY', 'WS10 9ES', 'WS10 9HA', 'WS10 9EW'], 'received_time': '2021-04-25 13:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.01461475, 52.555479375000004]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:30:00', 'incident_id': 'INCD-358571-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358571-G', 'postcodes_impacted': ['ST19 5SJ', 'ST19 5AU', 'ST19 5DB', 'ST19 5AT', 'ST19 5SN', 'ST19 5SL', 'ST19 5AX', 'ST19 5SH', 'ST19 5AS', 'ST19 5AP'], 'received_time': '2021-04-25 17:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1169164, 52.7290967]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 19:00:00', 'incident_id': 'INCD-153281-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153281-H', 'postcodes_impacted': ['NG20 9NG'], 'received_time': '2021-04-25 10:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.159032, 53.232861]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:30:00', 'incident_id': 'INCD-153285-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153285-H', 'postcodes_impacted': ['CV31 3HG'], 'received_time': '2021-04-25 11:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.536055, 52.280035]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 22:00:00', 'incident_id': 'INCD-153293-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153293-H', 'postcodes_impacted': ['LE9 8AF', 'LE9 8AB', 'LE9 8PE'], 'received_time': '2021-04-25 12:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.338493, 52.572947666666664]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:00:00', 'incident_id': 'INCD-153296-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153296-H', 'postcodes_impacted': ['DE24 8RB', 'DE24 8UH', 'DE24 8RD', 'DE24 8QN'], 'received_time': '2021-04-25 12:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4293687499999999, 52.8986225]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 23:30:00', 'incident_id': 'INCD-153309-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153309-H', 'postcodes_impacted': ['MK17 8SU', 'MK17 8SS', 'MK17 8XJ', 'MK17 8XH', 'MK17 8XG', 'MK17 8SR', 'MK17 8ST', 'MK17 8XQ'], 'received_time': '2021-04-25 15:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.64852575, 52.017952625]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-567199-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567199-s', 'postcodes_impacted': ['EH526PG'], 'received_time': '2021-04-25 16:48'}, 'geometry': {'type': 'Point', 'coordinates': [-3.474905193656197, 55.93939941851783]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 18:07', 'incident_id': 'INCD-1810628-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810628-i', 'postcodes_impacted': ['L143NU', 'L162LY', 'L162LZ', 'L162NB', 'L162ND', 'L162NQ', 'L163GA', 'L163GB', 'L343NU'], 'received_time': '2021-04-25 15:34'}, 'geometry': {'type': 'Point', 'coordinates': [-2.875316585919489, 53.40624522781175]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 18:45', 'incident_id': 'INCD-499217-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-499217-k', 'postcodes_impacted': ['G814JP', 'G814JR'], 'received_time': '2021-04-25 14:48'}, 'geometry': {'type': 'Point', 'coordinates': [-4.441220199637879, 55.91385577395009]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland: 0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 15:24', 'incident_id': 'INCD-1810616-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810616-i', 'postcodes_impacted': ['*******', 'UNKNOWN', 'WA11', 'WA11GG', 'WA11P', 'WA11PP', 'WA11PT', 'WA11QL', 'WA11QP', 'WA11QR', 'WA11QS', 'WA11RG', 'WA11RL', 'WA11RR', 'WA11RS', 'WA11RW', 'WA11RX', 'WA27UW', 'WA4', 'WA41AA', 'WA45DQ', 'WA45QD', 'WA46AA', 'WA46AD', 'WA46AF', 'WA46AG', 'WA46AH', 'WA46AJ', 'WA46AL', 'WA46AP', 'WA46AQ', 'WA46AR', 'WA46AT', 'WA46AU', 'WA46AW', 'WA46AX', 'WA46AY', 'WA46AZ', 'WA46BB', 'WA46BD', 'WA46BE', 'WA46BG', 'WA46BJ', 'WA46BN', 'WA46BP', 'WA46BS', 'WA46BT', 'WA46BU', 'WA46BW', 'WA46BX', 'WA46BY', 'WA46BZ', 'WA46DA', 'WA46DD', 'WA46DE', 'WA46DF', 'WA46DG', 'WA46DH', 'WA46DJ', 'WA46DL', 'WA46DQ', 'WA46PT', 'WA46QA', 'WA46QP', 'WA46QR', 'WA46QY', 'WA46QZ', 'WA46RA', 'WA46RB', 'WA46TZ', 'WA76BJ'], 'received_time': '2021-04-25 14:24'}, 'geometry': {'type': 'Point', 'coordinates': [-2.593872511894714, 53.37675885346285]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KY2 postcode area of Kirkcaldy. We had no advance warning of this and only became aware of it at 2.22pm. Our team has managed to restore power to a number of properties in the area and are still working to a repair fault on our underground cable network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 11pm. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 6:08PM on Sunday 25 April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 22:00', 'incident_id': 'INCD-506913-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506913-f', 'postcodes_impacted': ['KY26RS', 'KY26RT', 'KY26RY', 'KY26RZ', 'KY26SA', 'KY26SB'], 'received_time': '2021-04-25 14:22'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1825553416645262, 56.13225742662578]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the TD5 postcode area of Kelso, affecting properties in Broom Park and surrounding areas. It has been necessary for our engineers to carry out an emergency shutdown at 6:30pm this is to remove the generators and restore the network to normal and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible by 8:00pm. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 5:54pm on Sunday, 25 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 19:00', 'incident_id': 'INCD-506835-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506835-f', 'postcodes_impacted': ['TD57LP'], 'received_time': '2021-04-25 00:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4308479825500533, 55.60625752530926]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 07:30', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27NT'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.788360899719553, 56.013266501493575]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:00', 'incident_id': 'INCD-174212-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF9 3BN': {'class': 'models.MapDataLocation', 'lat': 53.5965, 'lng': -1.31211}}, 'received_time': '2021-04-24 14:58'}, 'geometry': {'type': 'Point', 'coordinates': [-1.312145, 53.596501]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:30', 'incident_id': 'INCD-174296-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO16 7LD': {'class': 'models.MapDataLocation', 'lat': 54.0929, 'lng': -0.201673}}, 'received_time': '2021-04-25 07:59'}, 'geometry': {'type': 'Point', 'coordinates': [-0.201671, 54.092965]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:00', 'incident_id': 'INCD-174303-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4NS': {'class': 'models.MapDataLocation', 'lat': 53.7899, 'lng': -0.311395}}, 'received_time': '2021-04-25 09:13'}, 'geometry': {'type': 'Point', 'coordinates': [-0.31166, 53.790076]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 21:00', 'incident_id': 'INCD-174307-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO1 9XQ': {'class': 'models.MapDataLocation', 'lat': 53.956, 'lng': -1.07259}, 'YO1 9UD': {'class': 'models.MapDataLocation', 'lat': 53.9557, 'lng': -1.07149}, 'YO1 9XG': {'class': 'models.MapDataLocation', 'lat': 53.9561, 'lng': -1.07214}, 'YO1 9TL': {'class': 'models.MapDataLocation', 'lat': 53.9565, 'lng': -1.07366}}, 'received_time': '2021-04-25 09:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0724702499999998, 53.956076]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:00', 'incident_id': 'INCD-174319-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4QQ': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -0.329701}}, 'received_time': '2021-04-25 10:22'}, 'geometry': {'type': 'Point', 'coordinates': [-0.329701, 53.788001]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:30', 'incident_id': 'INCD-174324-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS7 3QS': {'class': 'models.MapDataLocation', 'lat': 53.8287, 'lng': -1.54498}}, 'received_time': '2021-04-25 10:43'}, 'geometry': {'type': 'Point', 'coordinates': [-1.544849, 53.828669]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174337-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS28 7SG': {'class': 'models.MapDataLocation', 'lat': 53.7935, 'lng': -1.67386}, 'LS28 8BX': {'class': 'models.MapDataLocation', 'lat': 53.792, 'lng': -1.67715}, 'LS28 8HL': {'class': 'models.MapDataLocation', 'lat': 53.7931, 'lng': -1.67871}, 'LS28 8BY': {'class': 'models.MapDataLocation', 'lat': 53.7923, 'lng': -1.67695}}, 'received_time': '2021-04-25 12:51'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6766432500000001, 53.792745499999995]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 21:30', 'incident_id': 'INCD-174341-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1JY': {'class': 'models.MapDataLocation', 'lat': 54.5201, 'lng': -1.4885}, 'DL2 1FE': {'class': 'models.MapDataLocation', 'lat': 54.5229, 'lng': -1.476}, 'DL2 1FD': {'class': 'models.MapDataLocation', 'lat': 54.5236, 'lng': -1.47616}}, 'received_time': '2021-04-25 13:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4802316666666666, 54.52218733333333]}}, {'type': 'Feature', 'properties': {'description': 'Damage Other In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:00', 'incident_id': 'INCD-174353-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S13 9NF': {'class': 'models.MapDataLocation', 'lat': 53.3736, 'lng': -1.37619}}, 'received_time': '2021-04-25 15:59'}, 'geometry': {'type': 'Point', 'coordinates': [-1.376194, 53.373585]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:15', 'incident_id': 'INCD-174355-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS18 3ER': {'class': 'models.MapDataLocation', 'lat': 54.5583, 'lng': -1.31802}}, 'received_time': '2021-04-25 16:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.317989, 54.55833]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:30', 'incident_id': 'INCD-174356-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO21 1JG': {'class': 'models.MapDataLocation', 'lat': 54.4864, 'lng': -0.624451}}, 'received_time': '2021-04-25 16:23'}, 'geometry': {'type': 'Point', 'coordinates': [-0.624435, 54.486401]}}, {'type': 'Feature', 'properties': {'description': 'Damage Other Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:45', 'incident_id': 'INCD-174357-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD9 5QB': {'class': 'models.MapDataLocation', 'lat': 53.8131, 'lng': -1.78786}}, 'received_time': '2021-04-25 16:34'}, 'geometry': {'type': 'Point', 'coordinates': [-1.787858, 53.813141]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:45', 'incident_id': 'INCD-174358-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS12 2HE': {'class': 'models.MapDataLocation', 'lat': 54.5686, 'lng': -1.00049}}, 'received_time': '2021-04-25 16:39'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9962, 54.568271]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:00', 'incident_id': 'INCD-174360-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 8HT': {'class': 'models.MapDataLocation', 'lat': 54.8655, 'lng': -1.74794}, 'DH9 8LB': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74444}, 'DH9 8LE': {'class': 'models.MapDataLocation', 'lat': 54.8633, 'lng': -1.74572}, 'DH9 8LD': {'class': 'models.MapDataLocation', 'lat': 54.8636, 'lng': -1.74571}, 'DH9 8PF': {'class': 'models.MapDataLocation', 'lat': 54.8552, 'lng': -1.75128}, 'DH9 8SH': {'class': 'models.MapDataLocation', 'lat': 54.8654, 'lng': -1.74139}, 'DH9 8SF': {'class': 'models.MapDataLocation', 'lat': 54.8643, 'lng': -1.74429}, 'DH9 8LP': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74564}, 'DH9 8SG': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74421}, 'DH9 8SL': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74225}, 'DH9 8SJ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74181}, 'DH9 8LT': {'class': 'models.MapDataLocation', 'lat': 54.8626, 'lng': -1.74524}, 'DH9 8LS': {'class': 'models.MapDataLocation', 'lat': 54.8627, 'lng': -1.74485}, 'DH9 8SQ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74282}, 'DH9 6DJ': {'class': 'models.MapDataLocation', 'lat': 54.8563, 'lng': -1.67565}, 'DH9 8SN': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74275}, 'DH9 8JZ': {'class': 'models.MapDataLocation', 'lat': 54.862, 'lng': -1.74312}, 'DH9 8PS': {'class': 'models.MapDataLocation', 'lat': 54.8604, 'lng': -1.74774}, 'DH9 8LW': {'class': 'models.MapDataLocation', 'lat': 54.8625, 'lng': -1.74594}, 'DH9 8EY': {'class': 'models.MapDataLocation', 'lat': 54.863, 'lng': -1.74392}, 'DH9 8EX': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74659}, 'DH9 8RW': {'class': 'models.MapDataLocation', 'lat': 54.865, 'lng': -1.74661}, 'DH9 8TX': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74037}, 'DH9 8EQ': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74706}, 'DH9 8EU': {'class': 'models.MapDataLocation', 'lat': 54.8637, 'lng': -1.74503}, 'DH9 8EB': {'class': 'models.MapDataLocation', 'lat': 54.8652, 'lng': -1.7483}, 'DH9 8RP': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74643}, 'DH9 8EF': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74585}, 'DH9 8EG': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74655}, 'DH9 8RR': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74642}, 'DH9 8ED': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74728}, 'DH9 8EE': {'class': 'models.MapDataLocation', 'lat': 54.8642, 'lng': -1.74485}}, 'received_time': '2021-04-25 16:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7430718437500001, 54.86355999999999]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:15', 'incident_id': 'INCD-174369-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 2PD': {'class': 'models.MapDataLocation', 'lat': 53.7407, 'lng': -0.357053}}, 'received_time': '2021-04-25 17:10'}, 'geometry': {'type': 'Point', 'coordinates': [-0.357108, 53.740974]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174370-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH8 6QN': {'class': 'models.MapDataLocation', 'lat': 54.8844, 'lng': -1.8142}}, 'received_time': '2021-04-25 17:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.814198, 54.884353]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:30', 'incident_id': 'INCD-174372-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE34 9TY': {'class': 'models.MapDataLocation', 'lat': 54.9603, 'lng': -1.43776}}, 'received_time': '2021-04-25 17:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.437793, 54.960272]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:45', 'incident_id': 'INCD-174374-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 6BG': {'class': 'models.MapDataLocation', 'lat': 54.8573, 'lng': -1.67569}}, 'received_time': '2021-04-25 17:38'}, 'geometry': {'type': 'Point', 'coordinates': [-1.675687, 54.857292]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:45', 'incident_id': 'INCD-174376-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3LL': {'class': 'models.MapDataLocation', 'lat': 53.7163, 'lng': -1.8768}, 'HX1 3LJ': {'class': 'models.MapDataLocation', 'lat': 53.7165, 'lng': -1.87627}, 'HX1 3LH': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.87617}, 'HX1 3LG': {'class': 'models.MapDataLocation', 'lat': 53.7168, 'lng': -1.87536}, 'HX1 3LE': {'class': 'models.MapDataLocation', 'lat': 53.7159, 'lng': -1.87606}, 'HX1 3LB': {'class': 'models.MapDataLocation', 'lat': 53.717, 'lng': -1.87456}}, 'received_time': '2021-04-25 17:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8758316666666666, 53.71640616666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-25 12:00', 'incident_id': 'PPC039332', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 1TJ': {'class': 'models.MapDataLocation', 'lat': 53.7232, 'lng': -1.85964}, 'HX1 1RL': {'class': 'models.MapDataLocation', 'lat': 53.723, 'lng': -1.85978}, 'HX1 1RN': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TN': {'class': 'models.MapDataLocation', 'lat': 53.7235, 'lng': -1.8599}, 'HX1 1UU': {'class': 'models.MapDataLocation', 'lat': 53.7246, 'lng': -1.8599}, 'HX1 1RW': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TH': {'class': 'models.MapDataLocation', 'lat': 53.7231, 'lng': -1.86042}}, 'received_time': '2021-04-25 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8597867142857143, 53.723433428571425]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 23:41', 'incident_id': '40811457', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BL8 2TS', 'BL8 2TX', 'BL8 2TZ', 'BL8 2UA', 'BL8 2UE'], 'received_time': '2021-04-25 17:40'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3389488, 53.5915782]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 20:30', 'incident_id': '40811444', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB1 7ER', 'BB1 7EW', 'BB1 7EY', 'BB1 7EZ', 'BB1 7HN', 'BB1 7LH', 'BB1 7LJ', 'BB1 7LL', 'BB1 7LP', 'BB1 7LR', 'BB1 7LW', 'BB1 7NG'], 'received_time': '2021-04-25 09:15'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4833321666666666, 53.75380191666667]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});