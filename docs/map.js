document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:30:00', 'incident_id': 'INCD-248320-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248320-G', 'postcodes_impacted': ['TN393UD', 'TN393UE', 'TN394LA', 'TN394LB', 'TN394LE', 'TN394LF', 'TN394QS', 'TN394SA'], 'received_time': '2021-04-18T21:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44218924952961663, 50.84552000300527]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T01:00:00', 'incident_id': 'INCD-231679-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231679-Z', 'postcodes_impacted': ['EN26BN', 'EN26LE', 'EN13ED', 'EN13EF', 'EN13EG'], 'received_time': '2021-04-18T22:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08101181882386922, 51.65239850641598]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:00:00', 'incident_id': 'INCD-248312-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248312-G', 'postcodes_impacted': ['TN354SN', 'TN354SD'], 'received_time': '2021-04-18T18:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5714416376972302, 50.90862633958788]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:00:00', 'incident_id': 'INCD-260266-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260266-J', 'postcodes_impacted': ['E163DX', 'NW102PN', 'NW102PP', 'NW102PR', 'NW102PX', 'NW25BU', 'NW25BY', 'NW25DJ', 'NW25DL', 'NW25EA'], 'received_time': '2021-04-18T20:29:21'}, 'geometry': {'type': 'Point', 'coordinates': [-0.20403668522784618, 51.544038362808394]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:30:00', 'incident_id': 'INCD-59931-N', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-59931-N', 'postcodes_impacted': ['N168RA', 'N168RP', 'N168RR', 'N168RX', 'N168SB', 'N168SF', 'N168SH', 'N168SR', 'N168ST', 'N168SY'], 'received_time': '2021-04-18T21:23:47'}, 'geometry': {'type': 'Point', 'coordinates': [-0.07951585885746654, 51.55533557802024]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable on the high voltage network affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:00:00', 'incident_id': 'INCD-231686-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231686-Z', 'postcodes_impacted': ['HP42SZ', 'HP53PW'], 'received_time': '2021-04-18T18:00:53'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5825307025082, 51.743024032353446]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T23:30:00', 'incident_id': 'INCD-231628-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231628-Z', 'postcodes_impacted': ['IP112AA', 'IP117PJ', 'IP117PL', 'IP117PQ', 'IP117PT', 'IP117PW', 'IP118AF', 'IP118AH', 'IP118AQ'], 'received_time': '2021-04-18T09:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3467314811647677, 51.959905548147724]}}, {'type': 'Feature', 'properties': {'description': 'Our engineers are currently working to find out what caused this power cut.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248321-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248321-G', 'postcodes_impacted': ['RH15BZ', 'RH15EA', 'RH15EB', 'RH15ED', 'RH15EE', 'RH15EG', 'RH15EJ'], 'received_time': '2021-04-18T22:30:53'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16683998702178623, 51.19836638895191]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-218127-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-218127-Z', 'postcodes_impacted': ['CB40FB', 'CB40GN', 'CB40WE', 'CB44BH', 'CB44WE'], 'received_time': '2021-04-18T08:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.1483293076776418, 52.23539636016507]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-227426-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227426-Z', 'postcodes_impacted': ['NR128AH', 'NR128AN', 'NR128ES', 'NR128ET', 'NR128EU', 'NR128EY'], 'received_time': '2021-04-18T09:16:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3938054734244327, 52.74779974912337]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T16:30:00', 'incident_id': 'INCD-229979-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229979-Z', 'postcodes_impacted': ['MK410HT', 'MK410JW', 'MK410LF', 'MK410QQ'], 'received_time': '2021-04-18T08:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4130208762534288, 52.14851199913749]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-228076-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228076-Z', 'postcodes_impacted': ['IP145NR', 'IP146BH', 'IP146JT', 'IP146JZ', 'IP146LA', 'IP146LB', 'IP146NF', 'IP146QP', 'IP146QR', 'IP146QS', 'IP146QU', 'IP146QW', 'IP146RW', 'IP146SR', 'IP146ST'], 'received_time': '2021-04-18T09:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.182571413009092, 52.2258367299417]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-227958-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227958-Z', 'postcodes_impacted': ['CB51SA', 'CB61SA', 'CB61SB', 'CB61SE', 'CB61SG', 'CB64QW', 'CB74QW'], 'received_time': '2021-04-18T08:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.2764796588146815, 52.428463015294675]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8581\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 23:30:00', 'incident_id': 'HB8581', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PH2 6NL', 'PH2 6PL'], 'received_time': '2021-04-18 21:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.3759604999999997, 56.434524999999994]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8573\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'HB8573', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO12 1PG', 'PO12 1PJ', 'PO12 1PQ', 'PO12 1PS', 'PO12 1PT', 'PO12 1PU'], 'received_time': '2021-04-18 20:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.135499, 50.795840999999996]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8454\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'HB8454', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO33', 'PO36 8DA', 'PO36 8DW', 'PO36 8JP', 'PO36 8JR', 'PO36 8JT', 'PO36 8JU', 'PO36 8JX', 'PO36 8LB'], 'received_time': '2021-04-18 15:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.155699, 50.653097625]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-103-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-103-q', 'postcodes_impacted': ['BS39 7RY', 'BS39 7RF', 'BS39 7SY'], 'received_time': '2021-04-18 15:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4981076666666664, 51.30156933333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 04:30:00', 'incident_id': 'INCD-120-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-120-q', 'postcodes_impacted': ['BA6 8NJ'], 'received_time': '2021-04-18 13:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.656035, 51.146764]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-123-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-123-q', 'postcodes_impacted': ['PL19 0HJ', 'PL19 0FF', 'PL19 0HZ'], 'received_time': '2021-04-18 19:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.131462666666667, 50.557763]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-102-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-102-q', 'postcodes_impacted': ['BS16 6BT', 'BS16 6BX', 'BS16 6BU'], 'received_time': '2021-04-18 14:46:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.503409, 51.49209199999999]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-106-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-106-q', 'postcodes_impacted': ['TR11 4AU', 'TR11 4AT', 'TR11 4ET', 'TR11 3HH', 'TR11 3LG', 'TR11 3HL', 'TR11 3XP'], 'received_time': '2021-04-18 15:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.064948857142857, 50.15164814285714]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-2158-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2158-g', 'postcodes_impacted': ['SA10 8BG', 'SA10 8BY', 'SA10 8BR', 'SA10 8BU', 'SA10 8BH', 'SA10 8BT', 'SA10 8LD', 'SA10 8LQ', 'SA10 8LS', 'SA10 8BS', 'SA10 8DA', 'SA10 8DB', 'SA10 8LF', 'SA10 8DN'], 'received_time': '2021-04-18 21:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7894244999999995, 51.67738128571428]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-358059-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358059-G', 'postcodes_impacted': ['LD7 1HE', 'LD7 1HB', 'LD7 1RT', 'LD7 1HF', 'LD7 1II'], 'received_time': '2021-04-18 17:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0551735, 52.3426405]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-12177-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12177-A', 'postcodes_impacted': ['WS9 9QA'], 'received_time': '2021-04-18 03:56:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92332, 52.63103]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-358051-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358051-G', 'postcodes_impacted': ['B24 9HU'], 'received_time': '2021-04-18 13:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.833397, 52.526755]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-152839-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152839-H', 'postcodes_impacted': ['LE10 1PJ'], 'received_time': '2021-04-18 16:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.374489, 52.556775]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the L13 postcode area of Liverpool, affecting properties in Sandy Lane, Mill Bank and surrounding streets. We had no advance warning of this and only became aware of it at 9:26PM. Our engineers have arrived on site and are investigating the cause of the fault.  Our team will work to get your power back on as quickly and as safely as possible by 00:30AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:40PM on 18th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 23:31', 'incident_id': 'INCD-1809518-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809518-i', 'postcodes_impacted': ['L130BH', 'L130BL', 'L130BN', 'L130BP', 'L130BR', 'L130BX', 'L130BY', 'L130BZ', 'L130DA', 'L130DB', 'L130DD', 'L130DE', 'L139BH', 'L139BQ'], 'received_time': '2021-04-18 21:31'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9249539554795057, 53.4283335083771]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the ST7 postcode area of Stoke on Trent affecting properties in Audley Road, Mere Lake Road and surrounding area. We had no advance warning of this and only became aware of it at 9:07PM. Our engineers have arrived on site and confirmed the power cut has been caused by a fault on the electrical cable network. Our team will work to get your power back on as quickly and as safely as possible. We expect the power to be restored by 11:15PM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:00PM on 18th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 22:03', 'incident_id': 'INCD-1809512-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809512-i', 'postcodes_impacted': ['ST71UF', 'ST72UQ'], 'received_time': '2021-04-18 21:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.289888308581665, 53.08286658571883]}}, {'type': 'Feature', 'properties': {'description': 'There is power cut in the ML6 postcode area of Airdrie. We had no advance warning of this and only became aware of it at 8.55pm. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 11.00pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated 9.07pm on Sunday 18th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 21:55', 'incident_id': 'INCD-564931-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564931-s', 'postcodes_impacted': ['ML6', 'ML60LA', 'ML60LB', 'ML60LD', 'ML60LF', 'ML60LG', 'ML60LH', 'ML60LJ', 'ML60LL', 'ML60LN', 'ML60LP', 'ML60LQ', 'ML60LR', 'ML60LS', 'ML60LT', 'ML60LU', 'ML60LW', 'ML60LX', 'ML60ND', 'ML60NE', 'ML60NF', 'ML60NG', 'ML60NJ', 'ML60NQ', 'ML60NR', 'ML60NW', 'ML60PB', 'ML60PJ', 'ML60PL', 'ML60PN', 'ML60PP', 'ML60PQ', 'ML60PR', 'ML60PW', 'ML60QL', 'ML60WW', 'ML62PJ', 'ML66SE', 'ML66SF', 'ML66SH', 'ML66SQ', 'ML67FP', 'ML67JA', 'ML67SP', 'ML67SS', 'ML67ST', 'ML69BQ', 'ML69PJ'], 'received_time': '2021-04-18 20:55'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9916514473246094, 55.88243591418385]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 00:00', 'incident_id': 'INCD-1809476-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809476-i', 'postcodes_impacted': ['L320RE', 'L320RG', 'L320RH', 'L320RJ', 'L320RL', 'L320RP', 'L320UZ', 'L324RY', 'L324RZ', 'L324SF', 'L324SG', 'L324SH', 'L324SJ', 'L324SL', 'L324SN', 'L324SP', 'L324SQ', 'L324SR', 'L324SS', 'L324SU', 'L324SW', 'L324SX', 'L324TA', 'L324TB', 'L324TE', 'L324TG', 'L324TH', 'L324TQ', 'L324XD'], 'received_time': '2021-04-18 18:47'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9061342835164226, 53.47918628023177]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:00', 'incident_id': 'INCD-172456-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S60 2JR': {'class': 'models.MapDataLocation', 'lat': 53.4231, 'lng': -1.358}, 'S60 2AJ': {'class': 'models.MapDataLocation', 'lat': 53.4234, 'lng': -1.35467}, 'S60 2JA': {'class': 'models.MapDataLocation', 'lat': 53.4247, 'lng': -1.35751}, 'S60 2UR': {'class': 'models.MapDataLocation', 'lat': 53.4188, 'lng': -1.35834}, 'S60 2JF': {'class': 'models.MapDataLocation', 'lat': 53.4235, 'lng': -1.35889}, 'S60 2UW': {'class': 'models.MapDataLocation', 'lat': 53.4232, 'lng': -1.35759}, 'S60 2UP': {'class': 'models.MapDataLocation', 'lat': 53.4209, 'lng': -1.35824}}, 'received_time': '2021-04-18 12:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3576714285714286, 53.42229514285714]}}, {'type': 'Feature', 'properties': {'description': 'O/H HV Mains Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:30', 'incident_id': 'INCD-172457-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU12 9NA': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -0.17326}, 'HU12 9ST': {'class': 'models.MapDataLocation', 'lat': 53.7084, 'lng': -0.120367}, 'HU12 9RA': {'class': 'models.MapDataLocation', 'lat': 53.7088, 'lng': -0.113881}, 'HU12 9GF': {'class': 'models.MapDataLocation', 'lat': 53.7153, 'lng': -0.148428}, 'HU12 9JS': {'class': 'models.MapDataLocation', 'lat': 53.7127, 'lng': -0.138405}, 'HU12 9NN': {'class': 'models.MapDataLocation', 'lat': 53.7151, 'lng': -0.151273}, 'HU12 9JP': {'class': 'models.MapDataLocation', 'lat': 53.717, 'lng': -0.145052}, 'HU12 9NL': {'class': 'models.MapDataLocation', 'lat': 53.7143, 'lng': -0.148991}, 'HU12 9LS': {'class': 'models.MapDataLocation', 'lat': 53.7223, 'lng': -0.17971}, 'HU12 9NJ': {'class': 'models.MapDataLocation', 'lat': 53.7149, 'lng': -0.148691}, 'HU12 9NG': {'class': 'models.MapDataLocation', 'lat': 53.7187, 'lng': -0.16318}, 'HU12 9NH': {'class': 'models.MapDataLocation', 'lat': 53.716, 'lng': -0.148248}, 'HU12 9HU': {'class': 'models.MapDataLocation', 'lat': 53.7255, 'lng': -0.136066}, 'HU18 1QX': {'class': 'models.MapDataLocation', 'lat': 53.9108, 'lng': -0.166132}, 'HU12 9NQ': {'class': 'models.MapDataLocation', 'lat': 53.719, 'lng': -0.156254}, 'HU12 9NP': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -0.156981}}, 'received_time': '2021-04-18 12:12'}, 'geometry': {'type': 'Point', 'coordinates': [-0.14964825, 53.7285841875]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172511-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 3TH': {'class': 'models.MapDataLocation', 'lat': 53.6914, 'lng': -1.77595}}, 'received_time': '2021-04-18 16:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.775946, 53.691385]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'INCD-172528-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH6 2HZ': {'class': 'models.MapDataLocation', 'lat': 54.7609, 'lng': -1.39454}}, 'received_time': '2021-04-18 18:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.394559, 54.760932]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:45', 'incident_id': 'INCD-172531-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO31 8SX': {'class': 'models.MapDataLocation', 'lat': 53.974, 'lng': -1.06966}, 'YO31 8SY': {'class': 'models.MapDataLocation', 'lat': 53.9749, 'lng': -1.06955}, 'YO31 8SZ': {'class': 'models.MapDataLocation', 'lat': 53.9749, 'lng': -1.07063}, 'YO31 8SL': {'class': 'models.MapDataLocation', 'lat': 53.9728, 'lng': -1.06856}, 'YO31 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.9738, 'lng': -1.06878}, 'YO31 9AA': {'class': 'models.MapDataLocation', 'lat': 53.9763, 'lng': -1.06959}, 'YO31 9AD': {'class': 'models.MapDataLocation', 'lat': 53.9744, 'lng': -1.06852}, 'YO31 8SQ': {'class': 'models.MapDataLocation', 'lat': 53.9732, 'lng': -1.06669}, 'YO31 8SF': {'class': 'models.MapDataLocation', 'lat': 53.9732, 'lng': -1.07055}}, 'received_time': '2021-04-18 18:22'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0691700000000002, 53.97415688888889]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'INCD-172541-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG4 1LE': {'class': 'models.MapDataLocation', 'lat': 54.1383, 'lng': -1.52171}}, 'received_time': '2021-04-18 18:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.521745, 54.138165]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': 'INCD-172548-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 8PE': {'class': 'models.MapDataLocation', 'lat': 54.5206, 'lng': -1.57082}}, 'received_time': '2021-04-18 18:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.570859, 54.520624]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:30', 'incident_id': 'INCD-172561-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3PZ': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.8827}, 'HX1 3QD': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.88293}, 'HX1 3PJ': {'class': 'models.MapDataLocation', 'lat': 53.7159, 'lng': -1.88297}, 'HX1 3QA': {'class': 'models.MapDataLocation', 'lat': 53.7162, 'lng': -1.88253}, 'HX1 3QB': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.88288}, 'HX1 3PU': {'class': 'models.MapDataLocation', 'lat': 53.7163, 'lng': -1.88194}, 'HX1 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.7165, 'lng': -1.8835}, 'HX1 3SG': {'class': 'models.MapDataLocation', 'lat': 53.7157, 'lng': -1.88364}, 'HX1 3PP': {'class': 'models.MapDataLocation', 'lat': 53.7162, 'lng': -1.88335}, 'HX1 3SH': {'class': 'models.MapDataLocation', 'lat': 53.716, 'lng': -1.88335}, 'HX1 3PQ': {'class': 'models.MapDataLocation', 'lat': 53.7155, 'lng': -1.88267}, 'HX1 3QE': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.88279}, 'HX1 3QF': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.88347}}, 'received_time': '2021-04-18 18:54'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8829602307692306, 53.71617276923077]}}, {'type': 'Feature', 'properties': {'description': 'LV O/H Plant In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 01:00', 'incident_id': 'INCD-172568-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8LL': {'class': 'models.MapDataLocation', 'lat': 53.4223, 'lng': -1.21048}, 'S66 8NX': {'class': 'models.MapDataLocation', 'lat': 53.3999, 'lng': -1.15368}, 'S66 8FE': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21198}, 'S66 8ES': {'class': 'models.MapDataLocation', 'lat': 53.4227, 'lng': -1.2296}, 'S66 8NW': {'class': 'models.MapDataLocation', 'lat': 53.4044, 'lng': -1.185}, 'S66 8NE': {'class': 'models.MapDataLocation', 'lat': 53.4212, 'lng': -1.21133}, 'S66 8LN': {'class': 'models.MapDataLocation', 'lat': 53.4222, 'lng': -1.21439}, 'S66 8ND': {'class': 'models.MapDataLocation', 'lat': 53.4219, 'lng': -1.20995}, 'S66 8NA': {'class': 'models.MapDataLocation', 'lat': 53.4214, 'lng': -1.21957}, 'S66 8LW': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21445}}, 'received_time': '2021-04-18 19:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2061004, 53.4179516]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-18 21:45', 'incident_id': 'INCD-172570-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE69 7DB': {'class': 'models.MapDataLocation', 'lat': 55.6088, 'lng': -1.71509}, 'NE69 7AE': {'class': 'models.MapDataLocation', 'lat': 55.6067, 'lng': -1.72204}, 'NE69 7AA': {'class': 'models.MapDataLocation', 'lat': 55.608, 'lng': -1.71827}, 'NE69 7AN': {'class': 'models.MapDataLocation', 'lat': 55.6064, 'lng': -1.71981}, 'NE69 7DF': {'class': 'models.MapDataLocation', 'lat': 55.6091, 'lng': -1.71061}, 'NE69 7DE': {'class': 'models.MapDataLocation', 'lat': 55.6161, 'lng': -1.72806}, 'NE69 7DD': {'class': 'models.MapDataLocation', 'lat': 55.611, 'lng': -1.71749}, 'NE69 7BN': {'class': 'models.MapDataLocation', 'lat': 55.6079, 'lng': -1.7154}}, 'received_time': '2021-04-18 20:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.718372375, 55.60924425]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:30', 'incident_id': 'INCD-172573-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS23 6SL': {'class': 'models.MapDataLocation', 'lat': 53.8923, 'lng': -1.35287}}, 'received_time': '2021-04-18 20:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.352887, 53.892279]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:15', 'incident_id': 'INCD-172578-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3SH': {'class': 'models.MapDataLocation', 'lat': 53.7353, 'lng': -0.369786}, 'HU13 0RR': {'class': 'models.MapDataLocation', 'lat': 53.7217, 'lng': -0.43777}, 'HU3 3SF': {'class': 'models.MapDataLocation', 'lat': 53.7348, 'lng': -0.370563}, 'HU3 3LD': {'class': 'models.MapDataLocation', 'lat': 53.7342, 'lng': -0.373089}, 'HU3 3SG': {'class': 'models.MapDataLocation', 'lat': 53.7352, 'lng': -0.370774}, 'HU3 3SD': {'class': 'models.MapDataLocation', 'lat': 53.7345, 'lng': -0.369649}, 'HU3 3SE': {'class': 'models.MapDataLocation', 'lat': 53.7344, 'lng': -0.370882}, 'HU13 0JU': {'class': 'models.MapDataLocation', 'lat': 53.7298, 'lng': -0.459253}, 'HU3 3SQ': {'class': 'models.MapDataLocation', 'lat': 53.7349, 'lng': -0.369088}, 'HU3 3SN': {'class': 'models.MapDataLocation', 'lat': 53.7352, 'lng': -0.36768}, 'HU3 3LB': {'class': 'models.MapDataLocation', 'lat': 53.7342, 'lng': -0.373616}, 'HU3 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.7353, 'lng': -0.369361}, 'HU3 3SW': {'class': 'models.MapDataLocation', 'lat': 53.7355, 'lng': -0.371459}, 'HU3 3TP': {'class': 'models.MapDataLocation', 'lat': 53.7362, 'lng': -0.372708}, 'HU3 3ST': {'class': 'models.MapDataLocation', 'lat': 53.7345, 'lng': -0.37265}}, 'received_time': '2021-04-18 21:01'}, 'geometry': {'type': 'Point', 'coordinates': [-0.38119359999999997, 53.73370146666666]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:15', 'incident_id': 'INCD-172579-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S81 9AY': {'class': 'models.MapDataLocation', 'lat': 53.3586, 'lng': -1.12259}}, 'received_time': '2021-04-18 21:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.122527, 53.358561]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:30', 'incident_id': 'INCD-172580-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S9 1QD': {'class': 'models.MapDataLocation', 'lat': 53.423, 'lng': -1.42357}}, 'received_time': '2021-04-18 21:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.423595, 53.423009]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:30', 'incident_id': 'INCD-172582-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL17 8NX': {'class': 'models.MapDataLocation', 'lat': 54.6875, 'lng': -1.56653}}, 'received_time': '2021-04-18 21:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.566548, 54.687528]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'PPC039363', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN41 8DW': {'class': 'models.MapDataLocation', 'lat': 53.6083, 'lng': -0.172296}, 'DN41 8DL': {'class': 'models.MapDataLocation', 'lat': 53.6088, 'lng': -0.171807}, 'DN41 8FD': {'class': 'models.MapDataLocation', 'lat': 53.6065, 'lng': -0.180157}, 'DN4 5NU': {'class': 'models.MapDataLocation', 'lat': 53.5082, 'lng': -1.12161}, 'DN41 8TH': {'class': 'models.MapDataLocation', 'lat': 53.6052, 'lng': -0.181212}}, 'received_time': '2021-04-18 17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36565339999999996, 53.587383]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:30', 'incident_id': 'PPC039606', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.826674, 53.717724]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039748', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HE': {'class': 'models.MapDataLocation', 'lat': 54.9894, 'lng': -2.39113}, 'NE47 7AW': {'class': 'models.MapDataLocation', 'lat': 55.0007, 'lng': -2.38799}, 'NE47 7JW': {'class': 'models.MapDataLocation', 'lat': 54.9907, 'lng': -2.3735}, 'NE47 7AL': {'class': 'models.MapDataLocation', 'lat': 54.9974, 'lng': -2.37973}, 'NE47 7AN': {'class': 'models.MapDataLocation', 'lat': 54.9955, 'lng': -2.39183}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3842884, 54.99502739999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039968', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HD': {'class': 'models.MapDataLocation', 'lat': 54.9868, 'lng': -2.37724}}, 'received_time': '2021-04-18 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.377239, 54.986748]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 23:30', 'incident_id': '60508419', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA22 9PX', 'LA22 9SJ', 'LA22 9SL', 'LA22 9SN', 'LA22 9SW', 'LA22 9TD'], 'received_time': '2021-04-18 22:30'}, 'geometry': {'type': 'Point', 'coordinates': [-3.024138333333333, 54.456634333333334]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 01:30', 'incident_id': '40810481', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BL1 2BQ', 'BL1 2EF', 'BL1 2EG', 'BL1 2EJ', 'BL1 2EN', 'BL1 2EQ', 'BL1 2HA'], 'received_time': '2021-04-18 18:13'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4282311428571433, 53.581980571428566]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': '10646175', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK23 7EW'], 'received_time': '2021-04-18 16:26'}, 'geometry': {'type': 'Point', 'coordinates': [-1.96471, 53.323568]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 01:00', 'incident_id': '10646019', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK7 1JG'], 'received_time': '2021-04-17 12:55'}, 'geometry': {'type': 'Point', 'coordinates': [-2.171467, 53.353418]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});