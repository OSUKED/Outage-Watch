document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AH', 'NR129AF', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG', 'NR129EG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.77297144903066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T00:00:00', 'incident_id': 'INCD-232901-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232901-Z', 'postcodes_impacted': ['PE25DZ', 'PE25DY', 'PE25ER'], 'received_time': '2021-04-24T17:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2924116276852488, 52.552842413359066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T00:30:00', 'incident_id': 'INCD-232911-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232911-Z', 'postcodes_impacted': ['CB43HX', 'CB43JD', 'CB43JP'], 'received_time': '2021-04-24T21:16:36'}, 'geometry': {'type': 'Point', 'coordinates': [0.1116832688563129, 52.218313328211416]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-05-24T12:30:00', 'incident_id': 'INCD-55021-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55021-V', 'postcodes_impacted': ['CT45PY', 'CT45PZ', 'CT45QA', 'CT45QB', 'CT45QD', 'CT45QE', 'CT45QH', 'CT45SR', 'CT45SS', 'CT46BY', 'RH130TR', 'TN255JU', 'TN255JX', 'TW94FA'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8377406092783846, 51.1993607414425]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:00:00', 'incident_id': 'INCD-230387-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230387-Z', 'postcodes_impacted': ['CB97HX', 'CB97HY', 'CB97HZ', 'CB97JQ', 'CB97LA', 'CB97LB', 'CB97SG'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44368625849715565, 52.12786448175765]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-230808-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230808-Z', 'postcodes_impacted': ['NR280RU'], 'received_time': '2021-04-24T09:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4151257416754273, 52.85681836681537]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-227457-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227457-Z', 'postcodes_impacted': ['CO160DU', 'CO160LA', 'CO160LB', 'CO160LD'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1548508334444136, 51.86309190703278]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T16:30:00', 'incident_id': 'INCD-231343-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231343-Z', 'postcodes_impacted': ['SG175NQ'], 'received_time': '2021-04-24T09:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3251931680253517, 52.02016452902743]}}, {'type': 'Feature', 'properties': {'description': 'We have identified an item of electrical equipment called a Cut-Out, which is the link between our electricity network and a propertys internal wires, that needs replacing. This propertys Cut-Out needs replacing due to potential safety concerns. When we identify properties with this issue we often identify further properties requiring the same works to be completed. Therefore we would like to access your property during the power cut to inspect the equipment within your property and to replace if necessary. Once the inspections and replacements have been completed this will ensure that all properties are safely connected to our electricity network. This is why it is important to complete this work during the Coronavirus pandemic. This work is taking place on Buxton Crescent and Carlton Crescent. The government has given exemptions to certain industries and activities, this outage falls into this category', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T15:00:00', 'incident_id': 'INCD-53288-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53288-V', 'postcodes_impacted': ['SM39TP', 'SM39TR', 'SM39TS'], 'received_time': '2021-04-23T12:02:51'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21764189555768473, 51.36957062305451]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1688\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 00:00:00', 'incident_id': 'HC1688', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB5 5AH', 'UB5 5AJ', 'UB5 5AL', 'UB5 5AN', 'UB5 5DJ', 'UB5 5DL', 'UB5 5DN', 'UB5 5DW', 'UB5 5EG'], 'received_time': '2021-04-24 20:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.37337533333333334, 51.543297111111116]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1589\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 23:30:00', 'incident_id': 'HC1589', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO37 6ES', 'PO37 6ET', 'PO37 6EU', 'PO37 6EX', 'PO37 6EY', 'PO37 6HA', 'PO37 6HB', 'PO37 7BY', 'PO37 7HZ'], 'received_time': '2021-04-24 20:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.173961, 50.635735555555556]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1651\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 22:00:00', 'incident_id': 'HC1651', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['AB43 6LY', 'AB43 6PU', 'AB43 6PX', 'AB43 6QA', 'AB43 6QB', 'AB43 7LX'], 'received_time': '2021-04-24 18:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.211427, 57.62702266666667]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1627\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 01:00:00', 'incident_id': 'HC1627', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL4 3QP', 'SL4 3QU', 'SL4 3SD', 'SL4 3TD', 'SL4 3TW'], 'received_time': '2021-04-24 16:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6295527999999999, 51.4772692]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1610\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 01:00:00', 'incident_id': 'HC1610', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP15 7AA', 'HP15 7BB', 'HP15 7BW', 'HP15 7DB', 'HP15 7DD', 'HP15 7DE'], 'received_time': '2021-04-24 16:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7091035, 51.65757383333332]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 22:00:00', 'incident_id': 'INCD-399-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-399-q', 'postcodes_impacted': ['TR19 7QX', 'TR19 7AN', 'TR19 7QY', 'TR19 7RD'], 'received_time': '2021-04-24 18:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.675884999999999, 50.119314]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 23:00:00', 'incident_id': 'INCD-376-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-376-q', 'postcodes_impacted': ['PL6 7TB', 'PL6 7TA', 'PL6 7TD'], 'received_time': '2021-04-24 13:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.096798333333333, 50.43480733333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 22:00:00', 'incident_id': 'INCD-372-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-372-q', 'postcodes_impacted': ['PL19 9QG'], 'received_time': '2021-04-24 12:46:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.103993, 50.626262]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 23:00:00', 'incident_id': 'INCD-2397-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2397-g', 'postcodes_impacted': ['SA62 3NX', 'SA61 1XL', 'SA62 4LA', 'SA62 4LB', 'SA61 1LY'], 'received_time': '2021-04-24 18:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.9783616, 51.7774558]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 00:00:00', 'incident_id': 'INCD-358529-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358529-G', 'postcodes_impacted': ['ST1 6QN', 'ST1 6QL', 'ST1 6QW', 'ST1 6QB'], 'received_time': '2021-04-24 19:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.160792, 53.028603999999994]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 23:30:00', 'incident_id': 'INCD-358526-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358526-G', 'postcodes_impacted': ['OX16 2EQ', 'OX16 2WD', 'OX16 2ED', 'OX16 2EG', 'OX16 2EW'], 'received_time': '2021-04-24 19:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3392448, 52.0650338]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 02:00:00', 'incident_id': 'INCD-44783-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44783-D', 'postcodes_impacted': ['DE65 6NR'], 'received_time': '2021-04-24 16:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.593796, 52.879901]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KY1 postcode area of Coaltown of Wemyss. We had no advance warning of this and only became aware of it at 9:24pm. Our engineers have arrived in the local area and the team will work to get your power back on as quickly and as safely as possible by 12:30am. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:00pm on Saturday, 24 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 23:24', 'incident_id': 'INCD-567085-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567085-s', 'postcodes_impacted': ['KY14LP', 'KY14LS', 'KY14LT', 'KY14LW', 'KY14LY', 'KY14LZ', 'KY14NN', 'KY14NT'], 'received_time': '2021-04-24 21:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.086261476559906, 56.15152938082994]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the FK1 postcode area of Falkirk. We had no advance warning of this and only became aware of it at 8:32pm. Our engineers have arrived on site and the team will work to get your power back on as quickly and as safely as possible by 11:30pm. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:20pm on Saturday, 24 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 22:30', 'incident_id': 'INCD-506781-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506781-f', 'postcodes_impacted': ['FK12EF', 'FK12EG', 'FK12EH', 'FK12EQ', 'FK12FB'], 'received_time': '2021-04-24 20:32'}, 'geometry': {'type': 'Point', 'coordinates': [-3.770996796274974, 55.9722430887638]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-567073-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567073-s', 'postcodes_impacted': ['KA56BL'], 'received_time': '2021-04-24 20:27'}, 'geometry': {'type': 'Point', 'coordinates': [-4.369573062332717, 55.51430096278931]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the L31 and L32 postcode areas of Liverpool, affecting properties in Melling, Kirkby, and surrounding areas. Our emergency response team has managed to restore power to a number of properties, and we are working to restore power for those customers still off supply. Repairs are taking longer than expected because of further network investigations and our team are now working to get the power back on as quickly and as safely as possible by Midnight. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:13PM on 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 23:00', 'incident_id': 'INCD-375184-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-375184-r', 'postcodes_impacted': ['*******', 'G328TS', 'L110JA', 'L128QX', 'L189YE', 'L31', 'L311BH', 'L311BJ', 'L311BL', 'L311BP', 'L311BQ', 'L311BR', 'L311BS', 'L311BT', 'L311BU', 'L311BW', 'L311BX', 'L311DA', 'L311DB', 'L311DE', 'L311DG', 'L311DL', 'L311DN', 'L311DP', 'L311DQ', 'L311DR', 'L311DS', 'L311DU', 'L311DW', 'L311DY', 'L311DZ', 'L311EA', 'L311EB', 'L311ED', 'L311FB', 'L311FD', 'L311GA', 'L311GB', 'L311HA', 'L311HB', 'L311HZ', 'L311JF', 'L311JP', 'L311JQ', 'L311JR', 'L311JS', 'L311JU', 'L311JW', 'L311JX', 'L311JY', 'L311JZ', 'L311LA', 'L311LB', 'L311LE', 'L311LF', 'L311LJ', 'L311LL', 'L311LR', 'L311VV', 'L311XX', 'L316ED', 'L32', 'L320RB', 'L320RD', 'L320RE', 'L320RF', 'L320RG', 'L320RH', 'L320RJ', 'L320RL', 'L320RN', 'L320RP', 'L320RQ', 'L320RR', 'L320RS', 'L320RT', 'L320RU', 'L320RW', 'L320RX', 'L320RY', 'L320RZ', 'L320SA', 'L320SB', 'L320SD', 'L320SE', 'L320SF', 'L320SG', 'L320SH', 'L320SJ', 'L320SL', 'L320SP', 'L320SQ', 'L320SR', 'L320SS', 'L320ST', 'L320SU', 'L320SW', 'L320SX', 'L320SY', 'L320SZ', 'L320TA', 'L320TB', 'L320TD', 'L320TE', 'L320TF', 'L320TH', 'L320TJ', 'L320TL', 'L320TN', 'L320TP', 'L320TR', 'L320TS', 'L320TT', 'L320TU', 'L320TW', 'L320TZ', 'L320UH', 'L320US', 'L320UX', 'L320UZ', 'L320WA', 'L320XA', 'L320XB', 'L320XQ', 'L322AE', 'L322DJ', 'L322DL', 'L322DN', 'L322DQ', 'L324RY', 'L324RZ', 'L324SF', 'L324SG', 'L324SH', 'L324SJ', 'L324SL', 'L324SN', 'L324SP', 'L324SQ', 'L324SR', 'L324SS', 'L324ST', 'L324SU', 'L324SW', 'L324SX', 'L324SY', 'L324SZ', 'L324TA', 'L324TB', 'L324TD', 'L324TE', 'L324TF', 'L324TG', 'L324TH', 'L324TQ', 'L324TU', 'L324TX', 'L324TY', 'L324TZ', 'L324UA', 'L324UB', 'L324UD', 'L324UE', 'L324UF', 'L324UG', 'L324UH', 'L324UJ', 'L324UL', 'L324UN', 'L324UQ', 'L324UR', 'L324US', 'L324UT', 'L324UU', 'L324UW', 'L324UX', 'L324UY', 'L324WA', 'L324WB', 'L324XD', 'L325SZ', 'L325TA', 'L325TE', 'L32ORE', 'L367XP', 'L46XR', 'LL182QA'], 'received_time': '2021-04-24 18:13'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9163059923221617, 53.49401605326408]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 02:00', 'incident_id': 'INCD-499193-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-499193-k', 'postcodes_impacted': ['EH87RL', 'EH87RP', 'EH87RR'], 'received_time': '2021-04-24 17:11'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1343988830338585, 55.94829521543477]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the FK4 postcode area of Stirling. We had no advance warning of this and only became aware of it at 5:54pm. Our team have inspected the Bog Road substation and have established an underground cable fault. Repairs are taking longer than expected because of the complexity of the work and our team are now working to get your power back on as quickly and as safely as possible by midnight. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 7:28pm on Saturday 24th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 22:59', 'incident_id': 'INCD-506769-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506769-f', 'postcodes_impacted': ['FK41AA', 'FK41JB', 'FK41JD', 'FK41JJ', 'FK41TJ', 'FK41UB', 'FK41UE', 'FK41UF'], 'received_time': '2021-04-24 16:54'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9462064173661657, 55.992153578156234]}}, {'type': 'Feature', 'properties': {'description': 'There is an unplanned power cut affecting the SY18 postcode area of Llanidloes, affecting properties in Gorn Road and surrounding streets. It will be necessary for our engineers to carry out an emergency shutdown at 11:00PM due to faulty equipment on the underground cable network. Our team will be carrying out repair work safely on the underground cable network and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 2:00AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:37PM on 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-1810454-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810454-i', 'postcodes_impacted': ['SY186DQ', 'SY186FA', 'SY186LB', 'SY186LD'], 'received_time': '2021-04-24 12:01'}, 'geometry': {'type': 'Point', 'coordinates': [-3.5333294559455184, 52.445667658322535]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27AA', 'FK27NS', 'FK27NT', 'FK27NU', 'FK27NX', 'FK27NZ', 'FK27PA', 'FK27RP', 'FK27RR', 'FK27RS', 'FK27RZ'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7871457775190596, 56.012777524454165]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:00', 'incident_id': 'INCD-174191-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 0AX': {'class': 'models.MapDataLocation', 'lat': 53.8006, 'lng': -1.79799}}, 'received_time': '2021-04-24 12:54'}, 'geometry': {'type': 'Point', 'coordinates': [-1.797578, 53.800395]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 18:45', 'incident_id': 'INCD-174216-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S20 7NU': {'class': 'models.MapDataLocation', 'lat': 53.3386, 'lng': -1.3496}}, 'received_time': '2021-04-24 15:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.349641, 53.338612]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:00', 'incident_id': 'INCD-174227-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 1LR': {'class': 'models.MapDataLocation', 'lat': 53.787, 'lng': -1.39779}, 'LS25 1DA': {'class': 'models.MapDataLocation', 'lat': 53.7879, 'lng': -1.40171}, 'LS25 1DB': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -1.40071}}, 'received_time': '2021-04-24 16:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4001233333333332, 53.787663333333334]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 02:00', 'incident_id': 'INCD-174230-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE33 2AL': {'class': 'models.MapDataLocation', 'lat': 55.0037, 'lng': -1.4279}}, 'received_time': '2021-04-24 16:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.427867, 55.003755]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174231-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS28 9LD': {'class': 'models.MapDataLocation', 'lat': 53.7878, 'lng': -1.6388}, 'LS28 9LA': {'class': 'models.MapDataLocation', 'lat': 53.7871, 'lng': -1.64005}, 'LS28 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7875, 'lng': -1.64138}, 'LS28 9JY': {'class': 'models.MapDataLocation', 'lat': 53.7878, 'lng': -1.64092}, 'LS28 9JX': {'class': 'models.MapDataLocation', 'lat': 53.7888, 'lng': -1.64158}}, 'received_time': '2021-04-24 16:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6405629999999998, 53.787802]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174232-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S2 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.3713, 'lng': -1.46612}}, 'received_time': '2021-04-24 16:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.466121, 53.371315]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:30', 'incident_id': 'INCD-174242-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 2QT': {'class': 'models.MapDataLocation', 'lat': 53.7046, 'lng': -1.79158}}, 'received_time': '2021-04-24 18:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.791615, 53.704581]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:15', 'incident_id': 'INCD-174246-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN11 9LB': {'class': 'models.MapDataLocation', 'lat': 53.4345, 'lng': -1.11675}}, 'received_time': '2021-04-24 19:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.116749, 53.434474]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:30', 'incident_id': 'INCD-174247-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 9AP': {'class': 'models.MapDataLocation', 'lat': 54.5402, 'lng': -1.9332}}, 'received_time': '2021-04-24 19:23'}, 'geometry': {'type': 'Point', 'coordinates': [-1.933182, 54.540173]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:45', 'incident_id': 'INCD-174248-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S70 3PN': {'class': 'models.MapDataLocation', 'lat': 53.5448, 'lng': -1.44449}}, 'received_time': '2021-04-24 19:33'}, 'geometry': {'type': 'Point', 'coordinates': [-1.444488, 53.54484]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174249-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL4 2LF': {'class': 'models.MapDataLocation', 'lat': 54.6249, 'lng': -1.63671}}, 'received_time': '2021-04-24 20:07'}, 'geometry': {'type': 'Point', 'coordinates': [-1.63671, 54.62486]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 23:15', 'incident_id': 'INCD-174250-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR2 8LH': {'class': 'models.MapDataLocation', 'lat': 54.8975, 'lng': -1.36704}}, 'received_time': '2021-04-24 20:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.367004, 54.897423]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 23:45', 'incident_id': 'INCD-174253-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 0QU': {'class': 'models.MapDataLocation', 'lat': 53.6549, 'lng': -1.73815}}, 'received_time': '2021-04-24 20:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.738132, 53.65488]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 00:15', 'incident_id': 'INCD-174254-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3EP': {'class': 'models.MapDataLocation', 'lat': 53.7131, 'lng': -1.8751}}, 'received_time': '2021-04-24 21:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.875117, 53.713128]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 04:01', 'incident_id': '40811401', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB2 3GE', 'BB2 3PZ', 'BB2 4AA', 'BB2 4AD', 'BB2 4AF', 'BB2 4AG', 'BB2 4AH'], 'received_time': '2021-04-24 19:57'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4892408571428573, 53.73847271428571]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 00:30', 'incident_id': '40811032', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY5 1DB', 'FY5 1DW', 'FY5 1EH', 'FY5 1FD', 'FY5 1FE', 'FY5 1FF', 'FY5 1HE', 'FY5 1LB', 'FY5 1LW'], 'received_time': '2021-04-24 16:58'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0455166666666664, 53.88171922222222]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});