document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T06:00:00', 'incident_id': 'INCD-260266-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260266-J', 'postcodes_impacted': ['E163DX', 'NW102PN', 'NW102PP', 'NW102PR', 'NW102PX', 'NW25BU', 'NW25BY', 'NW25DJ', 'NW25DL', 'NW25EA'], 'received_time': '2021-04-18T20:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.20403668522784618, 51.544038362808394]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:00:00', 'incident_id': 'INCD-248320-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248320-G', 'postcodes_impacted': ['TN393UD', 'TN393UE', 'TN394LA', 'TN394LB', 'TN394LE', 'TN394LF', 'TN394QS', 'TN394SA'], 'received_time': '2021-04-18T21:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44218924952961663, 50.84552000300527]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a high voltage electricity overhead line in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248323-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248323-G', 'postcodes_impacted': ['BR2XXX', 'CR05BN', 'RH101BU', 'SM13LT', 'TN262DP', 'TN262DR', 'TN307DB', 'TN307DL', 'TN307EA', 'TN307EB', 'TN307ED', 'TN307EE', 'TN307EG', 'TN307EH', 'TN307EJ', 'TN307EL', 'TN307EN', 'TN307EP', 'TN307ER', 'TN307ES', 'TN307ET', 'TN307EU', 'TN307EW', 'TN307EX', 'TN307EY', 'TN307HA', 'TN307HB', 'TN307HD', 'TN307HE', 'TN307HH', 'TN307HJ', 'TN307HL', 'TN307HN', 'TN307HS', 'TN307HT', 'TN307HU', 'TN307HX', 'TN307HY', 'TN307J', 'TN307JA', 'TN307JB', 'TN307JD', 'TN307JE', 'TN307JG', 'TN307JH', 'TN307JJ', 'TN307JL', 'TN307JN', 'TN307JP', 'TN307JR', 'TN307JS', 'TN307JT', 'TN307JU', 'TN307JX', 'TN307JY', 'TN307LA', 'TN307LH', 'TN307LR', 'TN307LS', 'TN307LT', 'TN307LU', 'TN307LX', 'TN307LY', 'TN307LZ', 'TN307NA', 'TN307NB', 'TN307ND', 'TN307NE', 'TN307NF', 'TN307NG', 'TN307NP', 'TN307NQ', 'TN307NR', 'TN307NS', 'TN307NT', 'TN307NU', 'TN307NX', 'TN307NY', 'TN307NZ', 'TN307PA', 'TN307PB', 'TN307PD', 'TN307PE', 'TN307PF', 'TN307PG', 'TN307PH', 'TN307PJ', 'TN307PL', 'TN307PN', 'TN307PP', 'TN307PR', 'TN307PS', 'TN307PT', 'TN307PU', 'TN307PX', 'TN307QD', 'TN404DN'], 'received_time': '2021-04-19T00:58:10'}, 'geometry': {'type': 'Point', 'coordinates': [0.6896368997248223, 51.03322186309116]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T04:00:00', 'incident_id': 'INCD-231628-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231628-Z', 'postcodes_impacted': ['IP112AA', 'IP117PJ', 'IP117PL', 'IP117PQ', 'IP117PT', 'IP117PW', 'IP118AF', 'IP118AH', 'IP118AQ'], 'received_time': '2021-04-18T09:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3467314811647677, 51.959905548147724]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:00:00', 'incident_id': 'INCD-248321-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248321-G', 'postcodes_impacted': ['RH15ED', 'RH15EE', 'RH15EJ', 'RH15BZ', 'RH15EA', 'RH15EB', 'RH15EG'], 'received_time': '2021-04-18T22:30:53'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16683998702178623, 51.19836638895192]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248324-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248324-G', 'postcodes_impacted': ['KT174DX', 'KT174EA', 'KT174RA', 'KT174RG', 'KT174RQ'], 'received_time': '2021-04-19T01:46:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.25860285338358685, 51.33452974482968]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T03:30:00', 'incident_id': 'INCD-38528-M', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-38528-M', 'postcodes_impacted': ['W106UH', 'W106UJ', 'W1P1LN', 'W1T4ED', 'W106TU', 'W106UB', 'W106UD'], 'received_time': '2021-04-19T00:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.19509002322666016, 51.516293319278574]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8595\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 03:00:00', 'incident_id': 'HB8595', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['IV15 9NR'], 'received_time': '2021-04-18 23:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.444413, 57.596331]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8526\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-19 02:30:00', 'incident_id': 'HB8526', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['DD8 5DH', 'DD8 5DJ', 'DD8 5DN', 'DD8 5DS'], 'received_time': '2021-04-18 17:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0070069999999998, 56.66787825]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 04:30:00', 'incident_id': 'INCD-120-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-120-q', 'postcodes_impacted': ['BA6 8NJ'], 'received_time': '2021-04-18 13:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.656035, 51.146764]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:30:00', 'incident_id': 'INCD-2161-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2161-g', 'postcodes_impacted': ['SA7 9EP', 'SA6 5AP', 'SA5 5AP'], 'received_time': '2021-04-18 23:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9219743333333335, 51.669838]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 03:00:00', 'incident_id': 'INCD-2160-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2160-g', 'postcodes_impacted': ['CF10 4BA', 'CF10 4DG'], 'received_time': '2021-04-18 23:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1679415, 51.4773065]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 03:00:00', 'incident_id': 'INCD-358065-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358065-G', 'postcodes_impacted': ['TF7 4BB'], 'received_time': '2021-04-18 23:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.44025, 52.631467]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 05:00:00', 'incident_id': 'INCD-12190-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12190-A', 'postcodes_impacted': ['B19 3PS', 'B19 3HD', 'B19 3QL', 'B19 3QG', 'B19 3PY', 'B19 3PU', 'B19 3QH', 'B19 3NP', 'B19 3LS', 'B19 3LB', 'B19 3QE'], 'received_time': '2021-04-18 21:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9007872727272728, 52.48843890909091]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 02:00:00', 'incident_id': 'INCD-44337-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44337-D', 'postcodes_impacted': ['DE21 4LY', 'DE21 4LZ'], 'received_time': '2021-04-18 17:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4321655, 52.9355535]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 01:30:00', 'incident_id': 'INCD-152848-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152848-H', 'postcodes_impacted': ['NG22 0QW', 'NG22 0QP', 'NG22 0QT', 'NG22 0RE', 'NG22 0QJ', 'NG22 0QH', 'NG22 0RF', 'NG22 0RX', 'NG22 0QD', 'NG22 0QY', 'NG22 0QL', 'NG22 0QR', 'NG22 0NP', 'NG22 0QQ', 'NG22 0FF', 'NG22 0QX', 'NG22 0QS', 'NG22 0ST', 'NG22 0QU', 'NG22 0QN', 'NG22 0RZ', 'NG22 0FH', 'NG22 0RG', 'NG22 0RY', 'NG22 0SU', 'NG22 0QZ', 'NG22 9EX', 'NG22 0QB', 'NG22 0SS'], 'received_time': '2021-04-19 00:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8937821379310346, 53.237684551724136]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the EH48 Postcode area of Bathgate, affecting a large number of customers in a wide spread area. We had no advance warning of the power cut and only became aware of it at 12.05AM. Our team has managed to restore power to a number of properties in the area and are still working to repair the fault on our overhead line network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 5AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1.46AM on 19th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 04:00', 'incident_id': 'INCD-564967-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564967-s', 'postcodes_impacted': ['EH470EU', 'EH471AA', 'EH48', 'EH481AA', 'EH481AZ', 'EH481HE', 'EH481HH', 'EH481NN', 'EH481NU', 'EH481NX', 'EH481PG', 'EH481PH', 'EH481PP', 'EH481PW', 'EH481TJ', 'EH481TL', 'EH481TP', 'EH481TQ', 'EH481TR', 'EH481TT', 'EH481TU', 'EH481TW', 'EH481XX', 'EH482AA', 'EH482AB', 'EH482HR', 'EH482RA', 'EH482RD', 'EH483JQ', 'EH484EU', 'EH484HU', 'EH484JJ', 'EH484JS', 'EH484PA', 'EH484PH', 'EH484PJ', 'EH484PL', 'EH484PN', 'EH484PP', 'EH484PR', 'EH484PS', 'EH484XX'], 'received_time': '2021-04-19 00:06'}, 'geometry': {'type': 'Point', 'coordinates': [-3.6454987546091275, 55.9000648922058]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the ML6 postcode area of Airdrie. We had no advance warning of this and only became aware of it at 8.55pm. Our team has managed to restore power to a number of properties in the area and are still working to repair the fault on our overhead line network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 4AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1.58AM on 19th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': 'INCD-564931-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564931-s', 'postcodes_impacted': ['ML60LA', 'ML60LB', 'ML60LD', 'ML60LF', 'ML60LG', 'ML60LH', 'ML60LJ', 'ML60LL', 'ML60LN', 'ML60LP', 'ML60LQ', 'ML60LR', 'ML60LS', 'ML60LU', 'ML60LW', 'ML60LX', 'ML60NG', 'ML60NQ', 'ML60PN', 'ML60PQ', 'ML66SE', 'ML66SF', 'ML66SH', 'ML66SQ', 'ML67FP', 'ML67JA', 'ML67SP', 'ML67SS', 'ML67ST'], 'received_time': '2021-04-18 20:55'}, 'geometry': {'type': 'Point', 'coordinates': [-3.989646394720631, 55.880723275527636]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'INCD-172541-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG4 1LE': {'class': 'models.MapDataLocation', 'lat': 54.1383, 'lng': -1.52171}}, 'received_time': '2021-04-18 18:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.521745, 54.138165]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 05:00', 'incident_id': 'INCD-172578-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3SQ': {'class': 'models.MapDataLocation', 'lat': 53.7349, 'lng': -0.369088}, 'HU3 3SH': {'class': 'models.MapDataLocation', 'lat': 53.7353, 'lng': -0.369786}, 'HU3 3SF': {'class': 'models.MapDataLocation', 'lat': 53.7348, 'lng': -0.370563}, 'HU3 3SG': {'class': 'models.MapDataLocation', 'lat': 53.7352, 'lng': -0.370774}, 'HU3 3SD': {'class': 'models.MapDataLocation', 'lat': 53.7345, 'lng': -0.369649}, 'HU3 3SE': {'class': 'models.MapDataLocation', 'lat': 53.7344, 'lng': -0.370882}}, 'received_time': '2021-04-18 21:01'}, 'geometry': {'type': 'Point', 'coordinates': [-0.37007799999999996, 53.734836166666675]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172579-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S81 9AY': {'class': 'models.MapDataLocation', 'lat': 53.3586, 'lng': -1.12259}}, 'received_time': '2021-04-18 21:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.122527, 53.358561]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 00:30', 'incident_id': 'INCD-172580-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S9 1QD': {'class': 'models.MapDataLocation', 'lat': 53.423, 'lng': -1.42357}}, 'received_time': '2021-04-18 21:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.423595, 53.423009]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 02:00', 'incident_id': 'INCD-172583-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S62 7UP': {'class': 'models.MapDataLocation', 'lat': 53.4777, 'lng': -1.44799}, 'S62 7UR': {'class': 'models.MapDataLocation', 'lat': 53.4783, 'lng': -1.44914}, 'S62 7US': {'class': 'models.MapDataLocation', 'lat': 53.4775, 'lng': -1.44662}, 'S62 7UB': {'class': 'models.MapDataLocation', 'lat': 53.4777, 'lng': -1.45023}, 'S62 7UU': {'class': 'models.MapDataLocation', 'lat': 53.4786, 'lng': -1.4457}, 'S62 7UW': {'class': 'models.MapDataLocation', 'lat': 53.4783, 'lng': -1.45021}}, 'received_time': '2021-04-18 22:35'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4483273333333333, 53.47795766666667]}}, {'type': 'Feature', 'properties': {'description': 'U/G HV Mains Repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 01:30', 'incident_id': 'INCD-172590-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6DX': {'class': 'models.MapDataLocation', 'lat': 54.571, 'lng': -1.21751}, 'TS3 6DY': {'class': 'models.MapDataLocation', 'lat': 54.5708, 'lng': -1.21746}, 'TS4 2BZ': {'class': 'models.MapDataLocation', 'lat': 54.5711, 'lng': -1.22008}, 'TS3 6AL': {'class': 'models.MapDataLocation', 'lat': 54.5717, 'lng': -1.21634}, 'TS3 6DT': {'class': 'models.MapDataLocation', 'lat': 54.5713, 'lng': -1.21788}, 'TS3 6DU': {'class': 'models.MapDataLocation', 'lat': 54.571, 'lng': -1.21804}, 'TS3 8AT': {'class': 'models.MapDataLocation', 'lat': 54.5805, 'lng': -1.19634}, 'TS3 6DR': {'class': 'models.MapDataLocation', 'lat': 54.5716, 'lng': -1.21815}, 'TS3 8AS': {'class': 'models.MapDataLocation', 'lat': 54.5787, 'lng': -1.20219}, 'TS3 6DS': {'class': 'models.MapDataLocation', 'lat': 54.5715, 'lng': -1.21842}, 'TS3 6AR': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.21179}, 'TS3 8AG': {'class': 'models.MapDataLocation', 'lat': 54.5751, 'lng': -1.20621}, 'TS3 8BL': {'class': 'models.MapDataLocation', 'lat': 54.5733, 'lng': -1.19184}, 'TS3 8AL': {'class': 'models.MapDataLocation', 'lat': 54.5707, 'lng': -1.20252}, 'TS3 6HH': {'class': 'models.MapDataLocation', 'lat': 54.5711, 'lng': -1.21719}, 'TS3 6AU': {'class': 'models.MapDataLocation', 'lat': 54.5789, 'lng': -1.20757}, 'TS4 2AH': {'class': 'models.MapDataLocation', 'lat': 54.5727, 'lng': -1.22194}, 'TS4 2AG': {'class': 'models.MapDataLocation', 'lat': 54.5739, 'lng': -1.22394}, 'TS3 6AW': {'class': 'models.MapDataLocation', 'lat': 54.5782, 'lng': -1.20768}, 'TS4 2AF': {'class': 'models.MapDataLocation', 'lat': 54.5742, 'lng': -1.22551}, 'TS3 8BD': {'class': 'models.MapDataLocation', 'lat': 54.5756, 'lng': -1.19896}, 'TS3 8AX': {'class': 'models.MapDataLocation', 'lat': 54.5741, 'lng': -1.2003}, 'TS3 6DZ': {'class': 'models.MapDataLocation', 'lat': 54.5704, 'lng': -1.21746}, 'TS3 8AU': {'class': 'models.MapDataLocation', 'lat': 54.5807, 'lng': -1.20009}, 'TS3 6AB': {'class': 'models.MapDataLocation', 'lat': 54.5799, 'lng': -1.21119}, 'TS3 6EA': {'class': 'models.MapDataLocation', 'lat': 54.57, 'lng': -1.21704}}, 'received_time': '2021-04-19 00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2116222307692308, 54.57415099999999]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 02:30', 'incident_id': 'INCD-172597-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 8HT': {'class': 'models.MapDataLocation', 'lat': 54.8655, 'lng': -1.74794}, 'DH9 8LB': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74444}, 'DH9 8LE': {'class': 'models.MapDataLocation', 'lat': 54.8633, 'lng': -1.74572}, 'DH9 8LD': {'class': 'models.MapDataLocation', 'lat': 54.8636, 'lng': -1.74571}, 'DH9 8PF': {'class': 'models.MapDataLocation', 'lat': 54.8552, 'lng': -1.75128}, 'DH9 8SH': {'class': 'models.MapDataLocation', 'lat': 54.8654, 'lng': -1.74139}, 'DH9 8SF': {'class': 'models.MapDataLocation', 'lat': 54.8643, 'lng': -1.74429}, 'DH9 8LP': {'class': 'models.MapDataLocation', 'lat': 54.8629, 'lng': -1.74564}, 'DH9 8SG': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74421}, 'DH9 8SL': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74225}, 'DH9 8SJ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74181}, 'DH9 8LT': {'class': 'models.MapDataLocation', 'lat': 54.8626, 'lng': -1.74524}, 'DH9 8LS': {'class': 'models.MapDataLocation', 'lat': 54.8627, 'lng': -1.74485}, 'DH9 8SQ': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74282}, 'DH9 6DJ': {'class': 'models.MapDataLocation', 'lat': 54.8563, 'lng': -1.67565}, 'DH9 8SN': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74275}, 'DH9 8JZ': {'class': 'models.MapDataLocation', 'lat': 54.862, 'lng': -1.74312}, 'DH9 8PS': {'class': 'models.MapDataLocation', 'lat': 54.8604, 'lng': -1.74774}, 'DH9 8LW': {'class': 'models.MapDataLocation', 'lat': 54.8625, 'lng': -1.74594}, 'DH9 8EY': {'class': 'models.MapDataLocation', 'lat': 54.863, 'lng': -1.74392}, 'DH9 8EX': {'class': 'models.MapDataLocation', 'lat': 54.8646, 'lng': -1.74659}, 'DH9 8RW': {'class': 'models.MapDataLocation', 'lat': 54.865, 'lng': -1.74661}, 'DH9 8TX': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74037}, 'DH9 8EQ': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74706}, 'DH9 8SE': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.7436}, 'DH9 8EU': {'class': 'models.MapDataLocation', 'lat': 54.8637, 'lng': -1.74503}, 'DH9 8EB': {'class': 'models.MapDataLocation', 'lat': 54.8652, 'lng': -1.7483}, 'DH9 8RP': {'class': 'models.MapDataLocation', 'lat': 54.8657, 'lng': -1.74643}, 'DH9 8EF': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.74585}, 'DH9 8EG': {'class': 'models.MapDataLocation', 'lat': 54.8641, 'lng': -1.74655}, 'DH9 8RR': {'class': 'models.MapDataLocation', 'lat': 54.8653, 'lng': -1.74642}, 'DH9 8ED': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.74728}, 'DH9 8EE': {'class': 'models.MapDataLocation', 'lat': 54.8642, 'lng': -1.74485}}, 'received_time': '2021-04-19 00:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.743087787878788, 54.86361324242425]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:30', 'incident_id': 'PPC038703', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S61 2SQ': {'class': 'models.MapDataLocation', 'lat': 53.4465, 'lng': -1.42867}, 'S61 2SG': {'class': 'models.MapDataLocation', 'lat': 53.4489, 'lng': -1.4279}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4282745000000001, 53.447692]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'PPC039414', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1PN': {'class': 'models.MapDataLocation', 'lat': 54.4933, 'lng': -1.46696}, 'DL2 1PW': {'class': 'models.MapDataLocation', 'lat': 54.4952, 'lng': -1.45798}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.462247, 54.493803]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:00', 'incident_id': 'PPC039462', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN14 0DF': {'class': 'models.MapDataLocation', 'lat': 53.6731, 'lng': -1.05649}}, 'received_time': '2021-04-19 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.056237, 53.67338]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:30', 'incident_id': 'PPC039487', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0QY': {'class': 'models.MapDataLocation', 'lat': 54.6372, 'lng': -2.09221}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.092211, 54.637169]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 14:30', 'incident_id': 'PPC039607', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}, 'HX3 9UG': {'class': 'models.MapDataLocation', 'lat': 53.714, 'lng': -1.83573}}, 'received_time': '2021-04-19 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.831235, 53.715874]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 14:00', 'incident_id': 'PPC039750', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 9UA': {'class': 'models.MapDataLocation', 'lat': 54.8358, 'lng': -2.23509}, 'NE47 9UG': {'class': 'models.MapDataLocation', 'lat': 54.8313, 'lng': -2.23528}, 'NE47 9UH': {'class': 'models.MapDataLocation', 'lat': 54.8274, 'lng': -2.23202}, 'NE47 9UB': {'class': 'models.MapDataLocation', 'lat': 54.8351, 'lng': -2.2339}, 'NE47 9UD': {'class': 'models.MapDataLocation', 'lat': 54.8324, 'lng': -2.23122}, 'NE47 9UE': {'class': 'models.MapDataLocation', 'lat': 54.8271, 'lng': -2.25026}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2323276666666665, 54.8323885]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-23 15:30', 'incident_id': 'PPC039781', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE48 3EF': {'class': 'models.MapDataLocation', 'lat': 55.0729, 'lng': -2.31716}, 'NE48 3EE': {'class': 'models.MapDataLocation', 'lat': 55.0692, 'lng': -2.31243}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3148795, 55.071038]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:30', 'incident_id': 'PPC039786', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 5PS': {'class': 'models.MapDataLocation', 'lat': 54.1058, 'lng': -2.04057}, 'BD23 5PW': {'class': 'models.MapDataLocation', 'lat': 54.106, 'lng': -2.04106}, 'BD23 5HS': {'class': 'models.MapDataLocation', 'lat': 54.103, 'lng': -2.03}, 'BD23 5RB': {'class': 'models.MapDataLocation', 'lat': 54.1463, 'lng': -2.04859}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.04014775, 54.11531875]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:00', 'incident_id': 'PPC039787', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN10 6QU': {'class': 'models.MapDataLocation', 'lat': 53.4437, 'lng': -1.00626}, 'DN10 6QS': {'class': 'models.MapDataLocation', 'lat': 53.4412, 'lng': -1.00566}, 'DN10 6QY': {'class': 'models.MapDataLocation', 'lat': 53.4445, 'lng': -1.00538}, 'DN10 6RG': {'class': 'models.MapDataLocation', 'lat': 53.4469, 'lng': -1.00584}, 'DN10 6RH': {'class': 'models.MapDataLocation', 'lat': 53.4423, 'lng': -1.00497}, 'DN10 6DH': {'class': 'models.MapDataLocation', 'lat': 53.4379, 'lng': -1.00323}, 'DN10 6QJ': {'class': 'models.MapDataLocation', 'lat': 53.4373, 'lng': -1.01371}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0064837142857141, 53.44211814285715]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039789', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S8 8BG': {'class': 'models.MapDataLocation', 'lat': 53.3332, 'lng': -1.43553}, 'S18 4BA': {'class': 'models.MapDataLocation', 'lat': 53.3051, 'lng': -1.43744}, 'S18 3BE': {'class': 'models.MapDataLocation', 'lat': 53.3136, 'lng': -1.43517}, 'S18 3BF': {'class': 'models.MapDataLocation', 'lat': 53.3113, 'lng': -1.44239}, 'S18 3BG': {'class': 'models.MapDataLocation', 'lat': 53.3134, 'lng': -1.44494}, 'S18 3AW': {'class': 'models.MapDataLocation', 'lat': 53.3114, 'lng': -1.45627}, 'S18 3BH': {'class': 'models.MapDataLocation', 'lat': 53.3125, 'lng': -1.44156}, 'S18 8UE': {'class': 'models.MapDataLocation', 'lat': 53.2999, 'lng': -1.49495}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.448412125, 53.31253975]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'PPC039791', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 9SA': {'class': 'models.MapDataLocation', 'lat': 54.0349, 'lng': -0.69591}, 'YO17 9TF': {'class': 'models.MapDataLocation', 'lat': 54.0437, 'lng': -0.696457}, 'YO17 9TE': {'class': 'models.MapDataLocation', 'lat': 54.0495, 'lng': -0.666675}, 'YO17 9TD': {'class': 'models.MapDataLocation', 'lat': 54.0723, 'lng': -0.662154}}, 'received_time': '2021-04-19 10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6844914999999999, 54.04981674999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:45', 'incident_id': 'PPC039795', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TP': {'class': 'models.MapDataLocation', 'lat': 54.0603, 'lng': -0.706953}}, 'received_time': '2021-04-19 11:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.706978, 54.060366]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 13:00', 'incident_id': 'PPC039806', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU15 1JX': {'class': 'models.MapDataLocation', 'lat': 53.7374, 'lng': -0.566683}, 'HU15 1JL': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.572335}, 'HU15 1JN': {'class': 'models.MapDataLocation', 'lat': 53.7373, 'lng': -0.570127}, 'HU15 1JS': {'class': 'models.MapDataLocation', 'lat': 53.7366, 'lng': -0.567196}, 'HU15 1JR': {'class': 'models.MapDataLocation', 'lat': 53.7382, 'lng': -0.569051}, 'HU15 1JU': {'class': 'models.MapDataLocation', 'lat': 53.7368, 'lng': -0.567869}}, 'received_time': '2021-04-19 10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5688315, 53.73737]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to move equipment in order to allow another organisation to work close to our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 15:00', 'incident_id': 'PPC039815', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR4 9DX': {'class': 'models.MapDataLocation', 'lat': 54.892, 'lng': -1.45067}, 'SR4 9DY': {'class': 'models.MapDataLocation', 'lat': 54.8924, 'lng': -1.44978}, 'SR4 9HE': {'class': 'models.MapDataLocation', 'lat': 54.8917, 'lng': -1.44965}, 'SR4 9DU': {'class': 'models.MapDataLocation', 'lat': 54.8931, 'lng': -1.44906}, 'SR4 9DS': {'class': 'models.MapDataLocation', 'lat': 54.8935, 'lng': -1.44928}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4497214, 54.8925578]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-24 13:00', 'incident_id': 'PPC039817', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0SL': {'class': 'models.MapDataLocation', 'lat': 54.6232, 'lng': -2.08176}, 'DL12 0TN': {'class': 'models.MapDataLocation', 'lat': 54.6215, 'lng': -2.07872}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0796565, 54.622524999999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-24 13:00', 'incident_id': 'PPC039819', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0ST': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.0797}, 'DL12 0TH': {'class': 'models.MapDataLocation', 'lat': 54.6213, 'lng': -2.07999}, 'DL12 0TJ': {'class': 'models.MapDataLocation', 'lat': 54.6206, 'lng': -2.08013}, 'DL12 0NG': {'class': 'models.MapDataLocation', 'lat': 54.6172, 'lng': -2.08134}, 'DL12 0TQ': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.07866}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0798144, 54.6208522]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 14:00', 'incident_id': 'PPC039824', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 7SD': {'class': 'models.MapDataLocation', 'lat': 54.2412, 'lng': -0.990266}, 'YO62 5HZ': {'class': 'models.MapDataLocation', 'lat': 54.2427, 'lng': -1.0121}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9971615, 54.240981500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 16:00', 'incident_id': 'PPC039859', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 0JN': {'class': 'models.MapDataLocation', 'lat': 53.845, 'lng': -0.403878}, 'HU17 0JJ': {'class': 'models.MapDataLocation', 'lat': 53.8428, 'lng': -0.403095}}, 'received_time': '2021-04-19 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.403291, 53.8440485]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-21 11:30', 'incident_id': 'PPC039891', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS12 1PW': {'class': 'models.MapDataLocation', 'lat': 54.5824, 'lng': -0.998236}, 'TS12 1PP': {'class': 'models.MapDataLocation', 'lat': 54.5847, 'lng': -1.00253}}, 'received_time': '2021-04-19 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0004195, 54.5835505]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-22 15:30', 'incident_id': 'PPC039892', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS11 8AA': {'class': 'models.MapDataLocation', 'lat': 54.5851, 'lng': -1.01831}}, 'received_time': '2021-04-19 09:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.02017, 54.587138]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 12:00', 'incident_id': 'PPC039987', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8TE': {'class': 'models.MapDataLocation', 'lat': 53.7534, 'lng': -1.9149}, 'HX2 8SW': {'class': 'models.MapDataLocation', 'lat': 53.7511, 'lng': -1.91364}, 'HX2 8SN': {'class': 'models.MapDataLocation', 'lat': 53.752, 'lng': -1.91182}}, 'received_time': '2021-04-19 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.91345, 53.75218166666667]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': '10646175', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK23 7EW'], 'received_time': '2021-04-18 16:26'}, 'geometry': {'type': 'Point', 'coordinates': [-1.96471, 53.323568]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});