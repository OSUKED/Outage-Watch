document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55321-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55321-V', 'postcodes_impacted': ['GU14RY', 'GU14SG', 'GU14SQ', 'GU14YN'], 'received_time': '2021-04-28T13:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5773767622562184, 51.237104577054666]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T01:30:00', 'incident_id': 'INCD-44682-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44682-C', 'postcodes_impacted': ['HP65LJ', 'HP65LL', 'HP65LN', 'HP65LQ', 'HP65LT', 'HP66DB', 'HP66DF'], 'received_time': '2021-04-29T21:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6012760869609666, 51.686341170161356]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248931-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248931-G', 'postcodes_impacted': ['RH135RU', 'RH135QR', 'RH135RS', 'RH135RT'], 'received_time': '2021-04-29T09:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3083772359831535, 51.067695720885965]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233718-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233718-Z', 'postcodes_impacted': ['HA87AA'], 'received_time': '2021-04-29T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2770011502119603, 51.612296885941575]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233407-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233407-Z', 'postcodes_impacted': ['N20NL', 'N20NT', 'N20NU', 'N20NX', 'N64LT', 'N64LU'], 'received_time': '2021-04-27T15:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16106207400978767, 51.58407335576303]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T04:30:00', 'incident_id': 'INCD-233804-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233804-Z', 'postcodes_impacted': ['NW21TR', 'NW21AJ', 'NW21TT', 'NW71ED'], 'received_time': '2021-04-29T11:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2159171694608089, 51.5825774156116]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233914-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233914-Z', 'postcodes_impacted': ['EN91NA', 'EN91NB', 'EN91NE'], 'received_time': '2021-04-29T22:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.0021617265419798665, 51.68655465806702]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233917-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233917-Z', 'postcodes_impacted': ['AL60EF', 'AL60PP', 'AL60PW', 'AL60XB', 'AL69EE', 'AL69EQ', 'AL69GP', 'AL69HT', 'AL69LY', 'AL69LZ', 'AL69NA', 'AL69NB', 'AL69ND', 'AL69NE', 'AL69NF', 'AL69NG', 'AL69NH', 'AL69NJ', 'AL69NL', 'AL69NN', 'AL69NP', 'AL69NQ', 'AL69NR', 'AL69NS', 'AL69NU', 'AL69NW', 'AL69RF', 'AL69RG', 'AL69RJ', 'AL69RL', 'AL69RN', 'AL69RQ', 'AL69SA', 'AL69SB', 'AL69SD', 'AL69SE', 'AL69SF', 'AL69SG', 'AL69SH', 'AL69SJ', 'AL69SN', 'AL69SP', 'AL69SQ', 'AL69SS', 'AL69SW', 'AL69TJ', 'AL69TP', 'AL69TR', 'AL69TS', 'AL69TT', 'AL69TU', 'AL69TX', 'AL69TY', 'AL69UA', 'AL69UH', 'AL69UJ', 'LU28NA', 'SG48BQ', 'SG48DU', 'SG48GG', 'SG48HZ', 'SG48PY', 'SG48SN', 'SG48SP', 'SG48SR', 'SG48SS', 'SG48ST', 'SG48SU', 'SG48SW', 'SG48SY', 'SG48SZ', 'SG48TF', 'SG48TY', 'SG48UA', 'SG48UB', 'SG48UD', 'SG48UE', 'SG48UF', 'SG48UG', 'SG48UH', 'SG48UJ', 'SG48UL', 'SG48UN', 'SG48UP', 'SG48UQ', 'SG48UR', 'SG48US', 'SG48UT', 'SG48UU', 'SG48UW', 'SG48UX', 'SG48UY', 'SG48UZ', 'SG48WP', 'SG48XA', 'SG48XB', 'SG48XD', 'SG48XE', 'SG48XF', 'SG48XG', 'SG48XH', 'SG48XJ', 'SG48XL', 'SG48XN', 'SG48XP', 'SG48XQ', 'SG48XR', 'SG48XS', 'SG48XT', 'SG48XU', 'SG48XW', 'SG48XX', 'SG48XY', 'SG48XZ', 'SG48YA', 'SG48YB', 'SG48YD', 'SG48YE', 'SG48YF', 'SG48YG', 'SG48YH', 'SG48YJ', 'SG48YL', 'SG48YN', 'SG48YP', 'SG48YQ', 'SG48YR', 'SG48YT', 'SG48YU', 'SG48YW', 'SG48YX', 'SG48YY', 'SG62JF', 'SG84GG', 'UK'], 'received_time': '2021-04-30T00:17:12'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2284716011014689, 51.84656839890366]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T05:00:00', 'incident_id': 'INCD-49698-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-49698-V', 'postcodes_impacted': ['BN85TD', 'BN85TF', 'RH193NE'], 'received_time': '2021-02-18T08:31:13'}, 'geometry': {'type': 'Point', 'coordinates': [0.005894858945088367, 50.97735262026482]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable on the high voltage network affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T00:30:00', 'incident_id': 'INCD-55415-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55415-V', 'postcodes_impacted': ['RH162QH', 'RH162TD', 'RH163JE', 'RH163JF', 'RH163JG', 'RH163RN', 'RH163SH', 'RH163SR', 'RH163TQ', 'RH177TA', 'RH177TB', 'RH162QA', 'RH162QB', 'RH162QE', 'RH177SX', 'RH177SY'], 'received_time': '2021-04-29T16:46:18'}, 'geometry': {'type': 'Point', 'coordinates': [-0.07527605492095302, 50.995558665095636]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233916-Z', 'postcodes_impacted': ['AL60BN', 'AL60TP', 'AL69GQ', 'AL69GR', 'AL69ST', 'AL69SU', 'AL69SX', 'AL69SY', 'AL69SZ', 'AL69TA', 'AL69TB', 'AL69TD', 'AL69TE', 'AL69TF', 'AL69TG', 'AL69TQ', 'AL69UA', 'AL69UB', 'AL69UD', 'AL69UE', 'AL69UF', 'AL69UG', 'AL69UQ', 'SG36QD', 'SG36QG', 'SG36QH', 'SG36QJ', 'SG36QL', 'SG48TB', 'SG48TG', 'SG48TH', 'SG48TJ', 'SG48TL', 'SG48TP', 'SG48TQ', 'SG48TR', 'SG48TS', 'SG48WT', 'UK'], 'received_time': '2021-04-30T00:17:10'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21370411903874226, 51.85900744572641]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T03:30:00', 'incident_id': 'INCD-261122-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-261122-J', 'postcodes_impacted': ['W149NE', 'W149NP', 'W149PE', 'W149PF'], 'received_time': '2021-04-29T23:47:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2050182706362464, 51.48920738019102]}}, {'type': 'Feature', 'properties': {'description': '', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T05:00:00', 'incident_id': 'INCD-249025-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249025-G', 'postcodes_impacted': ['BN85TD', 'BN85TF', 'RH193NE'], 'received_time': '2021-04-29T23:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.005894858945088367, 50.97735262026482]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4473\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 02:30:00', 'incident_id': 'HC4473', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO2 9HH', 'PO2 9HJ', 'PO2 9HP', 'PO2 9HQ', 'PO2 9HR', 'PO2 9HW', 'PO2 9LN', 'PO2 9LR', 'PO2 9NH', 'PO2 9NL', 'PO2 9NN', 'PO2 9NP', 'PO2 9NQ', 'PO2 9NR', 'PO2 9NW'], 'received_time': '2021-04-29 22:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0747541333333333, 50.825246666666665]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB6779\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 02:00:00', 'incident_id': 'HB6779', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['W4 1PE', 'W4 1PF', 'W4 1PP', 'W4 1QF', 'W4 1QP', 'W4 1RJ', 'W4 1RP', 'W4 1RR'], 'received_time': '2021-04-29 22:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.25543125, 51.49385425]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4459\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-29 23:30:00', 'incident_id': 'HC4459', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO45 5QW', 'SO45 5QX', 'SO45 5QY'], 'received_time': '2021-04-29 20:37:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4186233333333333, 50.86170333333333]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4436\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 05:00:00', 'incident_id': 'HC4436', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO45 1ZN', 'SO45 1ZP'], 'received_time': '2021-04-29 19:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.374779, 50.809383499999996]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4418\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 02:30:00', 'incident_id': 'HC4418', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL2 3DB', 'SL3 6AN', 'SL3 6AT', 'SL3 6AU', 'SL3 6AX', 'SL3 6AY', 'SL3 6BB', 'SL3 6BP', 'SL3 7BT'], 'received_time': '2021-04-29 18:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5672728888888889, 51.52289288888889]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 00:30:00', 'incident_id': 'INCD-657-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-657-q', 'postcodes_impacted': ['TA4 3PE', 'TA4 3LN', 'TA4 3LW', 'TA4 3PD', 'TA4 3PF'], 'received_time': '2021-04-29 21:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1838326, 51.0538498]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'INCD-188-r', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-188-r', 'postcodes_impacted': ['BS20 7JD', 'BS20 7HA', 'BS20 7NU', 'BS20 7JA', 'BS20 7EY', 'BS20 7RN', 'BS20 7EZ'], 'received_time': '2021-04-29 07:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.7693097142857144, 51.49124414285713]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 04:00:00', 'incident_id': 'INCD-417101-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-417101-E', 'postcodes_impacted': ['WS11 9SN', 'WS11 9US', 'WS11 9FB'], 'received_time': '2021-04-29 18:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9646556666666666, 52.670411666666666]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'INCD-417103-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-417103-E', 'postcodes_impacted': ['CV36 4JG', 'GL55 6NU', 'GL55 6NR', 'CV36 4JF', 'CV36 4JH', 'GL55 6NX', 'GL55 6XZ', 'GL55 6NS', 'GL55 6NW', 'GL55 6TH', 'GL55 6XU', 'CV36 4LD', 'CV36 4LX', 'CV36 4PX', 'GL55 6LR'], 'received_time': '2021-04-29 22:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7143429333333335, 52.07162433333335]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 02:00:00', 'incident_id': 'INCD-153635-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153635-H', 'postcodes_impacted': ['B77 1LD'], 'received_time': '2021-04-29 18:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.682705, 52.601468]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-30 00:45', 'incident_id': 'INCD-569671-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-569671-s', 'postcodes_impacted': ['KA143BJ', 'KA143BL', 'KA143BP', 'KA143BX'], 'received_time': '2021-04-29 22:29'}, 'geometry': {'type': 'Point', 'coordinates': [-4.665099174330077, 55.738328699150934]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-376510-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-376510-r', 'postcodes_impacted': ['L318BX'], 'received_time': '2021-04-29 09:35'}, 'geometry': {'type': 'Point', 'coordinates': [-2.959052625892637, 53.50664093329559]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 14:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 00:30', 'incident_id': 'INCD-175457-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S71 3SD': {'class': 'models.MapDataLocation', 'lat': 53.5742, 'lng': -1.46673}, 'S71 3SS': {'class': 'models.MapDataLocation', 'lat': 53.5761, 'lng': -1.46411}, 'S71 3SF': {'class': 'models.MapDataLocation', 'lat': 53.5741, 'lng': -1.46535}, 'S71 3RT': {'class': 'models.MapDataLocation', 'lat': 53.5743, 'lng': -1.46275}, 'S71 3SE': {'class': 'models.MapDataLocation', 'lat': 53.5744, 'lng': -1.46548}, 'S71 3RU': {'class': 'models.MapDataLocation', 'lat': 53.5747, 'lng': -1.46421}, 'S71 3SG': {'class': 'models.MapDataLocation', 'lat': 53.5751, 'lng': -1.46434}, 'S71 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.5757, 'lng': -1.4669}, 'S71 3RX': {'class': 'models.MapDataLocation', 'lat': 53.5734, 'lng': -1.46465}, 'S71 3RZ': {'class': 'models.MapDataLocation', 'lat': 53.5739, 'lng': -1.46755}, 'S71 3SB': {'class': 'models.MapDataLocation', 'lat': 53.5746, 'lng': -1.46652}}, 'received_time': '2021-04-29 00:57'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4652654545454546, 53.57462754545455]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175615-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL5 6ZE': {'class': 'models.MapDataLocation', 'lat': 54.6005, 'lng': -1.56874}}, 'received_time': '2021-04-29 12:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.568773, 54.600499]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-29 23:15', 'incident_id': 'INCD-175660-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS24 9US': {'class': 'models.MapDataLocation', 'lat': 53.8288, 'lng': -1.2281}}, 'received_time': '2021-04-29 14:47'}, 'geometry': {'type': 'Point', 'coordinates': [-1.228095, 53.82884]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 01:00', 'incident_id': 'INCD-175663-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR5 1HE': {'class': 'models.MapDataLocation', 'lat': 54.9181, 'lng': -1.39314}, 'SR5 1HQ': {'class': 'models.MapDataLocation', 'lat': 54.9178, 'lng': -1.39193}, 'SR5 1EY': {'class': 'models.MapDataLocation', 'lat': 54.9173, 'lng': -1.39013}, 'SR5 1HA': {'class': 'models.MapDataLocation', 'lat': 54.9191, 'lng': -1.39072}, 'SR5 1HD': {'class': 'models.MapDataLocation', 'lat': 54.9191, 'lng': -1.39135}, 'SR5 1EW': {'class': 'models.MapDataLocation', 'lat': 54.9192, 'lng': -1.38955}, 'SR5 1ED': {'class': 'models.MapDataLocation', 'lat': 54.918, 'lng': -1.3879}, 'SR5 1SP': {'class': 'models.MapDataLocation', 'lat': 54.9183, 'lng': -1.3934}, 'SR5 1ET': {'class': 'models.MapDataLocation', 'lat': 54.9184, 'lng': -1.38912}, 'SR5 1EP': {'class': 'models.MapDataLocation', 'lat': 54.9191, 'lng': -1.39039}}, 'received_time': '2021-04-29 15:06'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3907591, 54.9184354]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175671-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD7 1RG': {'class': 'models.MapDataLocation', 'lat': 53.7883, 'lng': -1.76799}}, 'received_time': '2021-04-29 16:06'}, 'geometry': {'type': 'Point', 'coordinates': [-1.767993, 53.788306]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175677-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 7EZ': {'class': 'models.MapDataLocation', 'lat': 54.0968, 'lng': -0.8751}}, 'received_time': '2021-04-29 16:37'}, 'geometry': {'type': 'Point', 'coordinates': [-0.875115, 54.096758]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 00:15', 'incident_id': 'INCD-175710-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD6 1EJ': {'class': 'models.MapDataLocation', 'lat': 53.7586, 'lng': -1.77055}}, 'received_time': '2021-04-29 18:14'}, 'geometry': {'type': 'Point', 'coordinates': [-1.770553, 53.75857]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 03:00', 'incident_id': 'INCD-175716-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE12 8JX': {'class': 'models.MapDataLocation', 'lat': 55.014, 'lng': -1.56989}}, 'received_time': '2021-04-29 20:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.569964, 55.014018]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175717-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 2PB': {'class': 'models.MapDataLocation', 'lat': 53.8189, 'lng': -1.71796}}, 'received_time': '2021-04-29 20:24'}, 'geometry': {'type': 'Point', 'coordinates': [-1.717957, 53.81892]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 00:45', 'incident_id': 'INCD-175724-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE42 6JN': {'class': 'models.MapDataLocation', 'lat': 54.9559, 'lng': -1.86279}}, 'received_time': '2021-04-29 21:34'}, 'geometry': {'type': 'Point', 'coordinates': [-1.862807, 54.95585]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 01:15', 'incident_id': 'INCD-175728-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD4 7NJ': {'class': 'models.MapDataLocation', 'lat': 53.6182, 'lng': -1.79384}}, 'received_time': '2021-04-29 22:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.793809, 53.618146]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 02:15', 'incident_id': 'INCD-175730-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS27 0PD': {'class': 'models.MapDataLocation', 'lat': 53.7432, 'lng': -1.60108}}, 'received_time': '2021-04-29 23:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.601064, 53.74326]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 02:30', 'incident_id': 'INCD-175731-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S64 0DU': {'class': 'models.MapDataLocation', 'lat': 53.4988, 'lng': -1.27569}}, 'received_time': '2021-04-29 23:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.275677, 53.498787]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:00', 'incident_id': 'PPC039688', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8PF': {'class': 'models.MapDataLocation', 'lat': 53.7457, 'lng': -1.90206}, 'HX2 8PE': {'class': 'models.MapDataLocation', 'lat': 53.7472, 'lng': -1.90284}, 'HX2 8PD': {'class': 'models.MapDataLocation', 'lat': 53.7464, 'lng': -1.90227}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9023926666666666, 53.746439]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039811', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD21 5QF': {'class': 'models.MapDataLocation', 'lat': 53.8399, 'lng': -1.91623}, 'BD21 5QE': {'class': 'models.MapDataLocation', 'lat': 53.8365, 'lng': -1.92174}, 'BD21 5HL': {'class': 'models.MapDataLocation', 'lat': 53.846, 'lng': -1.92119}, 'BD22 9AQ': {'class': 'models.MapDataLocation', 'lat': 53.8398, 'lng': -1.92899}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92180875, 53.840582]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 11:00', 'incident_id': 'PPC039865', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8BQ': {'class': 'models.MapDataLocation', 'lat': 54.122, 'lng': -0.667363}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.667363, 54.121988]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039881', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 5UP': {'class': 'models.MapDataLocation', 'lat': 54.0168, 'lng': -0.457062}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.45578, 54.015166]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:00', 'incident_id': 'PPC039882', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 3DG': {'class': 'models.MapDataLocation', 'lat': 53.8922, 'lng': -1.6973}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.697289, 53.892184]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039895', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN3 3JF': {'class': 'models.MapDataLocation', 'lat': 53.5339, 'lng': -1.04885}, 'DN3 3JG': {'class': 'models.MapDataLocation', 'lat': 53.5355, 'lng': -1.04939}, 'DN3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.5348, 'lng': -1.05274}, 'DN3 3DH': {'class': 'models.MapDataLocation', 'lat': 53.536, 'lng': -1.05166}, 'DN3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.5354, 'lng': -1.057}, 'DN3 3DL': {'class': 'models.MapDataLocation', 'lat': 53.5359, 'lng': -1.0503}, 'DN3 3BW': {'class': 'models.MapDataLocation', 'lat': 53.5337, 'lng': -1.05271}, 'DN3 3TN': {'class': 'models.MapDataLocation', 'lat': 53.5343, 'lng': -1.05136}, 'DN3 3JE': {'class': 'models.MapDataLocation', 'lat': 53.5349, 'lng': -1.0507}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0516522222222224, 53.53493266666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039924', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:30', 'incident_id': 'PPC039939', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS2 1DD': {'class': 'models.MapDataLocation', 'lat': 54.5799, 'lng': -1.24364}, 'TS2 1DT': {'class': 'models.MapDataLocation', 'lat': 54.5803, 'lng': -1.24351}, 'TS9 5DZ': {'class': 'models.MapDataLocation', 'lat': 54.4703, 'lng': -1.19654}, 'TS1 5LB': {'class': 'models.MapDataLocation', 'lat': 54.579, 'lng': -1.24266}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2312254999999999, 54.55231225]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-05-01 03:00', 'incident_id': 'PPC039978', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3AN': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.360375}, 'HU3 3AQ': {'class': 'models.MapDataLocation', 'lat': 53.7383, 'lng': -0.361286}, 'HU3 3AR': {'class': 'models.MapDataLocation', 'lat': 53.7388, 'lng': -0.361493}, 'HU3 3AS': {'class': 'models.MapDataLocation', 'lat': 53.7374, 'lng': -0.36006}, 'HU3 3EQ': {'class': 'models.MapDataLocation', 'lat': 53.7362, 'lng': -0.363457}, 'HU3 3AT': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362596}, 'HU3 3AU': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362155}, 'HU3 3AW': {'class': 'models.MapDataLocation', 'lat': 53.7384, 'lng': -0.360993}, 'HU3 3DF': {'class': 'models.MapDataLocation', 'lat': 53.7375, 'lng': -0.363468}, 'HU3 3BB': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360794}, 'HU3 3BA': {'class': 'models.MapDataLocation', 'lat': 53.7371, 'lng': -0.361026}, 'HU3 3BD': {'class': 'models.MapDataLocation', 'lat': 53.7364, 'lng': -0.360462}, 'HU3 3DA': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.362726}, 'HU3 3DB': {'class': 'models.MapDataLocation', 'lat': 53.7359, 'lng': -0.362348}, 'HU3 3BE': {'class': 'models.MapDataLocation', 'lat': 53.7363, 'lng': -0.360423}, 'HU3 2UF': {'class': 'models.MapDataLocation', 'lat': 53.7396, 'lng': -0.366328}, 'HU3 3BH': {'class': 'models.MapDataLocation', 'lat': 53.7368, 'lng': -0.36116}, 'HU3 2UE': {'class': 'models.MapDataLocation', 'lat': 53.7397, 'lng': -0.36643}, 'HU3 3BG': {'class': 'models.MapDataLocation', 'lat': 53.7361, 'lng': -0.360929}, 'HU3 3BL': {'class': 'models.MapDataLocation', 'lat': 53.737, 'lng': -0.362577}, 'HU3 3BJ': {'class': 'models.MapDataLocation', 'lat': 53.7372, 'lng': -0.362314}, 'HU3 2QY': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.354933}, 'HU3 3BZ': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.363689}, 'HU3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.7367, 'lng': -0.359813}, 'HU3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360459}, 'HU3 3AD': {'class': 'models.MapDataLocation', 'lat': 53.7366, 'lng': -0.358832}}, 'received_time': '2021-04-30 21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3615553076923076, 53.737405461538465]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039992', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 6BX': {'class': 'models.MapDataLocation', 'lat': 53.7175, 'lng': -1.93822}, 'HX2 6BY': {'class': 'models.MapDataLocation', 'lat': 53.7217, 'lng': -1.93575}, 'HX2 6DD': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.9371}, 'HX2 8TX': {'class': 'models.MapDataLocation', 'lat': 53.7412, 'lng': -1.89635}, 'HX2 6DA': {'class': 'models.MapDataLocation', 'lat': 53.7188, 'lng': -1.92903}, 'HX2 6SJ': {'class': 'models.MapDataLocation', 'lat': 53.7286, 'lng': -1.93291}, 'HX2 6BZ': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -1.93369}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92958, 53.724328571428565]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC040043', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS13 4AJ': {'class': 'models.MapDataLocation', 'lat': 54.5624, 'lng': -0.901202}, 'TS13 4AN': {'class': 'models.MapDataLocation', 'lat': 54.5601, 'lng': -0.901651}, 'TS13 4AQ': {'class': 'models.MapDataLocation', 'lat': 54.5627, 'lng': -0.904039}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9023179999999998, 54.561727999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:30', 'incident_id': 'PPC040111', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF7 6HG': {'class': 'models.MapDataLocation', 'lat': 53.6896, 'lng': -1.37771}, 'WF7 6HQ': {'class': 'models.MapDataLocation', 'lat': 53.6899, 'lng': -1.37621}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3769825, 53.6897915]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-30 05:37', 'incident_id': '40812125', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR1 5DL', 'PR1 5EJ', 'PR1 5QP', 'PR1 5QQ', 'PR1 5RR', 'PR1 5UT', 'PR1 5XR', 'PR1 5XT', 'PR1 5XU', 'PR1 5XX', 'PR1 5YB', 'PR1 5YJ'], 'received_time': '2021-04-29 23:32'}, 'geometry': {'type': 'Point', 'coordinates': [-2.676113666666667, 53.76608833333333]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-30 00:54', 'incident_id': '10647296', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK12 6JD', 'SK12 6NX', 'SK23 0HW', 'SK23 0JD', 'SK23 0NG', 'SK23 0NT', 'SK23 0NX', 'SK23 0QD'], 'received_time': '2021-04-29 18:52'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9081018749999998, 53.32464475]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});