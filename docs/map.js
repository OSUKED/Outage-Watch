document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T18:00:00', 'incident_id': 'INCD-260716-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260716-J', 'postcodes_impacted': ['DA159NJ', 'DA159NL', 'DA159NN', 'DA159LF', 'DA159NP', 'DA159NR', 'DA159NS', 'DA159NT', 'DA159NU', 'DA159NZ', 'DA159PA', 'DA159PB', 'DA159PH'], 'received_time': '2021-04-25T12:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.11301141550756588, 51.448951133578944]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T18:00:00', 'incident_id': 'INCD-55087-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55087-V', 'postcodes_impacted': ['BN189NH', 'BN189NQ', 'BN189ND'], 'received_time': '2021-04-25T09:45:37'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5360886250918241, 50.90914963345889]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T18:30:00', 'incident_id': 'INCD-44491-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44491-C', 'postcodes_impacted': ['SS94EX', 'SS94DH', 'SS95PG', 'SS95PQ'], 'received_time': '2021-04-25T15:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6523532170660535, 51.56401655606389]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T19:00:00', 'incident_id': 'INCD-232944-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232944-Z', 'postcodes_impacted': ['IP279AG', 'IP279DJ'], 'received_time': '2021-04-25T09:39:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.527469030146243, 52.40867294708838]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232972-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232972-Z', 'postcodes_impacted': ['PE134AY', 'PE134DF', 'PE134DG', 'PE134DH', 'PE150AB', 'PE150AE', 'PE150AL', 'PE60UD', 'PE71LF', 'PE72BE', 'PE72DN', 'PE72DS', 'PE72DU', 'PE73DU'], 'received_time': '2021-04-25T16:13:18'}, 'geometry': {'type': 'Point', 'coordinates': [-0.02954787726850672, 52.57120392495532]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T20:00:00', 'incident_id': 'INCD-232937-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232937-Z', 'postcodes_impacted': ['IP11', 'IP110QL', 'IP117AB', 'IP117AD', 'IP117EL', 'IP117EN', 'IP117HA', 'IP117YY'], 'received_time': '2021-04-25T07:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3469254028095938, 51.968900460420834]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T19:30:00', 'incident_id': 'INCD-260729-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260729-J', 'postcodes_impacted': ['E181AY', 'E182LS', 'E182LY'], 'received_time': '2021-04-25T15:57:57'}, 'geometry': {'type': 'Point', 'coordinates': [0.02393650932679513, 51.59463135425755]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T18:30:00', 'incident_id': 'INCD-232922-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232922-Z', 'postcodes_impacted': ['RM188RW', 'RM188SJ', 'RM188SP'], 'received_time': '2021-04-25T02:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.41913805908977936, 51.4836884138798]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T12:00:00', 'incident_id': 'INCD-6582-O', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-6582-O', 'postcodes_impacted': ['HP25RR', 'NR33ST', 'NR33SY', 'NR33TP'], 'received_time': '2021-04-25T10:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8451798267183119, 52.432168144452916]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T16:00:00', 'incident_id': 'INCD-229868-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229868-Z', 'postcodes_impacted': ['CO112JZ', 'CO112LP', 'CO76BJ'], 'received_time': '2021-04-25T09:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0190091446086122, 51.943073414848264]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1869\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 17:40:00', 'incident_id': 'HC1869', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG2 0GF', 'RG31 7DG', 'RG31 7DN', 'RG31 7DQ', 'RG31 7DR', 'RG31 7DW'], 'received_time': '2021-04-25 14:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0283175, 51.43945733333334]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1826\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 16:00:00', 'incident_id': 'HC1826', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL1 4QZ'], 'received_time': '2021-04-25 10:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.622812, 51.522252]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 16:00:00', 'incident_id': 'INCD-2407-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2407-g', 'postcodes_impacted': ['NP24 6HH', 'NP24 6HG', 'NP24 6HQ', 'NP24 6HJ'], 'received_time': '2021-04-25 06:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2436652500000003, 51.7178675]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 18:30:00', 'incident_id': 'INCD-2420-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2420-g', 'postcodes_impacted': ['SA11 5TE', 'SA11 5PS', 'SA11 5TW', 'SA11 5PR', 'SA11 5SS', 'SA11 5PZ'], 'received_time': '2021-04-25 14:22:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.637662333333333, 51.7321555]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-358547-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358547-G', 'postcodes_impacted': ['GL6 0BE', 'GL6 0AE'], 'received_time': '2021-04-25 10:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2205805, 51.698041]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 16:30:00', 'incident_id': 'INCD-358536-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358536-G', 'postcodes_impacted': ['ST18 0TP'], 'received_time': '2021-04-25 00:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.999543, 52.795852]}}, {'type': 'Feature', 'properties': {'description': 'Emergency', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 16:30:00', 'incident_id': 'INCD-358558-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358558-G', 'postcodes_impacted': ['B49 5NT', 'B49 5LX', 'B49 5NW', 'B49 5PD', 'B49 5NX', 'B49 5NN', 'B49 5PA', 'B49 5NJ'], 'received_time': '2021-04-25 13:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9044889999999999, 52.18452225]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 17:00:00', 'incident_id': 'INCD-358546-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358546-G', 'postcodes_impacted': ['DY2 0JJ'], 'received_time': '2021-04-25 10:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.089405, 52.490183]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:00:00', 'incident_id': 'INCD-358549-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358549-G', 'postcodes_impacted': ['WS10 9RS'], 'received_time': '2021-04-25 10:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.019707, 52.569812]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 16:00:00', 'incident_id': 'INCD-153293-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153293-H', 'postcodes_impacted': ['LE9 8AF', 'LE9 8AB', 'LE9 8AN', 'LE9 8PE'], 'received_time': '2021-04-25 12:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3387435, 52.57270025]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 20:00:00', 'incident_id': 'INCD-153296-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153296-H', 'postcodes_impacted': ['DE24 8UH', 'DE24 8RB', 'DE24 8RD', 'DE24 8QN'], 'received_time': '2021-04-25 12:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4293687499999999, 52.8986225]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 19:00:00', 'incident_id': 'INCD-153281-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153281-H', 'postcodes_impacted': ['NG20 9NG'], 'received_time': '2021-04-25 10:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.159032, 53.232861]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-153285-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153285-H', 'postcodes_impacted': ['CV31 3HG', 'CV31 3HE', 'CV31 3AL'], 'received_time': '2021-04-25 11:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.536166, 52.280042333333334]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 17:30:00', 'incident_id': 'INCD-44806-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44806-D', 'postcodes_impacted': ['NG23 6TS', 'NG23 6QP', 'NG23 6QW', 'NG23 6TP', 'NG23 6QY', 'NG23 6ST', 'NG23 6JF', 'NG23 6TR'], 'received_time': '2021-04-25 12:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8280103750000001, 53.191811375]}}, {'type': 'Feature', 'properties': {'description': 'We are currently experiencing problems with the electricity supply in your area.  We are arranging to have engineers investigate the fault, and we hope to have your electricity restored by 25-APR-2021 19:07.  Please accept our sincere apologies for the inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 18:07', 'incident_id': 'INCD-1810628-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810628-i', 'postcodes_impacted': ['L143NU', 'L162LY', 'L162LZ', 'L162NB', 'L162ND', 'L162NQ', 'L163GA', 'L163GB', 'L343NU'], 'received_time': '2021-04-25 15:34'}, 'geometry': {'type': 'Point', 'coordinates': [-2.875316585919489, 53.40624522781175]}}, {'type': 'Feature', 'properties': {'description': 'We are currently experiencing problems with the electricity supply in your area.  Our engineers are now working on the fault and we hope to have your electricity restored by 25-APR-2021 16:24.  Please accept our sincere apologies for the inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 15:24', 'incident_id': 'INCD-1810616-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810616-i', 'postcodes_impacted': ['*******', 'UNKNOWN', 'WA11', 'WA11GG', 'WA11P', 'WA11PP', 'WA11PT', 'WA11QL', 'WA11QP', 'WA11QR', 'WA11QS', 'WA11RG', 'WA11RL', 'WA11RR', 'WA11RS', 'WA11RW', 'WA11RX', 'WA27UW', 'WA4', 'WA41AA', 'WA45DQ', 'WA45QD', 'WA46AA', 'WA46AD', 'WA46AF', 'WA46AG', 'WA46AH', 'WA46AJ', 'WA46AL', 'WA46AP', 'WA46AQ', 'WA46AR', 'WA46AT', 'WA46AU', 'WA46AW', 'WA46AX', 'WA46AY', 'WA46AZ', 'WA46BB', 'WA46BD', 'WA46BE', 'WA46BG', 'WA46BJ', 'WA46BN', 'WA46BP', 'WA46BS', 'WA46BT', 'WA46BU', 'WA46BW', 'WA46BX', 'WA46BY', 'WA46BZ', 'WA46DA', 'WA46DD', 'WA46DE', 'WA46DF', 'WA46DG', 'WA46DH', 'WA46DJ', 'WA46DL', 'WA46DQ', 'WA46PT', 'WA46QA', 'WA46QP', 'WA46QR', 'WA46QY', 'WA46QZ', 'WA46RA', 'WA46RB', 'WA46TZ', 'WA76BJ'], 'received_time': '2021-04-25 14:24'}, 'geometry': {'type': 'Point', 'coordinates': [-2.593872511894714, 53.37675885346285]}}, {'type': 'Feature', 'properties': {'description': 'We are currently experiencing problems with the electricity supply in your area.  Our engineers are now working on the fault and we hope to have your electricity restored by 25-APR-2021 17:22.  Please accept our sincere apologies for the inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 16:22', 'incident_id': 'INCD-506913-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506913-f', 'postcodes_impacted': ['KY26RS', 'KY26RT', 'KY26RY', 'KY26RZ', 'KY26SA', 'KY26SB'], 'received_time': '2021-04-25 14:22'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1825553416645262, 56.13225742662578]}}, {'type': 'Feature', 'properties': {'description': 'We are currently experiencing problems with the electricity supply in your area.  Our engineers are now working on the fault and we hope to have your electricity restored by 25-APR-2021 17:00.  Please accept our sincere apologies for the inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 16:00', 'incident_id': 'INCD-506835-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506835-f', 'postcodes_impacted': ['TD57LP', 'TD57SN'], 'received_time': '2021-04-25 00:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4302977708232056, 55.60674466548582]}}, {'type': 'Feature', 'properties': {'description': 'We are currently experiencing problems with the electricity supply in your area.  We are arranging to have engineers investigate the fault, and we hope to have your electricity restored by 26-APR-2021 08:30.  Please accept our sincere apologies for the inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-26 07:30', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27NT'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.788360899719553, 56.013266501493575]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 17:00', 'incident_id': 'INCD-174212-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF9 3BN': {'class': 'models.MapDataLocation', 'lat': 53.5965, 'lng': -1.31211}}, 'received_time': '2021-04-24 14:58'}, 'geometry': {'type': 'Point', 'coordinates': [-1.312145, 53.596501]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 15:30', 'incident_id': 'INCD-174288-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO42 4TL': {'class': 'models.MapDataLocation', 'lat': 53.8741, 'lng': -0.931946}, 'YO42 4TN': {'class': 'models.MapDataLocation', 'lat': 53.8728, 'lng': -0.930717}, 'YO42 4TJ': {'class': 'models.MapDataLocation', 'lat': 53.8748, 'lng': -0.929845}, 'YO42 4TZ': {'class': 'models.MapDataLocation', 'lat': 53.8738, 'lng': -0.93276}, 'YO42 4TH': {'class': 'models.MapDataLocation', 'lat': 53.8738, 'lng': -0.929839}}, 'received_time': '2021-04-25 05:58'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9310214, 53.873835199999995]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:30', 'incident_id': 'INCD-174296-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO16 7LD': {'class': 'models.MapDataLocation', 'lat': 54.0929, 'lng': -0.201673}}, 'received_time': '2021-04-25 07:59'}, 'geometry': {'type': 'Point', 'coordinates': [-0.201671, 54.092965]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:00', 'incident_id': 'INCD-174303-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4NS': {'class': 'models.MapDataLocation', 'lat': 53.7899, 'lng': -0.311395}}, 'received_time': '2021-04-25 09:13'}, 'geometry': {'type': 'Point', 'coordinates': [-0.31166, 53.790076]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 16:00', 'incident_id': 'INCD-174307-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO1 9XQ': {'class': 'models.MapDataLocation', 'lat': 53.956, 'lng': -1.07259}, 'YO1 9UD': {'class': 'models.MapDataLocation', 'lat': 53.9557, 'lng': -1.07149}, 'YO1 9XG': {'class': 'models.MapDataLocation', 'lat': 53.9561, 'lng': -1.07214}, 'YO1 9TL': {'class': 'models.MapDataLocation', 'lat': 53.9565, 'lng': -1.07366}}, 'received_time': '2021-04-25 09:39'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0724702499999998, 53.956076]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 17:30', 'incident_id': 'INCD-174314-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS4 2JY': {'class': 'models.MapDataLocation', 'lat': 53.8079, 'lng': -1.58542}, 'LS4 2EZ': {'class': 'models.MapDataLocation', 'lat': 53.8072, 'lng': -1.58712}, 'LS4 2JZ': {'class': 'models.MapDataLocation', 'lat': 53.808, 'lng': -1.58543}, 'LS4 2HQ': {'class': 'models.MapDataLocation', 'lat': 53.8067, 'lng': -1.58315}, 'LS4 2HD': {'class': 'models.MapDataLocation', 'lat': 53.8067, 'lng': -1.58411}, 'LS3 1LH': {'class': 'models.MapDataLocation', 'lat': 53.8, 'lng': -1.56711}, 'LS4 2JX': {'class': 'models.MapDataLocation', 'lat': 53.8076, 'lng': -1.58603}, 'LS4 2RE': {'class': 'models.MapDataLocation', 'lat': 53.8083, 'lng': -1.58617}, 'LS4 2RD': {'class': 'models.MapDataLocation', 'lat': 53.8088, 'lng': -1.58598}}, 'received_time': '2021-04-25 09:58'}, 'geometry': {'type': 'Point', 'coordinates': [-1.583059111111111, 53.80670477777778]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 19:00', 'incident_id': 'INCD-174319-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4QQ': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -0.329701}}, 'received_time': '2021-04-25 10:22'}, 'geometry': {'type': 'Point', 'coordinates': [-0.329701, 53.788001]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 20:30', 'incident_id': 'INCD-174324-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS7 3QS': {'class': 'models.MapDataLocation', 'lat': 53.8287, 'lng': -1.54498}}, 'received_time': '2021-04-25 10:43'}, 'geometry': {'type': 'Point', 'coordinates': [-1.544849, 53.828669]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:30', 'incident_id': 'INCD-174328-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE9 6XT': {'class': 'models.MapDataLocation', 'lat': 54.9359, 'lng': -1.58606}, 'NE9 6QT': {'class': 'models.MapDataLocation', 'lat': 54.9405, 'lng': -1.58481}, 'NE9 6QQ': {'class': 'models.MapDataLocation', 'lat': 54.9395, 'lng': -1.58386}, 'NE9 5RQ': {'class': 'models.MapDataLocation', 'lat': 54.9366, 'lng': -1.59007}, 'NE9 5RR': {'class': 'models.MapDataLocation', 'lat': 54.9377, 'lng': -1.58879}, 'NE9 5RW': {'class': 'models.MapDataLocation', 'lat': 54.9386, 'lng': -1.59011}, 'NE9 6QL': {'class': 'models.MapDataLocation', 'lat': 54.9384, 'lng': -1.58521}, 'NE9 5RX': {'class': 'models.MapDataLocation', 'lat': 54.9382, 'lng': -1.58669}, 'NE9 5RY': {'class': 'models.MapDataLocation', 'lat': 54.9379, 'lng': -1.58615}, 'NE9 5RS': {'class': 'models.MapDataLocation', 'lat': 54.9368, 'lng': -1.58811}, 'NE9 6QP': {'class': 'models.MapDataLocation', 'lat': 54.94, 'lng': -1.58361}, 'NE9 5RT': {'class': 'models.MapDataLocation', 'lat': 54.937, 'lng': -1.58758}, 'NE9 5RU': {'class': 'models.MapDataLocation', 'lat': 54.9392, 'lng': -1.58891}, 'NE9 6QN': {'class': 'models.MapDataLocation', 'lat': 54.9396, 'lng': -1.58632}, 'NE9 5SD': {'class': 'models.MapDataLocation', 'lat': 54.9401, 'lng': -1.58744}, 'NE9 5RB': {'class': 'models.MapDataLocation', 'lat': 54.9387, 'lng': -1.58951}, 'NE9 5SE': {'class': 'models.MapDataLocation', 'lat': 54.9397, 'lng': -1.58805}, 'NE9 5RG': {'class': 'models.MapDataLocation', 'lat': 54.9393, 'lng': -1.58735}, 'NE9 5RJ': {'class': 'models.MapDataLocation', 'lat': 54.9372, 'lng': -1.59151}, 'NE9 5RD': {'class': 'models.MapDataLocation', 'lat': 54.9385, 'lng': -1.5878}, 'NE9 5SA': {'class': 'models.MapDataLocation', 'lat': 54.9372, 'lng': -1.58613}}, 'received_time': '2021-04-25 11:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5873232380952385, 54.938419857142854]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174336-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'OL14 6AQ': {'class': 'models.MapDataLocation', 'lat': 53.7142, 'lng': -2.08195}}, 'received_time': '2021-04-25 12:37'}, 'geometry': {'type': 'Point', 'coordinates': [-2.081948, 53.714243]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174337-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS28 7SG': {'class': 'models.MapDataLocation', 'lat': 53.7935, 'lng': -1.67386}, 'LS28 8BX': {'class': 'models.MapDataLocation', 'lat': 53.792, 'lng': -1.67715}, 'LS28 8HL': {'class': 'models.MapDataLocation', 'lat': 53.7931, 'lng': -1.67871}, 'LS28 8BY': {'class': 'models.MapDataLocation', 'lat': 53.7923, 'lng': -1.67695}}, 'received_time': '2021-04-25 12:51'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6766432500000001, 53.792745499999995]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 16:45', 'incident_id': 'INCD-174341-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 1JY': {'class': 'models.MapDataLocation', 'lat': 54.5201, 'lng': -1.4885}, 'DL2 1FE': {'class': 'models.MapDataLocation', 'lat': 54.5229, 'lng': -1.476}, 'DL2 1FD': {'class': 'models.MapDataLocation', 'lat': 54.5236, 'lng': -1.47616}}, 'received_time': '2021-04-25 13:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4802316666666666, 54.52218733333333]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174344-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN20 9DW': {'class': 'models.MapDataLocation', 'lat': 53.5275, 'lng': -0.536985}}, 'received_time': '2021-04-25 14:12'}, 'geometry': {'type': 'Point', 'coordinates': [-0.536953, 53.527492]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174345-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU5 2EX': {'class': 'models.MapDataLocation', 'lat': 53.7638, 'lng': -0.36199}}, 'received_time': '2021-04-25 14:48'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36199, 53.763825]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:15', 'incident_id': 'INCD-174346-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS16 6SZ': {'class': 'models.MapDataLocation', 'lat': 53.8489, 'lng': -1.61064}}, 'received_time': '2021-04-25 15:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.610656, 53.848829]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:15', 'incident_id': 'INCD-174347-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG2 0DQ': {'class': 'models.MapDataLocation', 'lat': 53.9821, 'lng': -1.55505}}, 'received_time': '2021-04-25 15:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.555039, 53.982024]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-25 18:15', 'incident_id': 'INCD-174348-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S9 5GG': {'class': 'models.MapDataLocation', 'lat': 53.3916, 'lng': -1.41053}}, 'received_time': '2021-04-25 15:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.410576, 53.391602]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-25 12:00', 'incident_id': 'PPC039332', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 1TJ': {'class': 'models.MapDataLocation', 'lat': 53.7232, 'lng': -1.85964}, 'HX1 1RL': {'class': 'models.MapDataLocation', 'lat': 53.723, 'lng': -1.85978}, 'HX1 1RN': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TN': {'class': 'models.MapDataLocation', 'lat': 53.7235, 'lng': -1.8599}, 'HX1 1UU': {'class': 'models.MapDataLocation', 'lat': 53.7246, 'lng': -1.8599}, 'HX1 1RW': {'class': 'models.MapDataLocation', 'lat': 53.7233, 'lng': -1.85952}, 'HX1 1TH': {'class': 'models.MapDataLocation', 'lat': 53.7231, 'lng': -1.86042}}, 'received_time': '2021-04-25 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8597867142857143, 53.723433428571425]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-25 17:00', 'incident_id': '40811428', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY7 7AW', 'FY7 7AZ', 'FY7 7BL'], 'received_time': '2021-04-25 07:03'}, 'geometry': {'type': 'Point', 'coordinates': [-3.024608, 53.92119233333333]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});