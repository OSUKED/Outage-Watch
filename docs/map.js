document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-54698-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54698-V', 'postcodes_impacted': ['ME130HB', 'ME130HD', 'ME130PW'], 'received_time': '2021-04-18T07:22:14'}, 'geometry': {'type': 'Point', 'coordinates': [0.8576601874661794, 51.27507991603435]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-248301-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248301-G', 'postcodes_impacted': ['BN246NT', 'BN246NU', 'BN246RA', 'BN246RB', 'BN246RH'], 'received_time': '2021-04-18T07:27:50'}, 'geometry': {'type': 'Point', 'coordinates': [0.3668624214818899, 50.81861578146487]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T13:00:00', 'incident_id': 'INCD-231623-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231623-Z', 'postcodes_impacted': ['HP199PD', 'HP199PJ', 'HP199PL', 'HP190WJ', 'HP193PL', 'HP199LR', 'HP199PB', 'HP199PE', 'HP199QL', 'HP199XP', 'HP199XR', 'HP199XS', 'HP202AG', 'HP202AJ', 'HP202BJ'], 'received_time': '2021-04-18T08:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8156206998826071, 51.82777211289602]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T16:30:00', 'incident_id': 'INCD-229979-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229979-Z', 'postcodes_impacted': ['MK410HT', 'MK410JW', 'MK410LF', 'MK410QQ'], 'received_time': '2021-04-18T08:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4130208762534288, 52.14851199913749]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-227426-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227426-Z', 'postcodes_impacted': ['NR128AH', 'NR128AN', 'NR128ES', 'NR128ET', 'NR128EU', 'NR128EY'], 'received_time': '2021-04-18T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3938054734244327, 52.74779974912337]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-227958-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227958-Z', 'postcodes_impacted': ['CB51SA', 'CB61SA', 'CB61SB', 'CB61SE', 'CB61SG', 'CB64QW', 'CB74QW'], 'received_time': '2021-04-18T08:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.2764796588146815, 52.428463015294675]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-218127-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-218127-Z', 'postcodes_impacted': ['CB40FB', 'CB40GN', 'CB40WE', 'CB44BH', 'CB44WE'], 'received_time': '2021-04-18T08:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.1483293076776418, 52.23539636016507]}}, {'type': 'Feature', 'properties': {'description': 'We&#39;re carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We&#39;re doing this work as it&#39;s essential to provide reliable electricity supplies to your area. We&#39;re sorry for any inconvenience caused and thank you for your patience.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-228076-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228076-Z', 'postcodes_impacted': ['IP145NR', 'IP146BH', 'IP146JT', 'IP146JZ', 'IP146LA', 'IP146LB', 'IP146NF', 'IP146QP', 'IP146QR', 'IP146QS', 'IP146QU', 'IP146QW', 'IP146RW', 'IP146SR', 'IP146ST'], 'received_time': '2021-04-18T09:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.182571413009092, 52.2258367299417]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198682\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 15:00:00', 'incident_id': '198682', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PA78 6TB'], 'received_time': '2021-04-18 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-6.612752, 56.60072]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8384\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 11:10:00', 'incident_id': 'HB8384', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RH14 0NJ'], 'received_time': '2021-04-18 07:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.557638, 51.034976]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199267\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 13:30:00', 'incident_id': '199267', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX5 1HX'], 'received_time': '2021-04-18 07:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.305091, 51.830266]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'199182\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 15:00:00', 'incident_id': '199182', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG24', 'RG27', 'RG27 8NR', 'RG27 8QP', 'RG27 8QQ', 'RG27 8SF'], 'received_time': '2021-04-18 07:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9077295000000001, 51.3090095]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8361\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 11:00:00', 'incident_id': 'HB8361', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['IV2 4EU', 'IV2 4QL', 'IV2 6BH'], 'received_time': '2021-04-18 06:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.218134333333333, 57.452633]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8382\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 10:30:00', 'incident_id': 'HB8382', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PA42', 'PA43 7JF', 'PA43 7JG'], 'received_time': '2021-04-18 06:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-6.3004645, 55.739138499999996]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8345\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 10:30:00', 'incident_id': 'HB8345', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RH14 0NJ'], 'received_time': '2021-04-18 05:51:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.557638, 51.034976]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8343\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 10:00:00', 'incident_id': 'HB8343', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['DD1 4DD', 'DD1 4JG', 'DD1 4JQ'], 'received_time': '2021-04-18 04:53:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.989373666666667, 56.456439666666675]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 10:30:00', 'incident_id': 'INCD-75-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-75-q', 'postcodes_impacted': ['TR2 5NN', 'TR2 5NP', 'TR2 5NW', 'TR2 4BA'], 'received_time': '2021-04-18 06:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.96095675, 50.237996]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 10:00:00', 'incident_id': 'INCD-77-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-77-q', 'postcodes_impacted': ['PL7 5FG'], 'received_time': '2021-04-18 07:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.040271, 50.428469]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 09:00:00', 'incident_id': 'INCD-74-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-74-q', 'postcodes_impacted': ['BA1 5DU', 'BA1 5DY', 'BA1 5LZ', 'BA1 2ED', 'BA1 2QZ', 'BA1 5DX'], 'received_time': '2021-04-18 05:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3611495000000002, 51.38566683333334]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 10:30:00', 'incident_id': 'INCD-2124-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2124-g', 'postcodes_impacted': ['SA4 3EZ', 'SA4 3EY', 'SA4 3QP'], 'received_time': '2021-04-18 07:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.048932, 51.64994566666667]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 11:30:00', 'incident_id': 'INCD-358031-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358031-G', 'postcodes_impacted': ['DY9 9ST', 'DY9 9SU'], 'received_time': '2021-04-18 00:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1176125, 52.392997]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 10:30:00', 'incident_id': 'INCD-12177-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12177-A', 'postcodes_impacted': ['WS9 9QA'], 'received_time': '2021-04-18 03:56:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92332, 52.63103]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 13:00:00', 'incident_id': 'INCD-358034-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358034-G', 'postcodes_impacted': ['GL20 5SS', 'GL20 5SY', 'GL20 5TZ'], 'received_time': '2021-04-18 06:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1614050000000002, 51.984636333333334]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 11:00:00', 'incident_id': 'INCD-44321-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44321-D', 'postcodes_impacted': ['NG32 2LT', 'NG32 2LW', 'NG32 2LU', 'NG32 2LY', 'NG32 3QD'], 'received_time': '2021-04-18 05:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6000378, 52.9501312]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 09:00:00', 'incident_id': 'INCD-44318-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44318-D', 'postcodes_impacted': ['S81 0LX', 'S81 0LL', 'S81 0LN', 'S81 0LY'], 'received_time': '2021-04-18 06:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.118843, 53.322238750000004]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KA30 postcode area of Largs. We had no advance warning of this and only became aware of it at 08.34am. Our engineers are on their way to the local area to investigate the fault and the team will work to get your power back on as quickly and as safely as possible by 12:00pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 09:09am on Sunday, 18 April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 10:57', 'incident_id': 'INCD-505353-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-505353-f', 'postcodes_impacted': ['KA309AT', 'KA309DD', 'KA309HY', 'KA309JD', 'KA309JG', 'KA309JN', 'KA309JP'], 'received_time': '2021-04-18 08:34'}, 'geometry': {'type': 'Point', 'coordinates': [-4.859878825416279, 55.79818762679687]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 08:19', 'incident_id': 'INCD-373222-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-373222-r', 'postcodes_impacted': ['SY45TG', 'SY45TH'], 'received_time': '2021-04-18 07:48'}, 'geometry': {'type': 'Point', 'coordinates': [-2.835428115552326, 52.832180936659235]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the CH1 and CH64 postcode areas of Chester, Neston and Puddington, affecting properties in Shotwick Village, Mudhouse lane, Puddington Lane and surrounding areas. Repairs are taking longer than expected because of further network investigations required to locate the cause of the fault and our team are now working to get your power back on as quickly and as safely as possible by 11:30AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:08AM on 18th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 10:30', 'incident_id': 'INCD-564793-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564793-s', 'postcodes_impacted': ['CH16HU', 'CH16HX', 'CH16HZ', 'CH16JB', 'CH645RZ', 'CH645SE', 'CH645SF', 'CH645SG', 'CH645SN', 'CH645SP', 'CH645SQ', 'CH645SR', 'CH645SS', 'CH645ST', 'CH645SU', 'CH645SW', 'CH645SX', 'CH645TR', 'CH645TS', 'CH645TT', 'CH645TW', 'CH646SA'], 'received_time': '2021-04-18 07:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0107057406701343, 53.254985524022906]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172372-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD16 3AZ': {'class': 'models.MapDataLocation', 'lat': 53.869, 'lng': -1.81125}}, 'received_time': '2021-04-17 19:28'}, 'geometry': {'type': 'Point', 'coordinates': [-1.811254, 53.869031]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172392-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF14 9DL': {'class': 'models.MapDataLocation', 'lat': 53.6795, 'lng': -1.71197}}, 'received_time': '2021-04-18 01:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.712198, 53.67976]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172393-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S2 1JW': {'class': 'models.MapDataLocation', 'lat': 53.3651, 'lng': -1.42538}}, 'received_time': '2021-04-18 01:49'}, 'geometry': {'type': 'Point', 'coordinates': [-1.425446, 53.364924]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:00', 'incident_id': 'INCD-172404-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD4 9HD': {'class': 'models.MapDataLocation', 'lat': 53.7807, 'lng': -1.71114}, 'BD4 9HH': {'class': 'models.MapDataLocation', 'lat': 53.7818, 'lng': -1.71079}, 'BD4 9HG': {'class': 'models.MapDataLocation', 'lat': 53.7821, 'lng': -1.71133}, 'BD4 9HE': {'class': 'models.MapDataLocation', 'lat': 53.7808, 'lng': -1.71037}, 'BD4 9HJ': {'class': 'models.MapDataLocation', 'lat': 53.7812, 'lng': -1.70933}}, 'received_time': '2021-04-18 04:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7105913999999998, 53.7813168]}}, {'type': 'Feature', 'properties': {'description': 'S/L Knockdown In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172414-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF8 1EF': {'class': 'models.MapDataLocation', 'lat': 53.6883, 'lng': -1.30879}}, 'received_time': '2021-04-18 07:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.308787, 53.688343]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 10:30', 'incident_id': 'INCD-172415-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S65 3NJ': {'class': 'models.MapDataLocation', 'lat': 53.4322, 'lng': -1.31226}}, 'received_time': '2021-04-18 07:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.312255, 53.432227]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 10:45', 'incident_id': 'INCD-172417-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD7 5HJ': {'class': 'models.MapDataLocation', 'lat': 53.6204, 'lng': -1.88051}}, 'received_time': '2021-04-18 07:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.88053, 53.620412]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172418-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD7 1RL': {'class': 'models.MapDataLocation', 'lat': 53.7872, 'lng': -1.76874}}, 'received_time': '2021-04-18 07:38'}, 'geometry': {'type': 'Point', 'coordinates': [-1.768743, 53.787238]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 10:45', 'incident_id': 'INCD-172419-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9TE': {'class': 'models.MapDataLocation', 'lat': 54.0495, 'lng': -0.666675}}, 'received_time': '2021-04-18 07:13'}, 'geometry': {'type': 'Point', 'coordinates': [-0.667427, 54.050191]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:00', 'incident_id': 'INCD-172420-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL16 7AQ': {'class': 'models.MapDataLocation', 'lat': 54.6876, 'lng': -1.61845}}, 'received_time': '2021-04-18 07:48'}, 'geometry': {'type': 'Point', 'coordinates': [-1.618451, 54.687621]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:00', 'incident_id': 'INCD-172422-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 6QE': {'class': 'models.MapDataLocation', 'lat': 54.1127, 'lng': -0.95016}}, 'received_time': '2021-04-18 07:52'}, 'geometry': {'type': 'Point', 'coordinates': [-0.950563, 54.112513]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:00', 'incident_id': 'INCD-172423-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF4 3NR': {'class': 'models.MapDataLocation', 'lat': 53.6334, 'lng': -1.52705}}, 'received_time': '2021-04-18 07:52'}, 'geometry': {'type': 'Point', 'coordinates': [-1.527045, 53.633433]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:00', 'incident_id': 'INCD-172424-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN31 1JE': {'class': 'models.MapDataLocation', 'lat': 53.5643, 'lng': -0.085946}}, 'received_time': '2021-04-18 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.086091, 53.564464]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:15', 'incident_id': 'INCD-172426-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH9 9AS': {'class': 'models.MapDataLocation', 'lat': 54.8688, 'lng': -1.76709}}, 'received_time': '2021-04-18 08:06'}, 'geometry': {'type': 'Point', 'coordinates': [-1.767089, 54.868789]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 11:30', 'incident_id': 'INCD-172428-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR4 7DT': {'class': 'models.MapDataLocation', 'lat': 54.9025, 'lng': -1.40245}, 'SR4 7DU': {'class': 'models.MapDataLocation', 'lat': 54.9026, 'lng': -1.40199}, 'SR4 7DP': {'class': 'models.MapDataLocation', 'lat': 54.9027, 'lng': -1.40402}, 'SR4 7DR': {'class': 'models.MapDataLocation', 'lat': 54.9024, 'lng': -1.40317}, 'SR4 7DS': {'class': 'models.MapDataLocation', 'lat': 54.903, 'lng': -1.40271}, 'SR4 7DJ': {'class': 'models.MapDataLocation', 'lat': 54.9033, 'lng': -1.40312}, 'SR4 7DX': {'class': 'models.MapDataLocation', 'lat': 54.9034, 'lng': -1.40267}}, 'received_time': '2021-04-18 07:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4028694285714285, 54.90284628571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'PPC039363', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN41 8DW': {'class': 'models.MapDataLocation', 'lat': 53.6083, 'lng': -0.172296}, 'DN41 8DL': {'class': 'models.MapDataLocation', 'lat': 53.6088, 'lng': -0.171807}, 'DN41 8FD': {'class': 'models.MapDataLocation', 'lat': 53.6065, 'lng': -0.180157}, 'DN4 5NU': {'class': 'models.MapDataLocation', 'lat': 53.5082, 'lng': -1.12161}, 'DN41 8TH': {'class': 'models.MapDataLocation', 'lat': 53.6052, 'lng': -0.181212}}, 'received_time': '2021-04-18 17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36565339999999996, 53.587383]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:30', 'incident_id': 'PPC039606', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.826674, 53.717724]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Scheduled work has been delayed and is due to start', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039748', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HE': {'class': 'models.MapDataLocation', 'lat': 54.9894, 'lng': -2.39113}, 'NE47 7AW': {'class': 'models.MapDataLocation', 'lat': 55.0007, 'lng': -2.38799}, 'NE47 7JW': {'class': 'models.MapDataLocation', 'lat': 54.9907, 'lng': -2.3735}, 'NE47 7AL': {'class': 'models.MapDataLocation', 'lat': 54.9974, 'lng': -2.37973}, 'NE47 7AN': {'class': 'models.MapDataLocation', 'lat': 54.9955, 'lng': -2.39183}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3842884, 54.99502739999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039968', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HD': {'class': 'models.MapDataLocation', 'lat': 54.9868, 'lng': -2.37724}}, 'received_time': '2021-04-18 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.377239, 54.986748]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the overhead cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 11:34', 'incident_id': '60508678', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA11 0UU'], 'received_time': '2021-04-18 08:34'}, 'geometry': {'type': 'Point', 'coordinates': [-2.881132, 54.688908]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 14:11', 'incident_id': '60508670', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA11 6BE', 'LA11 6BG', 'LA11 6DB', 'LA11 6SE'], 'received_time': '2021-04-18 08:04'}, 'geometry': {'type': 'Point', 'coordinates': [-2.89811275, 54.209484]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 15:02', 'incident_id': '60508673', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA6 2AB', 'LA6 2AY', 'LA6 2BE', 'LA6 2DQ', 'LA6 2HJ', 'LA6 2HL', 'LA6 2HN', 'LA6 2HW', 'LA6 2JS', 'LA6 2JU'], 'received_time': '2021-04-18 07:19'}, 'geometry': {'type': 'Point', 'coordinates': [-2.6011809, 54.2022058]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 14:16', 'incident_id': '60508667', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA11 7AA', 'CA11 7AB', 'CA11 7AG', 'CA11 7AJ', 'CA11 7AY', 'CA11 7BA', 'CA11 7BE', 'CA11 7BH', 'CA11 7BJ', 'CA11 7BL', 'CA11 7DE', 'CA11 7DG', 'CA11 7DJ', 'CA11 7DL', 'CA11 7DP', 'CA11 7DQ', 'CA11 7DR', 'CA11 7DW', 'CA11 7EJ', 'CA11 7NX', 'CA11 7XP', 'CA11 7XR', 'CA11 8AF', 'CA11 8ET', 'CA11 8HL', 'CA11 8HN', 'CA11 8HP', 'CA11 8HR', 'CA11 8HS', 'CA11 8HT', 'CA11 8JJ', 'CA11 8JL'], 'received_time': '2021-04-18 06:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.7508389374999997, 54.662525312499994]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 14:09', 'incident_id': '60508633', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA3 2BP', 'LA3 2BU', 'LA3 2DF', 'LA3 2DN', 'LA3 2DQ', 'LA3 2DR', 'LA3 2DS', 'LA3 2DY', 'LA3 2JH'], 'received_time': '2021-04-17 16:41'}, 'geometry': {'type': 'Point', 'coordinates': [-2.890340777777778, 54.048605888888886]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});