document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-172447-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-172447-Z', 'postcodes_impacted': ['HA80AX', 'HA80AG', 'HA80AJ', 'HA80AP', 'HA80AS', 'HA80AW', 'HA80BH'], 'received_time': '2020-07-29T12:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.26921589842108323, 51.60308478879933]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AH', 'NR129AF', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG', 'NR129EG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.77297144903066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44481-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44481-C', 'postcodes_impacted': ['RM14TB', 'RM14TL', 'RM14TP', 'RM53LP'], 'received_time': '2021-04-24T19:55:20'}, 'geometry': {'type': 'Point', 'coordinates': [0.17338790469205098, 51.59487531110018]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T22:00:00', 'incident_id': 'INCD-260669-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260669-J', 'postcodes_impacted': ['SE172HG', 'SE172DL', 'SE172DN', 'SE172DQ', 'SE172HD', 'SE172HE', 'SE172HF', 'SE172TG'], 'received_time': '2021-04-24T13:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.09346899560969532, 51.4879875092152]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-25T00:00:00', 'incident_id': 'INCD-232901-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232901-Z', 'postcodes_impacted': ['PE25DZ', 'PE25DY', 'PE25ER'], 'received_time': '2021-04-24T17:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2924116276852488, 52.552842413359066]}}, {'type': 'Feature', 'properties': {'description': 'We have identified an item of electrical equipment called a Cut-Out, which is the link between our electricity network and a propertys internal wires, that needs replacing. This propertys Cut-Out needs replacing due to potential safety concerns. When we identify properties with this issue we often identify further properties requiring the same works to be completed. Therefore we would like to access your property during the power cut to inspect the equipment within your property and to replace if necessary. Once the inspections and replacements have been completed this will ensure that all properties are safely connected to our electricity network. This is why it is important to complete this work during the Coronavirus pandemic. This work is taking place on Buxton Crescent and Carlton Crescent. The government has given exemptions to certain industries and activities, this outage falls into this category', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T15:00:00', 'incident_id': 'INCD-53288-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53288-V', 'postcodes_impacted': ['SM39TP', 'SM39TR', 'SM39TS'], 'received_time': '2021-04-23T12:02:51'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21764189555768473, 51.36957062305451]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:00:00', 'incident_id': 'INCD-230387-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230387-Z', 'postcodes_impacted': ['CB97HX', 'CB97HY', 'CB97HZ', 'CB97JQ', 'CB97LA', 'CB97LB', 'CB97SG'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44368625849715565, 52.12786448175765]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-230808-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230808-Z', 'postcodes_impacted': ['NR280RU'], 'received_time': '2021-04-24T09:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4151257416754273, 52.85681836681537]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-05-24T12:30:00', 'incident_id': 'INCD-55021-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55021-V', 'postcodes_impacted': ['CT45PY', 'CT45PZ', 'CT45QA', 'CT45QB', 'CT45QD', 'CT45QE', 'CT45QH', 'CT45SR', 'CT45SS', 'CT46BY', 'RH130TR', 'TN255JU', 'TN255JX', 'TW94FA'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8377406092783846, 51.1993607414425]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-227457-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227457-Z', 'postcodes_impacted': ['CO160DU', 'CO160LA', 'CO160LB', 'CO160LD'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1548508334444136, 51.86309190703278]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T16:30:00', 'incident_id': 'INCD-231343-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231343-Z', 'postcodes_impacted': ['SG175NQ'], 'received_time': '2021-04-24T09:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3251931680253517, 52.02016452902743]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1645\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 22:30:00', 'incident_id': 'HC1645', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX18 2AT'], 'received_time': '2021-04-24 19:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.564436, 51.747742]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1660\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 22:30:00', 'incident_id': 'HC1660', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['DD1 4AG', 'DD1 4AU', 'DD1 4AY', 'DD1 4BT'], 'received_time': '2021-04-24 19:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9697145000000003, 56.459137750000004]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1651\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 22:00:00', 'incident_id': 'HC1651', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['AB43 6JH', 'AB43 6LY', 'AB43 6NA', 'AB43 6NB', 'AB43 7DG', 'AB43 7DL', 'AB43 7DN', 'AB43 7DP', 'AB43 7DQ', 'AB43 7DX', 'AB43 7EA', 'AB43 7GF', 'AB43 7LN', 'AB43 7LP', 'AB43 7LQ', 'AB43 7LR', 'AB43 7LS'], 'received_time': '2021-04-24 18:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.165333411764706, 57.64897223529412]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1627\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-25 01:00:00', 'incident_id': 'HC1627', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL4 3QP', 'SL4 3QU', 'SL4 3SD', 'SL4 3TD', 'SL4 3TW'], 'received_time': '2021-04-24 16:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6295527999999999, 51.4772692]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1509\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 20:00:00', 'incident_id': 'HC1509', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SP5 2PU', 'SP5 2PX'], 'received_time': '2021-04-24 14:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6884800000000002, 50.956153]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC1523\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 20:30:00', 'incident_id': 'HC1523', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP13 6SR', 'HP13 6ST', 'HP13 6TB', 'HP13 6TF', 'HP13 6XA', 'HP13 6XB'], 'received_time': '2021-04-24 09:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7497815000000001, 51.634449]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 23:00:00', 'incident_id': 'INCD-376-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-376-q', 'postcodes_impacted': ['PL6 7TB', 'PL6 7TA', 'PL6 7TD'], 'received_time': '2021-04-24 13:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.096798333333333, 50.43480733333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 20:00:00', 'incident_id': 'INCD-364-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-364-q', 'postcodes_impacted': ['BS22 6LH', 'BS22 6LJ', 'BS22 6AY'], 'received_time': '2021-04-24 10:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.918541, 51.35909]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 20:00:00', 'incident_id': 'INCD-390-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-390-q', 'postcodes_impacted': ['TR14 9NL', 'TR11 2NQ'], 'received_time': '2021-04-24 16:48:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.182256, 50.155884]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 20:30:00', 'incident_id': 'INCD-399-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-399-q', 'postcodes_impacted': ['TR19 7QX', 'TR19 7AN', 'TR19 7QY', 'TR19 7RD'], 'received_time': '2021-04-24 18:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.675884999999999, 50.119314]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-153262-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153262-H', 'postcodes_impacted': ['NN12 7LS'], 'received_time': '2021-04-24 17:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.929461, 52.111615]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-25 02:00:00', 'incident_id': 'INCD-44783-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44783-D', 'postcodes_impacted': ['DE65 6NR'], 'received_time': '2021-04-24 16:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.593796, 52.879901]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-44787-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44787-D', 'postcodes_impacted': ['NG7 5GR', 'NG7 6GJ', 'NG7 7NR', 'NG7 7NQ', 'NG7 7NP', 'NG7 7FR', 'NG7 7FQ', 'NG7 7HS', 'NG7 6AR', 'NG7 7JN'], 'received_time': '2021-04-24 17:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1724561, 52.9719957]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 22:30:00', 'incident_id': 'INCD-44788-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44788-D', 'postcodes_impacted': ['NN16 9SY', 'NN16 0QB', 'NN16 9NW', 'NN16 0PZ', 'NN16 9UE', 'NN16 9NP', 'NN16 9TG', 'NN16 9UF', 'NN16 9TE'], 'received_time': '2021-04-24 19:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7045022222222223, 52.410260888888885]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the PA5 postcode area of Johnstone, affecting properties in Cedar Avenue and surrounding streets. We had no advance warning of this and only became aware of it at 7.56pm. We are aware of the previous power cuts affecting your area and we apologise for this. Our engineers are on their way to the Willow Drive substation to investigate a suspected blown fuse. Our team will work to get your power back on as quickly and as safely as possible by 11pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 8.21pm on Saturday 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 21:53', 'incident_id': 'INCD-567055-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567055-s', 'postcodes_impacted': ['PA50BH', 'PA50BL', 'PA50BP', 'PA50BQ', 'PA50BW', 'PA50BY', 'PA50BZ', 'PA50DA', 'PA50DB', 'PA50DD', 'PA50DE', 'PA50DF', 'PA50DG', 'PA50DH', 'PA50DQ', 'PA50EB', 'PA50ED', 'PA59PT', 'PA59PW', 'PA59TH', 'PA59TJ', 'PA59TL', 'PA59TQ'], 'received_time': '2021-04-24 19:56'}, 'geometry': {'type': 'Point', 'coordinates': [-4.5049738273160616, 55.82708674926665]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the L31 and L32 postcode areas of Liverpool, affecting properties in Woodland Road, Station Road and surrounding areas. We had no advance warning of this and only became aware of it at  6:07PM. Our engineers have arrived on site and confirmed the power cut has been caused by a fault on the electrical cable network. Our team will work to get your power back on as quickly and as safely as possible. We expect the power to be restored by 9:15PM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 7:04PM on 24th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 20:15', 'incident_id': 'INCD-375184-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-375184-r', 'postcodes_impacted': ['*******', 'G328TS', 'L110JA', 'L128QX', 'L189YE', 'L31', 'L311AE', 'L311AF', 'L311AG', 'L311AH', 'L311AJ', 'L311AN', 'L311AP', 'L311AQ', 'L311AR', 'L311AX', 'L311BG', 'L311BH', 'L311BJ', 'L311BL', 'L311BN', 'L311BP', 'L311BQ', 'L311BR', 'L311BS', 'L311BT', 'L311BU', 'L311BW', 'L311BX', 'L311BY', 'L311BZ', 'L311DA', 'L311DB', 'L311DD', 'L311DE', 'L311DG', 'L311DH', 'L311DJ', 'L311DL', 'L311DN', 'L311DP', 'L311DQ', 'L311DR', 'L311DS', 'L311DT', 'L311DU', 'L311DW', 'L311DY', 'L311DZ', 'L311EA', 'L311EB', 'L311ED', 'L311EE', 'L311EF', 'L311EG', 'L311EH', 'L311EJ', 'L311EL', 'L311EN', 'L311EP', 'L311EQ', 'L311ET', 'L311EU', 'L311EX', 'L311EZ', 'L311FB', 'L311FD', 'L311FE', 'L311GA', 'L311GB', 'L311HA', 'L311HB', 'L311HD', 'L311HZ', 'L311JF', 'L311JN', 'L311JP', 'L311JQ', 'L311JR', 'L311JS', 'L311JU', 'L311JW', 'L311JX', 'L311JY', 'L311JZ', 'L311LA', 'L311LB', 'L311LD', 'L311LE', 'L311LF', 'L311LJ', 'L311LL', 'L311LR', 'L311VV', 'L311XX', 'L313HR', 'L316BJ', 'L316ED', 'L32', 'L320RB', 'L320RD', 'L320RE', 'L320RF', 'L320RG', 'L320RH', 'L320RJ', 'L320RL', 'L320RN', 'L320RP', 'L320RQ', 'L320RR', 'L320RS', 'L320RT', 'L320RU', 'L320RW', 'L320RX', 'L320RY', 'L320RZ', 'L320SA', 'L320SB', 'L320SD', 'L320SE', 'L320SF', 'L320SG', 'L320SH', 'L320SJ', 'L320SL', 'L320SN', 'L320SP', 'L320SQ', 'L320SR', 'L320SS', 'L320ST', 'L320SU', 'L320SW', 'L320SX', 'L320SY', 'L320SZ', 'L320TA', 'L320TB', 'L320TD', 'L320TE', 'L320TF', 'L320TH', 'L320TJ', 'L320TL', 'L320TN', 'L320TP', 'L320TR', 'L320TS', 'L320TT', 'L320TU', 'L320TW', 'L320TZ', 'L320UH', 'L320US', 'L320UX', 'L320UZ', 'L320WA', 'L320XA', 'L320XB', 'L320XQ', 'L322AD', 'L322AE', 'L322AF', 'L322AG', 'L322AJ', 'L322AL', 'L322AN', 'L322AP', 'L322AQ', 'L322AR', 'L322AS', 'L322AU', 'L322AW', 'L322AX', 'L322AZ', 'L322BA', 'L322BB', 'L322BD', 'L322BE', 'L322BG', 'L322BH', 'L322BJ', 'L322BL', 'L322BN', 'L322BP', 'L322BQ', 'L322BR', 'L322BS', 'L322BT', 'L322BU', 'L322BW', 'L322BY', 'L322BZ', 'L322DD', 'L322DE', 'L322DF', 'L322DG', 'L322DH', 'L322DJ', 'L322DL', 'L322DN', 'L322DP', 'L322DQ', 'L324RY', 'L324RZ', 'L324SF', 'L324SG', 'L324SH', 'L324SJ', 'L324SL', 'L324SN', 'L324SP', 'L324SQ', 'L324SR', 'L324SS', 'L324ST', 'L324SU', 'L324SW', 'L324SX', 'L324SY', 'L324SZ', 'L324TA', 'L324TB', 'L324TD', 'L324TE', 'L324TF', 'L324TG', 'L324TH', 'L324TQ', 'L324TU', 'L324TX', 'L324TY', 'L324TZ', 'L324UA', 'L324UB', 'L324UD', 'L324UE', 'L324UF', 'L324UG', 'L324UH', 'L324UJ', 'L324UL', 'L324UN', 'L324UQ', 'L324UR', 'L324US', 'L324UT', 'L324UU', 'L324UW', 'L324UX', 'L324UY', 'L324WA', 'L324WB', 'L324XD', 'L325SZ', 'L325TA', 'L325TE', 'L327PW', 'L32ORE', 'L367XP', 'L46XR', 'LL182QA'], 'received_time': '2021-04-24 18:13'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9140357985976446, 53.4936101307116]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 02:00', 'incident_id': 'INCD-499193-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-499193-k', 'postcodes_impacted': ['EH87RL', 'EH87RP', 'EH87RR'], 'received_time': '2021-04-24 17:11'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1343988830338585, 55.94829521543477]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the FK4 postcode area of Stirling. We had no advance warning of this and only became aware of it at 5:54pm. Our team have inspected the Bog Road substation and have established an underground cable fault. Repairs are taking longer than expected because of the complexity of the work and our team are now working to get your power back on as quickly and as safely as possible by midnight. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 7:28pm on Saturday 24th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 22:59', 'incident_id': 'INCD-506769-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506769-f', 'postcodes_impacted': ['FK41AA', 'FK41JB', 'FK41JD', 'FK41JJ', 'FK41TJ', 'FK41UB', 'FK41UE', 'FK41UF'], 'received_time': '2021-04-24 16:54'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9462064173661657, 55.992153578156234]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-1810454-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1810454-i', 'postcodes_impacted': ['SY186DQ', 'SY186FA', 'SY186LB', 'SY186LD'], 'received_time': '2021-04-24 12:01'}, 'geometry': {'type': 'Point', 'coordinates': [-3.5333294559455184, 52.445667658322535]}}, {'type': 'Feature', 'properties': {'description': 'This is a message for customers in the KA19 postcode area of Maybole. It is necessary for our engineers to carry out an emergency shutdown at 11am to conduct repairs to a damaged underground cable and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible by 10pm. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:27am on the 24th of April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 21:00', 'incident_id': 'INCD-506715-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506715-f', 'postcodes_impacted': ['KA197JJ', 'KA198EF'], 'received_time': '2021-04-24 09:42'}, 'geometry': {'type': 'Point', 'coordinates': [-4.654436363124507, 55.37689273462228]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-25 07:00', 'incident_id': 'INCD-506577-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506577-f', 'postcodes_impacted': ['FK27AA', 'FK27NS', 'FK27NT', 'FK27NU', 'FK27NX', 'FK27NZ', 'FK27PA', 'FK27RP', 'FK27RR', 'FK27RS', 'FK27RZ'], 'received_time': '2021-04-23 14:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7871457775190596, 56.012777524454165]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 19:15', 'incident_id': 'INCD-174121-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD18 1BP': {'class': 'models.MapDataLocation', 'lat': 53.8346, 'lng': -1.76781}, 'BD17 7BW': {'class': 'models.MapDataLocation', 'lat': 53.8345, 'lng': -1.77458}, 'BD17 7BP': {'class': 'models.MapDataLocation', 'lat': 53.8347, 'lng': -1.77451}, 'BD17 7AD': {'class': 'models.MapDataLocation', 'lat': 53.837, 'lng': -1.76879}, 'BD17 7AF': {'class': 'models.MapDataLocation', 'lat': 53.8371, 'lng': -1.77658}, 'BD17 7BL': {'class': 'models.MapDataLocation', 'lat': 53.8345, 'lng': -1.77471}}, 'received_time': '2021-04-24 04:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7729059999999999, 53.8349495]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174183-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 0NN': {'class': 'models.MapDataLocation', 'lat': 54.5407, 'lng': -1.5522}}, 'received_time': '2021-04-24 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.552201, 54.540685]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174191-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 0AX': {'class': 'models.MapDataLocation', 'lat': 53.8006, 'lng': -1.79799}}, 'received_time': '2021-04-24 12:54'}, 'geometry': {'type': 'Point', 'coordinates': [-1.797578, 53.800395]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 18:45', 'incident_id': 'INCD-174216-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S20 7NU': {'class': 'models.MapDataLocation', 'lat': 53.3386, 'lng': -1.3496}}, 'received_time': '2021-04-24 15:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.349641, 53.338612]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174227-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 1LR': {'class': 'models.MapDataLocation', 'lat': 53.787, 'lng': -1.39779}, 'LS25 1DA': {'class': 'models.MapDataLocation', 'lat': 53.7879, 'lng': -1.40171}, 'LS25 1DB': {'class': 'models.MapDataLocation', 'lat': 53.788, 'lng': -1.40071}}, 'received_time': '2021-04-24 16:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4001233333333332, 53.787663333333334]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 02:00', 'incident_id': 'INCD-174230-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE33 2AL': {'class': 'models.MapDataLocation', 'lat': 55.0037, 'lng': -1.4279}}, 'received_time': '2021-04-24 16:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.427867, 55.003755]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 20:00', 'incident_id': 'INCD-174231-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS28 9LD': {'class': 'models.MapDataLocation', 'lat': 53.7878, 'lng': -1.6388}, 'LS28 9LA': {'class': 'models.MapDataLocation', 'lat': 53.7871, 'lng': -1.64005}, 'LS28 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7875, 'lng': -1.64138}, 'LS28 9JY': {'class': 'models.MapDataLocation', 'lat': 53.7878, 'lng': -1.64092}, 'LS28 9JX': {'class': 'models.MapDataLocation', 'lat': 53.7888, 'lng': -1.64158}}, 'received_time': '2021-04-24 16:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6405629999999998, 53.787802]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174232-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S2 4BQ': {'class': 'models.MapDataLocation', 'lat': 53.3713, 'lng': -1.46612}}, 'received_time': '2021-04-24 16:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.466121, 53.371315]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 20:45', 'incident_id': 'INCD-174240-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD10 9BB': {'class': 'models.MapDataLocation', 'lat': 53.8313, 'lng': -1.7147}}, 'received_time': '2021-04-24 17:40'}, 'geometry': {'type': 'Point', 'coordinates': [-1.714699, 53.831298]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 21:15', 'incident_id': 'INCD-174242-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 2QT': {'class': 'models.MapDataLocation', 'lat': 53.7046, 'lng': -1.79158}}, 'received_time': '2021-04-24 18:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.791615, 53.704581]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:15', 'incident_id': 'INCD-174245-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S73 8HF': {'class': 'models.MapDataLocation', 'lat': 53.5221, 'lng': -1.39993}, 'S73 8HE': {'class': 'models.MapDataLocation', 'lat': 53.5223, 'lng': -1.40119}, 'S73 8HG': {'class': 'models.MapDataLocation', 'lat': 53.5224, 'lng': -1.39952}, 'S73 0DR': {'class': 'models.MapDataLocation', 'lat': 53.5204, 'lng': -1.39994}, 'S73 8HD': {'class': 'models.MapDataLocation', 'lat': 53.5218, 'lng': -1.40075}, 'S73 0DD': {'class': 'models.MapDataLocation', 'lat': 53.5219, 'lng': -1.39889}, 'S73 8HJ': {'class': 'models.MapDataLocation', 'lat': 53.5225, 'lng': -1.40086}}, 'received_time': '2021-04-24 19:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.400135285714286, 53.52192871428572]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:15', 'incident_id': 'INCD-174246-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN11 9LB': {'class': 'models.MapDataLocation', 'lat': 53.4345, 'lng': -1.11675}}, 'received_time': '2021-04-24 19:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.116749, 53.434474]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:30', 'incident_id': 'INCD-174247-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 9AP': {'class': 'models.MapDataLocation', 'lat': 54.5402, 'lng': -1.9332}}, 'received_time': '2021-04-24 19:23'}, 'geometry': {'type': 'Point', 'coordinates': [-1.933182, 54.540173]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 22:45', 'incident_id': 'INCD-174248-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S70 3PN': {'class': 'models.MapDataLocation', 'lat': 53.5448, 'lng': -1.44449}}, 'received_time': '2021-04-24 19:33'}, 'geometry': {'type': 'Point', 'coordinates': [-1.444488, 53.54484]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 21:30', 'incident_id': '60509187', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['CA11 8NZ', 'CA11 8PA', 'CA11 8PF', 'CA11 8PQ', 'CA11 7EG', 'CA11 7EP', 'CA11 8QF', 'CA11 9GQ', 'CA11 7EH', 'CA11 9DP', 'CA11 9FJ', 'CA11 8PG', 'CA11 8NU', 'CA11 8NS', 'CA11 8NT', 'CA11 8NW', 'CA11 8NL', 'CA11 8NN', 'CA11 8JH', 'CA11 8NG', 'CA11 9EU'], 'received_time': '2021-04-24 19:29'}, 'geometry': {'type': 'Point', 'coordinates': [-2.755796380952381, 54.65785428571429]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 21:30', 'incident_id': '40811032', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['FY5 1DB', 'FY5 1DW', 'FY5 1EH', 'FY5 1FD', 'FY5 1FE', 'FY5 1FF', 'FY5 1HE', 'FY5 1LB', 'FY5 1LW'], 'received_time': '2021-04-24 16:58'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0455166666666664, 53.88171922222222]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});