document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T01:00:00', 'incident_id': 'INCD-231583-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231583-Z', 'postcodes_impacted': ['SG54PG'], 'received_time': '2021-04-17T16:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.220409340521745, 52.00791906031363]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-17T22:30:00', 'incident_id': 'INCD-59923-N', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-59923-N', 'postcodes_impacted': ['SW1W8AU', 'SW1W8PB', 'SW1W8PQ', 'SW1W8PZ', 'SW1W8QA', 'SW1W8QB', 'SW1W8QE', 'SW1W8QF', 'SW1W8RB'], 'received_time': '2021-04-17T18:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.15125819261512127, 51.48958640194288]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T01:00:00', 'incident_id': 'INCD-231546-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231546-Z', 'postcodes_impacted': ['CM150LD', 'CM150LE', 'CM150EH', 'CM150EJ', 'CM150EL', 'CM150EN', 'CM150EP', 'CM150EQ', 'CM150ER', 'CM150ES', 'CM150ET', 'CM150EW', 'CM150JX', 'CM150LG', 'CM150NA', 'CM150PU', 'CM150QE', 'CM150QZ', 'CM150RE', 'CM150RU', 'CM150SB', 'CM150SE', 'CM150SF', 'CM150SG', 'CM150SH', 'CM150SJ', 'CM150SL', 'CM150SN', 'CM150SP', 'CM150SR', 'CM150SS', 'CM150ST', 'CM150SU', 'CM150TS', 'CM150TT', 'CM150TU', 'CM35QH', 'CM40JR', 'CM40JS', 'CM40JU', 'CM40JX', 'CM40JY', 'CM40JZ', 'CM40NW', 'CM40NX', 'CM40NZ', 'CM40PA', 'CM40QE', 'CM40QH', 'CM40QJ', 'CM40QL', 'CM40QN', 'CM40QP', 'CM40QR', 'CM40QU', 'CM40QW', 'CM40QX', 'CM40QY', 'CM40QZ', 'CM40RA', 'CM40RB', 'CM40RD', 'CM40RJ', 'CM40RL', 'CM40RN', 'CM40RR', 'CM40RS', 'CM40RT', 'CM40RU', 'CM40RX', 'CM40RY', 'CM40RZ', 'CM40SA', 'CM40SB', 'CM40SD', 'CM40SF', 'CM40SG', 'CM40SP', 'CM59RG'], 'received_time': '2021-04-17T09:30:03'}, 'geometry': {'type': 'Point', 'coordinates': [0.3140477013504482, 51.67978289628871]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. We are working hard to get the power back on as quickly as we can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8308\'', 'dno': 'ssen', 'estimated_restored_time': null, 'incident_id': 'HB8308', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH12 1EB', 'BH12 1EG', 'BH12 1EJ', 'BH12 1EQ', 'BH12 1ES', 'BH12 1EW', 'BH12 1EX', 'BH12 1EZ', 'BH12 1HF', 'BH12 1HG', 'BH12 1HH', 'BH12 1HJ', 'BH12 1HQ', 'BH12 1HR', 'BH12 1HS', 'BH12 1HT', 'BH12 1HX', 'BH2 6BP', 'BH4 9AH', 'BH4 9FW', 'BH4 9HB', 'BH4 9HD', 'BH4 9HL', 'BH4 9HR', 'BH4 9HS', 'BH4 9HT', 'BH4 9HU', 'BH4 9HX', 'BH4 9JU', 'BH4 9LA', 'BH4 9LB', 'BH9 1EQ'], 'received_time': '2021-04-17 23:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9028064375, 50.72792875]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8303\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 01:15:00', 'incident_id': 'HB8303', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH23 6BH'], 'received_time': '2021-04-17 22:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.828883, 50.762764]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8224\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 02:30:00', 'incident_id': 'HB8224', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO45 5BA', 'SO45 5BB', 'SO45 5BE', 'SO45 5BG', 'SO45 5ET'], 'received_time': '2021-04-17 15:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4088596, 50.861829]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8195\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 00:00:00', 'incident_id': 'HB8195', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['TW7 5JG', 'TW7 5NT', 'TW7 5QE'], 'received_time': '2021-04-17 13:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.325783, 51.482303333333334]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 02:00:00', 'incident_id': 'INCD-67-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-67-q', 'postcodes_impacted': ['EX10 9NQ', 'EX10 9AS', 'EX10 9AR', 'EX10 9AP', 'EX10 9AG', 'EX10 9NS', 'EX10 9AA'], 'received_time': '2021-04-17 19:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2304158571428565, 50.686792714285716]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 01:00:00', 'incident_id': 'INCD-2117-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2117-g', 'postcodes_impacted': ['CF3 1RS', 'CF3 1YL', 'CF3 1RT', 'CF3 1QW'], 'received_time': '2021-04-17 21:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1089085, 51.51847825]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 01:00:00', 'incident_id': 'INCD-358023-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358023-G', 'postcodes_impacted': ['GL20 5SS', 'GL20 5SY'], 'received_time': '2021-04-17 20:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1607570000000003, 51.9849205]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-44297-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44297-D', 'postcodes_impacted': ['DN10 4HB'], 'received_time': '2021-04-17 09:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.808669, 53.445723]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 01:30:00', 'incident_id': 'INCD-152734-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152734-H', 'postcodes_impacted': ['DE13 8JW'], 'received_time': '2021-04-17 05:02:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.728004, 52.763511]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the LL63 postcode area of Ty Croes, affecting properties in Llanfelog and surrounding areas. Our emergency response team has managed to restore power to a number of properties, and we are working to restore power for those customers still off supply. Repairs are taking longer than expected because of a grounded overhead line and our team are now working to get the power back on as quickly and as safely as possible by 3:00AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:53PM on 17th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 02:00', 'incident_id': 'INCD-564721-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564721-s', 'postcodes_impacted': ['LL535AZ', 'LL635AD', 'LL635AJ', 'LL635AQ', 'LL635AZ', 'LL635BJ', 'LL635BQ', 'LL635BX', 'LL635BZ', 'LL635DJ', 'LL635DQ', 'LL635DX', 'LL635DZ', 'LL635EJ', 'LL635EQ', 'LL635EX', 'LL635EZ', 'LL635HX', 'LL635HY', 'LL635HZ', 'LL635LJ', 'LL635LQ', 'LL635LX', 'LL635LZ', 'LL635PJ', 'LL635PQ', 'LL635RJ', 'LL635RN', 'LL635RP', 'LL635RQ', 'LL635RR', 'LL635RW', 'LL635RX', 'LL635RY', 'LL635SH', 'LL635SL', 'LL635SN', 'LL635SR', 'LL635SS', 'LL635SW', 'LL635SY', 'LL635TA', 'LL635TB', 'LL635TD', 'LL635TE', 'LL635TF', 'LL635TG', 'LL635TN', 'LL635TU', 'LL635XX', 'LL635YH', 'LL635YL', 'LL635YN', 'LL635YP', 'LL635YR', 'LL635YS', 'LL635YU', 'LL635YY', 'LL645JP', 'LL645JR'], 'received_time': '2021-04-17 21:07'}, 'geometry': {'type': 'Point', 'coordinates': [-4.478147079412324, 53.20697028640983]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G72 postcode area of Blantyre. We had no advance warning of this and only became aware of it at 9:02pm. Our engineers have established that there is an underground cable fault outside 17 Church Street and that repairs will be complex so we are awaiting delivery of generators to restore power, and this should happen by 1:30am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:05pm on Saturday, 17th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 00:30', 'incident_id': 'INCD-564709-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564709-s', 'postcodes_impacted': ['G720NH', 'G720NJ', 'G720NS', 'G720NT', 'G720NY', 'G720PR', 'G720QD', 'G729DB'], 'received_time': '2021-04-17 21:02'}, 'geometry': {'type': 'Point', 'coordinates': [-4.0878920837826405, 55.79140048397763]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the EH12 postcode area of Edinburgh. We did not know in advance there would be a power cut, and are working to get supplies restored. So far we have managed to restore power to some customers and identified an underground cable fault affecting the rest of our customers. We have arranged additional resources to attend to assist in carrying out the repair and now expect your supply to be restored by 2:00am. We understand that being without power is frustrating and please be assured we will restore your supply as soon as we possibly can. If for any reason this information changes then we will update this message. We apologise for the inconvenience and thank you for your patience. This message was updated at 10:15pm on Saturday 17th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 01:00', 'incident_id': 'INCD-564631-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564631-s', 'postcodes_impacted': ['EH127NW', 'EH127NY'], 'received_time': '2021-04-17 16:34'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2830958074643606, 55.93382808748372]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KA7 postcode area of Ayr. Our team are working to repair an underground cable fault outside 7 Newmarket Street however due to difficult digging conditions, we now expect supplies to be restored by 1:30am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:29pm on Saturday 17th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 00:30', 'incident_id': 'INCD-497753-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-497753-k', 'postcodes_impacted': ['KA71LL'], 'received_time': '2021-04-17 13:51'}, 'geometry': {'type': 'Point', 'coordinates': [-4.631596931209811, 55.46305130924389]}}, {'type': 'Feature', 'properties': {'description': 'The electricity supply to your premises may currently be affected by planned work.  You should have received a letter explaining this.  We hope to be able to restore your supplies by 18-APR-2021 08:00.  Please accept our sincere apologies for any inconvenience this is causing.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 07:00', 'incident_id': 'INCD-494579-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-494579-k', 'postcodes_impacted': ['FK28QX', 'FK28XX'], 'received_time': '2021-04-02 10:05'}, 'geometry': {'type': 'Point', 'coordinates': [-3.79198947265032, 56.04415359395529]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172367-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S36 6HT': {'class': 'models.MapDataLocation', 'lat': 53.5194, 'lng': -1.6313}}, 'received_time': '2021-04-17 18:24'}, 'geometry': {'type': 'Point', 'coordinates': [-1.631296, 53.519405]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172368-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF14 0DQ': {'class': 'models.MapDataLocation', 'lat': 53.6933, 'lng': -1.70995}}, 'received_time': '2021-04-17 18:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.709939, 53.693407]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172369-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 0AS': {'class': 'models.MapDataLocation', 'lat': 53.7085, 'lng': -1.85801}}, 'received_time': '2021-04-17 18:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.858011, 53.708507]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 00:15', 'incident_id': 'INCD-172376-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU6 0AJ': {'class': 'models.MapDataLocation', 'lat': 53.8026, 'lng': -0.372003}, 'HU6 0AD': {'class': 'models.MapDataLocation', 'lat': 53.8005, 'lng': -0.370978}}, 'received_time': '2021-04-17 21:04'}, 'geometry': {'type': 'Point', 'coordinates': [-0.371498, 53.801565499999995]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 00:30', 'incident_id': 'INCD-172380-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO15 2EZ': {'class': 'models.MapDataLocation', 'lat': 54.0881, 'lng': -0.189587}, 'YO15 2HQ': {'class': 'models.MapDataLocation', 'lat': 54.0877, 'lng': -0.186641}, 'YO15 2HE': {'class': 'models.MapDataLocation', 'lat': 54.088, 'lng': -0.187818}, 'YO15 2HU': {'class': 'models.MapDataLocation', 'lat': 54.0877, 'lng': -0.185921}, 'YO15 2HJ': {'class': 'models.MapDataLocation', 'lat': 54.0886, 'lng': -0.187854}, 'YO15 1AA': {'class': 'models.MapDataLocation', 'lat': 54.1135, 'lng': -0.150159}}, 'received_time': '2021-04-17 21:25'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1813005, 54.09224633333333]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 01:15', 'incident_id': 'INCD-172384-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO21 3SR': {'class': 'models.MapDataLocation', 'lat': 54.4928, 'lng': -0.654637}}, 'received_time': '2021-04-17 22:08'}, 'geometry': {'type': 'Point', 'coordinates': [-0.654671, 54.492682]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 02:15', 'incident_id': 'INCD-172389-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS15 0AT': {'class': 'models.MapDataLocation', 'lat': 53.7897, 'lng': -1.48431}, 'LS15 0AR': {'class': 'models.MapDataLocation', 'lat': 53.7894, 'lng': -1.48366}}, 'received_time': '2021-04-17 21:59'}, 'geometry': {'type': 'Point', 'coordinates': [-1.484209, 53.789687]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'PPC039363', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN41 8DW': {'class': 'models.MapDataLocation', 'lat': 53.6083, 'lng': -0.172296}, 'DN41 8DL': {'class': 'models.MapDataLocation', 'lat': 53.6088, 'lng': -0.171807}, 'DN41 8FD': {'class': 'models.MapDataLocation', 'lat': 53.6065, 'lng': -0.180157}, 'DN4 5NU': {'class': 'models.MapDataLocation', 'lat': 53.5082, 'lng': -1.12161}, 'DN41 8TH': {'class': 'models.MapDataLocation', 'lat': 53.6052, 'lng': -0.181212}}, 'received_time': '2021-04-18 17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36565339999999996, 53.587383]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:30', 'incident_id': 'PPC039606', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.826674, 53.717724]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039748', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HE': {'class': 'models.MapDataLocation', 'lat': 54.9894, 'lng': -2.39113}, 'NE47 7AW': {'class': 'models.MapDataLocation', 'lat': 55.0007, 'lng': -2.38799}, 'NE47 7JW': {'class': 'models.MapDataLocation', 'lat': 54.9907, 'lng': -2.3735}, 'NE47 7AL': {'class': 'models.MapDataLocation', 'lat': 54.9974, 'lng': -2.37973}, 'NE47 7AN': {'class': 'models.MapDataLocation', 'lat': 54.9955, 'lng': -2.39183}}, 'received_time': '2021-04-18 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3842884, 54.99502739999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039968', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HD': {'class': 'models.MapDataLocation', 'lat': 54.9868, 'lng': -2.37724}}, 'received_time': '2021-04-18 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.377239, 54.986748]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 06:13', 'incident_id': '60508662', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA6 1LH', 'LA6 1LN', 'LA6 1LT', 'LA6 1LX'], 'received_time': '2021-04-18 00:12'}, 'geometry': {'type': 'Point', 'coordinates': [-2.72113425, 54.1808295]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 12:30', 'incident_id': '60508633', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA3 2BP', 'LA3 2BU', 'LA3 2DF', 'LA3 2DN', 'LA3 2DQ', 'LA3 2DR', 'LA3 2DS', 'LA3 2DY', 'LA3 2JH'], 'received_time': '2021-04-17 16:41'}, 'geometry': {'type': 'Point', 'coordinates': [-2.890340777777778, 54.048605888888886]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});