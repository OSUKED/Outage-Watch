document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44523-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44523-C', 'postcodes_impacted': ['IP124DN', 'IP124DL'], 'received_time': '2021-04-26T12:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.306246991644547, 52.08220645700376]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of underground network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55137-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55137-V', 'postcodes_impacted': ['ME74LU', 'ME74LY', 'ME74NA', 'ME74NB', 'ME75JP', 'ME75JR', 'ME75JS', 'ME75JT', 'ME75JU', 'ME75LA', 'ME75LJ', 'ME75LL', 'ME75LX', 'ME75LY', 'ME75NA', 'ME75XQ', 'ME75XX', 'ME75XY'], 'received_time': '2021-04-26T14:25:14'}, 'geometry': {'type': 'Point', 'coordinates': [0.5503889622186214, 51.37687038529961]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248763-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248763-G', 'postcodes_impacted': ['ME86DG', 'ME86BX', 'ME86DF', 'ME86DU', 'ME86HW', 'ME86NT', 'ME86NY', 'ME86NZ', 'ME86PA', 'ME86PB', 'ME86PD', 'ME86PH'], 'received_time': '2021-04-26T03:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5764116924230583, 51.377380043711646]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-27T03:00:00', 'incident_id': 'INCD-260871-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260871-J', 'postcodes_impacted': ['BR36NJ', 'E162RR', 'E16NH', 'E177PJ', 'E50LH', 'E50LJ', 'E50NP', 'E50PD', 'E83DQ', 'E83NS', 'E83PA', 'E83PE', 'E83PF', 'E83PG', 'E83PH', 'E83PJ', 'E83PL', 'E83PN', 'E83PR', 'E83PX', 'E83QA', 'E83QB', 'E83QE', 'E83RD', 'E83RH', 'E83SA', 'E83SB', 'E83SD', 'E83SE', 'E86ND', 'E96DP', 'E96DS', 'E96DT', 'E96DU', 'E96DX', 'E96EG', 'E96EH', 'E96EX', 'E96HB', 'E96HE', 'E96HF', 'E96HG', 'E96HQ', 'E96JH', 'E96JP', 'E96JQ', 'E96JS', 'E96JU', 'E96LD', 'E96LH', 'E96LL', 'E96LQ', 'E96LS', 'E96LT', 'E96LX', 'E96NA', 'E96ND', 'E96NG', 'E96NN', 'E96NS', 'E96NT', 'E96NY', 'E96PH', 'E96PQ', 'E96PT', 'E96PU', 'E96QG', 'E96QH', 'E96QQ', 'E96RT', 'E96RU', 'E96RX', 'E96SR', 'E97PH', 'E97PP', 'E97PW', 'E97QX', 'EC1A9JX', 'EC1V0DN', 'EC4A1BP', 'IG87QL', 'N166RA', 'N17NP', 'NW65RA', 'SE151JF', 'SW74RW', 'UMS', 'W92AU', 'W92EU', 'WC1X8UB', 'WC2B5QD', 'DA146RB', 'E83QP', 'E83QQ', 'E83QW', 'E84RB', 'E84RX', 'E96PW', 'E96PZ', 'E96QE', 'E96QF', 'E96QJ', 'E96QZ', 'SE12EL', 'W1R9LE', 'W91NE'], 'received_time': '2021-04-27T00:10:03'}, 'geometry': {'type': 'Point', 'coordinates': [-0.05998864192469741, 51.538830857839066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-27T05:00:00', 'incident_id': 'INCD-260845-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260845-J', 'postcodes_impacted': ['SW62EE', 'SW62DB', 'SW62EA', 'SW62EB', 'SW62EF', 'SW62EN', 'SW62EQ', 'SW62ER', 'SW62EW', 'SW62EY', 'SW62JG', 'SW62JQ', 'SW62YA'], 'received_time': '2021-04-26T18:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.187300407047652, 51.47874457258207]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-27T06:30:00', 'incident_id': 'INCD-233214-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233214-Z', 'postcodes_impacted': ['SS94JJ', 'SS94JL', 'SS94JP', 'SS94LY', 'SS94NP', 'SS94NR', 'SS94NS', 'SS94NU', 'SS94NX', 'SS94JR'], 'received_time': '2021-04-26T23:48:44'}, 'geometry': {'type': 'Point', 'coordinates': [0.655035699690601, 51.55858042044677]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248811-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248811-G', 'postcodes_impacted': ['CT11RD', 'CT11RF', 'CT11RG', 'CT11JY', 'CT11PS', 'CT11PU', 'CT11PX', 'CT11PY', 'CT11PZ', 'CT11QA', 'CT11RE', 'CT11RL', 'CT11RQ', 'CT11TD', 'CT13AJ'], 'received_time': '2021-04-26T23:24:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.099065635995159, 51.27772023425582]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-27T04:00:00', 'incident_id': 'INCD-233212-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233212-Z', 'postcodes_impacted': ['PE25UU', 'PE25AF', 'PE25DA', 'PE25DU', 'PE25DY', 'PE25DZ', 'PE25EF', 'PE25EG', 'PE25EP', 'PE25EQ', 'PE25ER', 'PE25ES', 'PE25ET', 'PE25EU', 'PE25EX', 'PE25EY', 'PE25FP', 'PE25GH', 'PE25GS', 'PE25HN', 'PE25HP', 'PE25JG', 'PE25JY', 'PE25JZ', 'PE25LA', 'PE25LU', 'PE25LZ', 'PE25NA', 'PE25NF', 'PE25NT', 'PE25PH', 'PE25PR', 'PE25PW', 'PE25QQ', 'PE25SE', 'PE25UB', 'PE25UX', 'PE25UZ', 'PE25WL', 'PE25XS', 'PE25XX', 'PE25ZJ', 'PE27BL', 'PE27DH', 'PE27DN', 'PE27DP', 'PE27DR', 'PE27DS', 'PE27DT', 'PE27DU', 'PE27EA', 'PE27EB', 'PE27ED', 'PE27EE', 'PE27HY', 'PE27JU', 'PE27LN', 'PE27QA', 'PE36GF', 'PE36LU', 'PE36RU', 'PE36RX', 'PE36RY', 'PE36SB', 'PE36SD', 'PE36SE', 'PE36SF', 'PE36SG', 'PE36SQ', 'PE36SS', 'PE36ST', 'PE36SU', 'PE36SX', 'PE36SY', 'PE36SZ', 'PE36WT', 'PE36XP', 'PE36XR'], 'received_time': '2021-04-26T22:11:31'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2867846260612529, 52.55595674805496]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233221-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233221-Z', 'postcodes_impacted': ['RM124QU'], 'received_time': '2021-04-27T03:48:42'}, 'geometry': {'type': 'Point', 'coordinates': [0.2000477810346712, 51.55473803852545]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC2438\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-27 04:30:00', 'incident_id': 'HC2438', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG12 0UA', 'RG12 0XT', 'RG12 0XU', 'RG12 0XX', 'RG12 0XY', 'RG12 0XZ'], 'received_time': '2021-04-27 01:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7266906666666667, 51.39943516666667]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC2434\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-27 10:30:00', 'incident_id': 'HC2434', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP13 5DT', 'HP13 5DU', 'HP13 5HS', 'HP13 5HT', 'HP13 5PD', 'HP13 6XD'], 'received_time': '2021-04-27 00:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7509275, 51.637203166666666]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC2347\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-27 05:30:00', 'incident_id': 'HC2347', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['DD7 7RR', 'DD7 7RY', 'G21 1DA'], 'received_time': '2021-04-26 18:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.258002, 56.28808333333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-27 07:00:00', 'incident_id': 'INCD-518-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-518-q', 'postcodes_impacted': ['TA6 4HL', 'TA6 4UN'], 'received_time': '2021-04-27 00:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9777579999999997, 51.1369485]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-27 04:30:00', 'incident_id': 'INCD-486-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-486-q', 'postcodes_impacted': ['TA21 8PZ'], 'received_time': '2021-04-26 15:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.224876, 50.972822]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-27 05:00:00', 'incident_id': 'INCD-2458-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2458-g', 'postcodes_impacted': ['SA20 0PH', 'SA20 0NP', 'SA20 0NG'], 'received_time': '2021-04-27 00:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.784963, 52.077102]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-27 05:36', 'incident_id': 'INCD-568003-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-568003-s', 'postcodes_impacted': ['KA228LS', 'KA228LY', 'KA228LZ', 'KA228NB', 'KA228ND'], 'received_time': '2021-04-27 03:37'}, 'geometry': {'type': 'Point', 'coordinates': [-4.813471897435066, 55.64877469264373]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G74 postcode area of East Kilbride. We had no advance warning of this and only became aware of it at 11:02pm. Repairs are taking longer than expected because of ongoing fault investigations into the underground cable fault on Kittoch Street and our team are now working to get your power back on as quickly and as safely as possible by 5am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 12:30am on 27th Aprill', 'dno': 'sp', 'estimated_restored_time': '2021-04-27 04:00', 'incident_id': 'INCD-567991-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567991-s', 'postcodes_impacted': ['G741AA', 'G741AP', 'G741AS', 'G741AT', 'G741AU', 'G741AW', 'G741AY', 'G741AZ', 'G741EG', 'G744JW'], 'received_time': '2021-04-26 23:04'}, 'geometry': {'type': 'Point', 'coordinates': [-4.180325491621636, 55.76445610706527]}}, {'type': 'Feature', 'properties': {'description': 'There is an unplanned power cut affecting the SY14 postcode area of Malpas, affecting properties in Childlow and surrounding area. It will be necessary for our engineers to carry out an emergency shutdown at midnight due to a snapped overhead line pole. Our team will be carrying out repair work safely and this may affect the supply to your property. We will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 5AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:40PM on 26th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-27 04:00', 'incident_id': 'INCD-375664-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-375664-r', 'postcodes_impacted': ['SY134QL', 'SY134RA', 'SY134RB', 'SY134RE', 'SY134RF', 'SY134RG', 'SY134RH'], 'received_time': '2021-04-26 19:33'}, 'geometry': {'type': 'Point', 'coordinates': [-2.72689273992545, 52.99190071928858]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-567781-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-567781-s', 'postcodes_impacted': ['EH11BN', 'EH11BP', 'EH11BS', 'EH11BU', 'EH11BX', 'EH11DY', 'EH11LG', 'EH11LJ', 'EH11LL', 'EH11LS', 'EH11PD', 'EH11PE', 'EH12JY', 'EH143JL', 'EH143JN'], 'received_time': '2021-04-26 15:51'}, 'geometry': {'type': 'Point', 'coordinates': [-3.201246362582034, 55.94510150516404]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174548-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS1 4DF': {'class': 'models.MapDataLocation', 'lat': 53.7964, 'lng': -1.55398}, 'LS1 2DE': {'class': 'models.MapDataLocation', 'lat': 53.7964, 'lng': -1.5494}, 'LS1 4DL': {'class': 'models.MapDataLocation', 'lat': 53.7964, 'lng': -1.55398}, 'LS1 4DE': {'class': 'models.MapDataLocation', 'lat': 53.7933, 'lng': -1.54304}}, 'received_time': '2021-04-26 10:50'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5497779999999999, 53.795578750000004]}}, {'type': 'Feature', 'properties': {'description': 'Damage Other Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174550-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S36 2DT': {'class': 'models.MapDataLocation', 'lat': 53.4818, 'lng': -1.58944}}, 'received_time': '2021-04-26 10:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.589521, 53.481804]}}, {'type': 'Feature', 'properties': {'description': 'LV O/H Plant Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174586-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 0PZ': {'class': 'models.MapDataLocation', 'lat': 53.6676, 'lng': -1.71977}}, 'received_time': '2021-04-26 12:50'}, 'geometry': {'type': 'Point', 'coordinates': [-1.719787, 53.667607]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174620-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU5 5BS': {'class': 'models.MapDataLocation', 'lat': 53.7543, 'lng': -0.393241}}, 'received_time': '2021-04-26 14:29'}, 'geometry': {'type': 'Point', 'coordinates': [-0.393241, 53.754333]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174627-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU8 7AF': {'class': 'models.MapDataLocation', 'lat': 53.7515, 'lng': -0.332075}}, 'received_time': '2021-04-26 14:49'}, 'geometry': {'type': 'Point', 'coordinates': [-0.331934, 53.751213]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-27 02:30', 'incident_id': 'INCD-174694-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 3NP': {'class': 'models.MapDataLocation', 'lat': 53.6883, 'lng': -1.79697}, 'HD6 3XH': {'class': 'models.MapDataLocation', 'lat': 53.6886, 'lng': -1.79554}, 'HD6 3PF': {'class': 'models.MapDataLocation', 'lat': 53.6892, 'lng': -1.79666}, 'HD6 3XG': {'class': 'models.MapDataLocation', 'lat': 53.69, 'lng': -1.79396}, 'HD6 3NW': {'class': 'models.MapDataLocation', 'lat': 53.6876, 'lng': -1.79707}, 'HD6 3NE': {'class': 'models.MapDataLocation', 'lat': 53.6896, 'lng': -1.79358}, 'HD6 3NR': {'class': 'models.MapDataLocation', 'lat': 53.689, 'lng': -1.79575}}, 'received_time': '2021-04-26 15:33'}, 'geometry': {'type': 'Point', 'coordinates': [-1.795640142857143, 53.68890757142857]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-27 08:30', 'incident_id': 'INCD-174752-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF14 0DA': {'class': 'models.MapDataLocation', 'lat': 53.6883, 'lng': -1.71765}, 'WF14 0DB': {'class': 'models.MapDataLocation', 'lat': 53.6905, 'lng': -1.71285}}, 'received_time': '2021-04-26 20:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.715258, 53.689376499999995]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-26 23:45', 'incident_id': 'INCD-174753-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S70 1JD': {'class': 'models.MapDataLocation', 'lat': 53.5477, 'lng': -1.47334}}, 'received_time': '2021-04-26 20:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.473337, 53.547685]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-27 00:15', 'incident_id': 'INCD-174756-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS8 2TS': {'class': 'models.MapDataLocation', 'lat': 53.8223, 'lng': -1.49317}}, 'received_time': '2021-04-26 21:01'}, 'geometry': {'type': 'Point', 'coordinates': [-1.493143, 53.822298]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174761-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS15 8RJ': {'class': 'models.MapDataLocation', 'lat': 53.8028, 'lng': -1.44765}}, 'received_time': '2021-04-26 21:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.447646, 53.802746]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC038648', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE39 2EU': {'class': 'models.MapDataLocation', 'lat': 54.943, 'lng': -1.78104}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.781053, 54.943023]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 14:00', 'incident_id': 'PPC039140', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL13 1ST': {'class': 'models.MapDataLocation', 'lat': 54.7338, 'lng': -2.11006}, 'DL13 2LF': {'class': 'models.MapDataLocation', 'lat': 54.7356, 'lng': -2.10197}}, 'received_time': '2021-04-27 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1059945, 54.734747]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-27 12:30', 'incident_id': 'PPC039553', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9EJ': {'class': 'models.MapDataLocation', 'lat': 54.1261, 'lng': -0.791657}, 'YO17 9EQ': {'class': 'models.MapDataLocation', 'lat': 54.1248, 'lng': -0.791052}, 'YO17 9EG': {'class': 'models.MapDataLocation', 'lat': 54.125, 'lng': -0.790634}}, 'received_time': '2021-04-27 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.791079, 54.12527466666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC039590', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3JN': {'class': 'models.MapDataLocation', 'lat': 54.9702, 'lng': -1.75665}, 'NE40 3JL': {'class': 'models.MapDataLocation', 'lat': 54.9706, 'lng': -1.75596}, 'NE40 3JW': {'class': 'models.MapDataLocation', 'lat': 54.9698, 'lng': -1.7559}, 'NE40 3JJ': {'class': 'models.MapDataLocation', 'lat': 54.9708, 'lng': -1.75757}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7564695000000001, 54.97034875]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 10:30', 'incident_id': 'PPC039593', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8RD': {'class': 'models.MapDataLocation', 'lat': 54.5627, 'lng': -1.89198}, 'DL12 8RB': {'class': 'models.MapDataLocation', 'lat': 54.5631, 'lng': -1.89241}, 'DL12 8RE': {'class': 'models.MapDataLocation', 'lat': 54.5634, 'lng': -1.89386}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8926816666666666, 54.56306133333334]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 12:00', 'incident_id': 'PPC039596', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 8RU': {'class': 'models.MapDataLocation', 'lat': 54.5961, 'lng': -1.88582}, 'DL12 8RX': {'class': 'models.MapDataLocation', 'lat': 54.6, 'lng': -1.87916}}, 'received_time': '2021-04-27 11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8825055000000002, 54.5980505]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:45', 'incident_id': 'PPC039605', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL13 5HQ': {'class': 'models.MapDataLocation', 'lat': 54.6136, 'lng': -1.829}}, 'received_time': '2021-04-27 12:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.829042, 54.613664]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 15:30', 'incident_id': 'PPC039626', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR3 3TA': {'class': 'models.MapDataLocation', 'lat': 54.8691, 'lng': -1.44844}, 'SR3 3TB': {'class': 'models.MapDataLocation', 'lat': 54.8692, 'lng': -1.44704}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4477405, 54.8691455]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC039645', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO15 3AU': {'class': 'models.MapDataLocation', 'lat': 54.0812, 'lng': -0.194094}, 'YO15 3AT': {'class': 'models.MapDataLocation', 'lat': 54.0816, 'lng': -0.193525}, 'YO15 3BJ': {'class': 'models.MapDataLocation', 'lat': 54.0821, 'lng': -0.195766}, 'YO15 3BL': {'class': 'models.MapDataLocation', 'lat': 54.082, 'lng': -0.194836}}, 'received_time': '2021-04-27 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.19449775, 54.08173375]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC039649', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE61 6DR': {'class': 'models.MapDataLocation', 'lat': 55.1255, 'lng': -1.67157}, 'NE61 6DS': {'class': 'models.MapDataLocation', 'lat': 55.1265, 'lng': -1.67034}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6711070000000001, 55.125966]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 10:00', 'incident_id': 'PPC039651', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 4JQ': {'class': 'models.MapDataLocation', 'lat': 53.7226, 'lng': -1.89038}, 'HX1 4TD': {'class': 'models.MapDataLocation', 'lat': 53.7234, 'lng': -1.88961}, 'HX1 4TE': {'class': 'models.MapDataLocation', 'lat': 53.7231, 'lng': -1.89015}, 'HX1 4TA': {'class': 'models.MapDataLocation', 'lat': 53.7235, 'lng': -1.88838}, 'HX1 4TB': {'class': 'models.MapDataLocation', 'lat': 53.723, 'lng': -1.88926}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.889554, 53.7231312]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-05-10 13:45', 'incident_id': 'PPC039686', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU19 2BY': {'class': 'models.MapDataLocation', 'lat': 53.751, 'lng': -0.013555}, 'HU19 2BX': {'class': 'models.MapDataLocation', 'lat': 53.747, 'lng': 0.010827}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.0013419999999999994, 53.748982]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 14:00', 'incident_id': 'PPC039793', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL1 5EP': {'class': 'models.MapDataLocation', 'lat': 54.5187, 'lng': -1.5506}, 'DL1 5EU': {'class': 'models.MapDataLocation', 'lat': 54.5178, 'lng': -1.55016}, 'DL1 5ET': {'class': 'models.MapDataLocation', 'lat': 54.5181, 'lng': -1.55012}, 'DL1 5EW': {'class': 'models.MapDataLocation', 'lat': 54.5174, 'lng': -1.5508}, 'DL1 5DX': {'class': 'models.MapDataLocation', 'lat': 54.5186, 'lng': -1.55105}, 'DL1 5DY': {'class': 'models.MapDataLocation', 'lat': 54.5174, 'lng': -1.55156}}, 'received_time': '2021-04-27 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5507003333333333, 54.51799666666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 10:00', 'incident_id': 'PPC039813', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN18 5PZ': {'class': 'models.MapDataLocation', 'lat': 53.6858, 'lng': -0.445157}, 'DN18 5QA': {'class': 'models.MapDataLocation', 'lat': 53.6868, 'lng': -0.44427}, 'DN18 5PP': {'class': 'models.MapDataLocation', 'lat': 53.685, 'lng': -0.444643}, 'DN18 5QD': {'class': 'models.MapDataLocation', 'lat': 53.688, 'lng': -0.443985}, 'DN18 5PU': {'class': 'models.MapDataLocation', 'lat': 53.6858, 'lng': -0.443414}, 'DN18 5QF': {'class': 'models.MapDataLocation', 'lat': 53.6873, 'lng': -0.44327}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4441998333333334, 53.68641349999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 15:00', 'incident_id': 'PPC039831', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 9QE': {'class': 'models.MapDataLocation', 'lat': 54.1242, 'lng': -0.798843}, 'YO17 9DS': {'class': 'models.MapDataLocation', 'lat': 54.127, 'lng': -0.79278}, 'YO17 9DU': {'class': 'models.MapDataLocation', 'lat': 54.1221, 'lng': -0.791895}}, 'received_time': '2021-04-27 11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7944936666666668, 54.124434]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC039860', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS17 9EY': {'class': 'models.MapDataLocation', 'lat': 53.897, 'lng': -1.45412}, 'LS17 9EZ': {'class': 'models.MapDataLocation', 'lat': 53.8976, 'lng': -1.45419}, 'LS17 9EX': {'class': 'models.MapDataLocation', 'lat': 53.896, 'lng': -1.45546}, 'LS17 9EP': {'class': 'models.MapDataLocation', 'lat': 53.8935, 'lng': -1.45381}, 'LS17 9HA': {'class': 'models.MapDataLocation', 'lat': 53.8966, 'lng': -1.45583}, 'LS17 9ES': {'class': 'models.MapDataLocation', 'lat': 53.8943, 'lng': -1.456}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.454924166666667, 53.895840666666665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 15:00', 'incident_id': 'PPC039870', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN37 8LB': {'class': 'models.MapDataLocation', 'lat': 53.5618, 'lng': -0.29428}, 'DN37 8LD': {'class': 'models.MapDataLocation', 'lat': 53.5623, 'lng': -0.294547}, 'DN37 8LJ': {'class': 'models.MapDataLocation', 'lat': 53.5739, 'lng': -0.309681}, 'DN37 0AE': {'class': 'models.MapDataLocation', 'lat': 53.5414, 'lng': -0.127668}, 'DN37 8LA': {'class': 'models.MapDataLocation', 'lat': 53.5622, 'lng': -0.291998}, 'DN37 8JZ': {'class': 'models.MapDataLocation', 'lat': 53.5609, 'lng': -0.289544}, 'DN37 8LQ': {'class': 'models.MapDataLocation', 'lat': 53.5635, 'lng': -0.294875}, 'DN37 8JY': {'class': 'models.MapDataLocation', 'lat': 53.5605, 'lng': -0.288084}, 'DN37 8PP': {'class': 'models.MapDataLocation', 'lat': 53.5875, 'lng': -0.276536}, 'DN37 8JU': {'class': 'models.MapDataLocation', 'lat': 53.5581, 'lng': -0.283634}, 'DN37 8JR': {'class': 'models.MapDataLocation', 'lat': 53.5623, 'lng': -0.287074}, 'DN37 8JS': {'class': 'models.MapDataLocation', 'lat': 53.5656, 'lng': -0.279131}, 'DN37 8LZ': {'class': 'models.MapDataLocation', 'lat': 53.5403, 'lng': -0.26857}, 'DN37 8JN': {'class': 'models.MapDataLocation', 'lat': 53.5624, 'lng': -0.28784}, 'DN37 8JL': {'class': 'models.MapDataLocation', 'lat': 53.563, 'lng': -0.287333}, 'DN37 0JW': {'class': 'models.MapDataLocation', 'lat': 53.516, 'lng': -0.103347}}, 'received_time': '2021-04-27 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2666605625, 53.558887687500004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 12:30', 'incident_id': 'PPC039986', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF14 9BD': {'class': 'models.MapDataLocation', 'lat': 53.6798, 'lng': -1.70308}, 'WF14 9AY': {'class': 'models.MapDataLocation', 'lat': 53.6793, 'lng': -1.70342}, 'WF14 9BW': {'class': 'models.MapDataLocation', 'lat': 53.6804, 'lng': -1.70218}, 'WF14 9AX': {'class': 'models.MapDataLocation', 'lat': 53.6795, 'lng': -1.70237}}, 'received_time': '2021-04-27 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7026914999999998, 53.67978875]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC039994', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE65 7XX': {'class': 'models.MapDataLocation', 'lat': 55.3629, 'lng': -2.01744}, 'NE65 7EZ': {'class': 'models.MapDataLocation', 'lat': 55.3622, 'lng': -2.01833}, 'NE65 7HZ': {'class': 'models.MapDataLocation', 'lat': 55.3149, 'lng': -1.95053}, 'NE65 7HD': {'class': 'models.MapDataLocation', 'lat': 55.3632, 'lng': -2.02098}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0018285000000002, 55.35083175]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 13:00', 'incident_id': 'PPC040038', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN3 3RP': {'class': 'models.MapDataLocation', 'lat': 53.5284, 'lng': -1.05014}, 'DN3 3SA': {'class': 'models.MapDataLocation', 'lat': 53.529, 'lng': -1.05118}, 'DN3 3RL': {'class': 'models.MapDataLocation', 'lat': 53.5292, 'lng': -1.05272}, 'DN3 3SD': {'class': 'models.MapDataLocation', 'lat': 53.5299, 'lng': -1.05104}}, 'received_time': '2021-04-27 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0511345, 53.5290995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-27 14:00', 'incident_id': 'PPC040093', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0ST': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.0797}, 'DL12 0TH': {'class': 'models.MapDataLocation', 'lat': 54.6213, 'lng': -2.07999}, 'DL12 0TJ': {'class': 'models.MapDataLocation', 'lat': 54.6206, 'lng': -2.08013}, 'DL12 0NG': {'class': 'models.MapDataLocation', 'lat': 54.6172, 'lng': -2.08134}, 'DL12 0TQ': {'class': 'models.MapDataLocation', 'lat': 54.6226, 'lng': -2.07866}}, 'received_time': '2021-04-27 12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0798144, 54.6208522]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-27 10:30', 'incident_id': '60509399', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA15 8PE', 'LA15 8PF', 'LA15 8XA', 'LA15 8XB', 'LA15 8XD', 'LA15 8XG'], 'received_time': '2021-04-26 23:09'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1822056666666665, 54.147071833333335]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});