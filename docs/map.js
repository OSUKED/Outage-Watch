document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247691-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247691-G', 'postcodes_impacted': ['BN11YE', 'UMS', 'BN11UA', 'BN11YA', 'BN14AB', 'BN14AD', 'BN14AE', 'BN14AF', 'BN14AG'], 'received_time': '2021-04-04T02:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.13702898035919064, 50.82597526373231]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247961-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247961-G', 'postcodes_impacted': ['TN74ET'], 'received_time': '2021-04-10T00:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.0891248562823091, 51.08024221963581]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247943-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247943-G', 'postcodes_impacted': ['CR82HG', 'CR82HF', 'CR82HN', 'CR82HR', 'CR84DU'], 'received_time': '2021-04-09T14:56:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.11745994733039047, 51.32891089086045]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T02:00:00', 'incident_id': 'INCD-230209-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230209-Z', 'postcodes_impacted': ['NR13AF', 'NR13EN', 'NR13EZ', 'NR13GE', 'NR12AE', 'NR13AL', 'NR13ES', 'NR13JE'], 'received_time': '2021-04-11T13:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3004608957488109, 52.62165433395957]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T22:00:00', 'incident_id': 'INCD-54232-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54232-V', 'postcodes_impacted': ['KT100HA', 'KT100HB', 'KT100HE', 'KT100HU', 'KT100HY', 'KT100HZ', 'KT100TN', 'KT100TT'], 'received_time': '2021-04-11T17:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3305177659243483, 51.356212923200985]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T00:30:00', 'incident_id': 'INCD-230223-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230223-Z', 'postcodes_impacted': ['EN93HB', 'EN93HH', 'EN93HJ', 'EN93HX', 'EN93HY'], 'received_time': '2021-04-11T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.028751054946343464, 51.686672558724034]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230144-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230144-Z', 'postcodes_impacted': ['N226SY', 'N226TN', 'N226TR'], 'received_time': '2021-04-10T17:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.11221473765204514, 51.59437345205913]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T01:30:00', 'incident_id': 'INCD-230249-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230249-Z', 'postcodes_impacted': ['PE135AE', 'PE135AU', 'PE135FR'], 'received_time': '2021-04-11T22:04:57'}, 'geometry': {'type': 'Point', 'coordinates': [0.13241835842488292, 52.684487507924075]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T03:00:00', 'incident_id': 'INCD-248019-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248019-G', 'postcodes_impacted': ['TN91DS', 'TN91EJ', 'TN91TF', 'TN91TG', 'TN91TL', 'TN91TP', 'TN91TQ', 'TN91TR'], 'received_time': '2021-04-11T23:06:32'}, 'geometry': {'type': 'Point', 'coordinates': [0.27067569382889667, 51.19307460404797]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248015-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248015-G', 'postcodes_impacted': ['CT27EN', 'CT27EQ', 'CT27EW', 'CT27HB', 'CT27HE', 'CT27RS', 'CT27RT', 'CT27RU'], 'received_time': '2021-04-11T13:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0752229885850892, 51.286286733502784]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T23:46:00', 'incident_id': 'INCD-230233-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230233-Z', 'postcodes_impacted': ['N88PE', 'N88QH', 'N88QL', 'N88SN', 'N88TA'], 'received_time': '2021-04-11T18:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.12486271488828934, 51.582745179089954]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T02:00:00', 'incident_id': 'INCD-230244-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230244-Z', 'postcodes_impacted': ['PE194SS', 'PE194SX', 'PE194SZ', 'PE196SS', 'PE196SX', 'PE196SY', 'PE196SZ', 'SG188AL', 'PE194SP', 'PE194ST', 'PE194SU', 'PE194TH', 'PE196SP', 'PE196SR', 'PE196ST', 'PE196SU', 'PE196TE', 'PE196TH', 'PE196TT', 'PE196TX', 'PE196TY', 'PE196XQ', 'PE280NP', 'SG193AA', 'SG193AB', 'SG193AD', 'SG193AE', 'SG193AF', 'SG193AG', 'SG193AL', 'SG193AN', 'SG193AP', 'SG193AQ', 'SG193AR', 'SG193AS', 'SG193AT', 'SG193AU', 'SG193AW', 'SG193AX', 'SG193AY', 'SG193AZ', 'SG193BA', 'SG193BB', 'SG193BD', 'SG193BE', 'SG193BJ', 'SG193BL', 'SG193JN', 'SG193PF', 'SG193QS', 'SG193RA', 'SG193RD', 'SG193RH', 'SG193RJ', 'SG193RL', 'SG193SH'], 'received_time': '2021-04-11T20:45:25'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1627578996579662, 52.19813709487101]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T23:00:00', 'incident_id': 'INCD-54229-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54229-V', 'postcodes_impacted': ['KT207UJ', 'KT207XA', 'KT207RT', 'KT207XB', 'KT207XJ'], 'received_time': '2021-04-11T14:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.24304189427542594, 51.28380165382045]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T15:00:00', 'incident_id': 'INCD-228154-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228154-Z', 'postcodes_impacted': ['SS71QG', 'SS71QQ'], 'received_time': '2021-04-11T10:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5903232048840419, 51.55272208815717]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T09:00:00', 'incident_id': 'INCD-211989-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-211989-Z', 'postcodes_impacted': ['NR136AA', 'NR136PD', 'NR136PE', 'NR136QQ', 'NR136SP'], 'received_time': '2021-04-11T01:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3852038495167245, 52.66608437850117]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T14:00:00', 'incident_id': 'INCD-227461-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227461-Z', 'postcodes_impacted': ['SG27PX', 'SG27PZ', 'SG27QA'], 'received_time': '2021-04-11T09:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.11508453245880444, 51.941311076841124]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T15:30:00', 'incident_id': 'INCD-227945-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227945-Z', 'postcodes_impacted': ['CB75QU', 'CB75RJ'], 'received_time': '2021-04-11T08:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.4077326864452153, 52.336646243377984]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-11T10:00:00', 'incident_id': 'INCD-228554-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228554-Z', 'postcodes_impacted': ['MK455AL', 'MK455AN'], 'received_time': '2021-04-11T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.512720087894829, 51.99192145920916]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5526\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 01:30:00', 'incident_id': 'HB5526', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SN16 9QD', 'SN16 9QU', 'SN16 9QX', 'SN16 9QY', 'SN16 9QZ', 'SN16 9RE', 'SN16 9RF', 'SN16 9RG', 'SN16 9RH', 'SN16 9RQ', 'SN16 9TR'], 'received_time': '2021-04-11 22:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9558650909090909, 51.612729818181826]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5516\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 01:00:00', 'incident_id': 'HB5516', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX28 1NX', 'OX28 1PA', 'OX29 6RA', 'OX29 6RD', 'OX29 6RR', 'OX29 6RS', 'OX29 6RT', 'OX29 6RU', 'OX29 6RW', 'OX29 6RZ', 'OX29 6TN', 'OX29 6TR', 'OX29 6TS', 'OX29 6TT', 'OX29 6TX', 'OX29 6ZD'], 'received_time': '2021-04-11 21:55:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.446516875, 51.81223525]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5504\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-11 23:30:00', 'incident_id': 'HB5504', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['HP11 1EJ', 'HP11 1LH', 'HP13 7AR', 'HP13 7AS', 'HP13 7NR', 'HP13 7NT'], 'received_time': '2021-04-11 20:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7248195000000001, 51.62297483333334]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5497\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 04:00:00', 'incident_id': 'HB5497', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO18 1HT', 'SO18 1LZ', 'SO18 1NA', 'SO18 1NX', 'SO18 1NY', 'SO18 1NZ', 'SO18 1PA', 'SO18 1PE', 'SO18 1PF', 'SO18 1PG', 'SO18 1PH', 'SO18 1PJ', 'SO18 2HU', 'SO18 2PF'], 'received_time': '2021-04-11 18:56:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3732865, 50.93129807142857]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5426\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 00:00:00', 'incident_id': 'HB5426', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO7 8AN', 'PO7 8AY', 'PO7 8AZ', 'PO7 8BG'], 'received_time': '2021-04-11 13:06:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.027717, 50.85849]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 03:00:00', 'incident_id': 'INCD-125423-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125423-B', 'postcodes_impacted': ['TQ12 1QZ', 'TQ12 1PX'], 'received_time': '2021-04-11 19:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.625027, 50.535656]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-11 23:30:00', 'incident_id': 'INCD-1623-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-1623-g', 'postcodes_impacted': ['CF83 2SH', 'CF83 2SN', 'CF83 2SF', 'CF83 2SJ', 'CF83 2SG', 'CF83 2SE', 'CF83 2SA'], 'received_time': '2021-04-11 20:33:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2362791428571427, 51.57854271428572]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-416261-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416261-E', 'postcodes_impacted': ['GL50 4DU'], 'received_time': '2021-04-11 10:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.076144, 51.903077]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 02:00:00', 'incident_id': 'INCD-357641-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357641-G', 'postcodes_impacted': ['ST3 4NS'], 'received_time': '2021-04-11 19:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.130712, 52.97616]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 03:00:00', 'incident_id': 'INCD-43910-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-43910-D', 'postcodes_impacted': ['NG32 1RU', 'NG32 1SP', 'NG32 1SQ', 'NG32 1SF', 'NG32 1SJ', 'NG32 1SE', 'NG32 1ET', 'NG32 1RY', 'NG32 1SL', 'NG32 1RX', 'LE14 4AR', 'LE14 4NN', 'NG32 1SS', 'NG32 1SH', 'NG32 1SD', 'NG32 1EZ', 'NG32 1EU', 'NG32 1EX', 'NG32 3NP', 'NG32 1HA', 'LE14 4AG', 'NG32 1LY', 'NG32 1SR', 'NG32 3AJ', 'NG32 2PG', 'NG32 2AZ', 'NG32 1EY', 'NG32 1SG', 'LE14 4BQ', 'NG32 1LT'], 'received_time': '2021-04-11 20:01:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7781923666666665, 52.87484716666666]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-11 23:00:00', 'incident_id': 'INCD-43894-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-43894-D', 'postcodes_impacted': ['CV10 7EE'], 'received_time': '2021-04-11 13:36:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.491935, 52.516523]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 02:00:00', 'incident_id': 'INCD-43891-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-43891-D', 'postcodes_impacted': ['LE67 6NZ', 'LE67 6JS'], 'received_time': '2021-04-11 12:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4030559999999999, 52.6857475]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-12 01:00', 'incident_id': 'INCD-371632-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-371632-r', 'postcodes_impacted': ['LL285UH'], 'received_time': '2021-04-11 23:05'}, 'geometry': {'type': 'Point', 'coordinates': [-3.778987604337861, 53.21117173738208]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-12 00:00', 'incident_id': 'INCD-504285-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504285-f', 'postcodes_impacted': ['EH268NG'], 'received_time': '2021-04-11 20:18'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2243607979851765, 55.83065113592125]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2020-04-12 01:00', 'incident_id': 'INCD-504273-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504273-f', 'postcodes_impacted': ['EH39LJ', 'EH39LL', 'EH39LN'], 'received_time': '2021-04-11 20:08'}, 'geometry': {'type': 'Point', 'coordinates': [-3.2026281155371095, 55.94112459045027]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-02 00:30', 'incident_id': 'INCD-504153-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504153-f', 'postcodes_impacted': ['ML41DR', 'ML41DS', 'ML41DT'], 'received_time': '2021-04-11 12:36'}, 'geometry': {'type': 'Point', 'coordinates': [-4.0024738755500815, 55.81845018500335]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-11 22:55', 'incident_id': 'INCD-496103-k', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-496103-k', 'postcodes_impacted': ['SY111RE', 'SY112JL', 'SY112NG', 'SY112NN', 'SY112NU', 'SY112RG'], 'received_time': '2021-04-11 11:38'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0524999821689764, 52.8590389035809]}}, {'type': 'Feature', 'properties': {'description': 'Damaged EHV U/G In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-168880-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-05 14:08'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170226-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF16 9EH': {'class': 'models.MapDataLocation', 'lat': 53.7116, 'lng': -1.67113}}, 'received_time': '2021-04-09 13:13'}, 'geometry': {'type': 'Point', 'coordinates': [-1.67109, 53.71158]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 00:00', 'incident_id': 'INCD-170659-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS11 9NB': {'class': 'models.MapDataLocation', 'lat': 53.7843, 'lng': -1.56012}, 'LS11 9LG': {'class': 'models.MapDataLocation', 'lat': 53.7845, 'lng': -1.56044}}, 'received_time': '2021-04-11 14:01'}, 'geometry': {'type': 'Point', 'coordinates': [-1.560143, 53.784435]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 01:30', 'incident_id': 'INCD-170698-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL15 0HB': {'class': 'models.MapDataLocation', 'lat': 54.71, 'lng': -1.69768}, 'DL15 0DR': {'class': 'models.MapDataLocation', 'lat': 54.7115, 'lng': -1.69785}, 'DL15 0GB': {'class': 'models.MapDataLocation', 'lat': 54.7093, 'lng': -1.6983}, 'DL15 0FG': {'class': 'models.MapDataLocation', 'lat': 54.7107, 'lng': -1.69742}, 'DL15 0DY': {'class': 'models.MapDataLocation', 'lat': 54.7109, 'lng': -1.69891}, 'DL15 0AP': {'class': 'models.MapDataLocation', 'lat': 54.7113, 'lng': -1.69917}, 'DL15 0GD': {'class': 'models.MapDataLocation', 'lat': 54.7097, 'lng': -1.69811}, 'DL15 0GE': {'class': 'models.MapDataLocation', 'lat': 54.7089, 'lng': -1.69861}}, 'received_time': '2021-04-11 18:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.698276375, 54.710262375]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170702-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF10 3EX': {'class': 'models.MapDataLocation', 'lat': 53.7209, 'lng': -1.3233}}, 'received_time': '2021-04-11 19:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.323273, 53.720811]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170706-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN14 9RN': {'class': 'models.MapDataLocation', 'lat': 53.6883, 'lng': -1.03177}}, 'received_time': '2021-04-11 20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.03175, 53.68833]}}, {'type': 'Feature', 'properties': {'description': 'S/L Knockdown In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170707-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S60 4LB': {'class': 'models.MapDataLocation', 'lat': 53.4176, 'lng': -1.32075}}, 'received_time': '2021-04-11 20:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.320752, 53.417579]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170712-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS7 3LS': {'class': 'models.MapDataLocation', 'lat': 53.8245, 'lng': -1.53693}}, 'received_time': '2021-04-11 20:45'}, 'geometry': {'type': 'Point', 'coordinates': [-1.536929, 53.824524]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 00:30', 'incident_id': 'INCD-170715-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS7 3EF': {'class': 'models.MapDataLocation', 'lat': 53.8162, 'lng': -1.53322}}, 'received_time': '2021-04-11 21:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.533299, 53.816196]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 01:45', 'incident_id': 'INCD-170716-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR2 8LA': {'class': 'models.MapDataLocation', 'lat': 54.8977, 'lng': -1.37113}}, 'received_time': '2021-04-11 22:34'}, 'geometry': {'type': 'Point', 'coordinates': [-1.371132, 54.897696]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-11 13:30', 'incident_id': 'PPC039509', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE24 4RT': {'class': 'models.MapDataLocation', 'lat': 55.1303, 'lng': -1.55339}}, 'received_time': '2021-04-11 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.553333, 55.131452]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-11 14:00', 'incident_id': 'PPC039520', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU1 3SA': {'class': 'models.MapDataLocation', 'lat': 53.7462, 'lng': -0.342096}, 'HU1 3SQ': {'class': 'models.MapDataLocation', 'lat': 53.7455, 'lng': -0.341291}, 'HU1 3SS': {'class': 'models.MapDataLocation', 'lat': 53.7446, 'lng': -0.339792}, 'HU1 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.7449, 'lng': -0.340147}}, 'received_time': '2021-04-11 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.34083100000000005, 53.745299749999994]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-11 15:00', 'incident_id': 'PPC039595', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH4 4JS': {'class': 'models.MapDataLocation', 'lat': 54.8671, 'lng': -1.49143}, 'DH4 4QN': {'class': 'models.MapDataLocation', 'lat': 54.8677, 'lng': -1.49471}, 'DH4 4QT': {'class': 'models.MapDataLocation', 'lat': 54.8674, 'lng': -1.49586}, 'DH4 7DS': {'class': 'models.MapDataLocation', 'lat': 54.868, 'lng': -1.49254}, 'DH4 4QW': {'class': 'models.MapDataLocation', 'lat': 54.8674, 'lng': -1.49351}, 'DH4 4QY': {'class': 'models.MapDataLocation', 'lat': 54.8675, 'lng': -1.49324}, 'DH4 4QZ': {'class': 'models.MapDataLocation', 'lat': 54.8673, 'lng': -1.49149}}, 'received_time': '2021-04-11 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4932622857142857, 54.867475285714285]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-11 12:00', 'incident_id': 'PPC039603', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL14 6XB': {'class': 'models.MapDataLocation', 'lat': 54.6476, 'lng': -1.668}, 'DL14 6XR': {'class': 'models.MapDataLocation', 'lat': 54.6459, 'lng': -1.66601}, 'DL14 6XD': {'class': 'models.MapDataLocation', 'lat': 54.6473, 'lng': -1.66619}, 'DL14 6XF': {'class': 'models.MapDataLocation', 'lat': 54.6456, 'lng': -1.66493}}, 'received_time': '2021-04-11 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.66590325, 54.64667675]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to move equipment in order to allow another organisation to work close to our network in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-11 11:30', 'incident_id': 'PPC039875', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO12 4QP': {'class': 'models.MapDataLocation', 'lat': 54.2391, 'lng': -0.440618}, 'YO12 4RD': {'class': 'models.MapDataLocation', 'lat': 54.2407, 'lng': -0.441693}, 'YO12 4QJ': {'class': 'models.MapDataLocation', 'lat': 54.2406, 'lng': -0.440175}}, 'received_time': '2021-04-11 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4408236666666667, 54.24012833333333]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-12 05:36', 'incident_id': '40809442', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['WA3 5DX', 'WA3 5DY', 'WA3 5EB', 'WA3 5ED', 'WA3 5EE', 'WA3 5EF', 'WA3 5EP', 'WA3 5ES', 'WA3 5EW', 'WA3 5EY', 'WA5 5ES'], 'received_time': '2021-04-11 23:36'}, 'geometry': {'type': 'Point', 'coordinates': [-2.5199827272727275, 53.444625]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '60508164', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA22 0AJ', 'LA22 0AX', 'LA22 9DG'], 'received_time': '2021-04-11 23:10'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9592156666666667, 54.428505666666666]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-12 02:00', 'incident_id': '60508167', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BD24 0AA', 'BD24 0AB', 'BD24 0AE', 'BD24 0AF', 'BD24 0AG', 'BD24 0AN', 'BD24 0AQ', 'BD24 0AR', 'BD24 0BX', 'BD24 0EG', 'BD24 0FF', 'BD24 9AB'], 'received_time': '2021-04-11 18:40'}, 'geometry': {'type': 'Point', 'coordinates': [-2.290381583333333, 54.06581633333334]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-12 02:00', 'incident_id': '10645131', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['M18 7DY', 'M18 7ED', 'M18 7NF', 'M18 7NH', 'M18 7NL', 'M18 7NN', 'M18 7NP', 'M18 7NS', 'M18 7NW', 'M18 7NX', 'M18 7PY', 'M18 7SD', 'M18 7WE', 'M18 7WN', 'M18 7WP', 'M18 7WR', 'M18 7WW', 'SK5 6PD'], 'received_time': '2021-04-10 17:57'}, 'geometry': {'type': 'Point', 'coordinates': [-2.170929722222222, 53.45457555555556]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});