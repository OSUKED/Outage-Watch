document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-260320-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260320-J', 'postcodes_impacted': ['SE233NW', 'SE233LB', 'SE233LD', 'SE233LE', 'SE233LH', 'SE233NL', 'SE233NP', 'SE233NT'], 'received_time': '2021-04-19T17:06:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.05038253199397673, 51.449101777102]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231897-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231897-Z', 'postcodes_impacted': ['WD234RA', 'WD258DB', 'WD258DD', 'WD28DB', 'WD28DD'], 'received_time': '2021-04-19T15:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3384968463639424, 51.6523133996432]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231827-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231827-Z', 'postcodes_impacted': ['HP51TJ', 'HP66DE', 'HP66DF', 'HP66DJ', 'HP66DT', 'HP66EY'], 'received_time': '2021-04-19T12:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.596206013207588, 51.68709763773601]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-20T06:00:00', 'incident_id': 'INCD-248432-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248432-G', 'postcodes_impacted': ['TN355LY'], 'received_time': '2021-04-20T01:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5979852681213786, 50.86503219691991]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-20T05:00:00', 'incident_id': 'INCD-231922-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231922-Z', 'postcodes_impacted': ['RM95AN', 'RM108QS', 'RM95AW', 'RM95RL', 'RM96QD'], 'received_time': '2021-04-19T17:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.14694082699433314, 51.53653669062889]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-20T06:00:00', 'incident_id': 'INCD-231950-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231950-Z', 'postcodes_impacted': ['IP139AB', 'IP139AD', 'IP139AF', 'IP124BB', 'IP130DG', 'IP130DJ', 'IP130DL', 'IP130DN', 'IP130DP', 'IP130DQ', 'IP130DR', 'IP130DS', 'IP130DT', 'IP130DU', 'IP130DW', 'IP130DX', 'IP130DY', 'IP130DZ', 'IP130EA', 'IP130EB', 'IP130ED', 'IP130EE', 'IP130EF', 'IP130EG', 'IP130EH', 'IP130EJ', 'IP130EN', 'IP130EP', 'IP130EQ', 'IP130ER', 'IP130ES', 'IP130ET', 'IP130EU', 'IP130EW', 'IP130EX', 'IP130EY', 'IP130FA', 'IP130HA', 'IP130HB', 'IP136BD', 'IP137RE', 'IP137RF', 'IP137SA', 'IP139AA', 'IP139AE', 'IP139LL', 'IP139LN', 'IP139LP', 'IP139LQ', 'IP139LR', 'IP139LS', 'IP139LT', 'IP139LU', 'IP139LW', 'IP139LX', 'IP139LY', 'IP139LZ', 'IP139NA', 'IP139NB', 'IP139ND', 'IP139NE', 'IP139NF', 'IP139NG', 'IP139NH', 'IP139NJ', 'IP139NL', 'IP139NN', 'IP139NP', 'IP139NQ', 'IP139NR', 'IP139NW', 'UMS'], 'received_time': '2021-04-19T21:22:54'}, 'geometry': {'type': 'Point', 'coordinates': [1.3585115263504053, 52.186499169549506]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9172\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-20 06:00:00', 'incident_id': 'HB9172', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG41 5HG', 'RG6 7EL', 'RG6 7HL'], 'received_time': '2021-04-20 02:29:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9026776666666666, 51.43795566666666]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9168\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-20 05:30:00', 'incident_id': 'HB9168', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG41 5RA', 'RG41 5RD', 'RG41 5TP', 'RG41 5TZ', 'RG5 3LJ', 'RG5 3LS', 'RG5 3LY', 'RG5 3LZ', 'RG5 3PD', 'RG5 3PE', 'RG5 3PH', 'RG5 3PJ', 'RG5 3PL', 'RG5 3PN', 'RG5 3PP', 'RG5 3PR', 'RG5 3PS', 'RG5 3PT', 'RG5 3PU', 'RG5 3PX', 'RG5 3PY', 'RG5 3PZ', 'RG5 3QA', 'RG5 3QB', 'RG5 3QD', 'RG5 3QE', 'RG5 3QF', 'RG5 3QG', 'RG5 3QH', 'RG5 3QJ', 'RG5 3QQ', 'RG5 3QS', 'RG5 3QT', 'RG5 3QU', 'RG5 3QW', 'RG5 3RA', 'RG5 3RE', 'RG5 3RJ', 'RG5 3RX', 'RG5 3RZ', 'RG5 3SQ', 'RG5 4DJ', 'RG5 4DL', 'RG6 1LW', 'RG6 7DY', 'RG6 7DZ', 'RG6 7HL'], 'received_time': '2021-04-20 02:16:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9047700212765958, 51.44224025531914]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8244\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-20 02:00:00', 'incident_id': 'HB8244', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SL7 1AB'], 'received_time': '2021-04-19 22:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.774486, 51.569781]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB9054\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-20 11:00:00', 'incident_id': 'HB9054', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['BH12 2HP', 'BH12 2HR', 'BH12 4HN', 'BH12 4HU'], 'received_time': '2021-04-19 16:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9298140000000001, 50.73855625]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-20 10:30:00', 'incident_id': 'INCD-187-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-187-q', 'postcodes_impacted': ['EX23 9SA'], 'received_time': '2021-04-19 23:22:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.435395, 50.871623]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-20 03:30:00', 'incident_id': 'INCD-192-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-192-q', 'postcodes_impacted': ['BS1 4UL', 'BS1 5DY', 'BS1 4UR', 'BS1 4UD', 'BS1 5DS', 'BS1 5DP', 'BS1 4UZ', 'BS1 5DQ', 'BS1 5DE', 'BS1 5AA'], 'received_time': '2021-04-19 23:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.5985020000000003, 51.453522199999995]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-20 05:02', 'incident_id': 'INCD-565501-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-565501-s', 'postcodes_impacted': ['PA59TH', 'PA59TJ', 'PA59TQ'], 'received_time': '2021-04-20 03:03'}, 'geometry': {'type': 'Point', 'coordinates': [-4.507444971713607, 55.824974650821446]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-565495-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-565495-s', 'postcodes_impacted': ['FK39JP'], 'received_time': '2021-04-20 02:36'}, 'geometry': {'type': 'Point', 'coordinates': [-3.713715865603765, 56.01211598589689]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172329-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S36 2DX': {'class': 'models.MapDataLocation', 'lat': 53.4831, 'lng': -1.59561}}, 'received_time': '2021-04-17 12:43'}, 'geometry': {'type': 'Point', 'coordinates': [-1.595626, 53.483084]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172804-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE9 7PD': {'class': 'models.MapDataLocation', 'lat': 54.9189, 'lng': -1.5499}}, 'received_time': '2021-04-19 13:43'}, 'geometry': {'type': 'Point', 'coordinates': [-1.549886, 54.918844]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-20 10:00', 'incident_id': 'INCD-172829-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S1 4PP': {'class': 'models.MapDataLocation', 'lat': 53.3742, 'lng': -1.47396}, 'S1 4PQ': {'class': 'models.MapDataLocation', 'lat': 53.3741, 'lng': -1.47506}, 'S1 4PD': {'class': 'models.MapDataLocation', 'lat': 53.3747, 'lng': -1.47525}, 'S1 4QZ': {'class': 'models.MapDataLocation', 'lat': 53.3737, 'lng': -1.47395}, 'S1 4PL': {'class': 'models.MapDataLocation', 'lat': 53.3745, 'lng': -1.47587}}, 'received_time': '2021-04-19 14:25'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4747362, 53.37417939999999]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-19 21:00', 'incident_id': 'INCD-172883-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN36 4TH': {'class': 'models.MapDataLocation', 'lat': 53.5309, 'lng': -0.021078}}, 'received_time': '2021-04-19 17:50'}, 'geometry': {'type': 'Point', 'coordinates': [-0.020972, 53.530618]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-20 03:00', 'incident_id': 'INCD-172904-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8RT': {'class': 'models.MapDataLocation', 'lat': 53.7498, 'lng': -1.90787}, 'HX2 8QD': {'class': 'models.MapDataLocation', 'lat': 53.7497, 'lng': -1.90632}, 'HX2 8PU': {'class': 'models.MapDataLocation', 'lat': 53.7502, 'lng': -1.90755}}, 'received_time': '2021-04-19 19:44'}, 'geometry': {'type': 'Point', 'coordinates': [-1.907081, 53.749929]}}, {'type': 'Feature', 'properties': {'description': 'O/H Service Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-20 09:15', 'incident_id': 'INCD-172912-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS12 2TT': {'class': 'models.MapDataLocation', 'lat': 54.5646, 'lng': -0.941322}, 'TS12 2TU': {'class': 'models.MapDataLocation', 'lat': 54.5643, 'lng': -0.94209}, 'TS12 2TR': {'class': 'models.MapDataLocation', 'lat': 54.565, 'lng': -0.942056}, 'TS12 2TS': {'class': 'models.MapDataLocation', 'lat': 54.5645, 'lng': -0.942006}, 'TS12 2TX': {'class': 'models.MapDataLocation', 'lat': 54.5645, 'lng': -0.942362}, 'TS12 2TW': {'class': 'models.MapDataLocation', 'lat': 54.5656, 'lng': -0.941747}, 'TS12 2TF': {'class': 'models.MapDataLocation', 'lat': 54.5647, 'lng': -0.939248}, 'TS12 2TQ': {'class': 'models.MapDataLocation', 'lat': 54.5648, 'lng': -0.94008}, 'TS12 2TP': {'class': 'models.MapDataLocation', 'lat': 54.5648, 'lng': -0.943065}, 'TS12 2TN': {'class': 'models.MapDataLocation', 'lat': 54.5653, 'lng': -0.943145}}, 'received_time': '2021-04-19 21:16'}, 'geometry': {'type': 'Point', 'coordinates': [-0.94166, 54.5647883]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 10:00', 'incident_id': 'PPC039182', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S75 6GU': {'class': 'models.MapDataLocation', 'lat': 53.5877, 'lng': -1.50098}, 'S75 6AY': {'class': 'models.MapDataLocation', 'lat': 53.5882, 'lng': -1.50115}, 'S75 6AX': {'class': 'models.MapDataLocation', 'lat': 53.5877, 'lng': -1.50162}, 'S75 6BP': {'class': 'models.MapDataLocation', 'lat': 53.5852, 'lng': -1.50094}, 'S75 6HS': {'class': 'models.MapDataLocation', 'lat': 53.5884, 'lng': -1.50164}, 'S70 1QJ': {'class': 'models.MapDataLocation', 'lat': 53.5446, 'lng': -1.48859}, 'S75 6BB': {'class': 'models.MapDataLocation', 'lat': 53.5875, 'lng': -1.5001}, 'S75 6AZ': {'class': 'models.MapDataLocation', 'lat': 53.589, 'lng': -1.50035}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4994100000000001, 53.582313375]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 15:30', 'incident_id': 'PPC039374', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 7TW': {'class': 'models.MapDataLocation', 'lat': 54.1004, 'lng': -0.963043}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.963057, 54.100433]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 15:00', 'incident_id': 'PPC039453', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS15 9PN': {'class': 'models.MapDataLocation', 'lat': 54.4825, 'lng': -1.39633}, 'TS15 9PL': {'class': 'models.MapDataLocation', 'lat': 54.4817, 'lng': -1.39577}, 'TS15 9QE': {'class': 'models.MapDataLocation', 'lat': 54.4829, 'lng': -1.39438}, 'TS15 9PJ': {'class': 'models.MapDataLocation', 'lat': 54.4835, 'lng': -1.39534}, 'TS15 9PH': {'class': 'models.MapDataLocation', 'lat': 54.4832, 'lng': -1.39062}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3944314000000002, 54.4827814]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 12:00', 'incident_id': 'PPC039496', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7DD': {'class': 'models.MapDataLocation', 'lat': 54.9681, 'lng': -2.35795}, 'NE47 7DB': {'class': 'models.MapDataLocation', 'lat': 54.9681, 'lng': -2.35795}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.359493, 54.967312]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 13:00', 'incident_id': 'PPC039546', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD4 6YE': {'class': 'models.MapDataLocation', 'lat': 53.5942, 'lng': -1.72662}, 'HD4 6XQ': {'class': 'models.MapDataLocation', 'lat': 53.5944, 'lng': -1.73146}, 'HD4 6XL': {'class': 'models.MapDataLocation', 'lat': 53.5948, 'lng': -1.72704}, 'HD4 6XJ': {'class': 'models.MapDataLocation', 'lat': 53.5948, 'lng': -1.72886}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7285447500000002, 53.5945465]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 13:30', 'incident_id': 'PPC039628', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE24 4HH': {'class': 'models.MapDataLocation', 'lat': 55.1124, 'lng': -1.57127}, 'NE24 4HG': {'class': 'models.MapDataLocation', 'lat': 55.1101, 'lng': -1.56312}, 'NE23 3JG': {'class': 'models.MapDataLocation', 'lat': 55.1043, 'lng': -1.57365}, 'NE23 3AS': {'class': 'models.MapDataLocation', 'lat': 55.1095, 'lng': -1.58084}, 'NE24 4HF': {'class': 'models.MapDataLocation', 'lat': 55.1081, 'lng': -1.56632}, 'NE24 4HE': {'class': 'models.MapDataLocation', 'lat': 55.101, 'lng': -1.56015}, 'NE24 4HQ': {'class': 'models.MapDataLocation', 'lat': 55.1067, 'lng': -1.56933}}, 'received_time': '2021-04-20 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5692414285714285, 55.10744657142857]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 13:00', 'incident_id': 'PPC039634', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF10 5LR': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -1.3687}, 'WF10 5LS': {'class': 'models.MapDataLocation', 'lat': 53.7216, 'lng': -1.36951}, 'WF10 5LG': {'class': 'models.MapDataLocation', 'lat': 53.7209, 'lng': -1.36935}, 'WF10 5LJ': {'class': 'models.MapDataLocation', 'lat': 53.7221, 'lng': -1.36743}, 'WF10 5LL': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.36814}}, 'received_time': '2021-04-20 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3685969999999998, 53.7216546]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 14:00', 'incident_id': 'PPC039639', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU7 4ST': {'class': 'models.MapDataLocation', 'lat': 53.7878, 'lng': -0.306546}, 'HU7 4SN': {'class': 'models.MapDataLocation', 'lat': 53.7876, 'lng': -0.305657}, 'HU7 4SP': {'class': 'models.MapDataLocation', 'lat': 53.7874, 'lng': -0.304648}, 'HU7 4SX': {'class': 'models.MapDataLocation', 'lat': 53.7882, 'lng': -0.305238}, 'HU7 4SU': {'class': 'models.MapDataLocation', 'lat': 53.7881, 'lng': -0.306927}}, 'received_time': '2021-04-20 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3058032, 53.7878042]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 12:30', 'incident_id': 'PPC039664', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL10 4UN': {'class': 'models.MapDataLocation', 'lat': 54.4056, 'lng': -1.74324}, 'DL10 4BL': {'class': 'models.MapDataLocation', 'lat': 54.4081, 'lng': -1.74693}, 'DL10 4BB': {'class': 'models.MapDataLocation', 'lat': 54.4064, 'lng': -1.74169}, 'DL10 4AS': {'class': 'models.MapDataLocation', 'lat': 54.4044, 'lng': -1.74189}, 'DL10 4AR': {'class': 'models.MapDataLocation', 'lat': 54.4056, 'lng': -1.74241}, 'DL10 4UH': {'class': 'models.MapDataLocation', 'lat': 54.4053, 'lng': -1.74427}, 'DL10 4BQ': {'class': 'models.MapDataLocation', 'lat': 54.4054, 'lng': -1.74378}}, 'received_time': '2021-04-20 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7434842857142858, 54.40584671428571]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 15:00', 'incident_id': 'PPC039671', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN16 3RQ': {'class': 'models.MapDataLocation', 'lat': 53.5436, 'lng': -0.597157}, 'DN17 3RH': {'class': 'models.MapDataLocation', 'lat': 53.5261, 'lng': -0.612264}}, 'received_time': '2021-04-20 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6058905, 53.5346]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 15:00', 'incident_id': 'PPC039672', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN20 9PX': {'class': 'models.MapDataLocation', 'lat': 53.5312, 'lng': -0.577065}, 'DN20 9NF': {'class': 'models.MapDataLocation', 'lat': 53.5341, 'lng': -0.576878}, 'DN20 9NE': {'class': 'models.MapDataLocation', 'lat': 53.5332, 'lng': -0.574131}, 'DN21 4JX': {'class': 'models.MapDataLocation', 'lat': 53.5305, 'lng': -0.58985}}, 'received_time': '2021-04-20 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5794867499999999, 53.532292500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 13:00', 'incident_id': 'PPC039782', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 6RJ': {'class': 'models.MapDataLocation', 'lat': 54.1914, 'lng': -0.73122}, 'YO17 8NH': {'class': 'models.MapDataLocation', 'lat': 54.1882, 'lng': -0.708927}}, 'received_time': '2021-04-20 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7187209999999999, 54.1881815]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 12:00', 'incident_id': 'PPC039801', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 6XE': {'class': 'models.MapDataLocation', 'lat': 53.7282, 'lng': -1.94654}, 'HX2 6XD': {'class': 'models.MapDataLocation', 'lat': 53.7303, 'lng': -1.94906}, 'HX2 6XF': {'class': 'models.MapDataLocation', 'lat': 53.7287, 'lng': -1.94941}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9483486666666667, 53.729086333333335]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 16:00', 'incident_id': 'PPC039835', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN11 9SU': {'class': 'models.MapDataLocation', 'lat': 53.3174, 'lng': -0.008706}, 'LN11 9ST': {'class': 'models.MapDataLocation', 'lat': 53.3289, 'lng': -0.013786}, 'LN11 9SR': {'class': 'models.MapDataLocation', 'lat': 53.327, 'lng': -0.018289}, 'LN11 9SX': {'class': 'models.MapDataLocation', 'lat': 53.3233, 'lng': -0.015446}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.01369275, 53.3243365]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 16:00', 'incident_id': 'PPC039846', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 7RQ': {'class': 'models.MapDataLocation', 'lat': 54.2552, 'lng': -0.987315}, 'YO62 7SS': {'class': 'models.MapDataLocation', 'lat': 54.2539, 'lng': -0.997093}, 'YO62 7TS': {'class': 'models.MapDataLocation', 'lat': 54.2546, 'lng': -0.99591}, 'YO62 7ST': {'class': 'models.MapDataLocation', 'lat': 54.2527, 'lng': -0.998749}, 'YO62 7TT': {'class': 'models.MapDataLocation', 'lat': 54.2552, 'lng': -0.995942}, 'YO62 7SU': {'class': 'models.MapDataLocation', 'lat': 54.2531, 'lng': -0.997128}, 'YO62 7SW': {'class': 'models.MapDataLocation', 'lat': 54.2531, 'lng': -0.995746}, 'YO62 7TP': {'class': 'models.MapDataLocation', 'lat': 54.2537, 'lng': -0.995364}, 'YO62 7RD': {'class': 'models.MapDataLocation', 'lat': 54.2534, 'lng': -0.995081}, 'YO62 7SB': {'class': 'models.MapDataLocation', 'lat': 54.2537, 'lng': -0.992049}, 'YO62 7RA': {'class': 'models.MapDataLocation', 'lat': 54.2545, 'lng': -0.993657}, 'YO62 7SD': {'class': 'models.MapDataLocation', 'lat': 54.2412, 'lng': -0.990266}, 'YO62 7TH': {'class': 'models.MapDataLocation', 'lat': 54.2533, 'lng': -0.989449}, 'YO62 7SG': {'class': 'models.MapDataLocation', 'lat': 54.2543, 'lng': -0.994737}, 'YO62 7RH': {'class': 'models.MapDataLocation', 'lat': 54.262, 'lng': -0.989268}, 'YO62 7TG': {'class': 'models.MapDataLocation', 'lat': 54.2893, 'lng': -1.02375}, 'YO62 7RG': {'class': 'models.MapDataLocation', 'lat': 54.2533, 'lng': -0.98974}, 'YO62 7SF': {'class': 'models.MapDataLocation', 'lat': 54.2558, 'lng': -0.993503}, 'YO62 7RF': {'class': 'models.MapDataLocation', 'lat': 54.2546, 'lng': -0.992918}, 'YO62 7RE': {'class': 'models.MapDataLocation', 'lat': 54.2546, 'lng': -0.994559}, 'YO62 7RY': {'class': 'models.MapDataLocation', 'lat': 54.2365, 'lng': -0.982464}, 'YO62 7SA': {'class': 'models.MapDataLocation', 'lat': 54.2418, 'lng': -0.982103}}, 'received_time': '2021-04-20 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9937252727272727, 54.25408018181818]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 21:30', 'incident_id': 'PPC039855', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF5 9JS': {'class': 'models.MapDataLocation', 'lat': 53.6854, 'lng': -1.57198}, 'WF5 9JE': {'class': 'models.MapDataLocation', 'lat': 53.6834, 'lng': -1.57342}, 'WF5 0PR': {'class': 'models.MapDataLocation', 'lat': 53.6816, 'lng': -1.57349}, 'WF5 9JQ': {'class': 'models.MapDataLocation', 'lat': 53.6842, 'lng': -1.57499}, 'WF5 9JN': {'class': 'models.MapDataLocation', 'lat': 53.6834, 'lng': -1.57342}}, 'received_time': '2021-04-20 17:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5735215999999999, 53.68371019999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 12:30', 'incident_id': 'PPC039886', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3HX': {'class': 'models.MapDataLocation', 'lat': 54.9719, 'lng': -1.75293}, 'NE40 3HY': {'class': 'models.MapDataLocation', 'lat': 54.972, 'lng': -1.75162}, 'NE40 3HH': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.75245}, 'NE40 3HU': {'class': 'models.MapDataLocation', 'lat': 54.9717, 'lng': -1.75269}, 'NE40 3JF': {'class': 'models.MapDataLocation', 'lat': 54.9717, 'lng': -1.75536}, 'NE40 3JD': {'class': 'models.MapDataLocation', 'lat': 54.9719, 'lng': -1.75539}, 'NE40 3JE': {'class': 'models.MapDataLocation', 'lat': 54.9716, 'lng': -1.75648}, 'NE40 3JH': {'class': 'models.MapDataLocation', 'lat': 54.9713, 'lng': -1.75815}}, 'received_time': '2021-04-20 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.754318375, 54.971837125]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-20 13:00', 'incident_id': 'PPC039905', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD5 9NX': {'class': 'models.MapDataLocation', 'lat': 53.6535, 'lng': -1.75654}, 'HD5 9NY': {'class': 'models.MapDataLocation', 'lat': 53.6546, 'lng': -1.75532}, 'HD5 9PB': {'class': 'models.MapDataLocation', 'lat': 53.6548, 'lng': -1.75394}, 'HD5 9NZ': {'class': 'models.MapDataLocation', 'lat': 53.6558, 'lng': -1.75553}, 'HD5 9NJ': {'class': 'models.MapDataLocation', 'lat': 53.6502, 'lng': -1.76213}, 'HD5 9PQ': {'class': 'models.MapDataLocation', 'lat': 53.6562, 'lng': -1.75737}, 'HD5 9NT': {'class': 'models.MapDataLocation', 'lat': 53.652, 'lng': -1.76004}, 'HD5 9PG': {'class': 'models.MapDataLocation', 'lat': 53.6559, 'lng': -1.75559}}, 'received_time': '2021-04-20 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.757047125, 53.654136125]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-20 04:15', 'incident_id': '10646337', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['OL3 7NP', 'OL3 7NT', 'OL3 7NU', 'OL3 7NX', 'OL3 7NY', 'OL3 7PA', 'OL3 7PB', 'OL3 7NN', 'OL3 7NL', 'OL3 7NW', 'OL3 7NF'], 'received_time': '2021-04-20 01:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9881078181818181, 53.537711909090916]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});