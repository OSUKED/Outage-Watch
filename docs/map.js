document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232632-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232632-Z', 'postcodes_impacted': ['CM170AT', 'CM170AP', 'CM170AX', 'CM170DB', 'CM170DT', 'CM170EX'], 'received_time': '2021-04-22T23:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.13408236811348603, 51.78413573984928]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T03:00:00', 'incident_id': 'INCD-232814-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232814-Z', 'postcodes_impacted': ['NR129AH', 'NR129AF', 'NR129AN', 'NR129BB', 'NR129BE', 'NR129BF', 'NR129BG', 'NR129EG'], 'received_time': '2021-04-23T16:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.512346502176928, 52.77297144903066]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-44423-C', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-44423-C', 'postcodes_impacted': ['LU20RL', 'LU20RY'], 'received_time': '2021-04-23T09:07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3910652737533416, 51.883227620433296]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232840-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232840-Z', 'postcodes_impacted': ['PE297SD', 'PE297YR'], 'received_time': '2021-04-23T20:31:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18937116795607184, 52.33592941080159]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T08:30:00', 'incident_id': 'INCD-248717-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248717-G', 'postcodes_impacted': ['RH105AR', 'RH105AS', 'RH105AT', 'RH105AU', 'RH105AX', 'RH105AY', 'RH105AZ', 'RH105BA', 'RH105BE'], 'received_time': '2021-04-24T03:36:45'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18633192643111235, 51.102309478498135]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-232854-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-232854-Z', 'postcodes_impacted': ['N170SU', 'N170SW', 'N170TF'], 'received_time': '2021-04-24T04:23:48'}, 'geometry': {'type': 'Point', 'coordinates': [-0.05977825919374733, 51.605061651991754]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-227457-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227457-Z', 'postcodes_impacted': ['CO160DU', 'CO160LA', 'CO160LB', 'CO160LD'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.1548508334444136, 51.86309190703278]}}, {'type': 'Feature', 'properties': {'description': 'We have identified an item of electrical equipment called a Cut-Out, which is the link between our electricity network and a propertys internal wires, that needs replacing. This propertys Cut-Out needs replacing due to potential safety concerns. When we identify properties with this issue we often identify further properties requiring the same works to be completed. Therefore we would like to access your property during the power cut to inspect the equipment within your property and to replace if necessary. Once the inspections and replacements have been completed this will ensure that all properties are safely connected to our electricity network. This is why it is important to complete this work during the Coronavirus pandemic. This work is taking place on Buxton Crescent and Carlton Crescent. The government has given exemptions to certain industries and activities, this outage falls into this category', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T15:00:00', 'incident_id': 'INCD-53288-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53288-V', 'postcodes_impacted': ['SM39TP', 'SM39TR', 'SM39TS'], 'received_time': '2021-04-23T12:02:51'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21764189555768473, 51.36957062305451]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T11:00:00', 'incident_id': 'INCD-230387-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230387-Z', 'postcodes_impacted': ['CB97HX', 'CB97HY', 'CB97HZ', 'CB97JQ', 'CB97LA', 'CB97LB', 'CB97SG'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.44368625849715565, 52.12786448175765]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-05-24T12:30:00', 'incident_id': 'INCD-55021-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55021-V', 'postcodes_impacted': ['CT45PY', 'CT45PZ', 'CT45QA', 'CT45QB', 'CT45QD', 'CT45QE', 'CT45QH', 'CT45SR', 'CT45SS', 'CT46BY', 'RH130TR', 'TN255JU', 'TN255JX', 'TW94FA'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.8377406092783846, 51.1993607414425]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T13:00:00', 'incident_id': 'INCD-230808-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230808-Z', 'postcodes_impacted': ['NR280RU'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.4151257416754273, 52.85681836681537]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-24T16:30:00', 'incident_id': 'INCD-231343-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231343-Z', 'postcodes_impacted': ['SG175NQ'], 'received_time': '2021-04-24T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3251931680253517, 52.02016452902743]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198886\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-24 05:00:00', 'incident_id': '198886', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB10 8AY', 'UB9 6JN', 'UB9 6JP', 'UB9 6JW', 'UB9 6LS', 'UB9 6LT', 'UB9 6LX'], 'received_time': '2021-04-24 02:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.46387, 51.57885671428573]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 07:00:00', 'incident_id': 'INCD-153212-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153212-H', 'postcodes_impacted': ['NG19 9HL'], 'received_time': '2021-04-23 21:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.174524, 53.17356]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-24 07:00:00', 'incident_id': 'INCD-153213-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153213-H', 'postcodes_impacted': ['MK18 4BX', 'MK18 4DB', 'MK18 4LX', 'MK18 4LR', 'MK18 4DE', 'MK18 4LY', 'MK18 4LN', 'MK18 4LP', 'MK18 4DA', 'MK18 4DP', 'MK18 4LT', 'MK18 4BZ', 'MK18 4DR', 'MK18 4LS', 'MK18 4LJ', 'MK18 4DD', 'MK18 4LL', 'MK18 4LG', 'MK18 4NA', 'MK18 4DU', 'MK18 4ND', 'MK18 4BY', 'MK18 4LU', 'MK18 4JR', 'MK18 4DT', 'MK18 4LH', 'MK18 4BT', 'MK18 4LZ', 'MK18 4DS', 'MK18 4HB'], 'received_time': '2021-04-23 22:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0304984333333334, 51.96108129999998]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the KY15 postcode area of Cupar. We had no advance warning of this and only became aware of it at 4:22am. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 6:30am. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 4:55am on 24th April', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 05:22', 'incident_id': 'INCD-566887-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566887-s', 'postcodes_impacted': ['KY147EU', 'KY154BF', 'KY154NF', 'KY154RJ', 'KY154RL', 'KY154RN', 'KY154RP', 'KY154RR', 'KY154RS', 'KY154RT', 'KY154RW', 'KY154SP', 'KY154SR', 'KY154SS', 'KY154ST', 'KY154SU', 'KY154SY', 'KY154TE', 'KY154TW', 'KY155NA', 'KY155SY', 'KY155TG', 'KY155TJ', 'KY155TL', 'KY155TN', 'KY155TP', 'KY155TR', 'KY155TS', 'KY155TW', 'KY155TZ', 'KY155UB', 'KY157PR', 'KY161AA', 'KY169RY', 'KY169YA', 'KY169YB', 'KY169YE'], 'received_time': '2021-04-24 04:22'}, 'geometry': {'type': 'Point', 'coordinates': [-2.959401477846381, 56.33031278324789]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-24 06:00', 'incident_id': 'INCD-506679-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-506679-f', 'postcodes_impacted': ['EH510JZ', 'EH510LA'], 'received_time': '2021-04-24 04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.6116533049694857, 56.00802880775953]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-566533-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-566533-s', 'postcodes_impacted': ['FK14', 'FK14EG', 'FK14EW', 'FK14HJ', 'FK14PP', 'FK14PX', 'FK14PZ', 'FK14QF', 'FK14QJ', 'FK14QL'], 'received_time': '2021-04-23 10:24'}, 'geometry': {'type': 'Point', 'coordinates': [-3.8168204994033994, 56.00353753562862]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-26 11:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174029-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 7DT': {'class': 'models.MapDataLocation', 'lat': 53.8043, 'lng': -1.76226}}, 'received_time': '2021-04-23 13:53'}, 'geometry': {'type': 'Point', 'coordinates': [-1.762256, 53.804294]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174056-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN15 7LG': {'class': 'models.MapDataLocation', 'lat': 53.5929, 'lng': -0.65595}}, 'received_time': '2021-04-23 15:14'}, 'geometry': {'type': 'Point', 'coordinates': [-0.65589, 53.592845]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174059-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL14 7JN': {'class': 'models.MapDataLocation', 'lat': 54.6628, 'lng': -1.67414}}, 'received_time': '2021-04-23 15:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.673419, 54.662575]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174099-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 4SN': {'class': 'models.MapDataLocation', 'lat': 53.6453, 'lng': -1.84334}}, 'received_time': '2021-04-23 21:36'}, 'geometry': {'type': 'Point', 'coordinates': [-1.843353, 53.645311]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-174100-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD3 4XB': {'class': 'models.MapDataLocation', 'lat': 53.6494, 'lng': -1.84193}}, 'received_time': '2021-04-23 21:38'}, 'geometry': {'type': 'Point', 'coordinates': [-1.841946, 53.649444]}}, {'type': 'Feature', 'properties': {'description': 'U/G HV Mains Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-24 07:00', 'incident_id': 'INCD-174111-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS8 3JW': {'class': 'models.MapDataLocation', 'lat': 53.8179, 'lng': -1.49476}, 'LS8 2TP': {'class': 'models.MapDataLocation', 'lat': 53.8189, 'lng': -1.50395}, 'LS8 2TE': {'class': 'models.MapDataLocation', 'lat': 53.8192, 'lng': -1.50785}, 'LS8 2TF': {'class': 'models.MapDataLocation', 'lat': 53.8204, 'lng': -1.50669}, 'LS8 2TG': {'class': 'models.MapDataLocation', 'lat': 53.8202, 'lng': -1.50765}, 'LS8 2TB': {'class': 'models.MapDataLocation', 'lat': 53.8207, 'lng': -1.50873}, 'LS8 2TD': {'class': 'models.MapDataLocation', 'lat': 53.8189, 'lng': -1.50805}, 'LS8 3JF': {'class': 'models.MapDataLocation', 'lat': 53.8187, 'lng': -1.49498}, 'LS28 9NZ': {'class': 'models.MapDataLocation', 'lat': 53.8013, 'lng': -1.65329}, 'LS8 3JG': {'class': 'models.MapDataLocation', 'lat': 53.8182, 'lng': -1.49231}, 'LS8 3PA': {'class': 'models.MapDataLocation', 'lat': 53.8167, 'lng': -1.5067}, 'LS8 2SZ': {'class': 'models.MapDataLocation', 'lat': 53.8207, 'lng': -1.5062}, 'LS8 3JP': {'class': 'models.MapDataLocation', 'lat': 53.817, 'lng': -1.49576}, 'LS8 2SU': {'class': 'models.MapDataLocation', 'lat': 53.8206, 'lng': -1.50955}, 'LS8 3JQ': {'class': 'models.MapDataLocation', 'lat': 53.8175, 'lng': -1.4937}, 'LS8 3JN': {'class': 'models.MapDataLocation', 'lat': 53.8171, 'lng': -1.49374}, 'LS8 2SQ': {'class': 'models.MapDataLocation', 'lat': 53.8184, 'lng': -1.51209}, 'LS8 2PE': {'class': 'models.MapDataLocation', 'lat': 53.8227, 'lng': -1.498}, 'LS8 3EY': {'class': 'models.MapDataLocation', 'lat': 53.8201, 'lng': -1.49375}, 'LS8 3EZ': {'class': 'models.MapDataLocation', 'lat': 53.8195, 'lng': -1.49486}, 'LS8 3PN': {'class': 'models.MapDataLocation', 'lat': 53.8164, 'lng': -1.50462}, 'LS8 2PN': {'class': 'models.MapDataLocation', 'lat': 53.823, 'lng': -1.4971}, 'LS8 3AD': {'class': 'models.MapDataLocation', 'lat': 53.8185, 'lng': -1.50338}, 'LS8 3AA': {'class': 'models.MapDataLocation', 'lat': 53.8173, 'lng': -1.5129}, 'LS8 2PP': {'class': 'models.MapDataLocation', 'lat': 53.8223, 'lng': -1.49509}, 'LS8 3AB': {'class': 'models.MapDataLocation', 'lat': 53.8171, 'lng': -1.51353}, 'LS8 3ER': {'class': 'models.MapDataLocation', 'lat': 53.8197, 'lng': -1.49937}, 'LS8 3AH': {'class': 'models.MapDataLocation', 'lat': 53.8181, 'lng': -1.50323}, 'LS8 3ES': {'class': 'models.MapDataLocation', 'lat': 53.8205, 'lng': -1.49655}, 'LS8 3AE': {'class': 'models.MapDataLocation', 'lat': 53.8177, 'lng': -1.50057}, 'LS8 3ET': {'class': 'models.MapDataLocation', 'lat': 53.8193, 'lng': -1.49613}, 'LS8 3AF': {'class': 'models.MapDataLocation', 'lat': 53.8176, 'lng': -1.49996}, 'LS8 3EU': {'class': 'models.MapDataLocation', 'lat': 53.8196, 'lng': -1.49592}, 'LS8 3JB': {'class': 'models.MapDataLocation', 'lat': 53.8186, 'lng': -1.49617}, 'LS8 3AL': {'class': 'models.MapDataLocation', 'lat': 53.8171, 'lng': -1.50321}, 'LS8 3JE': {'class': 'models.MapDataLocation', 'lat': 53.8181, 'lng': -1.49465}, 'LS8 2PW': {'class': 'models.MapDataLocation', 'lat': 53.8228, 'lng': -1.49584}, 'LS8 3JD': {'class': 'models.MapDataLocation', 'lat': 53.8175, 'lng': -1.49583}, 'LS8 3EX': {'class': 'models.MapDataLocation', 'lat': 53.8203, 'lng': -1.49593}, 'LS8 3AJ': {'class': 'models.MapDataLocation', 'lat': 53.8173, 'lng': -1.50254}, 'LS8 3AN': {'class': 'models.MapDataLocation', 'lat': 53.8172, 'lng': -1.5085}, 'LS8 3AT': {'class': 'models.MapDataLocation', 'lat': 53.8216, 'lng': -1.49329}, 'LS8 3AS': {'class': 'models.MapDataLocation', 'lat': 53.8209, 'lng': -1.49529}, 'LS8 3EP': {'class': 'models.MapDataLocation', 'lat': 53.8194, 'lng': -1.49335}, 'LS8 3AQ': {'class': 'models.MapDataLocation', 'lat': 53.8177, 'lng': -1.50139}, 'LS8 3AX': {'class': 'models.MapDataLocation', 'lat': 53.8229, 'lng': -1.48774}, 'LS8 2TW': {'class': 'models.MapDataLocation', 'lat': 53.8179, 'lng': -1.50801}, 'LS8 3AU': {'class': 'models.MapDataLocation', 'lat': 53.8228, 'lng': -1.48929}, 'LS8 2TT': {'class': 'models.MapDataLocation', 'lat': 53.8243, 'lng': -1.50029}, 'LS8 2TS': {'class': 'models.MapDataLocation', 'lat': 53.8223, 'lng': -1.49317}, 'LS8 2TQ': {'class': 'models.MapDataLocation', 'lat': 53.8192, 'lng': -1.50966}, 'LS8 3HX': {'class': 'models.MapDataLocation', 'lat': 53.8192, 'lng': -1.49815}, 'LS8 3HU': {'class': 'models.MapDataLocation', 'lat': 53.8188, 'lng': -1.49793}, 'LS8 2RB': {'class': 'models.MapDataLocation', 'lat': 53.8209, 'lng': -1.49772}, 'LS8 2RA': {'class': 'models.MapDataLocation', 'lat': 53.8201, 'lng': -1.50025}, 'LS8 3HQ': {'class': 'models.MapDataLocation', 'lat': 53.8216, 'lng': -1.49033}, 'LS8 2RF': {'class': 'models.MapDataLocation', 'lat': 53.8225, 'lng': -1.50016}, 'LS8 3HN': {'class': 'models.MapDataLocation', 'lat': 53.8225, 'lng': -1.48974}, 'LS8 2RE': {'class': 'models.MapDataLocation', 'lat': 53.8213, 'lng': -1.49852}, 'LS8 2RD': {'class': 'models.MapDataLocation', 'lat': 53.8218, 'lng': -1.49901}, 'LS8 3HL': {'class': 'models.MapDataLocation', 'lat': 53.8218, 'lng': -1.48806}, 'LS8 2RJ': {'class': 'models.MapDataLocation', 'lat': 53.8215, 'lng': -1.50035}, 'LS8 3HJ': {'class': 'models.MapDataLocation', 'lat': 53.8219, 'lng': -1.48953}, 'LS8 2RH': {'class': 'models.MapDataLocation', 'lat': 53.823, 'lng': -1.50205}, 'LS8 3HH': {'class': 'models.MapDataLocation', 'lat': 53.821, 'lng': -1.49102}, 'LS8 2RG': {'class': 'models.MapDataLocation', 'lat': 53.8233, 'lng': -1.50111}, 'LS8 2RN': {'class': 'models.MapDataLocation', 'lat': 53.8211, 'lng': -1.50109}, 'LS8 3HF': {'class': 'models.MapDataLocation', 'lat': 53.8209, 'lng': -1.48933}, 'LS8 3HE': {'class': 'models.MapDataLocation', 'lat': 53.8205, 'lng': -1.49195}, 'LS8 2RL': {'class': 'models.MapDataLocation', 'lat': 53.8212, 'lng': -1.50071}, 'LS8 3HD': {'class': 'models.MapDataLocation', 'lat': 53.8215, 'lng': -1.49271}, 'LS8 3HA': {'class': 'models.MapDataLocation', 'lat': 53.8202, 'lng': -1.49293}, 'LS8 2RP': {'class': 'models.MapDataLocation', 'lat': 53.821, 'lng': -1.49876}, 'LS8 2RQ': {'class': 'models.MapDataLocation', 'lat': 53.823, 'lng': -1.5007}, 'LS8 2RR': {'class': 'models.MapDataLocation', 'lat': 53.8306, 'lng': -1.50122}, 'LS8 2RS': {'class': 'models.MapDataLocation', 'lat': 53.823, 'lng': -1.50526}, 'LS8 2RT': {'class': 'models.MapDataLocation', 'lat': 53.8226, 'lng': -1.50311}, 'LS8 2RU': {'class': 'models.MapDataLocation', 'lat': 53.8201, 'lng': -1.50424}, 'LS8 3LE': {'class': 'models.MapDataLocation', 'lat': 53.8198, 'lng': -1.4932}, 'LS8 2RW': {'class': 'models.MapDataLocation', 'lat': 53.8209, 'lng': -1.50144}, 'LS8 2RX': {'class': 'models.MapDataLocation', 'lat': 53.8206, 'lng': -1.50188}, 'LS8 2RY': {'class': 'models.MapDataLocation', 'lat': 53.8195, 'lng': -1.50218}, 'LS8 2RZ': {'class': 'models.MapDataLocation', 'lat': 53.8202, 'lng': -1.50295}, 'LS8 3NR': {'class': 'models.MapDataLocation', 'lat': 53.8115, 'lng': -1.50043}, 'LS8 2SA': {'class': 'models.MapDataLocation', 'lat': 53.8196, 'lng': -1.50402}, 'LS8 2SB': {'class': 'models.MapDataLocation', 'lat': 53.8218, 'lng': -1.50456}, 'LS8 2SE': {'class': 'models.MapDataLocation', 'lat': 53.8213, 'lng': -1.50535}, 'LS8 2SD': {'class': 'models.MapDataLocation', 'lat': 53.8216, 'lng': -1.50508}, 'LS8 2SG': {'class': 'models.MapDataLocation', 'lat': 53.8185, 'lng': -1.50853}, 'LS8 2SF': {'class': 'models.MapDataLocation', 'lat': 53.8181, 'lng': -1.50898}}, 'received_time': '2021-04-24 01:48'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5014464666666665, 53.8198857]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 08:00', 'incident_id': 'INCD-174120-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS14 3EG': {'class': 'models.MapDataLocation', 'lat': 53.8605, 'lng': -1.42154}, 'LS14 3ED': {'class': 'models.MapDataLocation', 'lat': 53.86, 'lng': -1.42433}}, 'received_time': '2021-04-24 02:42'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4229414999999999, 53.86027]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 07:30', 'incident_id': 'INCD-174121-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD17 7BP': {'class': 'models.MapDataLocation', 'lat': 53.8347, 'lng': -1.77451}}, 'received_time': '2021-04-24 04:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.774517, 53.834729]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-24 07:30', 'incident_id': 'INCD-174122-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 8BB': {'class': 'models.MapDataLocation', 'lat': 53.8432, 'lng': -0.432431}}, 'received_time': '2021-04-24 04:21'}, 'geometry': {'type': 'Point', 'coordinates': [-0.432564, 53.843269]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-25 14:00', 'incident_id': 'PPC039190', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS3 6AF': {'class': 'models.MapDataLocation', 'lat': 54.5755, 'lng': -1.22035}}, 'received_time': '2021-04-24 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.220929, 54.576033]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident on our high voltage cable which provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 08:07', 'incident_id': '60508776', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['LA23 3DN', 'LA23 3BT', 'LA23 3BX', 'LA23 3BY', 'LA23 3BZ', 'LA23 3DH', 'LA23 3EA', 'LA23 3DJ', 'LA23 1DX', 'LA23 3DQ', 'LA23 3DX'], 'received_time': '2021-04-24 04:15'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9190389090909092, 54.36639236363636]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-24 16:30', 'incident_id': '40811205', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['PR6 8RD', 'PR6 8RJ', 'PR6 8RL', 'PR6 8RQ', 'PR6 8RR', 'PR6 8UA', 'PR6 9RD'], 'received_time': '2021-04-23 22:07'}, 'geometry': {'type': 'Point', 'coordinates': [-2.565773142857143, 53.68013571428572]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});