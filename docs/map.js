document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230895-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230895-Z', 'postcodes_impacted': ['RM162PN', 'RM162PJ', 'RM162TH', 'RM175PR'], 'received_time': '2021-04-14T11:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.321170941228886, 51.49477387913218]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of underground network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T05:30:00', 'incident_id': 'INCD-260028-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260028-J', 'postcodes_impacted': ['SW59AA', 'SW59AD', 'SW59AB', 'SW59ST', 'SW59SU', 'SW59SX', 'SW59TU'], 'received_time': '2021-04-14T21:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.19360031478674464, 51.49123617442449]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T05:00:00', 'incident_id': 'INCD-231047-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231047-Z', 'postcodes_impacted': ['NR14JY'], 'received_time': '2021-04-15T02:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.325026688878948, 52.635887304512536]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230916-Z', 'postcodes_impacted': ['SG189RU', 'SG189RY', 'SG180LJ'], 'received_time': '2021-04-14T12:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2693072217999945, 52.06222567358287]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7058\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 05:30:00', 'incident_id': 'HB7058', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG17 7AF', 'RG17 7BW', 'RG17 7RS', 'RG17 7RT', 'RG17 7RU', 'RG17 7RX', 'RG17 7RY', 'RG17 7RZ', 'RG17 7SB', 'RG17 7TD', 'RG17 7TG', 'RG17 7TJ', 'RG17 7TL', 'RG17 7TN', 'RG17 7TP', 'RG17 7TR', 'RG17 7TS', 'RG17 7TT', 'RG17 7TU', 'RG17 7TX', 'RG17 7TY', 'RG17 7TZ', 'SN8 2FF', 'SN8 2FL', 'SN8 2HH', 'SN8 2HS', 'SN8 2HT', 'SN8 2HY', 'SN8 2HZ', 'SN8 2JA', 'SN8 2JD', 'SN8 2JE', 'SN8 2JF', 'SN8 2JH', 'SN8 2JJ', 'SN8 2JL', 'SN8 2JP', 'SN8 2JQ', 'SN8 2JS', 'SN8 2JW', 'SN8 2JX', 'SN8 2LH', 'SN8 2LJ', 'SN8 2LQ', 'SN8 2NF'], 'received_time': '2021-04-15 02:13:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5723378666666665, 51.49088815555555]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB6765\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 05:00:00', 'incident_id': 'HB6765', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU30 7JY'], 'received_time': '2021-04-15 01:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.81434, 51.022323]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7049\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'HB7049', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB3 1AH', 'UB3 1AP', 'UB3 1AR', 'UB3 2AD'], 'received_time': '2021-04-14 23:37:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.42432725, 51.50952825]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198576\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 14:00:00', 'incident_id': '198576', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO24 0AA'], 'received_time': '2021-04-12 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.140793, 51.085486]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 05:30:00', 'incident_id': 'INCD-125553-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125553-B', 'postcodes_impacted': ['PL11 2PP', 'PL11 2ND', 'PL11 2HQ'], 'received_time': '2021-04-15 02:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.218413000000001, 50.376866666666665]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 06:00:00', 'incident_id': 'INCD-125552-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125552-B', 'postcodes_impacted': ['EX13 5LB', 'EX13 5QP', 'EX13 5LA', 'EX13 5HX', 'EX13 5LF', 'EX13 5LG', 'EX13 5LD', 'EX13 5HY', 'EX13 5LE', 'EX13 5LX', 'EX13 5LQ', 'EX13 5QT', 'EX13 5LH', 'EX13 5JL'], 'received_time': '2021-04-15 01:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9987393571428576, 50.77743342857143]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 07:00:00', 'incident_id': 'INCD-12132-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12132-A', 'postcodes_impacted': ['WR14 1UY', 'WR14 1UZ'], 'received_time': '2021-04-15 03:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3374155, 52.135522]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G71 postcode area of Glasgow. We had no advance warning of this and only became aware of it at 2.32AM. Our engineers have arrived on site and are investigating the cause of the fault.  Our team will work to get your power back on as quickly and as safely as possible by 6AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 3.43AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 04:58', 'incident_id': 'INCD-563635-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563635-s', 'postcodes_impacted': ['G715NJ', 'G715NL'], 'received_time': '2021-04-15 02:32'}, 'geometry': {'type': 'Point', 'coordinates': [-4.0544179898041595, 55.83716851676338]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the LL17 postcode area of St. Asaph. We had no advance warning of this and only became aware of it at 1:25am. Repairs are taking longer than expected because of onsite difficulties and our team are now working to get your power back on as quickly and as safely as possible by 10AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 4.05AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 09:00', 'incident_id': 'INCD-372490-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-372490-r', 'postcodes_impacted': ['LL170EB', 'LL170ED', 'LL170EE', 'LL170EH', 'LL170NF', 'LL170NH', 'LL170NL'], 'received_time': '2021-04-15 01:25'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4396385038485815, 53.2539158824665]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KA24 and KA13 postcode areas of Dalry and Kilwinning. We had no advance warning of this and only became aware of it at 12.06AM. Our team has managed to restore power to a number of properties in the area and are still working to repair the fault on our overhead line network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 5AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 2.09AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 08:00', 'incident_id': 'INCD-563617-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563617-s', 'postcodes_impacted': ['KA136PL', 'KA136PN'], 'received_time': '2021-04-15 00:06'}, 'geometry': {'type': 'Point', 'coordinates': [-4.714840468039331, 55.67942070711674]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 03:00', 'incident_id': 'INCD-563593-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563593-s', 'postcodes_impacted': ['DG46QA', 'DG46QH', 'DG46QQ'], 'received_time': '2021-04-14 22:33'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9939302678379476, 55.38356214246689]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171451-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 2LS': {'class': 'models.MapDataLocation', 'lat': 53.8207, 'lng': -1.72978}}, 'received_time': '2021-04-14 11:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.729779, 53.820682]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171542-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS24 8HH': {'class': 'models.MapDataLocation', 'lat': 54.6958, 'lng': -1.22321}}, 'received_time': '2021-04-14 14:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.222918, 54.695816]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 05:30', 'incident_id': 'INCD-171617-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE6 5PB': {'class': 'models.MapDataLocation', 'lat': 54.9787, 'lng': -1.58968}}, 'received_time': '2021-04-15 02:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.589543, 54.978716]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 06:15', 'incident_id': 'INCD-171620-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD14 6BY': {'class': 'models.MapDataLocation', 'lat': 53.7845, 'lng': -1.81773}, 'BD13 3DZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.84544}, 'BD14 6DQ': {'class': 'models.MapDataLocation', 'lat': 53.785, 'lng': -1.8148}, 'BD14 6DB': {'class': 'models.MapDataLocation', 'lat': 53.7847, 'lng': -1.81685}, 'BD14 6DA': {'class': 'models.MapDataLocation', 'lat': 53.7848, 'lng': -1.81714}, 'BD14 6DD': {'class': 'models.MapDataLocation', 'lat': 53.7847, 'lng': -1.81657}, 'BD14 6DL': {'class': 'models.MapDataLocation', 'lat': 53.7854, 'lng': -1.81422}, 'BD14 6DE': {'class': 'models.MapDataLocation', 'lat': 53.7851, 'lng': -1.81508}, 'BD14 6DJ': {'class': 'models.MapDataLocation', 'lat': 53.7852, 'lng': -1.81365}, 'BD14 6DH': {'class': 'models.MapDataLocation', 'lat': 53.7851, 'lng': -1.81427}, 'BD14 6BT': {'class': 'models.MapDataLocation', 'lat': 53.7844, 'lng': -1.81775}}, 'received_time': '2021-04-15 03:09'}, 'geometry': {'type': 'Point', 'coordinates': [-1.818489272727273, 53.78566872727272]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-15 06:30', 'incident_id': 'INCD-171621-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 5GL': {'class': 'models.MapDataLocation', 'lat': 53.736, 'lng': -0.380553}}, 'received_time': '2021-04-15 03:26'}, 'geometry': {'type': 'Point', 'coordinates': [-0.380155, 53.736089]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039185', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6RP': {'class': 'models.MapDataLocation', 'lat': 54.226, 'lng': -0.931904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.93177, 54.225837]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-15 09:00', 'incident_id': 'PPC039302', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO12 7RA': {'class': 'models.MapDataLocation', 'lat': 54.2863, 'lng': -0.408401}, 'YO12 7QZ': {'class': 'models.MapDataLocation', 'lat': 54.2883, 'lng': -0.408416}, 'YO12 7QU': {'class': 'models.MapDataLocation', 'lat': 54.2867, 'lng': -0.409063}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4086636666666667, 54.287082999999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:00', 'incident_id': 'PPC039392', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 1DY': {'class': 'models.MapDataLocation', 'lat': 53.9078, 'lng': -1.67444}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.674374, 53.907772]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039436', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8NG': {'class': 'models.MapDataLocation', 'lat': 54.1678, 'lng': -0.683294}, 'YO17 8HL': {'class': 'models.MapDataLocation', 'lat': 54.1595, 'lng': -0.67792}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6819154999999999, 54.1650665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:30', 'incident_id': 'PPC039464', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU19 2QF': {'class': 'models.MapDataLocation', 'lat': 53.7185, 'lng': 0.046434}, 'HU19 2QJ': {'class': 'models.MapDataLocation', 'lat': 53.7021, 'lng': 0.032745}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [0.0395975, 53.710342]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 15:30', 'incident_id': 'PPC039506', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF4 4QU': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60674}, 'WF4 4QZ': {'class': 'models.MapDataLocation', 'lat': 53.6463, 'lng': -1.60751}, 'WF4 4QX': {'class': 'models.MapDataLocation', 'lat': 53.6478, 'lng': -1.60475}, 'WF4 4QY': {'class': 'models.MapDataLocation', 'lat': 53.6475, 'lng': -1.60676}, 'WF4 4RF': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60871}, 'WF4 4RB': {'class': 'models.MapDataLocation', 'lat': 53.6468, 'lng': -1.60863}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6070548333333334, 53.647283166666675]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039538', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU11 5SX': {'class': 'models.MapDataLocation', 'lat': 53.9285, 'lng': -0.215499}, 'YO25 8ES': {'class': 'models.MapDataLocation', 'lat': 53.9218, 'lng': -0.27204}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2429035, 53.924642500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 16:00', 'incident_id': 'PPC039670', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 3RJ': {'class': 'models.MapDataLocation', 'lat': 53.5661, 'lng': -1.82766}, 'HD7 5JW': {'class': 'models.MapDataLocation', 'lat': 53.6093, 'lng': -1.84604}, 'HD9 2QY': {'class': 'models.MapDataLocation', 'lat': 53.5635, 'lng': -1.82739}, 'HD7 1QD': {'class': 'models.MapDataLocation', 'lat': 53.562, 'lng': -1.82879}, 'HD9 2RS': {'class': 'models.MapDataLocation', 'lat': 53.5634, 'lng': -1.83002}, 'HD9 3XG': {'class': 'models.MapDataLocation', 'lat': 53.5676, 'lng': -1.82742}, 'HD9 2RU': {'class': 'models.MapDataLocation', 'lat': 53.5616, 'lng': -1.82773}, 'HD9 3RG': {'class': 'models.MapDataLocation', 'lat': 53.5658, 'lng': -1.83255}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.83140825, 53.569869999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:00', 'incident_id': 'PPC039710', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 1BW': {'class': 'models.MapDataLocation', 'lat': 54.5686, 'lng': -1.41398}, 'TS21 1BL': {'class': 'models.MapDataLocation', 'lat': 54.5626, 'lng': -1.4179}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4159365, 54.565618]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039712', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9ED': {'class': 'models.MapDataLocation', 'lat': 54.5124, 'lng': -1.18827}, 'TS8 9EE': {'class': 'models.MapDataLocation', 'lat': 54.5163, 'lng': -1.18558}, 'TS8 9DZ': {'class': 'models.MapDataLocation', 'lat': 54.5091, 'lng': -1.20688}, 'TS8 9RZ': {'class': 'models.MapDataLocation', 'lat': 54.5098, 'lng': -1.19689}, 'TS8 9EA': {'class': 'models.MapDataLocation', 'lat': 54.5115, 'lng': -1.20293}, 'TS8 9EB': {'class': 'models.MapDataLocation', 'lat': 54.5059, 'lng': -1.19525}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1955728333333333, 54.51142783333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:30', 'incident_id': 'PPC039738', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9PW': {'class': 'models.MapDataLocation', 'lat': 54.5257, 'lng': -1.25075}, 'TS8 9ND': {'class': 'models.MapDataLocation', 'lat': 54.5265, 'lng': -1.25159}, 'TS8 9NA': {'class': 'models.MapDataLocation', 'lat': 54.5272, 'lng': -1.25179}, 'TS8 9SL': {'class': 'models.MapDataLocation', 'lat': 54.5233, 'lng': -1.24996}, 'TS8 9NB': {'class': 'models.MapDataLocation', 'lat': 54.5267, 'lng': -1.25064}, 'TS8 9PP': {'class': 'models.MapDataLocation', 'lat': 54.5263, 'lng': -1.2481}, 'TS8 9PR': {'class': 'models.MapDataLocation', 'lat': 54.5252, 'lng': -1.24904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2502771428571429, 54.52583528571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039756', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3AQ': {'class': 'models.MapDataLocation', 'lat': 54.9721, 'lng': -1.77168}, 'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3AA': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77236}, 'NE40 3AN': {'class': 'models.MapDataLocation', 'lat': 54.9736, 'lng': -1.7705}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AW': {'class': 'models.MapDataLocation', 'lat': 54.9729, 'lng': -1.77177}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.771655375, 54.972390250000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039770', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 0LU': {'class': 'models.MapDataLocation', 'lat': 53.7988, 'lng': -1.80109}, 'BD8 0LT': {'class': 'models.MapDataLocation', 'lat': 53.7994, 'lng': -1.80114}, 'BD8 0LL': {'class': 'models.MapDataLocation', 'lat': 53.7989, 'lng': -1.79977}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.800667, 53.79901]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:00', 'incident_id': 'PPC039841', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL7 0JP': {'class': 'models.MapDataLocation', 'lat': 54.4382, 'lng': -1.55098}, 'DL7 0JR': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55171}, 'DL2 2NZ': {'class': 'models.MapDataLocation', 'lat': 54.4426, 'lng': -1.54943}, 'DL2 2PT': {'class': 'models.MapDataLocation', 'lat': 54.442, 'lng': -1.55132}, 'DL7 0JS': {'class': 'models.MapDataLocation', 'lat': 54.4397, 'lng': -1.55139}, 'DL7 0JU': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55004}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5508033333333333, 54.44001349999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039912', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS29 0PR': {'class': 'models.MapDataLocation', 'lat': 53.9463, 'lng': -1.8972}, 'LS29 0PS': {'class': 'models.MapDataLocation', 'lat': 53.9459, 'lng': -1.89848}, 'LS29 0PX': {'class': 'models.MapDataLocation', 'lat': 53.9457, 'lng': -1.89815}, 'LS29 0LE': {'class': 'models.MapDataLocation', 'lat': 53.9458, 'lng': -1.90182}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8988005000000001, 53.94589875]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});