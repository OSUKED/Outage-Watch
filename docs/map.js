document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-55321-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-55321-V', 'postcodes_impacted': ['GU14RY', 'GU14SG', 'GU14SQ', 'GU14YN'], 'received_time': '2021-04-28T13:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5773767622562184, 51.237104577054666]}}, {'type': 'Feature', 'properties': {'description': '', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-249025-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249025-G', 'postcodes_impacted': ['BN85TD', 'BN85TF', 'RH193NE'], 'received_time': '2021-04-29T23:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.005894858945088367, 50.97735262026482]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T03:00:00', 'incident_id': 'INCD-233915-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233915-Z', 'postcodes_impacted': ['CM210EJ', 'CM210EL', 'CM210EP'], 'received_time': '2021-04-29T23:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.14270796119796705, 51.81062053083114]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233718-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233718-Z', 'postcodes_impacted': ['HA87AA'], 'received_time': '2021-04-29T08:30:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2770011502119603, 51.612296885941575]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248931-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248931-G', 'postcodes_impacted': ['RH135RU', 'RH135QR', 'RH135RS', 'RH135RT'], 'received_time': '2021-04-29T09:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3083772359831535, 51.067695720885965]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-233407-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233407-Z', 'postcodes_impacted': ['N20NL', 'N20NT', 'N20NU', 'N20NX', 'N64LT', 'N64LU'], 'received_time': '2021-04-27T15:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16106207400978767, 51.58407335576303]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T04:30:00', 'incident_id': 'INCD-233804-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233804-Z', 'postcodes_impacted': ['NW21TR', 'NW21AJ', 'NW21TT', 'NW71ED'], 'received_time': '2021-04-29T11:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2159171694608089, 51.5825774156116]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-38635-M', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-38635-M', 'postcodes_impacted': ['W1D1BN', 'W1D2HF', 'W1D2HG', 'W1D3SY', 'W1F8SQ'], 'received_time': '2021-04-30T00:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1346367041446903, 51.51569486690293]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating a high voltage overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T02:30:00', 'incident_id': 'INCD-233916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-233916-Z', 'postcodes_impacted': ['SG48TB', 'SG48TG', 'SG48TH', 'SG48TJ', 'SG48TL', 'SG48TP', 'SG48TQ', 'SG48TR', 'SG48TS', 'SG48WT', 'AL60BN', 'AL60TP', 'AL69GQ', 'AL69GR', 'AL69ST', 'AL69SU', 'AL69SX', 'AL69SY', 'AL69SZ', 'AL69TA', 'AL69TB', 'AL69TD', 'AL69TE', 'AL69TF', 'AL69TG', 'AL69TQ', 'AL69UA', 'AL69UB', 'AL69UD', 'AL69UE', 'AL69UF', 'AL69UG', 'AL69UQ', 'SG36QD', 'SG36QG', 'SG36QH', 'SG36QJ', 'SG36QL', 'UK'], 'received_time': '2021-04-30T00:17:10'}, 'geometry': {'type': 'Point', 'coordinates': [-0.21370411903874226, 51.859007445726405]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T03:30:00', 'incident_id': 'INCD-261122-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-261122-J', 'postcodes_impacted': ['W149NE', 'W149NP', 'W149PE', 'W149PF'], 'received_time': '2021-04-29T23:47:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2050182706362464, 51.48920738019102]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T06:00:00', 'incident_id': 'INCD-249023-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-249023-G', 'postcodes_impacted': ['GU11JN', 'GU11LY', 'GU11LU', 'GU11LX', 'GU11NA', 'GU11NG'], 'received_time': '2021-04-29T21:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5762472840203218, 51.25598173556514]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T03:00:00', 'incident_id': 'INCD-261117-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-261117-J', 'postcodes_impacted': ['SE42RA', 'SE109FY', 'SE42AL', 'SE42AN', 'SE42AP', 'SE42AR', 'SE42AS', 'SE42AT', 'SE42AU', 'SE42AW', 'SE42AX', 'SE42AY', 'SE42AZ', 'SE42BA', 'SE42BB', 'SE42BD', 'SE42BE', 'SE42SD', 'SE42SE', 'SE42SF', 'SE42ST', 'SE42SY', 'SE42SZ'], 'received_time': '2021-04-29T21:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.03580856132441227, 51.4605835357335]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-30T15:00:00', 'incident_id': 'INCD-260168-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260168-J', 'postcodes_impacted': ['NW19UG'], 'received_time': '2021-04-30T09:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1299092170910277, 51.543420791707845]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4478\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'HC4478', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU51 2TG', 'GU51 2TN', 'GU51 2TP', 'GU51 2TQ', 'GU51 2TR', 'GU51 2TS', 'GU51 2TW'], 'received_time': '2021-04-29 23:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8278888571428571, 51.293665142857144]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB6779\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 02:00:00', 'incident_id': 'HB6779', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['W4 1PE', 'W4 1PF', 'W4 1PP', 'W4 1QF', 'W4 1QP', 'W4 1RJ', 'W4 1RP', 'W4 1RR'], 'received_time': '2021-04-29 22:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.25543125, 51.49385425]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HC4436\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-30 05:00:00', 'incident_id': 'HC4436', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO45 1ZN', 'SO45 1ZP'], 'received_time': '2021-04-29 19:15:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.374779, 50.809383499999996]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'INCD-188-r', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-188-r', 'postcodes_impacted': ['BS20 7JD', 'BS20 7HA', 'BS20 7NU', 'BS20 7JA', 'BS20 7EY', 'BS20 7RN', 'BS20 7EZ'], 'received_time': '2021-04-29 07:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.7693097142857144, 51.49124414285713]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'INCD-417103-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-417103-E', 'postcodes_impacted': ['GL55 6NX'], 'received_time': '2021-04-29 22:04:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.707097, 52.061084]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 03:00:00', 'incident_id': 'INCD-358903-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358903-G', 'postcodes_impacted': ['B65 9LT', 'B65 9ES', 'B65 9ET', 'B65 9LX', 'B65 9LS'], 'received_time': '2021-04-29 23:47:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0405822000000002, 52.482287199999995]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-30 02:00:00', 'incident_id': 'INCD-153635-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-153635-H', 'postcodes_impacted': ['B77 1LD'], 'received_time': '2021-04-29 18:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.682705, 52.601468]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KY14 postcode area of Beith. We had no advance warning of this and only became aware of it at 10:29pm. Repairs are taking longer than expected because of ongoing fault investigations and our team are now working to get your power back on as quickly and as safely as possible by 4am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1:32am on 30th April', 'dno': 'sp', 'estimated_restored_time': '2021-04-30 03:00', 'incident_id': 'INCD-569671-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-569671-s', 'postcodes_impacted': ['KA143BJ', 'KA143BL', 'KA143BP', 'KA143BX'], 'received_time': '2021-04-29 22:29'}, 'geometry': {'type': 'Point', 'coordinates': [-4.665099174330077, 55.738328699150934]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-376804-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-376804-r', 'postcodes_impacted': ['CH627DD', 'CH627DP', 'CH627DS', 'CH627DU', 'CH627DW', 'CH627DX', 'CH627ED', 'CH627EE', 'CH627JH'], 'received_time': '2021-04-29 21:02'}, 'geometry': {'type': 'Point', 'coordinates': [-2.98352071595381, 53.32873425520327]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-376510-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-376510-r', 'postcodes_impacted': ['L318BX'], 'received_time': '2021-04-29 09:35'}, 'geometry': {'type': 'Point', 'coordinates': [-2.959052625892637, 53.50664093329559]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173066-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S6 6LG': {'class': 'models.MapDataLocation', 'lat': 53.4285, 'lng': -1.59736}}, 'received_time': '2021-04-20 11:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.597277, 53.427972]}}, {'type': 'Feature', 'properties': {'description': 'Safety Interruption Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-173599-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN8 5RY': {'class': 'models.MapDataLocation', 'lat': 53.6089, 'lng': -0.938874}}, 'received_time': '2021-04-22 07:43'}, 'geometry': {'type': 'Point', 'coordinates': [-0.938859, 53.608929]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 14:00', 'incident_id': 'INCD-173787-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS1 1LP': {'class': 'models.MapDataLocation', 'lat': 54.5764, 'lng': -1.23497}}, 'received_time': '2021-04-22 17:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.235012, 54.57654]}}, {'type': 'Feature', 'properties': {'description': 'Damaged service U/G Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175615-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL5 6ZE': {'class': 'models.MapDataLocation', 'lat': 54.6005, 'lng': -1.56874}}, 'received_time': '2021-04-29 12:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.568773, 54.600499]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175671-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD7 1RG': {'class': 'models.MapDataLocation', 'lat': 53.7883, 'lng': -1.76799}}, 'received_time': '2021-04-29 16:06'}, 'geometry': {'type': 'Point', 'coordinates': [-1.767993, 53.788306]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175677-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO60 7EZ': {'class': 'models.MapDataLocation', 'lat': 54.0968, 'lng': -0.8751}}, 'received_time': '2021-04-29 16:37'}, 'geometry': {'type': 'Point', 'coordinates': [-0.875115, 54.096758]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 03:00', 'incident_id': 'INCD-175716-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE12 8JX': {'class': 'models.MapDataLocation', 'lat': 55.014, 'lng': -1.56989}}, 'received_time': '2021-04-29 20:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.569964, 55.014018]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-175717-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 2PB': {'class': 'models.MapDataLocation', 'lat': 53.8189, 'lng': -1.71796}}, 'received_time': '2021-04-29 20:24'}, 'geometry': {'type': 'Point', 'coordinates': [-1.717957, 53.81892]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 01:15', 'incident_id': 'INCD-175728-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD4 7NJ': {'class': 'models.MapDataLocation', 'lat': 53.6182, 'lng': -1.79384}}, 'received_time': '2021-04-29 22:11'}, 'geometry': {'type': 'Point', 'coordinates': [-1.793809, 53.618146]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-30 03:30', 'incident_id': 'INCD-175735-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS18 5JJ': {'class': 'models.MapDataLocation', 'lat': 53.8385, 'lng': -1.65572}, 'LS18 5JN': {'class': 'models.MapDataLocation', 'lat': 53.8398, 'lng': -1.65507}, 'LS18 5JL': {'class': 'models.MapDataLocation', 'lat': 53.8397, 'lng': -1.65612}}, 'received_time': '2021-04-30 00:16'}, 'geometry': {'type': 'Point', 'coordinates': [-1.655655, 53.839346]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-30 04:00', 'incident_id': 'INCD-175736-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF13 1NF': {'class': 'models.MapDataLocation', 'lat': 53.6906, 'lng': -1.63256}}, 'received_time': '2021-04-30 00:47'}, 'geometry': {'type': 'Point', 'coordinates': [-1.632544, 53.6906]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:00', 'incident_id': 'PPC039688', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 8PF': {'class': 'models.MapDataLocation', 'lat': 53.7457, 'lng': -1.90206}, 'HX2 8PE': {'class': 'models.MapDataLocation', 'lat': 53.7472, 'lng': -1.90284}, 'HX2 8PD': {'class': 'models.MapDataLocation', 'lat': 53.7464, 'lng': -1.90227}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9023926666666666, 53.746439]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:30', 'incident_id': 'PPC039811', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD21 5QF': {'class': 'models.MapDataLocation', 'lat': 53.8399, 'lng': -1.91623}, 'BD21 5QE': {'class': 'models.MapDataLocation', 'lat': 53.8365, 'lng': -1.92174}, 'BD21 5HL': {'class': 'models.MapDataLocation', 'lat': 53.846, 'lng': -1.92119}, 'BD22 9AQ': {'class': 'models.MapDataLocation', 'lat': 53.8398, 'lng': -1.92899}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92180875, 53.840582]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 11:00', 'incident_id': 'PPC039865', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8BQ': {'class': 'models.MapDataLocation', 'lat': 54.122, 'lng': -0.667363}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.667363, 54.121988]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039881', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO25 5UP': {'class': 'models.MapDataLocation', 'lat': 54.0168, 'lng': -0.457062}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.45578, 54.015166]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 15:00', 'incident_id': 'PPC039882', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 3DG': {'class': 'models.MapDataLocation', 'lat': 53.8922, 'lng': -1.6973}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.697289, 53.892184]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039895', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN3 3JF': {'class': 'models.MapDataLocation', 'lat': 53.5339, 'lng': -1.04885}, 'DN3 3JG': {'class': 'models.MapDataLocation', 'lat': 53.5355, 'lng': -1.04939}, 'DN3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.5348, 'lng': -1.05274}, 'DN3 3DH': {'class': 'models.MapDataLocation', 'lat': 53.536, 'lng': -1.05166}, 'DN3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.5354, 'lng': -1.057}, 'DN3 3DL': {'class': 'models.MapDataLocation', 'lat': 53.5359, 'lng': -1.0503}, 'DN3 3BW': {'class': 'models.MapDataLocation', 'lat': 53.5337, 'lng': -1.05271}, 'DN3 3TN': {'class': 'models.MapDataLocation', 'lat': 53.5343, 'lng': -1.05136}, 'DN3 3JE': {'class': 'models.MapDataLocation', 'lat': 53.5349, 'lng': -1.0507}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0516522222222224, 53.53493266666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC039924', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 10:30', 'incident_id': 'PPC039939', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS2 1DD': {'class': 'models.MapDataLocation', 'lat': 54.5799, 'lng': -1.24364}, 'TS2 1DT': {'class': 'models.MapDataLocation', 'lat': 54.5803, 'lng': -1.24351}, 'TS9 5DZ': {'class': 'models.MapDataLocation', 'lat': 54.4703, 'lng': -1.19654}, 'TS1 5LB': {'class': 'models.MapDataLocation', 'lat': 54.579, 'lng': -1.24266}}, 'received_time': '2021-04-30 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2312254999999999, 54.55231225]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-05-01 03:00', 'incident_id': 'PPC039978', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU3 3AN': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.360375}, 'HU3 3AQ': {'class': 'models.MapDataLocation', 'lat': 53.7383, 'lng': -0.361286}, 'HU3 3AR': {'class': 'models.MapDataLocation', 'lat': 53.7388, 'lng': -0.361493}, 'HU3 3AS': {'class': 'models.MapDataLocation', 'lat': 53.7374, 'lng': -0.36006}, 'HU3 3EQ': {'class': 'models.MapDataLocation', 'lat': 53.7362, 'lng': -0.363457}, 'HU3 3AT': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362596}, 'HU3 3AU': {'class': 'models.MapDataLocation', 'lat': 53.7381, 'lng': -0.362155}, 'HU3 3AW': {'class': 'models.MapDataLocation', 'lat': 53.7384, 'lng': -0.360993}, 'HU3 3DF': {'class': 'models.MapDataLocation', 'lat': 53.7375, 'lng': -0.363468}, 'HU3 3BB': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360794}, 'HU3 3BA': {'class': 'models.MapDataLocation', 'lat': 53.7371, 'lng': -0.361026}, 'HU3 3BD': {'class': 'models.MapDataLocation', 'lat': 53.7364, 'lng': -0.360462}, 'HU3 3DA': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.362726}, 'HU3 3DB': {'class': 'models.MapDataLocation', 'lat': 53.7359, 'lng': -0.362348}, 'HU3 3BE': {'class': 'models.MapDataLocation', 'lat': 53.7363, 'lng': -0.360423}, 'HU3 2UF': {'class': 'models.MapDataLocation', 'lat': 53.7396, 'lng': -0.366328}, 'HU3 3BH': {'class': 'models.MapDataLocation', 'lat': 53.7368, 'lng': -0.36116}, 'HU3 2UE': {'class': 'models.MapDataLocation', 'lat': 53.7397, 'lng': -0.36643}, 'HU3 3BG': {'class': 'models.MapDataLocation', 'lat': 53.7361, 'lng': -0.360929}, 'HU3 3BL': {'class': 'models.MapDataLocation', 'lat': 53.737, 'lng': -0.362577}, 'HU3 3BJ': {'class': 'models.MapDataLocation', 'lat': 53.7372, 'lng': -0.362314}, 'HU3 2QY': {'class': 'models.MapDataLocation', 'lat': 53.7379, 'lng': -0.354933}, 'HU3 3BZ': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.363689}, 'HU3 3AG': {'class': 'models.MapDataLocation', 'lat': 53.7367, 'lng': -0.359813}, 'HU3 3AF': {'class': 'models.MapDataLocation', 'lat': 53.7369, 'lng': -0.360459}, 'HU3 3AD': {'class': 'models.MapDataLocation', 'lat': 53.7366, 'lng': -0.358832}}, 'received_time': '2021-04-30 21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.3615553076923076, 53.737405461538465]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 13:00', 'incident_id': 'PPC039992', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX2 6BX': {'class': 'models.MapDataLocation', 'lat': 53.7175, 'lng': -1.93822}, 'HX2 6BY': {'class': 'models.MapDataLocation', 'lat': 53.7217, 'lng': -1.93575}, 'HX2 6DD': {'class': 'models.MapDataLocation', 'lat': 53.7224, 'lng': -1.9371}, 'HX2 8TX': {'class': 'models.MapDataLocation', 'lat': 53.7412, 'lng': -1.89635}, 'HX2 6DA': {'class': 'models.MapDataLocation', 'lat': 53.7188, 'lng': -1.92903}, 'HX2 6SJ': {'class': 'models.MapDataLocation', 'lat': 53.7286, 'lng': -1.93291}, 'HX2 6BZ': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -1.93369}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.92958, 53.724328571428565]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:00', 'incident_id': 'PPC040043', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS13 4AJ': {'class': 'models.MapDataLocation', 'lat': 54.5624, 'lng': -0.901202}, 'TS13 4AN': {'class': 'models.MapDataLocation', 'lat': 54.5601, 'lng': -0.901651}, 'TS13 4AQ': {'class': 'models.MapDataLocation', 'lat': 54.5627, 'lng': -0.904039}}, 'received_time': '2021-04-30 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.9023179999999998, 54.561727999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-30 12:30', 'incident_id': 'PPC040111', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF7 6HG': {'class': 'models.MapDataLocation', 'lat': 53.6896, 'lng': -1.37771}, 'WF7 6HQ': {'class': 'models.MapDataLocation', 'lat': 53.6899, 'lng': -1.37621}}, 'received_time': '2021-04-30 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3769825, 53.6897915]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '10647296', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK12 6JD', 'SK12 6NX', 'SK23 0HW', 'SK23 0JD', 'SK23 0NG', 'SK23 0NT', 'SK23 0NX', 'SK23 0QD'], 'received_time': '2021-04-29 18:52'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9081018749999998, 53.32464475]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});