document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230916-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230916-Z', 'postcodes_impacted': ['SG189RU', 'SG189RY', 'SG180LJ'], 'received_time': '2021-04-14T12:27:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2693072217999945, 52.06222567358287]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230895-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230895-Z', 'postcodes_impacted': ['RM162PN', 'RM162PJ', 'RM162TH', 'RM175PR'], 'received_time': '2021-04-14T11:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.321170941228886, 51.49477387913218]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T06:00:00', 'incident_id': 'INCD-260036-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260036-J', 'postcodes_impacted': ['W23JN', 'W23JT', 'W23JU'], 'received_time': '2021-04-15T03:01:56'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18694494979931622, 51.513094364564516]}}, {'type': 'Feature', 'properties': {'description': 'Due to a faulty piece of underground network equipment we had to turn off your power.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T05:30:00', 'incident_id': 'INCD-260028-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260028-J', 'postcodes_impacted': ['SW59AA', 'SW59AD', 'SW59AB', 'SW59ST', 'SW59SU', 'SW59SX', 'SW59TU'], 'received_time': '2021-04-14T21:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.19360031478674464, 51.49123617442449]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T02:00:00', 'incident_id': 'INCD-260007-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260007-J', 'postcodes_impacted': ['SW178SG', 'SW177TW', 'SW178DA', 'SW178DE', 'SW178DF', 'SW178ND', 'SW178NE', 'SW178SA', 'SW178SE'], 'received_time': '2021-04-14T16:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.16068370498091308, 51.432453027313485]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-15T04:00:00', 'incident_id': 'INCD-260035-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260035-J', 'postcodes_impacted': ['BR29HT', 'BR29JH', 'BR35EZ', 'E105HA', 'E11EY', 'E11HA', 'E11HE', 'E11HH', 'E11HS', 'E11HU', 'E11HX', 'E11JS', 'E11JT', 'E11JU', 'E11PX', 'E12AA', 'E12AB', 'E12AD', 'E12AE', 'E12AG', 'E12AJ', 'E12AL', 'E12AN', 'E12AR', 'E12AS', 'E12AU', 'E12AW', 'E12AX', 'E12DL', 'E12GN', 'E12JJ', 'E12RB', 'E19JB', 'E19JY', 'E19LB', 'E19PB', 'E19PL', 'E19PP', 'E19QB', 'E19QH', 'E19QN', 'E19XE', 'E1W1BH', 'E1W1LH', 'E1W1LN', 'E1W1LP', 'E1W1LU', 'E1W1LW', 'E1W1LY', 'E1W1LZ', 'E1W1NA', 'E1W1NB', 'E1W1NG', 'E1W1NH', 'E1W1NJ', 'E1W1NQ', 'E1W1NR', 'E1W1NS', 'E1W1NT', 'E1W1NU', 'E1W1NX', 'E1W1NY', 'E1W1NZ', 'E1W1PH', 'E1W1PN', 'E1W1PW', 'E1W1UG', 'E1W1UH', 'E1W1YP', 'E1W2AN', 'E1W2DA', 'E1W2JA', 'E1W2JB', 'E1W2JD', 'E1W2JF', 'E1W2JG', 'E1W2JH', 'E1W2JJ', 'E1W2JL', 'E1W2JN', 'E1W2JP', 'E1W2JQ', 'E1W2JR', 'E1W2JS', 'E1W2JT', 'E1W2JU', 'E1W2JW', 'E1W2JX', 'E1W2JY', 'E1W2JZ', 'E1W2NA', 'E1W2NB', 'E1W2ND', 'E1W2NE', 'E1W2NG', 'E1W2NN', 'E1W2NP', 'E1W2NW', 'E1W2PF', 'E1W2PH', 'E1W2PJ', 'E1W2PL', 'E1W2PN', 'E1W2PP', 'E1W2PQ', 'E1W2PT', 'E1W2PZ', 'E1W2QA', 'E1W2QB', 'E1W2QD', 'E1W2QE', 'E1W2QF', 'E1W2QG', 'E1W2QH', 'E1W2QJ', 'E1W2QN', 'E1W2QP', 'E1W2QQ', 'E1W2QR', 'E1W2QW', 'E1W2RG', 'E1W2RH', 'E1W2SF', 'E1W2UP', 'E1W2UT', 'E1W2UX', 'E1W2UY', 'E1W2UZ', 'E1W2XA', 'E1W2YF', 'E1W2YG', 'E1W2YN', 'E1W2YW', 'E1W3AS', 'E1W3AY', 'E1W3AZ', 'E1W3BA', 'E1W3HZ', 'E1W9SF', 'IG117AB', 'IG88NT', 'NW54PG', 'SE100QP', 'SE109RQ', 'SE167TB', 'SE57AX', 'SW1W0PP', 'SW62LP', 'UMS', 'W149YA', 'W1T3BH', 'W1W8AJ'], 'received_time': '2021-04-15T02:04:56'}, 'geometry': {'type': 'Point', 'coordinates': [-0.0619551822790744, 51.50617301567574]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7058\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 05:30:00', 'incident_id': 'HB7058', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG17 7AF', 'RG17 7AQ', 'RG17 7BJ', 'RG17 7BL', 'RG17 7BN', 'RG17 7BW', 'RG17 7RS', 'RG17 7RT', 'RG17 7RU', 'RG17 7RX', 'RG17 7RY', 'RG17 7RZ', 'RG17 7SB', 'RG17 7TD', 'RG17 7TG', 'RG17 7TJ', 'RG17 7TL', 'RG17 7TN', 'RG17 7TP', 'RG17 7TR', 'RG17 7TS', 'RG17 7TT', 'RG17 7TU', 'RG17 7TX', 'RG17 7TY', 'RG17 7TZ', 'SN8 2FF', 'SN8 2FL', 'SN8 2HH', 'SN8 2HS', 'SN8 2HT', 'SN8 2HU', 'SN8 2HX', 'SN8 2HY', 'SN8 2HZ', 'SN8 2JA', 'SN8 2JB', 'SN8 2JD', 'SN8 2JE', 'SN8 2JF', 'SN8 2JH', 'SN8 2JJ', 'SN8 2JL', 'SN8 2JN', 'SN8 2JP', 'SN8 2JQ', 'SN8 2JS', 'SN8 2JT', 'SN8 2JW', 'SN8 2JX', 'SN8 2LH', 'SN8 2LJ', 'SN8 2LQ', 'SN8 2NF', 'SN8 2TD', 'SN8 2XA'], 'received_time': '2021-04-15 02:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.574965839285714, 51.49246696428571]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB6765\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 05:00:00', 'incident_id': 'HB6765', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['GU30 7JY'], 'received_time': '2021-04-15 01:45:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.81434, 51.022323]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7049\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'HB7049', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['UB3 1AH', 'UB3 1AP', 'UB3 1AR', 'UB3 2AD'], 'received_time': '2021-04-14 23:37:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.42432725, 51.50952825]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB7022\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'HB7022', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG14 2JD', 'RG14 2JE', 'RG14 2JG', 'RG14 2JP', 'RG14 2JQ', 'RG14 2JR', 'RG14 2JS', 'RG14 2JT', 'RG14 2JU', 'RG14 2JX', 'RG14 2JY', 'RG14 2JZ', 'RG14 2LB', 'RG14 2LD', 'RG14 2LQ'], 'received_time': '2021-04-14 20:18:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3326876666666665, 51.415514266666676]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198576\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 14:00:00', 'incident_id': '198576', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO24 0AA'], 'received_time': '2021-04-12 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.140793, 51.085486]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'INCD-125552-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125552-B', 'postcodes_impacted': ['EX13 5RE', 'EX13 5RD', 'EX13 5JA', 'EX13 5LB', 'EX13 5LA', 'EX13 5QP', 'EX13 5HX', 'EX13 5LF', 'EX13 5LG', 'EX13 5RF', 'EX13 5LE', 'EX13 5HY', 'EX13 5LD', 'EX13 5LX', 'EX13 5LQ', 'EX13 5QT', 'EX13 5JL', 'EX13 5TL', 'EX13 5LH'], 'received_time': '2021-04-15 01:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9980963684210526, 50.77648868421053]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 03:00:00', 'incident_id': 'INCD-125548-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125548-B', 'postcodes_impacted': ['BS34 7ES'], 'received_time': '2021-04-14 20:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.565692, 51.51108]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-15 04:30:00', 'incident_id': 'INCD-416465-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416465-E', 'postcodes_impacted': ['OX16 0DH'], 'received_time': '2021-04-14 20:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.349299, 52.062142]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the G71 postcode area of Glasgow. We had no advance warning of this and only became aware of it at 2.32AM. Our engineers are on their way to the local substation to investigate a fault on the electrical network and our team will work to get your power back on as quickly and as safely as possible by 6AM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 3.03AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 04:58', 'incident_id': 'INCD-563635-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563635-s', 'postcodes_impacted': ['G715NJ', 'G715NL'], 'received_time': '2021-04-15 02:32'}, 'geometry': {'type': 'Point', 'coordinates': [-4.0544179898041595, 55.83716851676338]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the LL17 postcode area of St. Asaph. We had no advance warning of this and only became aware of it at 1:25am. We are aware of the previous power cuts affecting your area and we apologise for this. Our engineers have at the local substation and will work to get your power back on as quickly and as safely as possible by 4.30AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 2.51AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 03:22', 'incident_id': 'INCD-372490-r', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-372490-r', 'postcodes_impacted': ['LL170EB', 'LL170ED', 'LL170EE', 'LL170EH', 'LL170NF', 'LL170NH', 'LL170NL'], 'received_time': '2021-04-15 01:25'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4396385038485815, 53.2539158824665]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the KA24 and KA13 postcode areas of Dalry and Kilwinning. We had no advance warning of this and only became aware of it at 12.06AM. Our team has managed to restore power to a number of properties in the area and are still working to repair the fault on our overhead line network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 5AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 2.09AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 04:00', 'incident_id': 'INCD-563617-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563617-s', 'postcodes_impacted': ['KA136PL', 'KA136PN'], 'received_time': '2021-04-15 00:06'}, 'geometry': {'type': 'Point', 'coordinates': [-4.714840468039331, 55.67942070711674]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the DG4 postcode area of Sanquhar. We had no advance warning of this and only became aware of it at 11.33PM. Repairs are taking longer than expected because of onsite difficulties and our team are now working to get your power back on as quickly and as safely as possible by 4AM. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 1.55AM on 15th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-15 03:00', 'incident_id': 'INCD-563593-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-563593-s', 'postcodes_impacted': ['DG46QA', 'DG46QH', 'DG46QQ'], 'received_time': '2021-04-14 22:33'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9939302678379476, 55.38356214246689]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171451-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD2 2LS': {'class': 'models.MapDataLocation', 'lat': 53.8207, 'lng': -1.72978}}, 'received_time': '2021-04-14 11:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.729779, 53.820682]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171542-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS24 8HH': {'class': 'models.MapDataLocation', 'lat': 54.6958, 'lng': -1.22321}}, 'received_time': '2021-04-14 14:31'}, 'geometry': {'type': 'Point', 'coordinates': [-1.222918, 54.695816]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-15 06:00', 'incident_id': 'INCD-171614-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO30 6HB': {'class': 'models.MapDataLocation', 'lat': 53.9744, 'lng': -1.08517}, 'YO30 6HL': {'class': 'models.MapDataLocation', 'lat': 53.9764, 'lng': -1.08467}}, 'received_time': '2021-04-15 00:04'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0849215, 53.9753745]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039185', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6RP': {'class': 'models.MapDataLocation', 'lat': 54.226, 'lng': -0.931904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.93177, 54.225837]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-15 09:00', 'incident_id': 'PPC039302', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO12 7RA': {'class': 'models.MapDataLocation', 'lat': 54.2863, 'lng': -0.408401}, 'YO12 7QZ': {'class': 'models.MapDataLocation', 'lat': 54.2883, 'lng': -0.408416}, 'YO12 7QU': {'class': 'models.MapDataLocation', 'lat': 54.2867, 'lng': -0.409063}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4086636666666667, 54.287082999999996]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:00', 'incident_id': 'PPC039392', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS21 1DY': {'class': 'models.MapDataLocation', 'lat': 53.9078, 'lng': -1.67444}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.674374, 53.907772]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039436', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO17 8NG': {'class': 'models.MapDataLocation', 'lat': 54.1678, 'lng': -0.683294}, 'YO17 8HL': {'class': 'models.MapDataLocation', 'lat': 54.1595, 'lng': -0.67792}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6819154999999999, 54.1650665]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:30', 'incident_id': 'PPC039464', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU19 2QF': {'class': 'models.MapDataLocation', 'lat': 53.7185, 'lng': 0.046434}, 'HU19 2QJ': {'class': 'models.MapDataLocation', 'lat': 53.7021, 'lng': 0.032745}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [0.0395975, 53.710342]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 15:30', 'incident_id': 'PPC039506', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF4 4QU': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60674}, 'WF4 4QZ': {'class': 'models.MapDataLocation', 'lat': 53.6463, 'lng': -1.60751}, 'WF4 4QX': {'class': 'models.MapDataLocation', 'lat': 53.6478, 'lng': -1.60475}, 'WF4 4QY': {'class': 'models.MapDataLocation', 'lat': 53.6475, 'lng': -1.60676}, 'WF4 4RF': {'class': 'models.MapDataLocation', 'lat': 53.6481, 'lng': -1.60871}, 'WF4 4RB': {'class': 'models.MapDataLocation', 'lat': 53.6468, 'lng': -1.60863}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6070548333333334, 53.647283166666675]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039538', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU11 5SX': {'class': 'models.MapDataLocation', 'lat': 53.9285, 'lng': -0.215499}, 'YO25 8ES': {'class': 'models.MapDataLocation', 'lat': 53.9218, 'lng': -0.27204}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.2429035, 53.924642500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 16:00', 'incident_id': 'PPC039670', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD9 3RJ': {'class': 'models.MapDataLocation', 'lat': 53.5661, 'lng': -1.82766}, 'HD7 5JW': {'class': 'models.MapDataLocation', 'lat': 53.6093, 'lng': -1.84604}, 'HD9 2QY': {'class': 'models.MapDataLocation', 'lat': 53.5635, 'lng': -1.82739}, 'HD7 1QD': {'class': 'models.MapDataLocation', 'lat': 53.562, 'lng': -1.82879}, 'HD9 2RS': {'class': 'models.MapDataLocation', 'lat': 53.5634, 'lng': -1.83002}, 'HD9 3XG': {'class': 'models.MapDataLocation', 'lat': 53.5676, 'lng': -1.82742}, 'HD9 2RU': {'class': 'models.MapDataLocation', 'lat': 53.5616, 'lng': -1.82773}, 'HD9 3RG': {'class': 'models.MapDataLocation', 'lat': 53.5658, 'lng': -1.83255}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.83140825, 53.569869999999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:00', 'incident_id': 'PPC039710', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 1BW': {'class': 'models.MapDataLocation', 'lat': 54.5686, 'lng': -1.41398}, 'TS21 1BL': {'class': 'models.MapDataLocation', 'lat': 54.5626, 'lng': -1.4179}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4159365, 54.565618]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:00', 'incident_id': 'PPC039712', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9ED': {'class': 'models.MapDataLocation', 'lat': 54.5124, 'lng': -1.18827}, 'TS8 9EE': {'class': 'models.MapDataLocation', 'lat': 54.5163, 'lng': -1.18558}, 'TS8 9DZ': {'class': 'models.MapDataLocation', 'lat': 54.5091, 'lng': -1.20688}, 'TS8 9RZ': {'class': 'models.MapDataLocation', 'lat': 54.5098, 'lng': -1.19689}, 'TS8 9EA': {'class': 'models.MapDataLocation', 'lat': 54.5115, 'lng': -1.20293}, 'TS8 9EB': {'class': 'models.MapDataLocation', 'lat': 54.5059, 'lng': -1.19525}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1955728333333333, 54.51142783333333]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 12:30', 'incident_id': 'PPC039738', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS8 9PW': {'class': 'models.MapDataLocation', 'lat': 54.5257, 'lng': -1.25075}, 'TS8 9ND': {'class': 'models.MapDataLocation', 'lat': 54.5265, 'lng': -1.25159}, 'TS8 9NA': {'class': 'models.MapDataLocation', 'lat': 54.5272, 'lng': -1.25179}, 'TS8 9SL': {'class': 'models.MapDataLocation', 'lat': 54.5233, 'lng': -1.24996}, 'TS8 9NB': {'class': 'models.MapDataLocation', 'lat': 54.5267, 'lng': -1.25064}, 'TS8 9PP': {'class': 'models.MapDataLocation', 'lat': 54.5263, 'lng': -1.2481}, 'TS8 9PR': {'class': 'models.MapDataLocation', 'lat': 54.5252, 'lng': -1.24904}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2502771428571429, 54.52583528571428]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 11:30', 'incident_id': 'PPC039756', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3AQ': {'class': 'models.MapDataLocation', 'lat': 54.9721, 'lng': -1.77168}, 'NE40 3BT': {'class': 'models.MapDataLocation', 'lat': 54.9725, 'lng': -1.76669}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3AA': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77236}, 'NE40 3AN': {'class': 'models.MapDataLocation', 'lat': 54.9736, 'lng': -1.7705}, 'NE40 3AJ': {'class': 'models.MapDataLocation', 'lat': 54.9727, 'lng': -1.77118}, 'NE40 3AW': {'class': 'models.MapDataLocation', 'lat': 54.9729, 'lng': -1.77177}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-15 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.771655375, 54.972390250000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039770', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD8 0LU': {'class': 'models.MapDataLocation', 'lat': 53.7988, 'lng': -1.80109}, 'BD8 0LT': {'class': 'models.MapDataLocation', 'lat': 53.7994, 'lng': -1.80114}, 'BD8 0LL': {'class': 'models.MapDataLocation', 'lat': 53.7989, 'lng': -1.79977}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.800667, 53.79901]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 14:00', 'incident_id': 'PPC039841', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL7 0JP': {'class': 'models.MapDataLocation', 'lat': 54.4382, 'lng': -1.55098}, 'DL7 0JR': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55171}, 'DL2 2NZ': {'class': 'models.MapDataLocation', 'lat': 54.4426, 'lng': -1.54943}, 'DL2 2PT': {'class': 'models.MapDataLocation', 'lat': 54.442, 'lng': -1.55132}, 'DL7 0JS': {'class': 'models.MapDataLocation', 'lat': 54.4397, 'lng': -1.55139}, 'DL7 0JU': {'class': 'models.MapDataLocation', 'lat': 54.4389, 'lng': -1.55004}}, 'received_time': '2021-04-15 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5508033333333333, 54.44001349999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-15 13:00', 'incident_id': 'PPC039912', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS29 0PR': {'class': 'models.MapDataLocation', 'lat': 53.9463, 'lng': -1.8972}, 'LS29 0PS': {'class': 'models.MapDataLocation', 'lat': 53.9459, 'lng': -1.89848}, 'LS29 0PX': {'class': 'models.MapDataLocation', 'lat': 53.9457, 'lng': -1.89815}, 'LS29 0LE': {'class': 'models.MapDataLocation', 'lat': 53.9458, 'lng': -1.90182}}, 'received_time': '2021-04-15 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8988005000000001, 53.94589875]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-15 04:00', 'incident_id': '10645719', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['M40 5GA', 'M40 5GD', 'M40 5GF', 'M40 5GG', 'M40 5QA', 'M40 5QB', 'M40 5QD', 'M40 5QE', 'M40 5QF', 'M40 5QJ', 'M40 9GE'], 'received_time': '2021-04-14 21:43'}, 'geometry': {'type': 'Point', 'coordinates': [-2.1866554545454546, 53.51893845454545]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});