document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T11:00:00', 'incident_id': 'INCD-248019-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248019-G', 'postcodes_impacted': ['TN91TR', 'TN91DS', 'TN91EJ', 'TN91TF', 'TN91TG', 'TN91TL', 'TN91TP', 'TN91TQ'], 'received_time': '2021-04-11T22:55:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.27067569382889667, 51.19307460404797]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247961-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247961-G', 'postcodes_impacted': ['TN74ET'], 'received_time': '2021-04-10T00:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.0891248562823091, 51.08024221963581]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247691-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247691-G', 'postcodes_impacted': ['BN11YE', 'UMS', 'BN11UA', 'BN11YA', 'BN14AB', 'BN14AD', 'BN14AE', 'BN14AF', 'BN14AG'], 'received_time': '2021-04-04T02:05:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.13702898035919064, 50.82597526373231]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an electricity cable that was damaged, causing a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-247943-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-247943-G', 'postcodes_impacted': ['CR82HG', 'CR82HF', 'CR82HN', 'CR82HR', 'CR84DU'], 'received_time': '2021-04-09T14:56:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.11745994733039047, 51.32891089086045]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248015-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248015-G', 'postcodes_impacted': ['CT27EN', 'CT27EQ', 'CT27EW', 'CT27HB', 'CT27HE', 'CT27RS', 'CT27RT', 'CT27RU'], 'received_time': '2021-04-11T13:28:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.0752229885850892, 51.286286733502784]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T03:30:00', 'incident_id': 'INCD-54229-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54229-V', 'postcodes_impacted': ['KT207UJ', 'KT207XA', 'KT207RT', 'KT207XB', 'KT207XJ'], 'received_time': '2021-04-11T14:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.24304189427542594, 51.28380165382045]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T04:30:00', 'incident_id': 'INCD-230259-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230259-Z', 'postcodes_impacted': ['CM81AP', 'CM81ND', 'CM81NQ', 'CM81PG', 'CM81PQ', 'CM81FA', 'CM81GY'], 'received_time': '2021-04-12T01:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.6296690541691962, 51.79467538454008]}}, {'type': 'Feature', 'properties': {'description': 'Our engineers are currently working to find out what caused this power cut.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230262-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230262-Z', 'postcodes_impacted': ['HP43JT', 'HP43JU', 'HP43JX', 'HP43JY', 'HP43JZ', 'HP43PF', 'HP43PG', 'HP43PQ'], 'received_time': '2021-04-12T04:20:37'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5838274145658553, 51.76352399026207]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-12T07:00:00', 'incident_id': 'INCD-38481-M', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-38481-M', 'postcodes_impacted': ['E130JS', 'E130JT', 'E130JU', 'E153EU', 'E153HJ', 'E130JN', 'E130JW', 'E153PX', 'E153PY', 'E153QD', 'E153QW'], 'received_time': '2021-04-12T03:51:22'}, 'geometry': {'type': 'Point', 'coordinates': [0.01628697231318049, 51.53414755439514]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5548\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 06:30:00', 'incident_id': 'HB5548', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['KW1 4XD', 'KW1 5HP', 'KW1 5HW'], 'received_time': '2021-04-12 03:25:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.0931416666666665, 58.46618266666667]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB5538\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-12 12:30:00', 'incident_id': 'HB5538', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO18 1AD', 'SO18 1AF', 'SO18 1AG', 'SO18 1AP', 'SO18 1AQ', 'SO18 1BZ', 'SO18 1DP'], 'received_time': '2021-04-12 00:52:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3785162857142856, 50.91698242857142]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 07:00:00', 'incident_id': 'INCD-125424-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125424-B', 'postcodes_impacted': ['BS21 6JE', 'BS21 6JY', 'BS21 6JD', 'BS21 6JB'], 'received_time': '2021-04-11 20:59:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.8519594999999995, 51.431327249999995]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 04:00:00', 'incident_id': 'INCD-125426-B', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-125426-B', 'postcodes_impacted': ['BS26 2UF', 'BS26 2UG'], 'received_time': '2021-04-11 21:44:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9169845, 51.2687475]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 05:30:00', 'incident_id': 'INCD-1630-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-1630-g', 'postcodes_impacted': ['NP25 3SD', 'NP25 3SE', 'NP25 3JH', 'NP25 3SF', 'NP25 3JU', 'NP25 3SA', 'NP25 3TN', 'NP25 3NQ', 'NP25 3JS', 'NP25 3TG'], 'received_time': '2021-04-12 01:58:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.6950451, 51.8097135]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 06:30:00', 'incident_id': 'INCD-357652-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357652-G', 'postcodes_impacted': ['GL14 3AD', 'GL14 3EG', 'GL14 3DP', 'GL14 3AB', 'GL14 3AU', 'GL14 3EE', 'GL14 3EQ', 'GL14 3FD', 'GL14 3ER', 'GL14 3AE'], 'received_time': '2021-04-12 03:26:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.5038240000000003, 51.80880549999999]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': null, 'incident_id': 'INCD-416261-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416261-E', 'postcodes_impacted': ['GL50 4DU'], 'received_time': '2021-04-11 10:49:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.076144, 51.903077]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-12 08:00:00', 'incident_id': 'INCD-152331-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152331-H', 'postcodes_impacted': ['CV8 3FJ', 'CV8 3FH', 'CV8 3EZ', 'CV8 3EY', 'CV8 3FB', 'CV8 3EX'], 'received_time': '2021-04-12 02:14:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4362488333333332, 52.364861166666664]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-504297-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504297-f', 'postcodes_impacted': ['FK38EL', 'FK38EP', 'FK38HR'], 'received_time': '2021-04-11 23:48'}, 'geometry': {'type': 'Point', 'coordinates': [-3.7386121515552144, 56.0199778289138]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-02 00:30', 'incident_id': 'INCD-504153-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-504153-f', 'postcodes_impacted': ['ML41DR', 'ML41DS', 'ML41DT'], 'received_time': '2021-04-11 12:36'}, 'geometry': {'type': 'Point', 'coordinates': [-4.0024738755500815, 55.81845018500335]}}, {'type': 'Feature', 'properties': {'description': 'Damaged EHV U/G In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-168880-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 2NB': {'class': 'models.MapDataLocation', 'lat': 54.0133, 'lng': -1.06187}}, 'received_time': '2021-04-05 14:08'}, 'geometry': {'type': 'Point', 'coordinates': [-1.061855, 54.013288]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-170226-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF16 9EH': {'class': 'models.MapDataLocation', 'lat': 53.7116, 'lng': -1.67113}}, 'received_time': '2021-04-09 13:13'}, 'geometry': {'type': 'Point', 'coordinates': [-1.67109, 53.71158]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 11:00', 'incident_id': 'INCD-170718-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD7 5LA': {'class': 'models.MapDataLocation', 'lat': 53.6202, 'lng': -1.87787}, 'HD7 5JY': {'class': 'models.MapDataLocation', 'lat': 53.6207, 'lng': -1.87921}, 'HD7 5JZ': {'class': 'models.MapDataLocation', 'lat': 53.6204, 'lng': -1.8789}, 'HD7 5LU': {'class': 'models.MapDataLocation', 'lat': 53.6215, 'lng': -1.87681}}, 'received_time': '2021-04-12 00:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.87829175, 53.620687999999994]}}, {'type': 'Feature', 'properties': {'description': 'U/G HV Mains Repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 08:00', 'incident_id': 'INCD-170740-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN5 8TS': {'class': 'models.MapDataLocation', 'lat': 53.5316, 'lng': -1.17538}, 'DN5 8PE': {'class': 'models.MapDataLocation', 'lat': 53.5334, 'lng': -1.17332}, 'DN5 8PF': {'class': 'models.MapDataLocation', 'lat': 53.5342, 'lng': -1.17355}, 'DN5 8PD': {'class': 'models.MapDataLocation', 'lat': 53.5343, 'lng': -1.17245}, 'DN5 8PA': {'class': 'models.MapDataLocation', 'lat': 53.5341, 'lng': -1.17198}, 'DN5 8PB': {'class': 'models.MapDataLocation', 'lat': 53.5338, 'lng': -1.17194}, 'DN5 7TW': {'class': 'models.MapDataLocation', 'lat': 53.5309, 'lng': -1.1744}, 'DN5 8LR': {'class': 'models.MapDataLocation', 'lat': 53.533, 'lng': -1.17457}, 'DN5 8UF': {'class': 'models.MapDataLocation', 'lat': 53.5331, 'lng': -1.17702}, 'DN5 8LT': {'class': 'models.MapDataLocation', 'lat': 53.5321, 'lng': -1.17404}, 'DN5 8UG': {'class': 'models.MapDataLocation', 'lat': 53.5325, 'lng': -1.17645}, 'DN5 8LS': {'class': 'models.MapDataLocation', 'lat': 53.5316, 'lng': -1.17319}, 'DN5 8UB': {'class': 'models.MapDataLocation', 'lat': 53.5326, 'lng': -1.17525}, 'DN5 8LJ': {'class': 'models.MapDataLocation', 'lat': 53.5327, 'lng': -1.17195}, 'DN5 8UQ': {'class': 'models.MapDataLocation', 'lat': 53.5319, 'lng': -1.17587}, 'DN5 8LE': {'class': 'models.MapDataLocation', 'lat': 53.5337, 'lng': -1.17009}, 'DN5 8LH': {'class': 'models.MapDataLocation', 'lat': 53.5325, 'lng': -1.17138}, 'DN5 8LP': {'class': 'models.MapDataLocation', 'lat': 53.5325, 'lng': -1.17397}}, 'received_time': '2021-04-12 02:19'}, 'geometry': {'type': 'Point', 'coordinates': [-1.173712277777778, 53.53280205555555]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-12 05:45', 'incident_id': 'INCD-170741-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO18 8NR': {'class': 'models.MapDataLocation', 'lat': 54.2513, 'lng': -0.790978}}, 'received_time': '2021-04-12 02:39'}, 'geometry': {'type': 'Point', 'coordinates': [-0.790963, 54.251291]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 12:00', 'incident_id': 'PPC038371', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL2 3UF': {'class': 'models.MapDataLocation', 'lat': 54.5737, 'lng': -1.70742}, 'DL2 3UG': {'class': 'models.MapDataLocation', 'lat': 54.5734, 'lng': -1.70365}, 'DL2 3QU': {'class': 'models.MapDataLocation', 'lat': 54.5692, 'lng': -1.82616}, 'DL2 3UQ': {'class': 'models.MapDataLocation', 'lat': 54.5737, 'lng': -1.70374}, 'DL2 3UH': {'class': 'models.MapDataLocation', 'lat': 54.5771, 'lng': -1.68989}}, 'received_time': '2021-04-12 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7262056000000001, 54.5734114]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 12:00', 'incident_id': 'PPC038420', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S75 4PE': {'class': 'models.MapDataLocation', 'lat': 53.5365, 'lng': -1.55847}, 'S75 4PP': {'class': 'models.MapDataLocation', 'lat': 53.5383, 'lng': -1.55623}, 'S75 4PN': {'class': 'models.MapDataLocation', 'lat': 53.538, 'lng': -1.55835}, 'S75 4PL': {'class': 'models.MapDataLocation', 'lat': 53.5376, 'lng': -1.55894}, 'S75 4PH': {'class': 'models.MapDataLocation', 'lat': 53.537, 'lng': -1.55772}, 'S75 4PY': {'class': 'models.MapDataLocation', 'lat': 53.5372, 'lng': -1.55922}, 'S75 4PW': {'class': 'models.MapDataLocation', 'lat': 53.5378, 'lng': -1.55698}}, 'received_time': '2021-04-12 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5579508571428573, 53.537510857142856]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 13:00', 'incident_id': 'PPC038958', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3TW': {'class': 'models.MapDataLocation', 'lat': 54.9694, 'lng': -1.77985}, 'NE40 3QR': {'class': 'models.MapDataLocation', 'lat': 54.9769, 'lng': -1.76178}, 'NE40 3BH': {'class': 'models.MapDataLocation', 'lat': 54.9704, 'lng': -1.77748}, 'NE40 3AY': {'class': 'models.MapDataLocation', 'lat': 54.9703, 'lng': -1.7762}, 'NE40 3AX': {'class': 'models.MapDataLocation', 'lat': 54.9705, 'lng': -1.77651}, 'NE40 3AG': {'class': 'models.MapDataLocation', 'lat': 54.97, 'lng': -1.77888}}, 'received_time': '2021-04-12 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7751405000000002, 54.97122616666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-16 11:00', 'incident_id': 'PPC039115', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU17 8WB': {'class': 'models.MapDataLocation', 'lat': 53.8356, 'lng': -0.425859}, 'HU17 8WA': {'class': 'models.MapDataLocation', 'lat': 53.8345, 'lng': -0.427512}, 'HU17 0RP': {'class': 'models.MapDataLocation', 'lat': 53.8191, 'lng': -0.412291}, 'HU17 7NH': {'class': 'models.MapDataLocation', 'lat': 53.8801, 'lng': -0.463499}, 'HU17 0SY': {'class': 'models.MapDataLocation', 'lat': 53.8337, 'lng': -0.416766}, 'HU17 8WJ': {'class': 'models.MapDataLocation', 'lat': 53.8355, 'lng': -0.425196}, 'HU17 0RL': {'class': 'models.MapDataLocation', 'lat': 53.8353, 'lng': -0.423149}, 'HU17 8YP': {'class': 'models.MapDataLocation', 'lat': 53.8356, 'lng': -0.427548}, 'HU17 8WH': {'class': 'models.MapDataLocation', 'lat': 53.8361, 'lng': -0.426283}, 'HU17 0RW': {'class': 'models.MapDataLocation', 'lat': 53.8202, 'lng': -0.413873}, 'HU17 0RN': {'class': 'models.MapDataLocation', 'lat': 53.8212, 'lng': -0.408368}, 'HU17 8WD': {'class': 'models.MapDataLocation', 'lat': 53.8346, 'lng': -0.429286}}, 'received_time': '2021-04-12 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.42530500000000004, 53.835169750000006]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 10:30', 'incident_id': 'PPC039416', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO32 9UE': {'class': 'models.MapDataLocation', 'lat': 53.9898, 'lng': -1.01333}, 'YO32 9UD': {'class': 'models.MapDataLocation', 'lat': 53.9838, 'lng': -1.02351}, 'YO32 9LE': {'class': 'models.MapDataLocation', 'lat': 53.9903, 'lng': -1.013}, 'YO19 5XG': {'class': 'models.MapDataLocation', 'lat': 53.9833, 'lng': -0.996971}}, 'received_time': '2021-04-12 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0115075, 53.98687475]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'PPC039578', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO7 4DB': {'class': 'models.MapDataLocation', 'lat': 54.246, 'lng': -1.37907}, 'YO7 4BD': {'class': 'models.MapDataLocation', 'lat': 54.2952, 'lng': -1.33052}, 'YO7 4DE': {'class': 'models.MapDataLocation', 'lat': 54.2542, 'lng': -1.40274}, 'YO7 4DD': {'class': 'models.MapDataLocation', 'lat': 54.2443, 'lng': -1.38327}, 'YO7 4DW': {'class': 'models.MapDataLocation', 'lat': 54.2588, 'lng': -1.39464}, 'YO7 4AZ': {'class': 'models.MapDataLocation', 'lat': 54.2862, 'lng': -1.33397}}, 'received_time': '2021-04-12 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3686370000000003, 54.264208499999995]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 10:30', 'incident_id': 'PPC039591', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH2 2RW': {'class': 'models.MapDataLocation', 'lat': 54.8621, 'lng': -1.60628}, 'DH2 2QY': {'class': 'models.MapDataLocation', 'lat': 54.8642, 'lng': -1.60881}, 'DH2 2QZ': {'class': 'models.MapDataLocation', 'lat': 54.8644, 'lng': -1.60896}, 'DH2 2RA': {'class': 'models.MapDataLocation', 'lat': 54.8645, 'lng': -1.6092}, 'DH2 2QP': {'class': 'models.MapDataLocation', 'lat': 54.864, 'lng': -1.60889}, 'DH2 2RE': {'class': 'models.MapDataLocation', 'lat': 54.8667, 'lng': -1.60961}, 'DH2 2QS': {'class': 'models.MapDataLocation', 'lat': 54.8642, 'lng': -1.60786}, 'DH2 2RD': {'class': 'models.MapDataLocation', 'lat': 54.8666, 'lng': -1.60993}, 'DH2 2QT': {'class': 'models.MapDataLocation', 'lat': 54.8638, 'lng': -1.60682}, 'DH2 2RB': {'class': 'models.MapDataLocation', 'lat': 54.8647, 'lng': -1.60938}, 'DH2 2RF': {'class': 'models.MapDataLocation', 'lat': 54.8682, 'lng': -1.61119}}, 'received_time': '2021-04-12 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6088580909090908, 54.864867090909094]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 14:30', 'incident_id': 'PPC039779', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 5HH': {'class': 'models.MapDataLocation', 'lat': 54.0602, 'lng': -2.00467}, 'BD23 5EY': {'class': 'models.MapDataLocation', 'lat': 54.0686, 'lng': -2.01688}, 'BD23 5HQ': {'class': 'models.MapDataLocation', 'lat': 54.0616, 'lng': -2.00528}}, 'received_time': '2021-04-12 12:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.009091333333333, 54.063546333333335]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 13:00', 'incident_id': 'PPC039844', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN1 2AQ': {'class': 'models.MapDataLocation', 'lat': 53.3129, 'lng': -0.666817}, 'LN1 2AE': {'class': 'models.MapDataLocation', 'lat': 53.3152, 'lng': -0.665754}, 'LN1 2AU': {'class': 'models.MapDataLocation', 'lat': 53.3127, 'lng': -0.669613}, 'LN1 2AF': {'class': 'models.MapDataLocation', 'lat': 53.3139, 'lng': -0.667536}, 'LN1 2BP': {'class': 'models.MapDataLocation', 'lat': 53.3116, 'lng': -0.661484}, 'LN1 2AX': {'class': 'models.MapDataLocation', 'lat': 53.3134, 'lng': -0.66608}, 'LN1 2AY': {'class': 'models.MapDataLocation', 'lat': 53.3135, 'lng': -0.666842}, 'LN1 2AZ': {'class': 'models.MapDataLocation', 'lat': 53.3136, 'lng': -0.667694}}, 'received_time': '2021-04-12 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.6663928750000001, 53.313367]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 13:30', 'incident_id': 'PPC039852', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS17 5AS': {'class': 'models.MapDataLocation', 'lat': 53.8381, 'lng': -1.54661}, 'LS17 5AT': {'class': 'models.MapDataLocation', 'lat': 53.8386, 'lng': -1.54583}, 'LS17 5AP': {'class': 'models.MapDataLocation', 'lat': 53.8365, 'lng': -1.54769}, 'LS17 5AR': {'class': 'models.MapDataLocation', 'lat': 53.8385, 'lng': -1.54627}}, 'received_time': '2021-04-12 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5466164999999998, 53.8379575]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-12 13:00', 'incident_id': 'PPC039863', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'WF2 6NF': {'class': 'models.MapDataLocation', 'lat': 53.6502, 'lng': -1.48648}, 'WF2 6SU': {'class': 'models.MapDataLocation', 'lat': 53.6491, 'lng': -1.4872}, 'WF2 6NE': {'class': 'models.MapDataLocation', 'lat': 53.6498, 'lng': -1.48715}}, 'received_time': '2021-04-12 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.486934, 53.649702]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});