document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-231679-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231679-Z', 'postcodes_impacted': ['EN13ED', 'EN13EF', 'EN13EG', 'EN26BN', 'EN26LE'], 'received_time': '2021-04-18T16:41:49'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08101181882386922, 51.65239850641596]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:00:00', 'incident_id': 'INCD-260266-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-260266-J', 'postcodes_impacted': ['E163DX', 'NW102PN', 'NW102PP', 'NW102PR', 'NW102PX', 'NW25BU', 'NW25BY', 'NW25DJ', 'NW25DL', 'NW25EA'], 'received_time': '2021-04-18T20:29:21'}, 'geometry': {'type': 'Point', 'coordinates': [-0.20403668522784618, 51.544038362808394]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T22:30:00', 'incident_id': 'INCD-231628-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231628-Z', 'postcodes_impacted': ['IP112AA', 'IP117PJ', 'IP117PL', 'IP117PQ', 'IP117PT', 'IP117PW', 'IP118AF', 'IP118AH', 'IP118AQ'], 'received_time': '2021-04-18T09:38:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3467314811647677, 51.959905548147724]}}, {'type': 'Feature', 'properties': {'description': 'We were investigating an overhead electricity line fault which caused a power cut in the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T22:00:00', 'incident_id': 'INCD-54715-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54715-V', 'postcodes_impacted': ['TN147NP', 'TN147NR', 'TN147NS', 'TN147NW', 'TN147NL'], 'received_time': '2021-04-18T15:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.12325647134278275, 51.324041945358886]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T22:30:00', 'incident_id': 'INCD-248312-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248312-G', 'postcodes_impacted': ['TN354SN', 'TN354SD'], 'received_time': '2021-04-18T18:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.5714416376972302, 50.90862633958788]}}, {'type': 'Feature', 'properties': {'description': 'Our engineers are currently working to find out what caused this power cut.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-248320-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248320-G', 'postcodes_impacted': ['TN393UD', 'TN393UE', 'TN394LA', 'TN394LB', 'TN394LE', 'TN394LF', 'TN394QS', 'TN394SA'], 'received_time': '2021-04-18T21:15:34'}, 'geometry': {'type': 'Point', 'coordinates': [0.44218924952961663, 50.84552000300527]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:00:00', 'incident_id': 'INCD-231686-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231686-Z', 'postcodes_impacted': ['HP42SZ', 'HP53PW'], 'received_time': '2021-04-18T18:00:53'}, 'geometry': {'type': 'Point', 'coordinates': [-0.5825307025082, 51.743024032353446]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-19T00:00:00', 'incident_id': 'INCD-231692-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-231692-Z', 'postcodes_impacted': ['HP160AA', 'HP160AL', 'HP160AQ', 'HP160AU', 'HP160DA', 'HP160ER', 'HP169AA', 'HP169AE', 'HP169AL', 'HP169AZ', 'HP169EJ', 'HP169PA'], 'received_time': '2021-04-18T19:50:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.7093819325509078, 51.70250841698775]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T16:30:00', 'incident_id': 'INCD-229979-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-229979-Z', 'postcodes_impacted': ['MK410HT', 'MK410JW', 'MK410LF', 'MK410QQ'], 'received_time': '2021-04-18T08:40:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.4130208762534288, 52.14851199913749]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-227426-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227426-Z', 'postcodes_impacted': ['NR128AH', 'NR128AN', 'NR128ES', 'NR128ET', 'NR128EU', 'NR128EY'], 'received_time': '2021-04-18T09:16:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.3938054734244327, 52.74779974912337]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-218127-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-218127-Z', 'postcodes_impacted': ['CB40FB', 'CB40GN', 'CB40WE', 'CB44BH', 'CB44WE'], 'received_time': '2021-04-18T08:34:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.1483293076776418, 52.23539636016507]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T15:30:00', 'incident_id': 'INCD-227958-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-227958-Z', 'postcodes_impacted': ['CB51SA', 'CB61SA', 'CB61SB', 'CB61SE', 'CB61SG', 'CB64QW', 'CB74QW'], 'received_time': '2021-04-18T08:12:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.2764796588146815, 52.428463015294675]}}, {'type': 'Feature', 'properties': {'description': "We're carrying out planned work in your area. For our engineers to carry it out safely they need to turn the power off. We're doing this work as it's essential to provide reliable electricity supplies to your area. We're sorry for any inconvenience caused and thank you for your patience.", 'dno': 'ukpn', 'estimated_restored_time': '2021-04-18T12:00:00', 'incident_id': 'INCD-228076-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-228076-Z', 'postcodes_impacted': ['IP145NR', 'IP146BH', 'IP146JT', 'IP146JZ', 'IP146LA', 'IP146LB', 'IP146NF', 'IP146QP', 'IP146QR', 'IP146QS', 'IP146QU', 'IP146QW', 'IP146RW', 'IP146SR', 'IP146ST'], 'received_time': '2021-04-18T09:03:00'}, 'geometry': {'type': 'Point', 'coordinates': [1.182571413009092, 52.2258367299417]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8557\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'HB8557', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['RG26 3PA', 'RG26 3RJ', 'RG26 3SF'], 'received_time': '2021-04-18 19:25:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.131, 51.349483666666664]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8552\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 20:30:00', 'incident_id': 'HB8552', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['OX25 6LR', 'OX25 6LS', 'OX25 6LU'], 'received_time': '2021-04-18 17:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2593783333333335, 51.96531099999999]}}, {'type': 'Feature', 'properties': {'description': 'We’re sorry for the loss of supply. We currently have a fault affecting the areas listed. Our engineers are on site working hard to get the power back on as quickly as they can. If you need more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) and quote reference \'HB8454\'', 'dno': 'ssen', 'estimated_restored_time': '2021-04-18 21:00:00', 'incident_id': 'HB8454', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['PO33', 'PO36 8DA', 'PO36 8DW', 'PO36 8JP', 'PO36 8JR', 'PO36 8JT', 'PO36 8JU', 'PO36 8JX', 'PO36 8LB'], 'received_time': '2021-04-18 15:10:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.155699, 50.653097625]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:00:00', 'incident_id': 'INCD-102-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-102-q', 'postcodes_impacted': ['BS16 6BT', 'BS16 6BX', 'BS16 6BU'], 'received_time': '2021-04-18 14:46:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.503409, 51.49209199999999]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 21:30:00', 'incident_id': 'INCD-120-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-120-q', 'postcodes_impacted': ['BA6 8NJ'], 'received_time': '2021-04-18 13:32:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.656035, 51.146764]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-19 00:00:00', 'incident_id': 'INCD-103-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-103-q', 'postcodes_impacted': ['BS39 7RY', 'BS39 7RF', 'BS39 7SY'], 'received_time': '2021-04-18 15:11:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4981076666666664, 51.30156933333333]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-123-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-123-q', 'postcodes_impacted': ['PL19 0HJ', 'PL19 0FF', 'PL19 0HZ'], 'received_time': '2021-04-18 19:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [-4.131462666666667, 50.557763]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-106-q', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-106-q', 'postcodes_impacted': ['TR11 4AU', 'TR11 4AT', 'TR11 4ET', 'TR11 3HH', 'TR11 3LG', 'TR11 3HL', 'TR11 3XP'], 'received_time': '2021-04-18 15:35:00'}, 'geometry': {'type': 'Point', 'coordinates': [-5.064948857142857, 50.15164814285714]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-2157-g', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-2157-g', 'postcodes_impacted': ['CF37 3NW'], 'received_time': '2021-04-18 19:54:00'}, 'geometry': {'type': 'Point', 'coordinates': [-3.361234, 51.621442]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 23:00:00', 'incident_id': 'INCD-358051-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-358051-G', 'postcodes_impacted': ['B24 9HU'], 'received_time': '2021-04-18 13:23:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.833397, 52.526755]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 21:00:00', 'incident_id': 'INCD-44337-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44337-D', 'postcodes_impacted': ['DE21 4LY', 'DE21 4JP', 'DE21 4LZ', 'DE21 4JQ'], 'received_time': '2021-04-18 17:42:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4334117499999999, 52.93495025]}}, {'type': 'Feature', 'properties': {'description': 'Awaiting', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-152844-H', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-152844-H', 'postcodes_impacted': ['DE24 8UH', 'DE24 8RB', 'DE24 8RD', 'DE24 8QN'], 'received_time': '2021-04-18 19:41:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4293687499999999, 52.8986225]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-18 22:30:00', 'incident_id': 'INCD-44340-D', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-44340-D', 'postcodes_impacted': ['NN13 5QX', 'NN13 5PU', 'NN13 5PX', 'NN13 5PT', 'NN13 5TX'], 'received_time': '2021-04-18 19:19:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0791533999999998, 52.0831476]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the ST7 postcode area of Stoke on Trent, affecting properties in Audley Road, Mere Lake Road and surrounding streets. We had no advance warning of this and only became aware of it at 9:07PM. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to site to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible, and we expect the power to be restored by 11:15PM. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:08PM on 18th April 2021.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 22:03', 'incident_id': 'INCD-1809512-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809512-i', 'postcodes_impacted': ['ST71UF', 'ST72UQ'], 'received_time': '2021-04-18 21:03'}, 'geometry': {'type': 'Point', 'coordinates': [-2.289888308581665, 53.08286658571883]}}, {'type': 'Feature', 'properties': {'description': 'There is power cut in the ML6 postcode area of Airdrie. We had no advance warning of this and only became aware of it at 8.55pm. Our control centre will attempt to reset the network remotely to restore power in stages, and our emergency response team are on their way to the local area to investigate and repair the fault. Our team will work to get your power back on as quickly and as safely as possible by 11.00pm. Once they arrive, or when we receive any update regarding the cause, we will be able to provide you with more information. We apologise for the inconvenience and thank you for your patience. This message was updated 9.07pm on Sunday 18th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 21:55', 'incident_id': 'INCD-564931-s', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-564931-s', 'postcodes_impacted': ['ML6', 'ML60LA', 'ML60LB', 'ML60LD', 'ML60LF', 'ML60LG', 'ML60LH', 'ML60LJ', 'ML60LL', 'ML60LN', 'ML60LP', 'ML60LQ', 'ML60LR', 'ML60LS', 'ML60LT', 'ML60LU', 'ML60LW', 'ML60LX', 'ML60ND', 'ML60NE', 'ML60NF', 'ML60NG', 'ML60NJ', 'ML60NQ', 'ML60NR', 'ML60NW', 'ML60PB', 'ML60PJ', 'ML60PL', 'ML60PN', 'ML60PP', 'ML60PQ', 'ML60PR', 'ML60PW', 'ML60QL', 'ML60WW', 'ML62PJ', 'ML66SE', 'ML66SF', 'ML66SH', 'ML66SQ', 'ML67FP', 'ML67JA', 'ML67SP', 'ML67SS', 'ML67ST', 'ML69BQ', 'ML69PJ'], 'received_time': '2021-04-18 20:55'}, 'geometry': {'type': 'Point', 'coordinates': [-3.9916514473246094, 55.88243591418385]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'INCD-1809482-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809482-i', 'postcodes_impacted': ['SY218QX'], 'received_time': '2021-04-18 19:08'}, 'geometry': {'type': 'Point', 'coordinates': [-3.281845105886772, 52.6109282637266]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-19 00:00', 'incident_id': 'INCD-1809476-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809476-i', 'postcodes_impacted': ['L320RE', 'L320RG', 'L320RH', 'L320RJ', 'L320RL', 'L320RP', 'L320UZ', 'L324RY', 'L324RZ', 'L324SF', 'L324SG', 'L324SH', 'L324SJ', 'L324SL', 'L324SN', 'L324SP', 'L324SQ', 'L324SR', 'L324SS', 'L324SU', 'L324SW', 'L324SX', 'L324TA', 'L324TB', 'L324TE', 'L324TG', 'L324TH', 'L324TQ', 'L324XD'], 'received_time': '2021-04-18 18:47'}, 'geometry': {'type': 'Point', 'coordinates': [-2.9061342835164226, 53.47918628023177]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '', 'incident_id': 'INCD-1809464-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809464-i', 'postcodes_impacted': ['LL302LL', 'LL303EP', 'LL303HA', 'LL303HN', 'LL303HP', 'LL303HR', 'LL303NA', 'LL303ND', 'LL303NE', 'LL303NF'], 'received_time': '2021-04-18 18:26'}, 'geometry': {'type': 'Point', 'coordinates': [-3.775702925094172, 53.31561022295857]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 21:00', 'incident_id': 'INCD-1809458-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1809458-i', 'postcodes_impacted': ['CH661LT'], 'received_time': '2021-04-18 18:26'}, 'geometry': {'type': 'Point', 'coordinates': [-2.92582953433331, 53.28538944326534]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-18 21:30', 'incident_id': 'INCD-505359-f', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-505359-f', 'postcodes_impacted': ['PA124JG'], 'received_time': '2021-04-18 09:13'}, 'geometry': {'type': 'Point', 'coordinates': [-4.607530152684786, 55.78436993712486]}}, {'type': 'Feature', 'properties': {'description': 'Smart Meter Cutout Change In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-17176-D', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS9 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.7936, 'lng': -1.514}}, 'received_time': '2021-04-17 11:12'}, 'geometry': {'type': 'Point', 'coordinates': [-1.513938, 53.79355]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 21:30', 'incident_id': 'INCD-172446-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO16 7NW': {'class': 'models.MapDataLocation', 'lat': 54.0927, 'lng': -0.204831}}, 'received_time': '2021-04-18 11:10'}, 'geometry': {'type': 'Point', 'coordinates': [-0.204831, 54.092742]}}, {'type': 'Feature', 'properties': {'description': 'U/G LV Mains Repair (Other) In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:00', 'incident_id': 'INCD-172456-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S60 2JR': {'class': 'models.MapDataLocation', 'lat': 53.4231, 'lng': -1.358}, 'S60 2AJ': {'class': 'models.MapDataLocation', 'lat': 53.4234, 'lng': -1.35467}, 'S60 2JA': {'class': 'models.MapDataLocation', 'lat': 53.4247, 'lng': -1.35751}, 'S60 2UR': {'class': 'models.MapDataLocation', 'lat': 53.4188, 'lng': -1.35834}, 'S60 2JF': {'class': 'models.MapDataLocation', 'lat': 53.4235, 'lng': -1.35889}, 'S60 2UW': {'class': 'models.MapDataLocation', 'lat': 53.4232, 'lng': -1.35759}, 'S60 2UP': {'class': 'models.MapDataLocation', 'lat': 53.4209, 'lng': -1.35824}}, 'received_time': '2021-04-18 12:05'}, 'geometry': {'type': 'Point', 'coordinates': [-1.3576714285714286, 53.42229514285714]}}, {'type': 'Feature', 'properties': {'description': 'O/H HV Mains Repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172457-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HU12 9NA': {'class': 'models.MapDataLocation', 'lat': 53.7214, 'lng': -0.17326}, 'HU12 9ST': {'class': 'models.MapDataLocation', 'lat': 53.7084, 'lng': -0.120367}, 'HU12 9RA': {'class': 'models.MapDataLocation', 'lat': 53.7088, 'lng': -0.113881}, 'HU12 9GF': {'class': 'models.MapDataLocation', 'lat': 53.7153, 'lng': -0.148428}, 'HU12 9JS': {'class': 'models.MapDataLocation', 'lat': 53.7127, 'lng': -0.138405}, 'HU12 9NN': {'class': 'models.MapDataLocation', 'lat': 53.7151, 'lng': -0.151273}, 'HU12 9JP': {'class': 'models.MapDataLocation', 'lat': 53.717, 'lng': -0.145052}, 'HU12 9NL': {'class': 'models.MapDataLocation', 'lat': 53.7143, 'lng': -0.148991}, 'HU12 9LS': {'class': 'models.MapDataLocation', 'lat': 53.7223, 'lng': -0.17971}, 'HU12 9NJ': {'class': 'models.MapDataLocation', 'lat': 53.7149, 'lng': -0.148691}, 'HU12 9NG': {'class': 'models.MapDataLocation', 'lat': 53.7187, 'lng': -0.16318}, 'HU12 9NH': {'class': 'models.MapDataLocation', 'lat': 53.716, 'lng': -0.148248}, 'HU12 9HU': {'class': 'models.MapDataLocation', 'lat': 53.7255, 'lng': -0.136066}, 'HU18 1QX': {'class': 'models.MapDataLocation', 'lat': 53.9108, 'lng': -0.166132}, 'HU12 9NQ': {'class': 'models.MapDataLocation', 'lat': 53.719, 'lng': -0.156254}, 'HU12 9NP': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -0.156981}}, 'received_time': '2021-04-18 12:12'}, 'geometry': {'type': 'Point', 'coordinates': [-0.14964825, 53.7285841875]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-172511-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD6 3TH': {'class': 'models.MapDataLocation', 'lat': 53.6914, 'lng': -1.77595}}, 'received_time': '2021-04-18 16:20'}, 'geometry': {'type': 'Point', 'coordinates': [-1.775946, 53.691385]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 21:30', 'incident_id': 'INCD-172528-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH6 2HZ': {'class': 'models.MapDataLocation', 'lat': 54.7609, 'lng': -1.39454}}, 'received_time': '2021-04-18 18:17'}, 'geometry': {'type': 'Point', 'coordinates': [-1.394559, 54.760932]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:30', 'incident_id': 'INCD-172531-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO31 8SX': {'class': 'models.MapDataLocation', 'lat': 53.974, 'lng': -1.06966}, 'YO31 8SY': {'class': 'models.MapDataLocation', 'lat': 53.9749, 'lng': -1.06955}, 'YO31 8SZ': {'class': 'models.MapDataLocation', 'lat': 53.9749, 'lng': -1.07063}, 'YO31 8SL': {'class': 'models.MapDataLocation', 'lat': 53.9728, 'lng': -1.06856}, 'YO31 9JZ': {'class': 'models.MapDataLocation', 'lat': 53.9738, 'lng': -1.06878}, 'YO31 9AA': {'class': 'models.MapDataLocation', 'lat': 53.9763, 'lng': -1.06959}, 'YO31 9AD': {'class': 'models.MapDataLocation', 'lat': 53.9744, 'lng': -1.06852}, 'YO31 8SQ': {'class': 'models.MapDataLocation', 'lat': 53.9732, 'lng': -1.06669}, 'YO31 8SF': {'class': 'models.MapDataLocation', 'lat': 53.9732, 'lng': -1.07055}}, 'received_time': '2021-04-18 18:22'}, 'geometry': {'type': 'Point', 'coordinates': [-1.0691700000000002, 53.97415688888889]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 11:00', 'incident_id': 'INCD-172541-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HG4 1LE': {'class': 'models.MapDataLocation', 'lat': 54.1383, 'lng': -1.52171}}, 'received_time': '2021-04-18 18:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.521745, 54.138165]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': 'INCD-172548-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL3 8PE': {'class': 'models.MapDataLocation', 'lat': 54.5206, 'lng': -1.57082}}, 'received_time': '2021-04-18 18:56'}, 'geometry': {'type': 'Point', 'coordinates': [-1.570859, 54.520624]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:30', 'incident_id': 'INCD-172556-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN12 3NJ': {'class': 'models.MapDataLocation', 'lat': 53.4817, 'lng': -1.24181}}, 'received_time': '2021-04-18 19:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.241761, 53.481732]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:30', 'incident_id': 'INCD-172557-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8AY': {'class': 'models.MapDataLocation', 'lat': 53.4253, 'lng': -1.22089}, 'S66 8PF': {'class': 'models.MapDataLocation', 'lat': 53.4062, 'lng': -1.14557}, 'S66 8BZ': {'class': 'models.MapDataLocation', 'lat': 53.4249, 'lng': -1.22116}, 'S66 8DA': {'class': 'models.MapDataLocation', 'lat': 53.4263, 'lng': -1.22231}, 'S66 8BU': {'class': 'models.MapDataLocation', 'lat': 53.4235, 'lng': -1.2201}, 'S66 8BF': {'class': 'models.MapDataLocation', 'lat': 53.4244, 'lng': -1.21828}}, 'received_time': '2021-04-18 19:18'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2081206666666666, 53.42171050000001]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:30', 'incident_id': 'INCD-172561-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX1 3PZ': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.8827}, 'HX1 3QD': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.88293}, 'HX1 3PJ': {'class': 'models.MapDataLocation', 'lat': 53.7159, 'lng': -1.88297}, 'HX1 3QA': {'class': 'models.MapDataLocation', 'lat': 53.7162, 'lng': -1.88253}, 'HX1 3QB': {'class': 'models.MapDataLocation', 'lat': 53.7161, 'lng': -1.88288}, 'HX1 3PU': {'class': 'models.MapDataLocation', 'lat': 53.7163, 'lng': -1.88194}, 'HX1 3SJ': {'class': 'models.MapDataLocation', 'lat': 53.7165, 'lng': -1.8835}, 'HX1 3SG': {'class': 'models.MapDataLocation', 'lat': 53.7157, 'lng': -1.88364}, 'HX1 3PP': {'class': 'models.MapDataLocation', 'lat': 53.7162, 'lng': -1.88335}, 'HX1 3SH': {'class': 'models.MapDataLocation', 'lat': 53.716, 'lng': -1.88335}, 'HX1 3PQ': {'class': 'models.MapDataLocation', 'lat': 53.7155, 'lng': -1.88267}, 'HX1 3QE': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.88279}, 'HX1 3QF': {'class': 'models.MapDataLocation', 'lat': 53.7166, 'lng': -1.88347}}, 'received_time': '2021-04-18 18:54'}, 'geometry': {'type': 'Point', 'coordinates': [-1.8829602307692306, 53.71617276923077]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-18 23:00', 'incident_id': 'INCD-172568-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S66 8LL': {'class': 'models.MapDataLocation', 'lat': 53.4223, 'lng': -1.21048}, 'S66 8NX': {'class': 'models.MapDataLocation', 'lat': 53.3999, 'lng': -1.15368}, 'S66 8FE': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21198}, 'S66 8ES': {'class': 'models.MapDataLocation', 'lat': 53.4227, 'lng': -1.2296}, 'S66 8NW': {'class': 'models.MapDataLocation', 'lat': 53.4044, 'lng': -1.185}, 'S66 8NE': {'class': 'models.MapDataLocation', 'lat': 53.4212, 'lng': -1.21133}, 'S66 8LN': {'class': 'models.MapDataLocation', 'lat': 53.4222, 'lng': -1.21439}, 'S66 8ND': {'class': 'models.MapDataLocation', 'lat': 53.4219, 'lng': -1.20995}, 'S66 8NA': {'class': 'models.MapDataLocation', 'lat': 53.4214, 'lng': -1.21957}, 'S66 8LW': {'class': 'models.MapDataLocation', 'lat': 53.4217, 'lng': -1.21445}}, 'received_time': '2021-04-18 19:41'}, 'geometry': {'type': 'Point', 'coordinates': [-1.2061004, 53.4179516]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-18 21:45', 'incident_id': 'INCD-172570-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE69 7DB': {'class': 'models.MapDataLocation', 'lat': 55.6088, 'lng': -1.71509}, 'NE69 7AE': {'class': 'models.MapDataLocation', 'lat': 55.6067, 'lng': -1.72204}, 'NE69 7AA': {'class': 'models.MapDataLocation', 'lat': 55.608, 'lng': -1.71827}, 'NE69 7AN': {'class': 'models.MapDataLocation', 'lat': 55.6064, 'lng': -1.71981}, 'NE69 7DF': {'class': 'models.MapDataLocation', 'lat': 55.6091, 'lng': -1.71061}, 'NE69 7DE': {'class': 'models.MapDataLocation', 'lat': 55.6161, 'lng': -1.72806}, 'NE69 7DD': {'class': 'models.MapDataLocation', 'lat': 55.611, 'lng': -1.71749}, 'NE69 7BN': {'class': 'models.MapDataLocation', 'lat': 55.6079, 'lng': -1.7154}}, 'received_time': '2021-04-18 20:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.718372375, 55.60924425]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. The scheduled work has been cancelled and is no longer taking place today', 'dno': 'np', 'estimated_restored_time': '2021-04-18 22:00', 'incident_id': 'PPC039363', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN41 8DW': {'class': 'models.MapDataLocation', 'lat': 53.6083, 'lng': -0.172296}, 'DN41 8DL': {'class': 'models.MapDataLocation', 'lat': 53.6088, 'lng': -0.171807}, 'DN41 8FD': {'class': 'models.MapDataLocation', 'lat': 53.6065, 'lng': -0.180157}, 'DN4 5NU': {'class': 'models.MapDataLocation', 'lat': 53.5082, 'lng': -1.12161}, 'DN41 8TH': {'class': 'models.MapDataLocation', 'lat': 53.6052, 'lng': -0.181212}}, 'received_time': '2021-04-18 17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.36565339999999996, 53.587383]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:30', 'incident_id': 'PPC039606', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HX3 9TF': {'class': 'models.MapDataLocation', 'lat': 53.7177, 'lng': -1.82668}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.826674, 53.717724]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039748', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HE': {'class': 'models.MapDataLocation', 'lat': 54.9894, 'lng': -2.39113}, 'NE47 7AW': {'class': 'models.MapDataLocation', 'lat': 55.0007, 'lng': -2.38799}, 'NE47 7JW': {'class': 'models.MapDataLocation', 'lat': 54.9907, 'lng': -2.3735}, 'NE47 7AL': {'class': 'models.MapDataLocation', 'lat': 54.9974, 'lng': -2.37973}, 'NE47 7AN': {'class': 'models.MapDataLocation', 'lat': 54.9955, 'lng': -2.39183}}, 'received_time': '2021-04-18 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.3842884, 54.99502739999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. The scheduled work has now been completed', 'dno': 'np', 'estimated_restored_time': '2021-04-18 14:00', 'incident_id': 'PPC039968', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE47 7HD': {'class': 'models.MapDataLocation', 'lat': 54.9868, 'lng': -2.37724}}, 'received_time': '2021-04-18 07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.377239, 54.986748]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 00:12', 'incident_id': '40810481', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BL1 2BQ', 'BL1 2EF', 'BL1 2EG', 'BL1 2EJ', 'BL1 2EN', 'BL1 2EQ', 'BL1 2HA'], 'received_time': '2021-04-18 18:13'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4282311428571433, 53.581980571428566]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-19 03:00', 'incident_id': '10646175', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK23 7EW'], 'received_time': '2021-04-18 16:26'}, 'geometry': {'type': 'Point', 'coordinates': [-1.96471, 53.323568]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-18 23:30', 'incident_id': '10646019', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK7 1JG'], 'received_time': '2021-04-17 12:55'}, 'geometry': {'type': 'Point', 'coordinates': [-2.171467, 53.353418]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});