document.addEventListener("DOMContentLoaded", function() {
var MarkerIcon = L.Icon.extend({
    options: {
        iconSize:     [30, 30],
        iconAnchor:   [15, 15]
    }
});

var boltIcon = new MarkerIcon({iconUrl: 'img/coloured_bolt.png'});
var mymap = L.map('map').setView([53.96, -3.22], 5);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1IjoiZW5lcmd5dmlzIiwiYSI6ImNrbjR2aWo4azBsaHEycHM5dHByZzFnZW8ifQ.MyLCIQqHnNHQFWJQqs-j4w'
}).addTo(mymap);

var geojsonFeature = {'type': 'FeatureCollection', 'features': [{'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-14T04:00:00', 'incident_id': 'INCD-259920-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-259920-J', 'postcodes_impacted': ['SW22LP', 'SW22NB'], 'received_time': '2021-04-13T20:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1158723716092747, 51.451301255648126]}}, {'type': 'Feature', 'properties': {'description': 'We had to turn off power in your area so our engineers could safely carry out emergency repairs to the network.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-14T02:30:00', 'incident_id': 'INCD-248100-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248100-G', 'postcodes_impacted': ['BR49DF'], 'received_time': '2021-04-14T00:21:00'}, 'geometry': {'type': 'Point', 'coordinates': [0.013846374675757, 51.36517842261589]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-14T04:00:00', 'incident_id': 'INCD-54421-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-54421-V', 'postcodes_impacted': ['RH194BS', 'RH194DJ', 'RH194DX', 'RH194EE', 'RH193AA', 'RH193AW', 'RH194BP', 'RH194DY', 'RH194DZ', 'RH194EA', 'RH194EB', 'RH194ED', 'RH194EF', 'RH194EU'], 'received_time': '2021-04-13T18:25:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.008847875310643386, 51.121870694764354]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-259849-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-259849-J', 'postcodes_impacted': ['W26NA'], 'received_time': '2021-04-12T23:57:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.1786099091019409, 51.5196016617899]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230527-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230527-Z', 'postcodes_impacted': ['E46QP', 'E46QW', 'E47LT'], 'received_time': '2021-04-13T07:08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.005785249071174899, 51.6291559107513]}}, {'type': 'Feature', 'properties': {'description': 'An underground electricity cable faulted on our high voltage network, causing an area wide power cut.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-259906-J', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-259906-J', 'postcodes_impacted': ['BR15ET', 'BR15EU', 'BR15EX', 'BR15EY', 'BR15EZ', 'BR15HA', 'BR15HB', 'BR15HD', 'BR15HH', 'BR15HJ', 'BR15HL', 'BR15HN', 'BR15HX', 'BR15HY', 'BR15JL', 'BR15JN', 'BR15JR', 'BR15JT', 'BR15JU', 'BR15JX', 'BR15JY', 'BR15JZ', 'BR15NF', 'BR15NH', 'BR15NN', 'BR15NP', 'BR15NW', 'BR15PD', 'BR15PG', 'BR15SE', 'BR15SF', 'BR15SG', 'BR15SH', 'BR15SQ', 'SE12', 'SE120AL', 'SE120AN', 'SE120AP', 'SE120AS', 'SE120AW', 'SE120BE', 'SE120BG', 'SE120BH', 'SE120BJ', 'SE120BL', 'SE120BP', 'SE120BQ', 'SE120BX', 'SE120DA', 'SE120DS', 'SE120DU', 'SE120DZ', 'SE120EA', 'SE120ED', 'SE120EF', 'SE120HH', 'SE120HU', 'SE120HZ', 'SE120JA', 'SE120JB', 'SE120JD', 'SE120JQ', 'SE120JS', 'SE120JT', 'SE120JZ', 'SE120LA', 'SE120LB', 'SE120LD', 'SE120LE', 'SE120LF', 'SE120LH', 'SE120LR', 'SE120ND', 'SE120NE', 'SE120NF', 'SE120NG', 'SE120NH', 'SE120NJ', 'SE120NL', 'SE120NQ', 'SE120NR', 'SE120NS', 'SE120NT', 'SE120NU', 'SE120PS', 'SE120PT', 'SE120PU', 'SE120PW', 'SE120PX', 'SE120PY', 'SE120PZ', 'SE120QA', 'SE120QD', 'SE120QE', 'SE120QF', 'SE120UB', 'SE120UD', 'SE120UE', 'SE120UF', 'SE120UG', 'SE120UH', 'SE120UJ', 'SE120UL', 'SE120UN', 'SE120UP', 'SE120UR', 'SE120US', 'SE120UU', 'SE120UW', 'SE120UX', 'SE120UY', 'SE233SA', 'SE61TP', 'SE61UG', 'SE61UJ'], 'received_time': '2021-04-13T16:14:29'}, 'geometry': {'type': 'Point', 'coordinates': [0.014019721094556377, 51.436442598216]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-230754-Z', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-230754-Z', 'postcodes_impacted': ['EN13ED', 'EN13EF', 'EN13EG', 'EN26BN', 'EN26LE'], 'received_time': '2021-04-13T18:07:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.08101181882386922, 51.65239850641596]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on an underground electricity cable affecting the local area.', 'dno': 'ukpn', 'estimated_restored_time': null, 'incident_id': 'INCD-53103-V', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-53103-V', 'postcodes_impacted': ['RH80LW', 'RH80NA', 'RH80NE', 'RH80NF', 'RH89ND'], 'received_time': '2021-03-24T11:20:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.014895588225768499, 51.26407593567942]}}, {'type': 'Feature', 'properties': {'description': 'A fault occurred on a piece of our electrical equipment which controls the power to your home.', 'dno': 'ukpn', 'estimated_restored_time': '2021-04-14T04:30:00', 'incident_id': 'INCD-248102-G', 'incident_url': 'https://www.ukpowernetworks.co.uk/power-cut/map?incidentid=INCD-248102-G', 'postcodes_impacted': ['RH105AR', 'RH105AS', 'RH105AT', 'RH105AU', 'RH105AX', 'RH105AY', 'RH105AZ', 'RH105BA', 'RH105BE'], 'received_time': '2021-04-14T00:59:06'}, 'geometry': {'type': 'Point', 'coordinates': [-0.18633192643111235, 51.102309478498135]}}, {'type': 'Feature', 'properties': {'description': 'We\'re sorry for the loss of supply. The reason you\'re currently without power is a planned outage in the areas listed. We have turned off your electricity supply to allow us to safely carry out essential work to our electrical equipment. By doing this, it\'ll help us to improve the reliability of our service to you for the future. If you have any questions or require more information, please call us on 105 or send us a message on <a href="http://m.me/ssencommunity/">Facebook</a> or Twitter (<a href="https://twitter.com/ssencommunity">@ssencommunity</a>) with reference  \'198576\'. You will have received a letter from us confirming your power will be interrupted with specific information relating to your property. If you did not receive this letter, you can assume your power will not be interrupted.', 'dno': 'ssen', 'estimated_restored_time': '2021-04-16 14:00:00', 'incident_id': '198576', 'incident_url': 'https://www.ssen.co.uk/Powertrack/', 'postcodes_impacted': ['SO24 0AA'], 'received_time': '2021-04-12 08:00:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.140793, 51.085486]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-14 04:00:00', 'incident_id': 'INCD-416385-E', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-416385-E', 'postcodes_impacted': ['GL54 5EP', 'GL54 5ER', 'GL54 5EA', 'GL54 5ES', 'GL54 5EW', 'GL54 5PA', 'GL53 0EE'], 'received_time': '2021-04-13 22:17:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.9931745714285714, 51.95898928571429]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-14 05:00:00', 'incident_id': 'INCD-357770-G', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-357770-G', 'postcodes_impacted': ['BS30 9UE', 'BS30 9UA', 'BS30 9UJ'], 'received_time': '2021-04-13 17:06:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.4869269999999997, 51.436743666666665]}}, {'type': 'Feature', 'properties': {'description': 'In Progress', 'dno': 'wpd', 'estimated_restored_time': '2021-04-14 00:30:00', 'incident_id': 'INCD-12119-A', 'incident_url': 'https://powercuts.westernpower.co.uk/incident/INCD-12119-A', 'postcodes_impacted': ['B63 3SY', 'B63 3SW', 'B63 3ST', 'B63 3US', 'B63 3SX'], 'received_time': '2021-04-13 13:09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0543641999999998, 52.4526948]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut affecting the DG11 postcode area of Lockerbie. We had no advance warning of this and only became aware of it at 7:43pm. Our team has managed to restore power to a number of properties in the area and are still working to repair the fault on our electrical network affecting the rest of our customers without power. We now expect all power to be back on as quickly and as safely as possible by 3am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 9:51pm on 13th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-14 02:00', 'incident_id': 'INCD-1808444-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1808444-i', 'postcodes_impacted': ['DG113', 'DG113AD', 'DG113AE', 'DG113AG', 'DG113AN', 'DG113AP', 'DG113AR', 'DG113AS', 'DG113AT', 'DG113AU', 'DG113AW', 'DG113AX', 'DG113BA', 'DG113BB', 'DG113BD', 'DG113BL', 'DG113BN', 'DG113DN', 'DG113LS', 'DG113LY', 'DG113NB', 'DG113ND', 'DG113WW', 'DG113XX'], 'received_time': '2021-04-13 19:43'}, 'geometry': {'type': 'Point', 'coordinates': [-3.173124397276754, 55.04091092011327]}}, {'type': 'Feature', 'properties': {'description': 'There is a power cut in the LL17 postcode area of St Asaph, affecting properties in Clwydian Park Avenue and surrounding areas. We had no advance warning of this and only became aware of it at 5:58pm. Repairs are taking longer than expected because of additional repairs required on the underground cable network and our team are now working to get your power back on as quickly and as safely as possible by 3am. We will update this message if this information changes. We apologise for the inconvenience and thank you for your patience. This message was updated at 11:09pm on 13th April 2021', 'dno': 'sp', 'estimated_restored_time': '2021-04-14 02:00', 'incident_id': 'INCD-1808420-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1808420-i', 'postcodes_impacted': ['LL170BQ'], 'received_time': '2021-04-13 17:58'}, 'geometry': {'type': 'Point', 'coordinates': [-3.4284618288826034, 53.23093913681837]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-14 07:00', 'incident_id': 'INCD-1808318-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1808318-i', 'postcodes_impacted': ['CH71DR'], 'received_time': '2021-04-13 12:34'}, 'geometry': {'type': 'Point', 'coordinates': [-3.1458164343020645, 53.166248355062834]}}, {'type': 'Feature', 'properties': {'description': 'We are aware of a fault in your area. If you require more information please call us on: \nCentral and Southern Scotland:  0800 092 9290 . \n Cheshire, Merseyside, North Wales and North Shropshire: 0800 001 5400.', 'dno': 'sp', 'estimated_restored_time': '2021-04-14 15:00', 'incident_id': 'INCD-1806962-i', 'incident_url': 'https://www.spenergynetworks.co.uk/pages/power_cuts_map.aspx?incRef=INCD-1806962-i', 'postcodes_impacted': ['CW27DE'], 'received_time': '2021-04-08 11:54'}, 'geometry': {'type': 'Point', 'coordinates': [-2.440204749902096, 53.09344401725455]}}, {'type': 'Feature', 'properties': {'description': 'HV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-167229-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS25 2DQ': {'class': 'models.MapDataLocation', 'lat': 53.7997, 'lng': -1.39461}, 'LS15 8AB': {'class': 'models.MapDataLocation', 'lat': 53.8048, 'lng': -1.41077}, 'LS15 8AD': {'class': 'models.MapDataLocation', 'lat': 53.804, 'lng': -1.42138}, 'LS15 8AE': {'class': 'models.MapDataLocation', 'lat': 53.8056, 'lng': -1.42527}, 'LS25 1NG': {'class': 'models.MapDataLocation', 'lat': 53.7984, 'lng': -1.39455}, 'LS15 8AJ': {'class': 'models.MapDataLocation', 'lat': 53.8073, 'lng': -1.43811}, 'LS25 1NF': {'class': 'models.MapDataLocation', 'lat': 53.7973, 'lng': -1.40888}, 'LS25 1AS': {'class': 'models.MapDataLocation', 'lat': 53.7946, 'lng': -1.40015}}, 'received_time': '2021-03-29 16:46'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4109423749999999, 53.801725125000004]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-14 10:00', 'incident_id': 'INCD-171218-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO12 5AX': {'class': 'models.MapDataLocation', 'lat': 54.2768, 'lng': -0.412943}}, 'received_time': '2021-04-13 11:36'}, 'geometry': {'type': 'Point', 'coordinates': [-0.412943, 54.276848]}}, {'type': 'Feature', 'properties': {'description': 'LV Restoration In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-14 01:30', 'incident_id': 'INCD-171329-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO61 3DL': {'class': 'models.MapDataLocation', 'lat': 54.1196, 'lng': -1.18594}, 'YO61 3DN': {'class': 'models.MapDataLocation', 'lat': 54.12, 'lng': -1.18529}, 'YO61 3DJ': {'class': 'models.MapDataLocation', 'lat': 54.1185, 'lng': -1.18558}, 'YO61 3PL': {'class': 'models.MapDataLocation', 'lat': 54.1187, 'lng': -1.18496}, 'YO61 3DT': {'class': 'models.MapDataLocation', 'lat': 54.118, 'lng': -1.18508}, 'YO61 3DE': {'class': 'models.MapDataLocation', 'lat': 54.1193, 'lng': -1.1879}, 'YO61 3DU': {'class': 'models.MapDataLocation', 'lat': 54.1181, 'lng': -1.18442}, 'YO61 3DW': {'class': 'models.MapDataLocation', 'lat': 54.1191, 'lng': -1.18485}}, 'received_time': '2021-04-13 20:33'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1855085, 54.118911874999995]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 Awaiting', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171333-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO1 8BG': {'class': 'models.MapDataLocation', 'lat': 53.9602, 'lng': -1.08097}}, 'received_time': '2021-04-13 20:47'}, 'geometry': {'type': 'Point', 'coordinates': [-1.080971, 53.960199]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P2 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-14 00:15', 'incident_id': 'INCD-171334-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS14 6AB': {'class': 'models.MapDataLocation', 'lat': 54.535, 'lng': -1.05321}}, 'received_time': '2021-04-13 21:02'}, 'geometry': {'type': 'Point', 'coordinates': [-1.053225, 54.535001]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-14 11:00', 'incident_id': 'INCD-171335-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS16 6HZ': {'class': 'models.MapDataLocation', 'lat': 53.8428, 'lng': -1.59989}}, 'received_time': '2021-04-13 21:21'}, 'geometry': {'type': 'Point', 'coordinates': [-1.599861, 53.842735]}}, {'type': 'Feature', 'properties': {'description': 'DNO Energisation check In Progress', 'dno': 'np', 'estimated_restored_time': '', 'incident_id': 'INCD-171341-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S62 6EX': {'class': 'models.MapDataLocation', 'lat': 53.4566, 'lng': -1.34454}}, 'received_time': '2021-04-13 22:15'}, 'geometry': {'type': 'Point', 'coordinates': [-1.344543, 53.456561]}}, {'type': 'Feature', 'properties': {'description': 'Unknown P1 In Progress', 'dno': 'np', 'estimated_restored_time': '2021-04-14 01:30', 'incident_id': 'INCD-171342-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE4 5AB': {'class': 'models.MapDataLocation', 'lat': 54.9766, 'lng': -1.6404}}, 'received_time': '2021-04-13 22:27'}, 'geometry': {'type': 'Point', 'coordinates': [-1.640355, 54.976621]}}, {'type': 'Feature', 'properties': {'description': 'U/G Service repair Awaiting', 'dno': 'np', 'estimated_restored_time': '2021-04-14 10:00', 'incident_id': 'INCD-171345-A', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'HD1 5EZ': {'class': 'models.MapDataLocation', 'lat': 53.6566, 'lng': -1.78857}}, 'received_time': '2021-04-13 23:26'}, 'geometry': {'type': 'Point', 'coordinates': [-1.788568, 53.656633]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 09:30', 'incident_id': 'PPC039099', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO62 6TQ': {'class': 'models.MapDataLocation', 'lat': 54.3056, 'lng': -0.880448}, 'YO62 6TN': {'class': 'models.MapDataLocation', 'lat': 54.3053, 'lng': -0.882501}, 'YO62 6TL': {'class': 'models.MapDataLocation', 'lat': 54.3042, 'lng': -0.881684}, 'YO62 6TH': {'class': 'models.MapDataLocation', 'lat': 54.3067, 'lng': -0.879558}, 'YO62 6TJ': {'class': 'models.MapDataLocation', 'lat': 54.3035, 'lng': -0.879982}, 'YO62 6TD': {'class': 'models.MapDataLocation', 'lat': 54.3033, 'lng': -0.879188}, 'YO62 6TG': {'class': 'models.MapDataLocation', 'lat': 54.2856, 'lng': -0.859824}}, 'received_time': '2021-04-14 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.8776845714285714, 54.30208057142857]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 10:00', 'incident_id': 'PPC039360', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH8 9HJ': {'class': 'models.MapDataLocation', 'lat': 54.8168, 'lng': -1.86356}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.863573, 54.816769]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 13:00', 'incident_id': 'PPC039361', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH8 9HN': {'class': 'models.MapDataLocation', 'lat': 54.8076, 'lng': -1.85667}}, 'received_time': '2021-04-14 10:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.856712, 54.807496]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 15:00', 'incident_id': 'PPC039362', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL13 4JJ': {'class': 'models.MapDataLocation', 'lat': 54.7992, 'lng': -1.86897}}, 'received_time': '2021-04-14 13:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.858832, 54.800173]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 13:00', 'incident_id': 'PPC039451', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'BD23 1HN': {'class': 'models.MapDataLocation', 'lat': 53.9627, 'lng': -2.00832}, 'BD23 1HA': {'class': 'models.MapDataLocation', 'lat': 53.9617, 'lng': -2.00819}, 'BD23 1HS': {'class': 'models.MapDataLocation', 'lat': 53.9622, 'lng': -2.01022}, 'BD23 1HB': {'class': 'models.MapDataLocation', 'lat': 53.962, 'lng': -2.00765}, 'BD23 1HR': {'class': 'models.MapDataLocation', 'lat': 53.9622, 'lng': -2.00774}, 'BD23 1HE': {'class': 'models.MapDataLocation', 'lat': 53.9623, 'lng': -2.00675}, 'BD23 1HD': {'class': 'models.MapDataLocation', 'lat': 53.9621, 'lng': -2.00745}, 'BD23 1EX': {'class': 'models.MapDataLocation', 'lat': 53.9621, 'lng': -2.00966}, 'BD23 1ES': {'class': 'models.MapDataLocation', 'lat': 53.9617, 'lng': -2.00754}}, 'received_time': '2021-04-14 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0081573333333336, 53.96212666666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out maintenance on our network in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 11:30', 'incident_id': 'PPC039470', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'YO13 0NE': {'class': 'models.MapDataLocation', 'lat': 54.4007, 'lng': -0.492246}, 'YO13 0ES': {'class': 'models.MapDataLocation', 'lat': 54.3986, 'lng': -0.499256}}, 'received_time': '2021-04-14 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-0.49575899999999995, 54.3996755]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 12:00', 'incident_id': 'PPC039505', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS7 3ES': {'class': 'models.MapDataLocation', 'lat': 53.8142, 'lng': -1.53452}, 'LS7 3EB': {'class': 'models.MapDataLocation', 'lat': 53.8155, 'lng': -1.5365}, 'LS7 3ER': {'class': 'models.MapDataLocation', 'lat': 53.8141, 'lng': -1.53596}, 'LS7 3EW': {'class': 'models.MapDataLocation', 'lat': 53.8144, 'lng': -1.53437}, 'LS7 3EH': {'class': 'models.MapDataLocation', 'lat': 53.8159, 'lng': -1.53523}, 'LS7 3EL': {'class': 'models.MapDataLocation', 'lat': 53.8154, 'lng': -1.53542}, 'LS7 3EN': {'class': 'models.MapDataLocation', 'lat': 53.8151, 'lng': -1.53392}, 'LS7 3EP': {'class': 'models.MapDataLocation', 'lat': 53.8149, 'lng': -1.53562}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.535166, 53.814964125]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 15:00', 'incident_id': 'PPC039528', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DN20 9HN': {'class': 'models.MapDataLocation', 'lat': 53.5506, 'lng': -0.436125}, 'DN20 9HH': {'class': 'models.MapDataLocation', 'lat': 53.5536, 'lng': -0.433389}}, 'received_time': '2021-04-14 07:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.434811, 53.5520895]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 11:00', 'incident_id': 'PPC039574', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'SR4 0AB': {'class': 'models.MapDataLocation', 'lat': 54.9067, 'lng': -1.42572}, 'SR4 6PD': {'class': 'models.MapDataLocation', 'lat': 54.9073, 'lng': -1.42141}, 'SR4 6XL': {'class': 'models.MapDataLocation', 'lat': 54.9068, 'lng': -1.42272}, 'SR4 6PE': {'class': 'models.MapDataLocation', 'lat': 54.9076, 'lng': -1.42346}, 'SR4 0AE': {'class': 'models.MapDataLocation', 'lat': 54.9072, 'lng': -1.42674}, 'SR4 0AU': {'class': 'models.MapDataLocation', 'lat': 54.9063, 'lng': -1.42415}, 'SR4 0AD': {'class': 'models.MapDataLocation', 'lat': 54.9062, 'lng': -1.42705}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4244199999999998, 54.90686071428571]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 13:30', 'incident_id': 'PPC039619', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE38 9EA': {'class': 'models.MapDataLocation', 'lat': 54.881, 'lng': -1.54186}, 'NE38 9EB': {'class': 'models.MapDataLocation', 'lat': 54.8796, 'lng': -1.5408}}, 'received_time': '2021-04-14 09:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5414935, 54.880337]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 09:10', 'incident_id': 'PPC039632', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE65 0WR': {'class': 'models.MapDataLocation', 'lat': 55.34, 'lng': -1.61007}, 'NE65 0TW': {'class': 'models.MapDataLocation', 'lat': 55.3396, 'lng': -1.61179}, 'NE65 0TL': {'class': 'models.MapDataLocation', 'lat': 55.3401, 'lng': -1.61281}, 'NE65 0TJ': {'class': 'models.MapDataLocation', 'lat': 55.3414, 'lng': -1.61267}, 'NE65 0UF': {'class': 'models.MapDataLocation', 'lat': 55.3418, 'lng': -1.6112}, 'NE65 0TN': {'class': 'models.MapDataLocation', 'lat': 55.3398, 'lng': -1.61038}}, 'received_time': '2021-04-14 08:10'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6114410000000001, 55.34042216666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 10:30', 'incident_id': 'PPC039707', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS21 1BW': {'class': 'models.MapDataLocation', 'lat': 54.5686, 'lng': -1.41398}, 'TS21 1BL': {'class': 'models.MapDataLocation', 'lat': 54.5626, 'lng': -1.4179}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4159365, 54.565618]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to undertake vegetation management in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 15:00', 'incident_id': 'PPC039709', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'TS7 0NS': {'class': 'models.MapDataLocation', 'lat': 54.5029, 'lng': -1.16305}, 'TS7 0NR': {'class': 'models.MapDataLocation', 'lat': 54.5072, 'lng': -1.16683}, 'TS7 0NT': {'class': 'models.MapDataLocation', 'lat': 54.5, 'lng': -1.16958}, 'TS9 6QQ': {'class': 'models.MapDataLocation', 'lat': 54.4977, 'lng': -1.13972}, 'TS9 6PT': {'class': 'models.MapDataLocation', 'lat': 54.4885, 'lng': -1.14559}, 'TS9 6PP': {'class': 'models.MapDataLocation', 'lat': 54.498, 'lng': -1.16144}, 'TS9 6QL': {'class': 'models.MapDataLocation', 'lat': 54.4858, 'lng': -1.17624}, 'TS9 6JJ': {'class': 'models.MapDataLocation', 'lat': 54.4757, 'lng': -1.09515}, 'TS9 6QB': {'class': 'models.MapDataLocation', 'lat': 54.49, 'lng': -1.15916}, 'TS7 0NX': {'class': 'models.MapDataLocation', 'lat': 54.4978, 'lng': -1.16745}, 'TS9 6QD': {'class': 'models.MapDataLocation', 'lat': 54.4869, 'lng': -1.1748}, 'TS9 6QF': {'class': 'models.MapDataLocation', 'lat': 54.4928, 'lng': -1.15762}, 'TS9 6QE': {'class': 'models.MapDataLocation', 'lat': 54.483, 'lng': -1.17689}, 'TS7 0PA': {'class': 'models.MapDataLocation', 'lat': 54.505, 'lng': -1.15731}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.1585024285714287, 54.494033571428574]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work at a substation in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-16 16:00', 'incident_id': 'PPC039726', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'S35 8NR': {'class': 'models.MapDataLocation', 'lat': 53.4496, 'lng': -1.4819}, 'S35 8RP': {'class': 'models.MapDataLocation', 'lat': 53.4468, 'lng': -1.48421}, 'S35 8SN': {'class': 'models.MapDataLocation', 'lat': 53.4488, 'lng': -1.48519}, 'S35 8RR': {'class': 'models.MapDataLocation', 'lat': 53.4476, 'lng': -1.4906}, 'S35 8RQ': {'class': 'models.MapDataLocation', 'lat': 53.4479, 'lng': -1.4824}, 'S30 3RP': {'class': 'models.MapDataLocation', 'lat': 53.4473, 'lng': -1.48312}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.4845249999999999, 53.448043500000004]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to connect a new customer in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 12:00', 'incident_id': 'PPC039727', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE66 1JW': {'class': 'models.MapDataLocation', 'lat': 55.4147, 'lng': -1.70978}, 'NE66 1NA': {'class': 'models.MapDataLocation', 'lat': 55.4155, 'lng': -1.70829}, 'NE66 1LZ': {'class': 'models.MapDataLocation', 'lat': 55.4158, 'lng': -1.70929}, 'NE66 1JL': {'class': 'models.MapDataLocation', 'lat': 55.4151, 'lng': -1.70906}, 'NE66 1NG': {'class': 'models.MapDataLocation', 'lat': 55.4154, 'lng': -1.70735}, 'NE66 1LX': {'class': 'models.MapDataLocation', 'lat': 55.4162, 'lng': -1.70972}, 'NE66 1LY': {'class': 'models.MapDataLocation', 'lat': 55.4157, 'lng': -1.70958}, 'NE66 1JP': {'class': 'models.MapDataLocation', 'lat': 55.415, 'lng': -1.71048}, 'NE66 1NL': {'class': 'models.MapDataLocation', 'lat': 55.4152, 'lng': -1.70898}, 'NE66 1JQ': {'class': 'models.MapDataLocation', 'lat': 55.4151, 'lng': -1.70864}, 'NE66 1LT': {'class': 'models.MapDataLocation', 'lat': 55.4156, 'lng': -1.71037}, 'NE66 1JN': {'class': 'models.MapDataLocation', 'lat': 55.4149, 'lng': -1.709}}, 'received_time': '2021-04-14 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7092230833333335, 55.41536766666666]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out power upgrades in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 15:00', 'incident_id': 'PPC039743', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DL12 0RN': {'class': 'models.MapDataLocation', 'lat': 54.6278, 'lng': -2.08229}, 'DL12 0RP': {'class': 'models.MapDataLocation', 'lat': 54.6386, 'lng': -2.07417}, 'DL12 0RJ': {'class': 'models.MapDataLocation', 'lat': 54.6247, 'lng': -2.08368}, 'DL12 0RU': {'class': 'models.MapDataLocation', 'lat': 54.6267, 'lng': -2.07069}, 'DL12 0RY': {'class': 'models.MapDataLocation', 'lat': 54.624, 'lng': -2.06684}, 'DL12 0RW': {'class': 'models.MapDataLocation', 'lat': 54.6319, 'lng': -2.08097}, 'DL12 0SA': {'class': 'models.MapDataLocation', 'lat': 54.6325, 'lng': -2.04966}, 'DL12 0RR': {'class': 'models.MapDataLocation', 'lat': 54.631, 'lng': -2.0796}, 'DL12 0RT': {'class': 'models.MapDataLocation', 'lat': 54.6305, 'lng': -2.07023}, 'DL12 0RS': {'class': 'models.MapDataLocation', 'lat': 54.632, 'lng': -2.07818}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-2.0730277, 54.63003679999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement work on our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 12:30', 'incident_id': 'PPC039755', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'NE40 3BD': {'class': 'models.MapDataLocation', 'lat': 54.9714, 'lng': -1.77642}, 'NE40 3GA': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77624}, 'NE40 3BE': {'class': 'models.MapDataLocation', 'lat': 54.9716, 'lng': -1.77588}, 'NE40 3AR': {'class': 'models.MapDataLocation', 'lat': 54.9711, 'lng': -1.77417}, 'NE40 3BG': {'class': 'models.MapDataLocation', 'lat': 54.971, 'lng': -1.77681}, 'NE40 3BQ': {'class': 'models.MapDataLocation', 'lat': 54.9713, 'lng': -1.77728}, 'NE40 3AU': {'class': 'models.MapDataLocation', 'lat': 54.9707, 'lng': -1.77523}, 'NE40 3BB': {'class': 'models.MapDataLocation', 'lat': 54.9709, 'lng': -1.77656}, 'NE40 3AT': {'class': 'models.MapDataLocation', 'lat': 54.9715, 'lng': -1.77429}}, 'received_time': '2021-04-14 08:30'}, 'geometry': {'type': 'Point', 'coordinates': [-1.7759211111111108, 54.971230444444444]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 12:00', 'incident_id': 'PPC039769', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LS28 8NW': {'class': 'models.MapDataLocation', 'lat': 53.7877, 'lng': -1.66448}, 'LS28 8AR': {'class': 'models.MapDataLocation', 'lat': 53.7874, 'lng': -1.65972}, 'LS28 8NN': {'class': 'models.MapDataLocation', 'lat': 53.787, 'lng': -1.66381}, 'LS28 8AU': {'class': 'models.MapDataLocation', 'lat': 53.7868, 'lng': -1.6623}, 'LS28 8AT': {'class': 'models.MapDataLocation', 'lat': 53.7875, 'lng': -1.66287}, 'LS9 7SW': {'class': 'models.MapDataLocation', 'lat': 53.8026, 'lng': -1.52923}}, 'received_time': '2021-04-14 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.6403198333333335, 53.78974549999999]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 14:00', 'incident_id': 'PPC039804', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'DH4 7TZ': {'class': 'models.MapDataLocation', 'lat': 54.864, 'lng': -1.50617}, 'DH4 7TB': {'class': 'models.MapDataLocation', 'lat': 54.8685, 'lng': -1.50425}, 'DH4 7TA': {'class': 'models.MapDataLocation', 'lat': 54.8681, 'lng': -1.50355}, 'DH4 7TD': {'class': 'models.MapDataLocation', 'lat': 54.8676, 'lng': -1.50309}, 'DH4 7TF': {'class': 'models.MapDataLocation', 'lat': 54.8664, 'lng': -1.50306}, 'DH4 7TE': {'class': 'models.MapDataLocation', 'lat': 54.8671, 'lng': -1.50353}}, 'received_time': '2021-04-14 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-1.5039626666666666, 54.86694816666667]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out replacement of poles that support our overhead power lines in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 12:00', 'incident_id': 'PPC039840', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN8 3QG': {'class': 'models.MapDataLocation', 'lat': 53.3633, 'lng': -0.334772}}, 'received_time': '2021-04-14 08:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.334771, 53.363286]}}, {'type': 'Feature', 'properties': {'description': 'We need to temporarily turn the power off to carry out a permanent repair in the area. Work is scheduled to start', 'dno': 'np', 'estimated_restored_time': '2021-04-14 13:00', 'incident_id': 'PPC039889', 'incident_url': 'https://www.northernpowergrid.com/power-cuts', 'postcodes_impacted': {'LN7 6HZ': {'class': 'models.MapDataLocation', 'lat': 53.4813, 'lng': -0.379131}}, 'received_time': '2021-04-14 09:00'}, 'geometry': {'type': 'Point', 'coordinates': [-0.379101, 53.481327]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-14 07:45', 'incident_id': '40809904', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['BB11 1DP', 'BB11 1DR', 'BB11 1EA', 'BB11 1EN', 'BB11 1EP', 'BB11 1EX', 'BB11 1HG', 'BB11 1HX', 'BB11 1LH', 'BB11 1NH'], 'received_time': '2021-04-14 01:33'}, 'geometry': {'type': 'Point', 'coordinates': [-2.2438799, 53.7885811]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '2021-04-14 09:30', 'incident_id': '10645649', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['SK11 8LJ', 'SK11 8LR', 'SK11 8NL'], 'received_time': '2021-04-13 21:49'}, 'geometry': {'type': 'Point', 'coordinates': [-2.144723666666667, 53.25682499999999]}}, {'type': 'Feature', 'properties': {'description': 'The power cut in your area has been caused by an unexpected incident with the underground cable that provides electricity to your property.', 'dno': 'enw', 'estimated_restored_time': '', 'incident_id': '40809630', 'incident_url': 'https://www.enwl.co.uk/power-cuts/power-cuts-power-cuts-live-power-cut-information-fault-list/fault-list', 'postcodes_impacted': ['WN6 8QS', 'WN6 8RF', 'WN6 8RG'], 'received_time': '2021-04-13 12:35'}, 'geometry': {'type': 'Point', 'coordinates': [-2.6465553333333336, 53.56124500000001]}}]}

var geoJson = new L.geoJSON(geojsonFeature, {
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<p>'+feature.properties.description+'</p><p>Received time: '+feature.properties.received_time+'</p><p>Estimated restored time: '+feature.properties.estimated_restored_time+'</p><p><a href="'+feature.properties.incident_url+'" target="_blank">Further details</p>');
    layer.setIcon(boltIcon);
  }
}).addTo(mymap);
});